const w$="modulepreload",S$=function(e){return"/"+e},ZA={},Ne=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=S$(a),a in ZA)return;ZA[a]=!0;const s=a.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(!!n)for(let m=i.length-1;m>=0;m--){const g=i[m];if(g.href===a&&(!s||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${o}`))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":w$,s||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),s)return new Promise((m,g)=>{d.addEventListener("load",m),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a})};function T$(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const C$=()=>{},E$=Object.assign,A$=Object.prototype.hasOwnProperty,u0=(e,t)=>A$.call(e,t),tl=Array.isArray,Vy=e=>VL(e)==="[object Map]",M$=e=>typeof e=="function",I$=e=>typeof e=="string",IS=e=>typeof e=="symbol",c0=e=>e!==null&&typeof e=="object",P$=Object.prototype.toString,VL=e=>P$.call(e),D$=e=>VL(e).slice(8,-1),PS=e=>I$(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,DS=(e,t)=>!Object.is(e,t),L$=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})};let za;class k${constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=za,!t&&za&&(this.index=(za.scopes||(za.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=za;try{return za=this,t()}finally{za=r}}}on(){za=this}off(){za=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function R$(e,t=za){t&&t.active&&t.effects.push(e)}function UL(){return za}function O$(e){za&&za.cleanups.push(e)}const LS=e=>{const t=new Set(e);return t.w=0,t.n=0,t},HL=e=>(e.w&cu)>0,jL=e=>(e.n&cu)>0,z$=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=cu},B$=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];HL(i)&&!jL(i)?i.delete(e):t[r++]=i,i.w&=~cu,i.n&=~cu}t.length=r}},p_=new WeakMap;let kp=0,cu=1;const Rw=30;let ko;const Bc=Symbol(""),Ow=Symbol("");class kS{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,R$(this,n)}run(){if(!this.active)return this.fn();let t=ko,r=au;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ko,ko=this,au=!0,cu=1<<++kp,kp<=Rw?z$(this):YA(this),this.fn()}finally{kp<=Rw&&B$(this),cu=1<<--kp,ko=this.parent,au=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ko===this?this.deferStop=!0:this.active&&(YA(this),this.onStop&&this.onStop(),this.active=!1)}}function YA(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let au=!0;const GL=[];function qf(){GL.push(au),au=!1}function Wf(){const e=GL.pop();au=e===void 0?!0:e}function ba(e,t,r){if(au&&ko){let n=p_.get(e);n||p_.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=LS()),qL(i)}}function qL(e,t){let r=!1;kp<=Rw?jL(e)||(e.n|=cu,r=!HL(e)):r=!e.has(ko),r&&(e.add(ko),ko.deps.push(e))}function al(e,t,r,n,i,a){const s=p_.get(e);if(!s)return;let o=[];if(t==="clear")o=[...s.values()];else if(r==="length"&&tl(e)){const h=Number(n);s.forEach((d,m)=>{(m==="length"||m>=h)&&o.push(d)})}else switch(r!==void 0&&o.push(s.get(r)),t){case"add":tl(e)?PS(r)&&o.push(s.get("length")):(o.push(s.get(Bc)),Vy(e)&&o.push(s.get(Ow)));break;case"delete":tl(e)||(o.push(s.get(Bc)),Vy(e)&&o.push(s.get(Ow)));break;case"set":Vy(e)&&o.push(s.get(Bc));break}if(o.length===1)o[0]&&zw(o[0]);else{const h=[];for(const d of o)d&&h.push(...d);zw(LS(h))}}function zw(e,t){const r=tl(e)?e:[...e];for(const n of r)n.computed&&KA(n);for(const n of r)n.computed||KA(n)}function KA(e,t){(e!==ko||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function F$(e,t){var r;return(r=p_.get(e))==null?void 0:r.get(t)}const $$=T$("__proto__,__v_isRef,__isVue"),WL=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(IS)),N$=RS(),V$=RS(!1,!0),U$=RS(!0),JA=H$();function H$(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=Fr(this);for(let a=0,s=this.length;a<s;a++)ba(n,"get",a+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(Fr)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){qf();const n=Fr(this)[t].apply(this,r);return Wf(),n}}),e}function j$(e){const t=Fr(this);return ba(t,"has",e),t.hasOwnProperty(e)}function RS(e=!1,t=!1){return function(n,i,a){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&a===(e?t?oN:JL:t?KL:YL).get(n))return n;const s=tl(n);if(!e){if(s&&u0(JA,i))return Reflect.get(JA,i,a);if(i==="hasOwnProperty")return j$}const o=Reflect.get(n,i,a);return(IS(i)?WL.has(i):$$(i))||(e||ba(n,"get",i),t)?o:oi(o)?s&&PS(i)?o:o.value:c0(o)?e?av(o):wa(o):o}}const G$=XL(),q$=XL(!0);function XL(e=!1){return function(r,n,i,a){let s=r[n];if(Ef(s)&&oi(s)&&!oi(i))return!1;if(!e&&(!m_(i)&&!Ef(i)&&(s=Fr(s),i=Fr(i)),!tl(r)&&oi(s)&&!oi(i)))return s.value=i,!0;const o=tl(r)&&PS(n)?Number(n)<r.length:u0(r,n),h=Reflect.set(r,n,i,a);return r===Fr(a)&&(o?DS(i,s)&&al(r,"set",n,i):al(r,"add",n,i)),h}}function W$(e,t){const r=u0(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&al(e,"delete",t,void 0),n}function X$(e,t){const r=Reflect.has(e,t);return(!IS(t)||!WL.has(t))&&ba(e,"has",t),r}function Z$(e){return ba(e,"iterate",tl(e)?"length":Bc),Reflect.ownKeys(e)}const ZL={get:N$,set:G$,deleteProperty:W$,has:X$,ownKeys:Z$},Y$={get:U$,set(e,t){return!0},deleteProperty(e,t){return!0}},K$=E$({},ZL,{get:V$,set:q$}),OS=e=>e,h0=e=>Reflect.getPrototypeOf(e);function kg(e,t,r=!1,n=!1){e=e.__v_raw;const i=Fr(e),a=Fr(t);r||(t!==a&&ba(i,"get",t),ba(i,"get",a));const{has:s}=h0(i),o=n?OS:r?FS:gm;if(s.call(i,t))return o(e.get(t));if(s.call(i,a))return o(e.get(a));e!==i&&e.get(t)}function Rg(e,t=!1){const r=this.__v_raw,n=Fr(r),i=Fr(e);return t||(e!==i&&ba(n,"has",e),ba(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function Og(e,t=!1){return e=e.__v_raw,!t&&ba(Fr(e),"iterate",Bc),Reflect.get(e,"size",e)}function QA(e){e=Fr(e);const t=Fr(this);return h0(t).has.call(t,e)||(t.add(e),al(t,"add",e,e)),this}function eM(e,t){t=Fr(t);const r=Fr(this),{has:n,get:i}=h0(r);let a=n.call(r,e);a||(e=Fr(e),a=n.call(r,e));const s=i.call(r,e);return r.set(e,t),a?DS(t,s)&&al(r,"set",e,t):al(r,"add",e,t),this}function tM(e){const t=Fr(this),{has:r,get:n}=h0(t);let i=r.call(t,e);i||(e=Fr(e),i=r.call(t,e)),n&&n.call(t,e);const a=t.delete(e);return i&&al(t,"delete",e,void 0),a}function rM(){const e=Fr(this),t=e.size!==0,r=e.clear();return t&&al(e,"clear",void 0,void 0),r}function zg(e,t){return function(n,i){const a=this,s=a.__v_raw,o=Fr(s),h=t?OS:e?FS:gm;return!e&&ba(o,"iterate",Bc),s.forEach((d,m)=>n.call(i,h(d),h(m),a))}}function Bg(e,t,r){return function(...n){const i=this.__v_raw,a=Fr(i),s=Vy(a),o=e==="entries"||e===Symbol.iterator&&s,h=e==="keys"&&s,d=i[e](...n),m=r?OS:t?FS:gm;return!t&&ba(a,"iterate",h?Ow:Bc),{next(){const{value:g,done:y}=d.next();return y?{value:g,done:y}:{value:o?[m(g[0]),m(g[1])]:m(g),done:y}},[Symbol.iterator](){return this}}}}function $l(e){return function(...t){return e==="delete"?!1:this}}function J$(){const e={get(a){return kg(this,a)},get size(){return Og(this)},has:Rg,add:QA,set:eM,delete:tM,clear:rM,forEach:zg(!1,!1)},t={get(a){return kg(this,a,!1,!0)},get size(){return Og(this)},has:Rg,add:QA,set:eM,delete:tM,clear:rM,forEach:zg(!1,!0)},r={get(a){return kg(this,a,!0)},get size(){return Og(this,!0)},has(a){return Rg.call(this,a,!0)},add:$l("add"),set:$l("set"),delete:$l("delete"),clear:$l("clear"),forEach:zg(!0,!1)},n={get(a){return kg(this,a,!0,!0)},get size(){return Og(this,!0)},has(a){return Rg.call(this,a,!0)},add:$l("add"),set:$l("set"),delete:$l("delete"),clear:$l("clear"),forEach:zg(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=Bg(a,!1,!1),r[a]=Bg(a,!0,!1),t[a]=Bg(a,!1,!0),n[a]=Bg(a,!0,!0)}),[e,r,t,n]}const[Q$,eN,tN,rN]=J$();function zS(e,t){const r=t?e?rN:tN:e?eN:Q$;return(n,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(u0(r,i)&&i in n?r:n,i,a)}const nN={get:zS(!1,!1)},iN={get:zS(!1,!0)},aN={get:zS(!0,!1)},YL=new WeakMap,KL=new WeakMap,JL=new WeakMap,oN=new WeakMap;function sN(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lN(e){return e.__v_skip||!Object.isExtensible(e)?0:sN(D$(e))}function wa(e){return Ef(e)?e:BS(e,!1,ZL,nN,YL)}function QL(e){return BS(e,!1,K$,iN,KL)}function av(e){return BS(e,!0,Y$,aN,JL)}function BS(e,t,r,n,i){if(!c0(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const s=lN(e);if(s===0)return e;const o=new Proxy(e,s===2?n:r);return i.set(e,o),o}function pf(e){return Ef(e)?pf(e.__v_raw):!!(e&&e.__v_isReactive)}function Ef(e){return!!(e&&e.__v_isReadonly)}function m_(e){return!!(e&&e.__v_isShallow)}function ek(e){return pf(e)||Ef(e)}function Fr(e){const t=e&&e.__v_raw;return t?Fr(t):e}function tk(e){return L$(e,"__v_skip",!0),e}const gm=e=>c0(e)?wa(e):e,FS=e=>c0(e)?av(e):e;function $S(e){au&&ko&&(e=Fr(e),qL(e.dep||(e.dep=LS())))}function NS(e,t){e=Fr(e);const r=e.dep;r&&zw(r)}function oi(e){return!!(e&&e.__v_isRef===!0)}function xr(e){return rk(e,!1)}function In(e){return rk(e,!0)}function rk(e,t){return oi(e)?e:new uN(e,t)}class uN{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Fr(t),this._value=r?t:gm(t)}get value(){return $S(this),this._value}set value(t){const r=this.__v_isShallow||m_(t)||Ef(t);t=r?t:Fr(t),DS(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:gm(t),NS(this))}}function Xt(e){return oi(e)?e.value:e}const cN={get:(e,t,r)=>Xt(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return oi(i)&&!oi(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function nk(e){return pf(e)?e:new Proxy(e,cN)}class hN{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:n}=t(()=>$S(this),()=>NS(this));this._get=r,this._set=n}get value(){return this._get()}set value(t){this._set(t)}}function fN(e){return new hN(e)}function ov(e){const t=tl(e)?new Array(e.length):{};for(const r in e)t[r]=pN(e,r);return t}class dN{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return F$(Fr(this._object),this._key)}}function pN(e,t,r){const n=e[t];return oi(n)?n:new dN(e,t,r)}class mN{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new kS(t,()=>{this._dirty||(this._dirty=!0,NS(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=Fr(this);return $S(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function vN(e,t,r=!1){let n,i;const a=M$(e);return a?(n=e,i=C$):(n=e.get,i=e.set),new mN(n,i,a||!i,r)}function gN(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const bn={},mf=[],ps=()=>{},yN=()=>!1,_N=/^on[^a-z]/,f0=e=>_N.test(e),ik=e=>e.startsWith("onUpdate:"),Gi=Object.assign,VS=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},xN=Object.prototype.hasOwnProperty,Qr=(e,t)=>xN.call(e,t),Dr=Array.isArray,ak=e=>US(e)==="[object Map]",ok=e=>US(e)==="[object Set]",yr=e=>typeof e=="function",qi=e=>typeof e=="string",ei=e=>e!==null&&typeof e=="object",sk=e=>ei(e)&&yr(e.then)&&yr(e.catch),lk=Object.prototype.toString,US=e=>lk.call(e),uk=e=>US(e)==="[object Object]",Hp=gN(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),d0=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},bN=/-(\w)/g,gs=d0(e=>e.replace(bN,(t,r)=>r?r.toUpperCase():"")),wN=/\B([A-Z])/g,p0=d0(e=>e.replace(wN,"-$1").toLowerCase()),HS=d0(e=>e.charAt(0).toUpperCase()+e.slice(1)),_x=d0(e=>e?`on${HS(e)}`:""),nM=(e,t)=>!Object.is(e,t),xx=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},Bw=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},SN=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let iM;const Fw=()=>iM||(iM=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xf(e){if(Dr(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=qi(n)?AN(n):Xf(n);if(i)for(const a in i)t[a]=i[a]}return t}else{if(qi(e))return e;if(ei(e))return e}}const TN=/;(?![^(]*\))/g,CN=/:([^]+)/,EN=/\/\*[^]*?\*\//g;function AN(e){const t={};return e.replace(EN,"").split(TN).forEach(r=>{if(r){const n=r.split(CN);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ai(e){let t="";if(qi(e))t=e;else if(Dr(e))for(let r=0;r<e.length;r++){const n=Ai(e[r]);n&&(t+=n+" ")}else if(ei(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function MN(e){if(!e)return null;let{class:t,style:r}=e;return t&&!qi(t)&&(e.class=Ai(t)),r&&(e.style=Xf(r)),e}const Or=e=>qi(e)?e:e==null?"":Dr(e)||ei(e)&&(e.toString===lk||!yr(e.toString))?JSON.stringify(e,ck,2):String(e),ck=(e,t)=>t&&t.__v_isRef?ck(e,t.value):ak(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:ok(t)?{[`Set(${t.size})`]:[...t.values()]}:ei(t)&&!Dr(t)&&!uk(t)?String(t):t;function ou(e,t,r,n){let i;try{i=n?e(...n):e()}catch(a){sv(a,t,r)}return i}function co(e,t,r,n){if(yr(e)){const a=ou(e,t,r,n);return a&&sk(a)&&a.catch(s=>{sv(s,t,r)}),a}const i=[];for(let a=0;a<e.length;a++)i.push(co(e[a],t,r,n));return i}function sv(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let a=t.parent;const s=t.proxy,o=r;for(;a;){const d=a.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,s,o)===!1)return}a=a.parent}const h=t.appContext.config.errorHandler;if(h){ou(h,null,10,[e,s,o]);return}}IN(e,r,i,n)}function IN(e,t,r,n=!0){console.error(e)}let ym=!1,$w=!1;const ji=[];let us=0;const vf=[];let Ys=null,Cc=0;const hk=Promise.resolve();let jS=null;function xs(e){const t=jS||hk;return e?t.then(this?e.bind(this):e):t}function PN(e){let t=us+1,r=ji.length;for(;t<r;){const n=t+r>>>1;_m(ji[n])<e?t=n+1:r=n}return t}function m0(e){(!ji.length||!ji.includes(e,ym&&e.allowRecurse?us+1:us))&&(e.id==null?ji.push(e):ji.splice(PN(e.id),0,e),fk())}function fk(){!ym&&!$w&&($w=!0,jS=hk.then(dk))}function DN(e){const t=ji.indexOf(e);t>us&&ji.splice(t,1)}function LN(e){Dr(e)?vf.push(...e):(!Ys||!Ys.includes(e,e.allowRecurse?Cc+1:Cc))&&vf.push(e),fk()}function aM(e,t=ym?us+1:0){for(;t<ji.length;t++){const r=ji[t];r&&r.pre&&(ji.splice(t,1),t--,r())}}function v_(e){if(vf.length){const t=[...new Set(vf)];if(vf.length=0,Ys){Ys.push(...t);return}for(Ys=t,Ys.sort((r,n)=>_m(r)-_m(n)),Cc=0;Cc<Ys.length;Cc++)Ys[Cc]();Ys=null,Cc=0}}const _m=e=>e.id==null?1/0:e.id,kN=(e,t)=>{const r=_m(e)-_m(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function dk(e){$w=!1,ym=!0,ji.sort(kN);const t=ps;try{for(us=0;us<ji.length;us++){const r=ji[us];r&&r.active!==!1&&ou(r,null,14)}}finally{us=0,ji.length=0,v_(),ym=!1,jS=null,(ji.length||vf.length)&&dk()}}function RN(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||bn;let i=r;const a=t.startsWith("update:"),s=a&&t.slice(7);if(s&&s in n){const m=`${s==="modelValue"?"model":s}Modifiers`,{number:g,trim:y}=n[m]||bn;y&&(i=r.map(x=>qi(x)?x.trim():x)),g&&(i=r.map(SN))}let o,h=n[o=_x(t)]||n[o=_x(gs(t))];!h&&a&&(h=n[o=_x(p0(t))]),h&&co(h,e,6,i);const d=n[o+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,co(d,e,6,i)}}function pk(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const a=e.emits;let s={},o=!1;if(!yr(e)){const h=d=>{const m=pk(d,t,!0);m&&(o=!0,Gi(s,m))};!r&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!a&&!o?(ei(e)&&n.set(e,null),null):(Dr(a)?a.forEach(h=>s[h]=null):Gi(s,a),ei(e)&&n.set(e,s),s)}function v0(e,t){return!e||!f0(t)?!1:(t=t.slice(2).replace(/Once$/,""),Qr(e,t[0].toLowerCase()+t.slice(1))||Qr(e,p0(t))||Qr(e,t))}let Ci=null,g0=null;function g_(e){const t=Ci;return Ci=e,g0=e&&e.type.__scopeId||null,t}function GS(e){g0=e}function qS(){g0=null}function Cn(e,t=Ci,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&yM(-1);const a=g_(t);let s;try{s=e(...i)}finally{g_(a),n._d&&yM(1)}return s};return n._n=!0,n._c=!0,n._d=!0,n}function bx(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:a,propsOptions:[s],slots:o,attrs:h,emit:d,render:m,renderCache:g,data:y,setupState:x,ctx:T,inheritAttrs:M}=e;let P,I;const D=g_(e);try{if(r.shapeFlag&4){const B=i||n;P=Lo(m.call(B,B,g,a,x,y,T)),I=h}else{const B=t;P=Lo(B.length>1?B(a,{attrs:h,slots:o,emit:d}):B(a,null)),I=t.props?h:ON(h)}}catch(B){Wp.length=0,sv(B,e,1),P=Pe(_a)}let R=P;if(I&&M!==!1){const B=Object.keys(I),{shapeFlag:H}=R;B.length&&H&7&&(s&&B.some(ik)&&(I=zN(I,s)),R=fu(R,I))}return r.dirs&&(R=fu(R),R.dirs=R.dirs?R.dirs.concat(r.dirs):r.dirs),r.transition&&(R.transition=r.transition),P=R,g_(D),P}const ON=e=>{let t;for(const r in e)(r==="class"||r==="style"||f0(r))&&((t||(t={}))[r]=e[r]);return t},zN=(e,t)=>{const r={};for(const n in e)(!ik(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function BN(e,t,r){const{props:n,children:i,component:a}=e,{props:s,children:o,patchFlag:h}=t,d=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&h>=0){if(h&1024)return!0;if(h&16)return n?oM(n,s,d):!!s;if(h&8){const m=t.dynamicProps;for(let g=0;g<m.length;g++){const y=m[g];if(s[y]!==n[y]&&!v0(d,y))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===s?!1:n?s?oM(n,s,d):!0:!!s;return!1}function oM(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==e[a]&&!v0(r,a))return!0}return!1}function FN({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const $N=e=>e.__isSuspense;function mk(e,t){t&&t.pendingBranch?Dr(e)?t.effects.push(...e):t.effects.push(e):LN(e)}function Bo(e,t){return WS(e,null,t)}const Fg={};function mn(e,t,r){return WS(e,t,r)}function WS(e,t,{immediate:r,deep:n,flush:i,onTrack:a,onTrigger:s}=bn){var o;const h=UL()===((o=ai)==null?void 0:o.scope)?ai:null;let d,m=!1,g=!1;if(oi(e)?(d=()=>e.value,m=m_(e)):pf(e)?(d=()=>e,n=!0):Dr(e)?(g=!0,m=e.some(B=>pf(B)||m_(B)),d=()=>e.map(B=>{if(oi(B))return B.value;if(pf(B))return kc(B);if(yr(B))return ou(B,h,2)})):yr(e)?t?d=()=>ou(e,h,2):d=()=>{if(!(h&&h.isUnmounted))return y&&y(),co(e,h,3,[x])}:d=ps,t&&n){const B=d;d=()=>kc(B())}let y,x=B=>{y=D.onStop=()=>{ou(B,h,4)}},T;if(Mf)if(x=ps,t?r&&co(t,h,3,[d(),g?[]:void 0,x]):d(),i==="sync"){const B=k7();T=B.__watcherHandles||(B.__watcherHandles=[])}else return ps;let M=g?new Array(e.length).fill(Fg):Fg;const P=()=>{if(D.active)if(t){const B=D.run();(n||m||(g?B.some((H,V)=>nM(H,M[V])):nM(B,M)))&&(y&&y(),co(t,h,3,[B,M===Fg?void 0:g&&M[0]===Fg?[]:M,x]),M=B)}else D.run()};P.allowRecurse=!!t;let I;i==="sync"?I=P:i==="post"?I=()=>va(P,h&&h.suspense):(P.pre=!0,h&&(P.id=h.uid),I=()=>m0(P));const D=new kS(d,I);t?r?P():M=D.run():i==="post"?va(D.run.bind(D),h&&h.suspense):D.run();const R=()=>{D.stop(),h&&h.scope&&VS(h.scope.effects,D)};return T&&T.push(R),R}function NN(e,t,r){const n=this.proxy,i=qi(e)?e.includes(".")?vk(n,e):()=>n[e]:e.bind(n,n);let a;yr(t)?a=t:(a=t.handler,r=t);const s=ai;Af(this);const o=WS(i,a.bind(n),r);return s?Af(s):Fc(),o}function vk(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function kc(e,t){if(!ei(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),oi(e))kc(e.value,t);else if(Dr(e))for(let r=0;r<e.length;r++)kc(e[r],t);else if(ok(e)||ak(e))e.forEach(r=>{kc(r,t)});else if(uk(e))for(const r in e)kc(e[r],t);return e}function y_(e,t){const r=Ci;if(r===null)return e;const n=b0(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[s,o,h,d=bn]=t[a];s&&(yr(s)&&(s={mounted:s,updated:s}),s.deep&&kc(o),i.push({dir:s,instance:n,value:o,oldValue:void 0,arg:h,modifiers:d}))}return e}function ss(e,t,r,n){const i=e.dirs,a=t&&t.dirs;for(let s=0;s<i.length;s++){const o=i[s];a&&(o.oldValue=a[s].value);let h=o.dir[n];h&&(qf(),co(h,r,8,[e.el,o,e,t]),Wf())}}function gk(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ti(()=>{e.isMounted=!0}),hl(()=>{e.isUnmounting=!0}),e}const Ya=[Function,Array],yk={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ya,onEnter:Ya,onAfterEnter:Ya,onEnterCancelled:Ya,onBeforeLeave:Ya,onLeave:Ya,onAfterLeave:Ya,onLeaveCancelled:Ya,onBeforeAppear:Ya,onAppear:Ya,onAfterAppear:Ya,onAppearCancelled:Ya},VN={name:"BaseTransition",props:yk,setup(e,{slots:t}){const r=uv(),n=gk();let i;return()=>{const a=t.default&&XS(t.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){for(const M of a)if(M.type!==_a){s=M;break}}const o=Fr(e),{mode:h}=o;if(n.isLeaving)return Sx(s);const d=sM(s);if(!d)return Sx(s);const m=xm(d,o,n,r);bm(d,m);const g=r.subTree,y=g&&sM(g);let x=!1;const{getTransitionKey:T}=d.type;if(T){const M=T();i===void 0?i=M:M!==i&&(i=M,x=!0)}if(y&&y.type!==_a&&(!Ec(d,y)||x)){const M=xm(y,o,n,r);if(bm(y,M),h==="out-in")return n.isLeaving=!0,M.afterLeave=()=>{n.isLeaving=!1,r.update.active!==!1&&r.update()},Sx(s);h==="in-out"&&d.type!==_a&&(M.delayLeave=(P,I,D)=>{const R=_k(n,y);R[String(y.key)]=y,P._leaveCb=()=>{I(),P._leaveCb=void 0,delete m.delayedLeave},m.delayedLeave=D})}return s}}},UN=VN;function _k(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function xm(e,t,r,n){const{appear:i,mode:a,persisted:s=!1,onBeforeEnter:o,onEnter:h,onAfterEnter:d,onEnterCancelled:m,onBeforeLeave:g,onLeave:y,onAfterLeave:x,onLeaveCancelled:T,onBeforeAppear:M,onAppear:P,onAfterAppear:I,onAppearCancelled:D}=t,R=String(e.key),B=_k(r,e),H=(j,te)=>{j&&co(j,n,9,te)},V=(j,te)=>{const ne=te[1];H(j,te),Dr(j)?j.every(ce=>ce.length<=1)&&ne():j.length<=1&&ne()},q={mode:a,persisted:s,beforeEnter(j){let te=o;if(!r.isMounted)if(i)te=M||o;else return;j._leaveCb&&j._leaveCb(!0);const ne=B[R];ne&&Ec(e,ne)&&ne.el._leaveCb&&ne.el._leaveCb(),H(te,[j])},enter(j){let te=h,ne=d,ce=m;if(!r.isMounted)if(i)te=P||h,ne=I||d,ce=D||m;else return;let le=!1;const de=j._enterCb=ae=>{le||(le=!0,ae?H(ce,[j]):H(ne,[j]),q.delayedLeave&&q.delayedLeave(),j._enterCb=void 0)};te?V(te,[j,de]):de()},leave(j,te){const ne=String(e.key);if(j._enterCb&&j._enterCb(!0),r.isUnmounting)return te();H(g,[j]);let ce=!1;const le=j._leaveCb=de=>{ce||(ce=!0,te(),de?H(T,[j]):H(x,[j]),j._leaveCb=void 0,B[ne]===e&&delete B[ne])};B[ne]=e,y?V(y,[j,le]):le()},clone(j){return xm(j,t,r,n)}};return q}function Sx(e){if(lv(e))return e=fu(e),e.children=null,e}function sM(e){return lv(e)?e.children?e.children[0]:void 0:e}function bm(e,t){e.shapeFlag&6&&e.component?bm(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function XS(e,t=!1,r){let n=[],i=0;for(let a=0;a<e.length;a++){let s=e[a];const o=r==null?s.key:String(r)+String(s.key!=null?s.key:a);s.type===Pr?(s.patchFlag&128&&i++,n=n.concat(XS(s.children,t,o))):(t||s.type!==_a)&&n.push(o!=null?fu(s,{key:o}):s)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function jt(e,t){return yr(e)?(()=>Gi({name:e.name},t,{setup:e}))():e}const gf=e=>!!e.type.__asyncLoader;function It(e){yr(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:n,delay:i=200,timeout:a,suspensible:s=!0,onError:o}=e;let h=null,d,m=0;const g=()=>(m++,h=null,y()),y=()=>{let x;return h||(x=h=t().catch(T=>{if(T=T instanceof Error?T:new Error(String(T)),o)return new Promise((M,P)=>{o(T,()=>M(g()),()=>P(T),m+1)});throw T}).then(T=>x!==h&&h?h:(T&&(T.__esModule||T[Symbol.toStringTag]==="Module")&&(T=T.default),d=T,T)))};return jt({name:"AsyncComponentWrapper",__asyncLoader:y,get __asyncResolved(){return d},setup(){const x=ai;if(d)return()=>Tx(d,x);const T=D=>{h=null,sv(D,x,13,!n)};if(s&&x.suspense||Mf)return y().then(D=>()=>Tx(D,x)).catch(D=>(T(D),()=>n?Pe(n,{error:D}):null));const M=xr(!1),P=xr(),I=xr(!!i);return i&&setTimeout(()=>{I.value=!1},i),a!=null&&setTimeout(()=>{if(!M.value&&!P.value){const D=new Error(`Async component timed out after ${a}ms.`);T(D),P.value=D}},a),y().then(()=>{M.value=!0,x.parent&&lv(x.parent.vnode)&&m0(x.parent.update)}).catch(D=>{T(D),P.value=D}),()=>{if(M.value&&d)return Tx(d,x);if(P.value&&n)return Pe(n,{error:P.value});if(r&&!I.value)return Pe(r)}}})}function Tx(e,t){const{ref:r,props:n,children:i,ce:a}=t.vnode,s=Pe(e,n,i);return s.ref=r,s.ce=a,delete t.vnode.ce,s}const lv=e=>e.type.__isKeepAlive;function HN(e,t){xk(e,"a",t)}function jN(e,t){xk(e,"da",t)}function xk(e,t,r=ai){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(y0(t,n,r),r){let i=r.parent;for(;i&&i.parent;)lv(i.parent.vnode)&&GN(n,t,r,i),i=i.parent}}function GN(e,t,r,n){const i=y0(t,e,n,!0);Zf(()=>{VS(n[t],i)},r)}function y0(e,t,r=ai,n=!1){if(r){const i=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...s)=>{if(r.isUnmounted)return;qf(),Af(r);const o=co(t,r,e,s);return Fc(),Wf(),o});return n?i.unshift(a):i.push(a),a}}const cl=e=>(t,r=ai)=>(!Mf||e==="sp")&&y0(e,(...n)=>t(...n),r),bk=cl("bm"),ti=cl("m"),qN=cl("bu"),_0=cl("u"),hl=cl("bum"),Zf=cl("um"),WN=cl("sp"),XN=cl("rtg"),ZN=cl("rtc");function YN(e,t=ai){y0("ec",e,t)}const wk="components";function Rn(e,t){return JN(wk,e,!0,t)||e}const KN=Symbol.for("v-ndc");function JN(e,t,r=!0,n=!1){const i=Ci||ai;if(i){const a=i.type;if(e===wk){const o=P7(a,!1);if(o&&(o===t||o===gs(t)||o===HS(gs(t))))return a}const s=lM(i[e]||a[e],t)||lM(i.appContext[e],t);return!s&&n?a:s}}function lM(e,t){return e&&(e[t]||e[gs(t)]||e[HS(gs(t))])}function Fo(e,t,r,n){let i;const a=r&&r[n];if(Dr(e)||qi(e)){i=new Array(e.length);for(let s=0,o=e.length;s<o;s++)i[s]=t(e[s],s,void 0,a&&a[s])}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,a&&a[s])}else if(ei(e))if(e[Symbol.iterator])i=Array.from(e,(s,o)=>t(s,o,void 0,a&&a[o]));else{const s=Object.keys(e);i=new Array(s.length);for(let o=0,h=s.length;o<h;o++){const d=s[o];i[o]=t(e[d],d,o,a&&a[o])}}else i=[];return r&&(r[n]=i),i}function nn(e,t,r={},n,i){if(Ci.isCE||Ci.parent&&gf(Ci.parent)&&Ci.parent.isCE)return t!=="default"&&(r.name=t),Pe("slot",r,n&&n());let a=e[t];a&&a._c&&(a._d=!1),lt();const s=a&&Sk(a(r)),o=En(Pr,{key:r.key||s&&s.key||`_${t}`},s||(n?n():[]),s&&e._===1?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),a&&a._c&&(a._d=!0),o}function Sk(e){return e.some(t=>Sm(t)?!(t.type===_a||t.type===Pr&&!Sk(t.children)):!0)?e:null}const Nw=e=>e?zk(e)?b0(e)||e.proxy:Nw(e.parent):null,jp=Gi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Nw(e.parent),$root:e=>Nw(e.root),$emit:e=>e.emit,$options:e=>ZS(e),$forceUpdate:e=>e.f||(e.f=()=>m0(e.update)),$nextTick:e=>e.n||(e.n=xs.bind(e.proxy)),$watch:e=>NN.bind(e)}),Cx=(e,t)=>e!==bn&&!e.__isScriptSetup&&Qr(e,t),QN={get({_:e},t){const{ctx:r,setupState:n,data:i,props:a,accessCache:s,type:o,appContext:h}=e;let d;if(t[0]!=="$"){const x=s[t];if(x!==void 0)switch(x){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return a[t]}else{if(Cx(n,t))return s[t]=1,n[t];if(i!==bn&&Qr(i,t))return s[t]=2,i[t];if((d=e.propsOptions[0])&&Qr(d,t))return s[t]=3,a[t];if(r!==bn&&Qr(r,t))return s[t]=4,r[t];Vw&&(s[t]=0)}}const m=jp[t];let g,y;if(m)return t==="$attrs"&&ba(e,"get",t),m(e);if((g=o.__cssModules)&&(g=g[t]))return g;if(r!==bn&&Qr(r,t))return s[t]=4,r[t];if(y=h.config.globalProperties,Qr(y,t))return y[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:a}=e;return Cx(i,t)?(i[t]=r,!0):n!==bn&&Qr(n,t)?(n[t]=r,!0):Qr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:a}},s){let o;return!!r[s]||e!==bn&&Qr(e,s)||Cx(t,s)||(o=a[0])&&Qr(o,s)||Qr(n,s)||Qr(jp,s)||Qr(i.config.globalProperties,s)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Qr(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function uM(e){return Dr(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let Vw=!0;function e7(e){const t=ZS(e),r=e.proxy,n=e.ctx;Vw=!1,t.beforeCreate&&cM(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:s,watch:o,provide:h,inject:d,created:m,beforeMount:g,mounted:y,beforeUpdate:x,updated:T,activated:M,deactivated:P,beforeDestroy:I,beforeUnmount:D,destroyed:R,unmounted:B,render:H,renderTracked:V,renderTriggered:q,errorCaptured:j,serverPrefetch:te,expose:ne,inheritAttrs:ce,components:le,directives:de,filters:ae}=t;if(d&&t7(d,n,null),s)for(const Ye in s){const Qe=s[Ye];yr(Qe)&&(n[Ye]=Qe.bind(r))}if(i){const Ye=i.call(r,r);ei(Ye)&&(e.data=wa(Ye))}if(Vw=!0,a)for(const Ye in a){const Qe=a[Ye],Ct=yr(Qe)?Qe.bind(r,r):yr(Qe.get)?Qe.get.bind(r,r):ps,St=!yr(Qe)&&yr(Qe.set)?Qe.set.bind(r):ps,Kt=ke({get:Ct,set:St});Object.defineProperty(n,Ye,{enumerable:!0,configurable:!0,get:()=>Kt.value,set:Ft=>Kt.value=Ft})}if(o)for(const Ye in o)Tk(o[Ye],n,r,Ye);if(h){const Ye=yr(h)?h.call(r):h;Reflect.ownKeys(Ye).forEach(Qe=>{Mi(Qe,Ye[Qe])})}m&&cM(m,e,"c");function ve(Ye,Qe){Dr(Qe)?Qe.forEach(Ct=>Ye(Ct.bind(r))):Qe&&Ye(Qe.bind(r))}if(ve(bk,g),ve(ti,y),ve(qN,x),ve(_0,T),ve(HN,M),ve(jN,P),ve(YN,j),ve(ZN,V),ve(XN,q),ve(hl,D),ve(Zf,B),ve(WN,te),Dr(ne))if(ne.length){const Ye=e.exposed||(e.exposed={});ne.forEach(Qe=>{Object.defineProperty(Ye,Qe,{get:()=>r[Qe],set:Ct=>r[Qe]=Ct})})}else e.exposed||(e.exposed={});H&&e.render===ps&&(e.render=H),ce!=null&&(e.inheritAttrs=ce),le&&(e.components=le),de&&(e.directives=de)}function t7(e,t,r=ps){Dr(e)&&(e=Uw(e));for(const n in e){const i=e[n];let a;ei(i)?"default"in i?a=Br(i.from||n,i.default,!0):a=Br(i.from||n):a=Br(i),oi(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[n]=a}}function cM(e,t,r){co(Dr(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Tk(e,t,r,n){const i=n.includes(".")?vk(r,n):()=>r[n];if(qi(e)){const a=t[e];yr(a)&&mn(i,a)}else if(yr(e))mn(i,e.bind(r));else if(ei(e))if(Dr(e))e.forEach(a=>Tk(a,t,r,n));else{const a=yr(e.handler)?e.handler.bind(r):t[e.handler];yr(a)&&mn(i,a,e)}}function ZS(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:s}}=e.appContext,o=a.get(t);let h;return o?h=o:!i.length&&!r&&!n?h=t:(h={},i.length&&i.forEach(d=>__(h,d,s,!0)),__(h,t,s)),ei(t)&&a.set(t,h),h}function __(e,t,r,n=!1){const{mixins:i,extends:a}=t;a&&__(e,a,r,!0),i&&i.forEach(s=>__(e,s,r,!0));for(const s in t)if(!(n&&s==="expose")){const o=r7[s]||r&&r[s];e[s]=o?o(e[s],t[s]):t[s]}return e}const r7={data:hM,props:fM,emits:fM,methods:Rp,computed:Rp,beforeCreate:ta,created:ta,beforeMount:ta,mounted:ta,beforeUpdate:ta,updated:ta,beforeDestroy:ta,beforeUnmount:ta,destroyed:ta,unmounted:ta,activated:ta,deactivated:ta,errorCaptured:ta,serverPrefetch:ta,components:Rp,directives:Rp,watch:i7,provide:hM,inject:n7};function hM(e,t){return t?e?function(){return Gi(yr(e)?e.call(this,this):e,yr(t)?t.call(this,this):t)}:t:e}function n7(e,t){return Rp(Uw(e),Uw(t))}function Uw(e){if(Dr(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function ta(e,t){return e?[...new Set([].concat(e,t))]:t}function Rp(e,t){return e?Gi(Object.create(null),e,t):t}function fM(e,t){return e?Dr(e)&&Dr(t)?[...new Set([...e,...t])]:Gi(Object.create(null),uM(e),uM(t??{})):t}function i7(e,t){if(!e)return t;if(!t)return e;const r=Gi(Object.create(null),e);for(const n in t)r[n]=ta(e[n],t[n]);return r}function Ck(){return{app:null,config:{isNativeTag:yN,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let a7=0;function o7(e,t){return function(n,i=null){yr(n)||(n=Gi({},n)),i!=null&&!ei(i)&&(i=null);const a=Ck(),s=new Set;let o=!1;const h=a.app={_uid:a7++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:R7,get config(){return a.config},set config(d){},use(d,...m){return s.has(d)||(d&&yr(d.install)?(s.add(d),d.install(h,...m)):yr(d)&&(s.add(d),d(h,...m))),h},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),h},component(d,m){return m?(a.components[d]=m,h):a.components[d]},directive(d,m){return m?(a.directives[d]=m,h):a.directives[d]},mount(d,m,g){if(!o){const y=Pe(n,i);return y.appContext=a,m&&t?t(y,d):e(y,d,g),o=!0,h._container=d,d.__vue_app__=h,b0(y.component)||y.component.proxy}},unmount(){o&&(e(null,h._container),delete h._container.__vue_app__)},provide(d,m){return a.provides[d]=m,h},runWithContext(d){x_=h;try{return d()}finally{x_=null}}};return h}}let x_=null;function Mi(e,t){if(ai){let r=ai.provides;const n=ai.parent&&ai.parent.provides;n===r&&(r=ai.provides=Object.create(n)),r[e]=t}}function Br(e,t,r=!1){const n=ai||Ci;if(n||x_){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:x_._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&yr(t)?t.call(n&&n.proxy):t}}function s7(e,t,r,n=!1){const i={},a={};Bw(a,x0,1),e.propsDefaults=Object.create(null),Ek(e,t,i,a);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);r?e.props=n?i:QL(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function l7(e,t,r,n){const{props:i,attrs:a,vnode:{patchFlag:s}}=e,o=Fr(i),[h]=e.propsOptions;let d=!1;if((n||s>0)&&!(s&16)){if(s&8){const m=e.vnode.dynamicProps;for(let g=0;g<m.length;g++){let y=m[g];if(v0(e.emitsOptions,y))continue;const x=t[y];if(h)if(Qr(a,y))x!==a[y]&&(a[y]=x,d=!0);else{const T=gs(y);i[T]=Hw(h,o,T,x,e,!1)}else x!==a[y]&&(a[y]=x,d=!0)}}}else{Ek(e,t,i,a)&&(d=!0);let m;for(const g in o)(!t||!Qr(t,g)&&((m=p0(g))===g||!Qr(t,m)))&&(h?r&&(r[g]!==void 0||r[m]!==void 0)&&(i[g]=Hw(h,o,g,void 0,e,!0)):delete i[g]);if(a!==o)for(const g in a)(!t||!Qr(t,g))&&(delete a[g],d=!0)}d&&al(e,"set","$attrs")}function Ek(e,t,r,n){const[i,a]=e.propsOptions;let s=!1,o;if(t)for(let h in t){if(Hp(h))continue;const d=t[h];let m;i&&Qr(i,m=gs(h))?!a||!a.includes(m)?r[m]=d:(o||(o={}))[m]=d:v0(e.emitsOptions,h)||(!(h in n)||d!==n[h])&&(n[h]=d,s=!0)}if(a){const h=Fr(r),d=o||bn;for(let m=0;m<a.length;m++){const g=a[m];r[g]=Hw(i,h,g,d[g],e,!Qr(d,g))}}return s}function Hw(e,t,r,n,i,a){const s=e[r];if(s!=null){const o=Qr(s,"default");if(o&&n===void 0){const h=s.default;if(s.type!==Function&&!s.skipFactory&&yr(h)){const{propsDefaults:d}=i;r in d?n=d[r]:(Af(i),n=d[r]=h.call(null,t),Fc())}else n=h}s[0]&&(a&&!o?n=!1:s[1]&&(n===""||n===p0(r))&&(n=!0))}return n}function Ak(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const a=e.props,s={},o=[];let h=!1;if(!yr(e)){const m=g=>{h=!0;const[y,x]=Ak(g,t,!0);Gi(s,y),x&&o.push(...x)};!r&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!a&&!h)return ei(e)&&n.set(e,mf),mf;if(Dr(a))for(let m=0;m<a.length;m++){const g=gs(a[m]);dM(g)&&(s[g]=bn)}else if(a)for(const m in a){const g=gs(m);if(dM(g)){const y=a[m],x=s[g]=Dr(y)||yr(y)?{type:y}:Gi({},y);if(x){const T=vM(Boolean,x.type),M=vM(String,x.type);x[0]=T>-1,x[1]=M<0||T<M,(T>-1||Qr(x,"default"))&&o.push(g)}}}const d=[s,o];return ei(e)&&n.set(e,d),d}function dM(e){return e[0]!=="$"}function pM(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function mM(e,t){return pM(e)===pM(t)}function vM(e,t){return Dr(t)?t.findIndex(r=>mM(r,e)):yr(t)&&mM(t,e)?0:-1}const Mk=e=>e[0]==="_"||e==="$stable",YS=e=>Dr(e)?e.map(Lo):[Lo(e)],u7=(e,t,r)=>{if(t._n)return t;const n=Cn((...i)=>YS(t(...i)),r);return n._c=!1,n},Ik=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Mk(i))continue;const a=e[i];if(yr(a))t[i]=u7(i,a,n);else if(a!=null){const s=YS(a);t[i]=()=>s}}},Pk=(e,t)=>{const r=YS(t);e.slots.default=()=>r},c7=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Fr(t),Bw(t,"_",r)):Ik(t,e.slots={})}else e.slots={},t&&Pk(e,t);Bw(e.slots,x0,1)},h7=(e,t,r)=>{const{vnode:n,slots:i}=e;let a=!0,s=bn;if(n.shapeFlag&32){const o=t._;o?r&&o===1?a=!1:(Gi(i,t),!r&&o===1&&delete i._):(a=!t.$stable,Ik(t,i)),s=t}else t&&(Pk(e,t),s={default:1});if(a)for(const o in i)!Mk(o)&&!(o in s)&&delete i[o]};function b_(e,t,r,n,i=!1){if(Dr(e)){e.forEach((y,x)=>b_(y,t&&(Dr(t)?t[x]:t),r,n,i));return}if(gf(n)&&!i)return;const a=n.shapeFlag&4?b0(n.component)||n.component.proxy:n.el,s=i?null:a,{i:o,r:h}=e,d=t&&t.r,m=o.refs===bn?o.refs={}:o.refs,g=o.setupState;if(d!=null&&d!==h&&(qi(d)?(m[d]=null,Qr(g,d)&&(g[d]=null)):oi(d)&&(d.value=null)),yr(h))ou(h,o,12,[s,m]);else{const y=qi(h),x=oi(h);if(y||x){const T=()=>{if(e.f){const M=y?Qr(g,h)?g[h]:m[h]:h.value;i?Dr(M)&&VS(M,a):Dr(M)?M.includes(a)||M.push(a):y?(m[h]=[a],Qr(g,h)&&(g[h]=m[h])):(h.value=[a],e.k&&(m[e.k]=h.value))}else y?(m[h]=s,Qr(g,h)&&(g[h]=s)):x&&(h.value=s,e.k&&(m[e.k]=s))};s?(T.id=-1,va(T,r)):T()}}}let Nl=!1;const $g=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",Ng=e=>e.nodeType===8;function f7(e){const{mt:t,p:r,o:{patchProp:n,createText:i,nextSibling:a,parentNode:s,remove:o,insert:h,createComment:d}}=e,m=(I,D)=>{if(!D.hasChildNodes()){r(null,I,D),v_(),D._vnode=I;return}Nl=!1,g(D.firstChild,I,null,null,null),v_(),D._vnode=I,Nl&&console.error("Hydration completed but contains mismatches.")},g=(I,D,R,B,H,V=!1)=>{const q=Ng(I)&&I.data==="[",j=()=>M(I,D,R,B,H,q),{type:te,ref:ne,shapeFlag:ce,patchFlag:le}=D;let de=I.nodeType;D.el=I,le===-2&&(V=!1,D.dynamicChildren=null);let ae=null;switch(te){case hu:de!==3?D.children===""?(h(D.el=i(""),s(I),I),ae=I):ae=j():(I.data!==D.children&&(Nl=!0,I.data=D.children),ae=a(I));break;case _a:de!==8||q?ae=j():ae=a(I);break;case qp:if(q&&(I=a(I),de=I.nodeType),de===1||de===3){ae=I;const Se=!D.children.length;for(let ve=0;ve<D.staticCount;ve++)Se&&(D.children+=ae.nodeType===1?ae.outerHTML:ae.data),ve===D.staticCount-1&&(D.anchor=ae),ae=a(ae);return q?a(ae):ae}else j();break;case Pr:q?ae=T(I,D,R,B,H,V):ae=j();break;default:if(ce&1)de!==1||D.type.toLowerCase()!==I.tagName.toLowerCase()?ae=j():ae=y(I,D,R,B,H,V);else if(ce&6){D.slotScopeIds=H;const Se=s(I);if(t(D,Se,null,R,B,$g(Se),V),ae=q?P(I):a(I),ae&&Ng(ae)&&ae.data==="teleport end"&&(ae=a(ae)),gf(D)){let ve;q?(ve=Pe(Pr),ve.anchor=ae?ae.previousSibling:Se.lastChild):ve=I.nodeType===3?ol(""):Pe("div"),ve.el=I,D.component.subTree=ve}}else ce&64?de!==8?ae=j():ae=D.type.hydrate(I,D,R,B,H,V,e,x):ce&128&&(ae=D.type.hydrate(I,D,R,B,$g(s(I)),H,V,e,g))}return ne!=null&&b_(ne,null,B,D),ae},y=(I,D,R,B,H,V)=>{V=V||!!D.dynamicChildren;const{type:q,props:j,patchFlag:te,shapeFlag:ne,dirs:ce}=D,le=q==="input"&&ce||q==="option";if(le||te!==-1){if(ce&&ss(D,null,R,"created"),j)if(le||!V||te&48)for(const ae in j)(le&&ae.endsWith("value")||f0(ae)&&!Hp(ae))&&n(I,ae,null,j[ae],!1,void 0,R);else j.onClick&&n(I,"onClick",null,j.onClick,!1,void 0,R);let de;if((de=j&&j.onVnodeBeforeMount)&&eo(de,R,D),ce&&ss(D,null,R,"beforeMount"),((de=j&&j.onVnodeMounted)||ce)&&mk(()=>{de&&eo(de,R,D),ce&&ss(D,null,R,"mounted")},B),ne&16&&!(j&&(j.innerHTML||j.textContent))){let ae=x(I.firstChild,D,I,R,B,H,V);for(;ae;){Nl=!0;const Se=ae;ae=ae.nextSibling,o(Se)}}else ne&8&&I.textContent!==D.children&&(Nl=!0,I.textContent=D.children)}return I.nextSibling},x=(I,D,R,B,H,V,q)=>{q=q||!!D.dynamicChildren;const j=D.children,te=j.length;for(let ne=0;ne<te;ne++){const ce=q?j[ne]:j[ne]=Lo(j[ne]);if(I)I=g(I,ce,B,H,V,q);else{if(ce.type===hu&&!ce.children)continue;Nl=!0,r(null,ce,R,null,B,H,$g(R),V)}}return I},T=(I,D,R,B,H,V)=>{const{slotScopeIds:q}=D;q&&(H=H?H.concat(q):q);const j=s(I),te=x(a(I),D,j,R,B,H,V);return te&&Ng(te)&&te.data==="]"?a(D.anchor=te):(Nl=!0,h(D.anchor=d("]"),j,te),te)},M=(I,D,R,B,H,V)=>{if(Nl=!0,D.el=null,V){const te=P(I);for(;;){const ne=a(I);if(ne&&ne!==te)o(ne);else break}}const q=a(I),j=s(I);return o(I),r(null,D,j,q,R,B,$g(j),H),q},P=I=>{let D=0;for(;I;)if(I=a(I),I&&Ng(I)&&(I.data==="["&&D++,I.data==="]")){if(D===0)return a(I);D--}return I};return[m,g]}const va=mk;function d7(e){return Dk(e)}function p7(e){return Dk(e,f7)}function Dk(e,t){const r=Fw();r.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:s,createText:o,createComment:h,setText:d,setElementText:m,parentNode:g,nextSibling:y,setScopeId:x=ps,insertStaticContent:T}=e,M=(ue,ge,Ie,je=null,Ke=null,rt=null,vt=!1,Xe=null,ut=!!ge.dynamicChildren)=>{if(ue===ge)return;ue&&!Ec(ue,ge)&&(je=qe(ue),Ft(ue,Ke,rt,!0),ue=null),ge.patchFlag===-2&&(ut=!1,ge.dynamicChildren=null);const{type:it,ref:Nt,shapeFlag:zt}=ge;switch(it){case hu:P(ue,ge,Ie,je);break;case _a:I(ue,ge,Ie,je);break;case qp:ue==null&&D(ge,Ie,je,vt);break;case Pr:le(ue,ge,Ie,je,Ke,rt,vt,Xe,ut);break;default:zt&1?H(ue,ge,Ie,je,Ke,rt,vt,Xe,ut):zt&6?de(ue,ge,Ie,je,Ke,rt,vt,Xe,ut):(zt&64||zt&128)&&it.process(ue,ge,Ie,je,Ke,rt,vt,Xe,ut,et)}Nt!=null&&Ke&&b_(Nt,ue&&ue.ref,rt,ge||ue,!ge)},P=(ue,ge,Ie,je)=>{if(ue==null)n(ge.el=o(ge.children),Ie,je);else{const Ke=ge.el=ue.el;ge.children!==ue.children&&d(Ke,ge.children)}},I=(ue,ge,Ie,je)=>{ue==null?n(ge.el=h(ge.children||""),Ie,je):ge.el=ue.el},D=(ue,ge,Ie,je)=>{[ue.el,ue.anchor]=T(ue.children,ge,Ie,je,ue.el,ue.anchor)},R=({el:ue,anchor:ge},Ie,je)=>{let Ke;for(;ue&&ue!==ge;)Ke=y(ue),n(ue,Ie,je),ue=Ke;n(ge,Ie,je)},B=({el:ue,anchor:ge})=>{let Ie;for(;ue&&ue!==ge;)Ie=y(ue),i(ue),ue=Ie;i(ge)},H=(ue,ge,Ie,je,Ke,rt,vt,Xe,ut)=>{vt=vt||ge.type==="svg",ue==null?V(ge,Ie,je,Ke,rt,vt,Xe,ut):te(ue,ge,Ke,rt,vt,Xe,ut)},V=(ue,ge,Ie,je,Ke,rt,vt,Xe)=>{let ut,it;const{type:Nt,props:zt,shapeFlag:$t,transition:Wt,dirs:ar}=ue;if(ut=ue.el=s(ue.type,rt,zt&&zt.is,zt),$t&8?m(ut,ue.children):$t&16&&j(ue.children,ut,null,je,Ke,rt&&Nt!=="foreignObject",vt,Xe),ar&&ss(ue,null,je,"created"),q(ut,ue,ue.scopeId,vt,je),zt){for(const Be in zt)Be!=="value"&&!Hp(Be)&&a(ut,Be,null,zt[Be],rt,ue.children,je,Ke,fr);"value"in zt&&a(ut,"value",null,zt.value),(it=zt.onVnodeBeforeMount)&&eo(it,je,ue)}ar&&ss(ue,null,je,"beforeMount");const wr=(!Ke||Ke&&!Ke.pendingBranch)&&Wt&&!Wt.persisted;wr&&Wt.beforeEnter(ut),n(ut,ge,Ie),((it=zt&&zt.onVnodeMounted)||wr||ar)&&va(()=>{it&&eo(it,je,ue),wr&&Wt.enter(ut),ar&&ss(ue,null,je,"mounted")},Ke)},q=(ue,ge,Ie,je,Ke)=>{if(Ie&&x(ue,Ie),je)for(let rt=0;rt<je.length;rt++)x(ue,je[rt]);if(Ke){let rt=Ke.subTree;if(ge===rt){const vt=Ke.vnode;q(ue,vt,vt.scopeId,vt.slotScopeIds,Ke.parent)}}},j=(ue,ge,Ie,je,Ke,rt,vt,Xe,ut=0)=>{for(let it=ut;it<ue.length;it++){const Nt=ue[it]=Xe?Kl(ue[it]):Lo(ue[it]);M(null,Nt,ge,Ie,je,Ke,rt,vt,Xe)}},te=(ue,ge,Ie,je,Ke,rt,vt)=>{const Xe=ge.el=ue.el;let{patchFlag:ut,dynamicChildren:it,dirs:Nt}=ge;ut|=ue.patchFlag&16;const zt=ue.props||bn,$t=ge.props||bn;let Wt;Ie&&Zu(Ie,!1),(Wt=$t.onVnodeBeforeUpdate)&&eo(Wt,Ie,ge,ue),Nt&&ss(ge,ue,Ie,"beforeUpdate"),Ie&&Zu(Ie,!0);const ar=Ke&&ge.type!=="foreignObject";if(it?ne(ue.dynamicChildren,it,Xe,Ie,je,ar,rt):vt||Qe(ue,ge,Xe,null,Ie,je,ar,rt,!1),ut>0){if(ut&16)ce(Xe,ge,zt,$t,Ie,je,Ke);else if(ut&2&&zt.class!==$t.class&&a(Xe,"class",null,$t.class,Ke),ut&4&&a(Xe,"style",zt.style,$t.style,Ke),ut&8){const wr=ge.dynamicProps;for(let Be=0;Be<wr.length;Be++){const at=wr[Be],Bn=zt[at],jn=$t[at];(jn!==Bn||at==="value")&&a(Xe,at,Bn,jn,Ke,ue.children,Ie,je,fr)}}ut&1&&ue.children!==ge.children&&m(Xe,ge.children)}else!vt&&it==null&&ce(Xe,ge,zt,$t,Ie,je,Ke);((Wt=$t.onVnodeUpdated)||Nt)&&va(()=>{Wt&&eo(Wt,Ie,ge,ue),Nt&&ss(ge,ue,Ie,"updated")},je)},ne=(ue,ge,Ie,je,Ke,rt,vt)=>{for(let Xe=0;Xe<ge.length;Xe++){const ut=ue[Xe],it=ge[Xe],Nt=ut.el&&(ut.type===Pr||!Ec(ut,it)||ut.shapeFlag&70)?g(ut.el):Ie;M(ut,it,Nt,null,je,Ke,rt,vt,!0)}},ce=(ue,ge,Ie,je,Ke,rt,vt)=>{if(Ie!==je){if(Ie!==bn)for(const Xe in Ie)!Hp(Xe)&&!(Xe in je)&&a(ue,Xe,Ie[Xe],null,vt,ge.children,Ke,rt,fr);for(const Xe in je){if(Hp(Xe))continue;const ut=je[Xe],it=Ie[Xe];ut!==it&&Xe!=="value"&&a(ue,Xe,it,ut,vt,ge.children,Ke,rt,fr)}"value"in je&&a(ue,"value",Ie.value,je.value)}},le=(ue,ge,Ie,je,Ke,rt,vt,Xe,ut)=>{const it=ge.el=ue?ue.el:o(""),Nt=ge.anchor=ue?ue.anchor:o("");let{patchFlag:zt,dynamicChildren:$t,slotScopeIds:Wt}=ge;Wt&&(Xe=Xe?Xe.concat(Wt):Wt),ue==null?(n(it,Ie,je),n(Nt,Ie,je),j(ge.children,Ie,Nt,Ke,rt,vt,Xe,ut)):zt>0&&zt&64&&$t&&ue.dynamicChildren?(ne(ue.dynamicChildren,$t,Ie,Ke,rt,vt,Xe),(ge.key!=null||Ke&&ge===Ke.subTree)&&KS(ue,ge,!0)):Qe(ue,ge,Ie,Nt,Ke,rt,vt,Xe,ut)},de=(ue,ge,Ie,je,Ke,rt,vt,Xe,ut)=>{ge.slotScopeIds=Xe,ue==null?ge.shapeFlag&512?Ke.ctx.activate(ge,Ie,je,vt,ut):ae(ge,Ie,je,Ke,rt,vt,ut):Se(ue,ge,ut)},ae=(ue,ge,Ie,je,Ke,rt,vt)=>{const Xe=ue.component=C7(ue,je,Ke);if(lv(ue)&&(Xe.ctx.renderer=et),E7(Xe),Xe.asyncDep){if(Ke&&Ke.registerDep(Xe,ve),!ue.el){const ut=Xe.subTree=Pe(_a);I(null,ut,ge,Ie)}return}ve(Xe,ue,ge,Ie,Ke,rt,vt)},Se=(ue,ge,Ie)=>{const je=ge.component=ue.component;if(BN(ue,ge,Ie))if(je.asyncDep&&!je.asyncResolved){Ye(je,ge,Ie);return}else je.next=ge,DN(je.update),je.update();else ge.el=ue.el,je.vnode=ge},ve=(ue,ge,Ie,je,Ke,rt,vt)=>{const Xe=()=>{if(ue.isMounted){let{next:Nt,bu:zt,u:$t,parent:Wt,vnode:ar}=ue,wr=Nt,Be;Zu(ue,!1),Nt?(Nt.el=ar.el,Ye(ue,Nt,vt)):Nt=ar,zt&&xx(zt),(Be=Nt.props&&Nt.props.onVnodeBeforeUpdate)&&eo(Be,Wt,Nt,ar),Zu(ue,!0);const at=bx(ue),Bn=ue.subTree;ue.subTree=at,M(Bn,at,g(Bn.el),qe(Bn),ue,Ke,rt),Nt.el=at.el,wr===null&&FN(ue,at.el),$t&&va($t,Ke),(Be=Nt.props&&Nt.props.onVnodeUpdated)&&va(()=>eo(Be,Wt,Nt,ar),Ke)}else{let Nt;const{el:zt,props:$t}=ge,{bm:Wt,m:ar,parent:wr}=ue,Be=gf(ge);if(Zu(ue,!1),Wt&&xx(Wt),!Be&&(Nt=$t&&$t.onVnodeBeforeMount)&&eo(Nt,wr,ge),Zu(ue,!0),zt&&ft){const at=()=>{ue.subTree=bx(ue),ft(zt,ue.subTree,ue,Ke,null)};Be?ge.type.__asyncLoader().then(()=>!ue.isUnmounted&&at()):at()}else{const at=ue.subTree=bx(ue);M(null,at,Ie,je,ue,Ke,rt),ge.el=at.el}if(ar&&va(ar,Ke),!Be&&(Nt=$t&&$t.onVnodeMounted)){const at=ge;va(()=>eo(Nt,wr,at),Ke)}(ge.shapeFlag&256||wr&&gf(wr.vnode)&&wr.vnode.shapeFlag&256)&&ue.a&&va(ue.a,Ke),ue.isMounted=!0,ge=Ie=je=null}},ut=ue.effect=new kS(Xe,()=>m0(it),ue.scope),it=ue.update=()=>ut.run();it.id=ue.uid,Zu(ue,!0),it()},Ye=(ue,ge,Ie)=>{ge.component=ue;const je=ue.vnode.props;ue.vnode=ge,ue.next=null,l7(ue,ge.props,je,Ie),h7(ue,ge.children,Ie),qf(),aM(),Wf()},Qe=(ue,ge,Ie,je,Ke,rt,vt,Xe,ut=!1)=>{const it=ue&&ue.children,Nt=ue?ue.shapeFlag:0,zt=ge.children,{patchFlag:$t,shapeFlag:Wt}=ge;if($t>0){if($t&128){St(it,zt,Ie,je,Ke,rt,vt,Xe,ut);return}else if($t&256){Ct(it,zt,Ie,je,Ke,rt,vt,Xe,ut);return}}Wt&8?(Nt&16&&fr(it,Ke,rt),zt!==it&&m(Ie,zt)):Nt&16?Wt&16?St(it,zt,Ie,je,Ke,rt,vt,Xe,ut):fr(it,Ke,rt,!0):(Nt&8&&m(Ie,""),Wt&16&&j(zt,Ie,je,Ke,rt,vt,Xe,ut))},Ct=(ue,ge,Ie,je,Ke,rt,vt,Xe,ut)=>{ue=ue||mf,ge=ge||mf;const it=ue.length,Nt=ge.length,zt=Math.min(it,Nt);let $t;for($t=0;$t<zt;$t++){const Wt=ge[$t]=ut?Kl(ge[$t]):Lo(ge[$t]);M(ue[$t],Wt,Ie,null,Ke,rt,vt,Xe,ut)}it>Nt?fr(ue,Ke,rt,!0,!1,zt):j(ge,Ie,je,Ke,rt,vt,Xe,ut,zt)},St=(ue,ge,Ie,je,Ke,rt,vt,Xe,ut)=>{let it=0;const Nt=ge.length;let zt=ue.length-1,$t=Nt-1;for(;it<=zt&&it<=$t;){const Wt=ue[it],ar=ge[it]=ut?Kl(ge[it]):Lo(ge[it]);if(Ec(Wt,ar))M(Wt,ar,Ie,null,Ke,rt,vt,Xe,ut);else break;it++}for(;it<=zt&&it<=$t;){const Wt=ue[zt],ar=ge[$t]=ut?Kl(ge[$t]):Lo(ge[$t]);if(Ec(Wt,ar))M(Wt,ar,Ie,null,Ke,rt,vt,Xe,ut);else break;zt--,$t--}if(it>zt){if(it<=$t){const Wt=$t+1,ar=Wt<Nt?ge[Wt].el:je;for(;it<=$t;)M(null,ge[it]=ut?Kl(ge[it]):Lo(ge[it]),Ie,ar,Ke,rt,vt,Xe,ut),it++}}else if(it>$t)for(;it<=zt;)Ft(ue[it],Ke,rt,!0),it++;else{const Wt=it,ar=it,wr=new Map;for(it=ar;it<=$t;it++){const Yr=ge[it]=ut?Kl(ge[it]):Lo(ge[it]);Yr.key!=null&&wr.set(Yr.key,it)}let Be,at=0;const Bn=$t-ar+1;let jn=!1,pr=0;const Gn=new Array(Bn);for(it=0;it<Bn;it++)Gn[it]=0;for(it=Wt;it<=zt;it++){const Yr=ue[it];if(at>=Bn){Ft(Yr,Ke,rt,!0);continue}let Fn;if(Yr.key!=null)Fn=wr.get(Yr.key);else for(Be=ar;Be<=$t;Be++)if(Gn[Be-ar]===0&&Ec(Yr,ge[Be])){Fn=Be;break}Fn===void 0?Ft(Yr,Ke,rt,!0):(Gn[Fn-ar]=it+1,Fn>=pr?pr=Fn:jn=!0,M(Yr,ge[Fn],Ie,null,Ke,rt,vt,Xe,ut),at++)}const ci=jn?m7(Gn):mf;for(Be=ci.length-1,it=Bn-1;it>=0;it--){const Yr=ar+it,Fn=ge[Yr],ht=Yr+1<Nt?ge[Yr+1].el:je;Gn[it]===0?M(null,Fn,Ie,ht,Ke,rt,vt,Xe,ut):jn&&(Be<0||it!==ci[Be]?Kt(Fn,Ie,ht,2):Be--)}}},Kt=(ue,ge,Ie,je,Ke=null)=>{const{el:rt,type:vt,transition:Xe,children:ut,shapeFlag:it}=ue;if(it&6){Kt(ue.component.subTree,ge,Ie,je);return}if(it&128){ue.suspense.move(ge,Ie,je);return}if(it&64){vt.move(ue,ge,Ie,et);return}if(vt===Pr){n(rt,ge,Ie);for(let zt=0;zt<ut.length;zt++)Kt(ut[zt],ge,Ie,je);n(ue.anchor,ge,Ie);return}if(vt===qp){R(ue,ge,Ie);return}if(je!==2&&it&1&&Xe)if(je===0)Xe.beforeEnter(rt),n(rt,ge,Ie),va(()=>Xe.enter(rt),Ke);else{const{leave:zt,delayLeave:$t,afterLeave:Wt}=Xe,ar=()=>n(rt,ge,Ie),wr=()=>{zt(rt,()=>{ar(),Wt&&Wt()})};$t?$t(rt,ar,wr):wr()}else n(rt,ge,Ie)},Ft=(ue,ge,Ie,je=!1,Ke=!1)=>{const{type:rt,props:vt,ref:Xe,children:ut,dynamicChildren:it,shapeFlag:Nt,patchFlag:zt,dirs:$t}=ue;if(Xe!=null&&b_(Xe,null,Ie,ue,!0),Nt&256){ge.ctx.deactivate(ue);return}const Wt=Nt&1&&$t,ar=!gf(ue);let wr;if(ar&&(wr=vt&&vt.onVnodeBeforeUnmount)&&eo(wr,ge,ue),Nt&6)vr(ue.component,Ie,je);else{if(Nt&128){ue.suspense.unmount(Ie,je);return}Wt&&ss(ue,null,ge,"beforeUnmount"),Nt&64?ue.type.remove(ue,ge,Ie,Ke,et,je):it&&(rt!==Pr||zt>0&&zt&64)?fr(it,ge,Ie,!1,!0):(rt===Pr&&zt&384||!Ke&&Nt&16)&&fr(ut,ge,Ie),je&&br(ue)}(ar&&(wr=vt&&vt.onVnodeUnmounted)||Wt)&&va(()=>{wr&&eo(wr,ge,ue),Wt&&ss(ue,null,ge,"unmounted")},Ie)},br=ue=>{const{type:ge,el:Ie,anchor:je,transition:Ke}=ue;if(ge===Pr){Ir(Ie,je);return}if(ge===qp){B(ue);return}const rt=()=>{i(Ie),Ke&&!Ke.persisted&&Ke.afterLeave&&Ke.afterLeave()};if(ue.shapeFlag&1&&Ke&&!Ke.persisted){const{leave:vt,delayLeave:Xe}=Ke,ut=()=>vt(Ie,rt);Xe?Xe(ue.el,rt,ut):ut()}else rt()},Ir=(ue,ge)=>{let Ie;for(;ue!==ge;)Ie=y(ue),i(ue),ue=Ie;i(ge)},vr=(ue,ge,Ie)=>{const{bum:je,scope:Ke,update:rt,subTree:vt,um:Xe}=ue;je&&xx(je),Ke.stop(),rt&&(rt.active=!1,Ft(vt,ue,ge,Ie)),Xe&&va(Xe,ge),va(()=>{ue.isUnmounted=!0},ge),ge&&ge.pendingBranch&&!ge.isUnmounted&&ue.asyncDep&&!ue.asyncResolved&&ue.suspenseId===ge.pendingId&&(ge.deps--,ge.deps===0&&ge.resolve())},fr=(ue,ge,Ie,je=!1,Ke=!1,rt=0)=>{for(let vt=rt;vt<ue.length;vt++)Ft(ue[vt],ge,Ie,je,Ke)},qe=ue=>ue.shapeFlag&6?qe(ue.component.subTree):ue.shapeFlag&128?ue.suspense.next():y(ue.anchor||ue.el),st=(ue,ge,Ie)=>{ue==null?ge._vnode&&Ft(ge._vnode,null,null,!0):M(ge._vnode||null,ue,ge,null,null,null,Ie),aM(),v_(),ge._vnode=ue},et={p:M,um:Ft,m:Kt,r:br,mt:ae,mc:j,pc:Qe,pbc:ne,n:qe,o:e};let mt,ft;return t&&([mt,ft]=t(et)),{render:st,hydrate:mt,createApp:o7(st,mt)}}function Zu({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function KS(e,t,r=!1){const n=e.children,i=t.children;if(Dr(n)&&Dr(i))for(let a=0;a<n.length;a++){const s=n[a];let o=i[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[a]=Kl(i[a]),o.el=s.el),r||KS(s,o)),o.type===hu&&(o.el=s.el)}}function m7(e){const t=e.slice(),r=[0];let n,i,a,s,o;const h=e.length;for(n=0;n<h;n++){const d=e[n];if(d!==0){if(i=r[r.length-1],e[i]<d){t[n]=i,r.push(n);continue}for(a=0,s=r.length-1;a<s;)o=a+s>>1,e[r[o]]<d?a=o+1:s=o;d<e[r[a]]&&(a>0&&(t[n]=r[a-1]),r[a]=n)}}for(a=r.length,s=r[a-1];a-- >0;)r[a]=s,s=t[s];return r}const v7=e=>e.__isTeleport,Gp=e=>e&&(e.disabled||e.disabled===""),gM=e=>typeof SVGElement<"u"&&e instanceof SVGElement,jw=(e,t)=>{const r=e&&e.to;return qi(r)?t?t(r):null:r},g7={__isTeleport:!0,process(e,t,r,n,i,a,s,o,h,d){const{mc:m,pc:g,pbc:y,o:{insert:x,querySelector:T,createText:M,createComment:P}}=d,I=Gp(t.props);let{shapeFlag:D,children:R,dynamicChildren:B}=t;if(e==null){const H=t.el=M(""),V=t.anchor=M("");x(H,r,n),x(V,r,n);const q=t.target=jw(t.props,T),j=t.targetAnchor=M("");q&&(x(j,q),s=s||gM(q));const te=(ne,ce)=>{D&16&&m(R,ne,ce,i,a,s,o,h)};I?te(r,V):q&&te(q,j)}else{t.el=e.el;const H=t.anchor=e.anchor,V=t.target=e.target,q=t.targetAnchor=e.targetAnchor,j=Gp(e.props),te=j?r:V,ne=j?H:q;if(s=s||gM(V),B?(y(e.dynamicChildren,B,te,i,a,s,o),KS(e,t,!0)):h||g(e,t,te,ne,i,a,s,o,!1),I)j||Vg(t,r,H,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ce=t.target=jw(t.props,T);ce&&Vg(t,ce,null,d,0)}else j&&Vg(t,V,q,d,1)}kk(t)},remove(e,t,r,n,{um:i,o:{remove:a}},s){const{shapeFlag:o,children:h,anchor:d,targetAnchor:m,target:g,props:y}=e;if(g&&a(m),(s||!Gp(y))&&(a(d),o&16))for(let x=0;x<h.length;x++){const T=h[x];i(T,t,r,!0,!!T.dynamicChildren)}},move:Vg,hydrate:y7};function Vg(e,t,r,{o:{insert:n},m:i},a=2){a===0&&n(e.targetAnchor,t,r);const{el:s,anchor:o,shapeFlag:h,children:d,props:m}=e,g=a===2;if(g&&n(s,t,r),(!g||Gp(m))&&h&16)for(let y=0;y<d.length;y++)i(d[y],t,r,2);g&&n(o,t,r)}function y7(e,t,r,n,i,a,{o:{nextSibling:s,parentNode:o,querySelector:h}},d){const m=t.target=jw(t.props,h);if(m){const g=m._lpa||m.firstChild;if(t.shapeFlag&16)if(Gp(t.props))t.anchor=d(s(e),t,o(e),r,n,i,a),t.targetAnchor=g;else{t.anchor=s(e);let y=g;for(;y;)if(y=s(y),y&&y.nodeType===8&&y.data==="teleport anchor"){t.targetAnchor=y,m._lpa=t.targetAnchor&&s(t.targetAnchor);break}d(g,t,m,r,n,i,a)}kk(t)}return t.anchor&&s(t.anchor)}const Lk=g7;function kk(e){const t=e.ctx;if(t&&t.ut){let r=e.children[0].el;for(;r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}const Pr=Symbol.for("v-fgt"),hu=Symbol.for("v-txt"),_a=Symbol.for("v-cmt"),qp=Symbol.for("v-stc"),Wp=[];let Ro=null;function lt(e=!1){Wp.push(Ro=e?null:[])}function _7(){Wp.pop(),Ro=Wp[Wp.length-1]||null}let wm=1;function yM(e){wm+=e}function Rk(e){return e.dynamicChildren=wm>0?Ro||mf:null,_7(),wm>0&&Ro&&Ro.push(e),e}function Rt(e,t,r,n,i,a){return Rk(er(e,t,r,n,i,a,!0))}function En(e,t,r,n,i){return Rk(Pe(e,t,r,n,i,!0))}function Sm(e){return e?e.__v_isVNode===!0:!1}function Ec(e,t){return e.type===t.type&&e.key===t.key}const x0="__vInternal",Ok=({key:e})=>e??null,Uy=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?qi(e)||oi(e)||yr(e)?{i:Ci,r:e,k:t,f:!!r}:e:null);function er(e,t=null,r=null,n=0,i=null,a=e===Pr?0:1,s=!1,o=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ok(t),ref:t&&Uy(t),scopeId:g0,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ci};return o?(JS(h,r),a&128&&e.normalize(h)):r&&(h.shapeFlag|=qi(r)?8:16),wm>0&&!s&&Ro&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&Ro.push(h),h}const Pe=x7;function x7(e,t=null,r=null,n=0,i=null,a=!1){if((!e||e===KN)&&(e=_a),Sm(e)){const o=fu(e,t,!0);return r&&JS(o,r),wm>0&&!a&&Ro&&(o.shapeFlag&6?Ro[Ro.indexOf(e)]=o:Ro.push(o)),o.patchFlag|=-2,o}if(D7(e)&&(e=e.__vccOpts),t){t=b7(t);let{class:o,style:h}=t;o&&!qi(o)&&(t.class=Ai(o)),ei(h)&&(ek(h)&&!Dr(h)&&(h=Gi({},h)),t.style=Xf(h))}const s=qi(e)?1:$N(e)?128:v7(e)?64:ei(e)?4:yr(e)?2:0;return er(e,t,r,n,i,s,a,!0)}function b7(e){return e?ek(e)||x0 in e?Gi({},e):e:null}function fu(e,t,r=!1){const{props:n,ref:i,patchFlag:a,children:s}=e,o=t?w_(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&Ok(o),ref:t&&t.ref?r&&i?Dr(i)?i.concat(Uy(t)):[i,Uy(t)]:Uy(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pr?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&fu(e.ssContent),ssFallback:e.ssFallback&&fu(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function ol(e=" ",t=0){return Pe(hu,null,e,t)}function w7(e,t){const r=Pe(qp,null,e);return r.staticCount=t,r}function on(e="",t=!1){return t?(lt(),En(_a,null,e)):Pe(_a,null,e)}function Lo(e){return e==null||typeof e=="boolean"?Pe(_a):Dr(e)?Pe(Pr,null,e.slice()):typeof e=="object"?Kl(e):Pe(hu,null,String(e))}function Kl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:fu(e)}function JS(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Dr(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),JS(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(x0 in t)?t._ctx=Ci:i===3&&Ci&&(Ci.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else yr(t)?(t={default:t,_ctx:Ci},r=32):(t=String(t),n&64?(r=16,t=[ol(t)]):r=8);e.children=t,e.shapeFlag|=r}function w_(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Ai([t.class,n.class]));else if(i==="style")t.style=Xf([t.style,n.style]);else if(f0(i)){const a=t[i],s=n[i];s&&a!==s&&!(Dr(a)&&a.includes(s))&&(t[i]=a?[].concat(a,s):s)}else i!==""&&(t[i]=n[i])}return t}function eo(e,t,r,n=null){co(e,t,7,[r,n])}const S7=Ck();let T7=0;function C7(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||S7,a={uid:T7++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new k$(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ak(n,i),emitsOptions:pk(n,i),emit:null,emitted:null,propsDefaults:bn,inheritAttrs:n.inheritAttrs,ctx:bn,data:bn,props:bn,attrs:bn,slots:bn,refs:bn,setupState:bn,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=RN.bind(null,a),e.ce&&e.ce(a),a}let ai=null;const uv=()=>ai||Ci;let QS,Bh,_M="__VUE_INSTANCE_SETTERS__";(Bh=Fw()[_M])||(Bh=Fw()[_M]=[]),Bh.push(e=>ai=e),QS=e=>{Bh.length>1?Bh.forEach(t=>t(e)):Bh[0](e)};const Af=e=>{QS(e),e.scope.on()},Fc=()=>{ai&&ai.scope.off(),QS(null)};function zk(e){return e.vnode.shapeFlag&4}let Mf=!1;function E7(e,t=!1){Mf=t;const{props:r,children:n}=e.vnode,i=zk(e);s7(e,r,i,t),c7(e,n);const a=i?A7(e,t):void 0;return Mf=!1,a}function A7(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=tk(new Proxy(e.ctx,QN));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?I7(e):null;Af(e),qf();const a=ou(n,e,0,[e.props,i]);if(Wf(),Fc(),sk(a)){if(a.then(Fc,Fc),t)return a.then(s=>{xM(e,s,t)}).catch(s=>{sv(s,e,0)});e.asyncDep=a}else xM(e,a,t)}else Bk(e,t)}function xM(e,t,r){yr(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ei(t)&&(e.setupState=nk(t)),Bk(e,r)}let bM;function Bk(e,t,r){const n=e.type;if(!e.render){if(!t&&bM&&!n.render){const i=n.template||ZS(e).template;if(i){const{isCustomElement:a,compilerOptions:s}=e.appContext.config,{delimiters:o,compilerOptions:h}=n,d=Gi(Gi({isCustomElement:a,delimiters:o},s),h);n.render=bM(i,d)}}e.render=n.render||ps}Af(e),qf(),e7(e),Wf(),Fc()}function M7(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return ba(e,"get","$attrs"),t[r]}}))}function I7(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return M7(e)},slots:e.slots,emit:e.emit,expose:t}}function b0(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(nk(tk(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in jp)return jp[r](e)},has(t,r){return r in t||r in jp}}))}function P7(e,t=!0){return yr(e)?e.displayName||e.name:e.name||t&&e.__name}function D7(e){return yr(e)&&"__vccOpts"in e}const ke=(e,t)=>vN(e,t,Mf);function _r(e,t,r){const n=arguments.length;return n===2?ei(t)&&!Dr(t)?Sm(t)?Pe(e,null,[t]):Pe(e,t):Pe(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Sm(r)&&(r=[r]),Pe(e,t,r))}const L7=Symbol.for("v-scx"),k7=()=>Br(L7),R7="3.3.4";function O7(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const z7=/^on[^a-z]/,B7=e=>z7.test(e),F7=e=>e.startsWith("onUpdate:"),w0=Object.assign,S0=Array.isArray,$7=e=>typeof e=="function",Tm=e=>typeof e=="string",N7=e=>e!==null&&typeof e=="object",Fk=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},V7=/\B([A-Z])/g,eT=Fk(e=>e.replace(V7,"-$1").toLowerCase()),U7=Fk(e=>e.charAt(0).toUpperCase()+e.slice(1)),H7=e=>{const t=Tm(e)?Number(e):NaN;return isNaN(t)?e:t},j7="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",G7=O7(j7);function $k(e){return!!e||e===""}const q7="http://www.w3.org/2000/svg",Ac=typeof document<"u"?document:null,wM=Ac&&Ac.createElement("template"),W7={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?Ac.createElementNS(q7,e):Ac.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Ac.createTextNode(e),createComment:e=>Ac.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ac.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,a){const s=r?r.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===a||!(i=i.nextSibling)););else{wM.innerHTML=n?`<svg>${e}</svg>`:e;const o=wM.content;if(n){const h=o.firstChild;for(;h.firstChild;)o.appendChild(h.firstChild);o.removeChild(h)}t.insertBefore(o,r)}return[s?s.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function X7(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function Z7(e,t,r){const n=e.style,i=Tm(r);if(r&&!i){if(t&&!Tm(t))for(const a in t)r[a]==null&&Gw(n,a,"");for(const a in r)Gw(n,a,r[a])}else{const a=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=a)}}const SM=/\s*!important$/;function Gw(e,t,r){if(S0(r))r.forEach(n=>Gw(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=Y7(e,t);SM.test(r)?e.setProperty(eT(n),r.replace(SM,""),"important"):e[n]=r}}const TM=["Webkit","Moz","ms"],Ex={};function Y7(e,t){const r=Ex[t];if(r)return r;let n=gs(t);if(n!=="filter"&&n in e)return Ex[t]=n;n=U7(n);for(let i=0;i<TM.length;i++){const a=TM[i]+n;if(a in e)return Ex[t]=a}return t}const CM="http://www.w3.org/1999/xlink";function K7(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(CM,t.slice(6,t.length)):e.setAttributeNS(CM,t,r);else{const a=G7(t);r==null||a&&!$k(r)?e.removeAttribute(t):e.setAttribute(t,a?"":r)}}function J7(e,t,r,n,i,a,s){if(t==="innerHTML"||t==="textContent"){n&&s(n,i,a),e[t]=r??"";return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){e._value=r;const d=o==="OPTION"?e.getAttribute("value"):e.value,m=r??"";d!==m&&(e.value=m),r==null&&e.removeAttribute(t);return}let h=!1;if(r===""||r==null){const d=typeof e[t];d==="boolean"?r=$k(r):r==null&&d==="string"?(r="",h=!0):d==="number"&&(r=0,h=!0)}try{e[t]=r}catch{}h&&e.removeAttribute(t)}function Q7(e,t,r,n){e.addEventListener(t,r,n)}function eV(e,t,r,n){e.removeEventListener(t,r,n)}function tV(e,t,r,n,i=null){const a=e._vei||(e._vei={}),s=a[t];if(n&&s)s.value=n;else{const[o,h]=rV(t);if(n){const d=a[t]=aV(n,i);Q7(e,o,d,h)}else s&&(eV(e,o,s,h),a[t]=void 0)}}const EM=/(?:Once|Passive|Capture)$/;function rV(e){let t;if(EM.test(e)){t={};let n;for(;n=e.match(EM);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):eT(e.slice(2)),t]}let Ax=0;const nV=Promise.resolve(),iV=()=>Ax||(nV.then(()=>Ax=0),Ax=Date.now());function aV(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;co(oV(n,r.value),t,5,[n])};return r.value=e,r.attached=iV(),r}function oV(e,t){if(S0(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const AM=/^on[a-z]/,sV=(e,t,r,n,i=!1,a,s,o,h)=>{t==="class"?X7(e,n,i):t==="style"?Z7(e,r,n):B7(t)?F7(t)||tV(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):lV(e,t,n,i))?J7(e,t,n,a,s,o,h):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),K7(e,t,n,i))};function lV(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&AM.test(t)&&$7(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||AM.test(t)&&Tm(r)?!1:t in e}const Vl="transition",ap="animation",vu=(e,{slots:t})=>_r(UN,Vk(e),t);vu.displayName="Transition";const Nk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},uV=vu.props=w0({},yk,Nk),Yu=(e,t=[])=>{S0(e)?e.forEach(r=>r(...t)):e&&e(...t)},MM=e=>e?S0(e)?e.some(t=>t.length>1):e.length>1:!1;function Vk(e){const t={};for(const le in e)le in Nk||(t[le]=e[le]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:a=`${r}-enter-from`,enterActiveClass:s=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:h=a,appearActiveClass:d=s,appearToClass:m=o,leaveFromClass:g=`${r}-leave-from`,leaveActiveClass:y=`${r}-leave-active`,leaveToClass:x=`${r}-leave-to`}=e,T=cV(i),M=T&&T[0],P=T&&T[1],{onBeforeEnter:I,onEnter:D,onEnterCancelled:R,onLeave:B,onLeaveCancelled:H,onBeforeAppear:V=I,onAppear:q=D,onAppearCancelled:j=R}=t,te=(le,de,ae)=>{Xl(le,de?m:o),Xl(le,de?d:s),ae&&ae()},ne=(le,de)=>{le._isLeaving=!1,Xl(le,g),Xl(le,x),Xl(le,y),de&&de()},ce=le=>(de,ae)=>{const Se=le?q:D,ve=()=>te(de,le,ae);Yu(Se,[de,ve]),IM(()=>{Xl(de,le?h:a),Ws(de,le?m:o),MM(Se)||PM(de,n,M,ve)})};return w0(t,{onBeforeEnter(le){Yu(I,[le]),Ws(le,a),Ws(le,s)},onBeforeAppear(le){Yu(V,[le]),Ws(le,h),Ws(le,d)},onEnter:ce(!1),onAppear:ce(!0),onLeave(le,de){le._isLeaving=!0;const ae=()=>ne(le,de);Ws(le,g),Hk(),Ws(le,y),IM(()=>{le._isLeaving&&(Xl(le,g),Ws(le,x),MM(B)||PM(le,n,P,ae))}),Yu(B,[le,ae])},onEnterCancelled(le){te(le,!1),Yu(R,[le])},onAppearCancelled(le){te(le,!0),Yu(j,[le])},onLeaveCancelled(le){ne(le),Yu(H,[le])}})}function cV(e){if(e==null)return null;if(N7(e))return[Mx(e.enter),Mx(e.leave)];{const t=Mx(e);return[t,t]}}function Mx(e){return H7(e)}function Ws(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function Xl(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function IM(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let hV=0;function PM(e,t,r,n){const i=e._endId=++hV,a=()=>{i===e._endId&&n()};if(r)return setTimeout(a,r);const{type:s,timeout:o,propCount:h}=Uk(e,t);if(!s)return n();const d=s+"end";let m=0;const g=()=>{e.removeEventListener(d,y),a()},y=x=>{x.target===e&&++m>=h&&g()};setTimeout(()=>{m<h&&g()},o+1),e.addEventListener(d,y)}function Uk(e,t){const r=window.getComputedStyle(e),n=T=>(r[T]||"").split(", "),i=n(`${Vl}Delay`),a=n(`${Vl}Duration`),s=DM(i,a),o=n(`${ap}Delay`),h=n(`${ap}Duration`),d=DM(o,h);let m=null,g=0,y=0;t===Vl?s>0&&(m=Vl,g=s,y=a.length):t===ap?d>0&&(m=ap,g=d,y=h.length):(g=Math.max(s,d),m=g>0?s>d?Vl:ap:null,y=m?m===Vl?a.length:h.length:0);const x=m===Vl&&/\b(transform|all)(,|$)/.test(n(`${Vl}Property`).toString());return{type:m,timeout:g,propCount:y,hasTransform:x}}function DM(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>LM(r)+LM(e[n])))}function LM(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Hk(){return document.body.offsetHeight}const jk=new WeakMap,Gk=new WeakMap,qk={name:"TransitionGroup",props:w0({},uV,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=uv(),n=gk();let i,a;return _0(()=>{if(!i.length)return;const s=e.moveClass||`${e.name||"v"}-move`;if(!vV(i[0].el,r.vnode.el,s))return;i.forEach(dV),i.forEach(pV);const o=i.filter(mV);Hk(),o.forEach(h=>{const d=h.el,m=d.style;Ws(d,s),m.transform=m.webkitTransform=m.transitionDuration="";const g=d._moveCb=y=>{y&&y.target!==d||(!y||/transform$/.test(y.propertyName))&&(d.removeEventListener("transitionend",g),d._moveCb=null,Xl(d,s))};d.addEventListener("transitionend",g)})}),()=>{const s=Fr(e),o=Vk(s);let h=s.tag||Pr;i=a,a=t.default?XS(t.default()):[];for(let d=0;d<a.length;d++){const m=a[d];m.key!=null&&bm(m,xm(m,o,n,r))}if(i)for(let d=0;d<i.length;d++){const m=i[d];bm(m,xm(m,o,n,r)),jk.set(m,m.el.getBoundingClientRect())}return Pe(h,null,a)}}},fV=e=>delete e.mode;qk.props;const Wk=qk;function dV(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function pV(e){Gk.set(e,e.el.getBoundingClientRect())}function mV(e){const t=jk.get(e),r=Gk.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${i}px)`,a.transitionDuration="0s",e}}function vV(e,t,r){const n=e.cloneNode();e._vtc&&e._vtc.forEach(s=>{s.split(/\s+/).forEach(o=>o&&n.classList.remove(o))}),r.split(/\s+/).forEach(s=>s&&n.classList.add(s)),n.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(n);const{hasTransform:a}=Uk(n);return i.removeChild(n),a}const gV={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},yV=(e,t)=>r=>{if(!("key"in r))return;const n=eT(r.key);if(t.some(i=>i===n||gV[i]===n))return e(r)},S_={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):op(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),op(e,!0),n.enter(e)):n.leave(e,()=>{op(e,!1)}):op(e,t))},beforeUnmount(e,{value:t}){op(e,t)}};function op(e,t){e.style.display=t?e._vod:"none"}const Xk=w0({patchProp:sV},W7);let Xp,kM=!1;function _V(){return Xp||(Xp=d7(Xk))}function xV(){return Xp=kM?Xp:p7(Xk),kM=!0,Xp}const T_=(...e)=>{_V().render(...e)},bV=(...e)=>{const t=xV().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=wV(n);if(i)return r(i,!0,i instanceof SVGElement)},t};function wV(e){return Tm(e)?document.querySelector(e):e}const SV={"v-8daa1a0e":()=>Ne(()=>import("./index.html-462e1a41.js"),[]).then(({data:e})=>e),"v-74bc627b":()=>Ne(()=>import("./index.html-eb18c019.js"),[]).then(({data:e})=>e),"v-08ae5eba":()=>Ne(()=>import("./2018-2019.html-6df7b75f.js"),[]).then(({data:e})=>e),"v-93cfbde4":()=>Ne(()=>import("./2019-2020.html-4ce2d375.js"),[]).then(({data:e})=>e),"v-f917537a":()=>Ne(()=>import("./2020-2021.html-93c2659b.js"),[]).then(({data:e})=>e),"v-1a0de1a3":()=>Ne(()=>import("./2021-2022.html-0c8f639e.js"),[]).then(({data:e})=>e),"v-190ab309":()=>Ne(()=>import("./2021fall.html-fecf308b.js"),[]).then(({data:e})=>e),"v-9eb125fa":()=>Ne(()=>import("./2022-2023.html-c6606309.js"),[]).then(({data:e})=>e),"v-96167c50":()=>Ne(()=>import("./index.html-be8a5214.js"),[]).then(({data:e})=>e),"v-96536bf0":()=>Ne(()=>import("./index.html-12e2a17e.js"),[]).then(({data:e})=>e),"v-dbd38712":()=>Ne(()=>import("./index.html-f6e4f59a.js"),[]).then(({data:e})=>e),"v-c73889da":()=>Ne(()=>import("./index.html-bca1b7e0.js"),[]).then(({data:e})=>e),"v-2c5c0e04":()=>Ne(()=>import("./building-11-elevator.html-41e8732d.js"),[]).then(({data:e})=>e),"v-104cfa63":()=>Ne(()=>import("./2021.html-ab8984b0.js"),[]).then(({data:e})=>e),"v-780207b9":()=>Ne(()=>import("./index.html-0db73764.js"),[]).then(({data:e})=>e),"v-14e6315a":()=>Ne(()=>import("./index.html-edcdf602.js"),[]).then(({data:e})=>e),"v-42f2be94":()=>Ne(()=>import("./vehicle-charger.html-a72444cb.js"),[]).then(({data:e})=>e),"v-ed48bdf8":()=>Ne(()=>import("./index.html-834a4f2f.js"),[]).then(({data:e})=>e),"v-f4bc5604":()=>Ne(()=>import("./index.html-eb5540a3.js"),[]).then(({data:e})=>e),"v-1500d063":()=>Ne(()=>import("./index.html-6ebee453.js"),[]).then(({data:e})=>e),"v-014445c8":()=>Ne(()=>import("./index.html-f08a1eb2.js"),[]).then(({data:e})=>e),"v-461d4a7c":()=>Ne(()=>import("./registered-organization-2019.html-980e7607.js"),[]).then(({data:e})=>e),"v-6ba7e826":()=>Ne(()=>import("./registered-organization-2020.html-84bee617.js"),[]).then(({data:e})=>e),"v-6d5cc0c5":()=>Ne(()=>import("./registered-organization-2021.html-f788e063.js"),[]).then(({data:e})=>e),"v-28ddfa13":()=>Ne(()=>import("./index.html-192e6564.js"),[]).then(({data:e})=>e),"v-be92ea7e":()=>Ne(()=>import("./index.html-449d2048.js"),[]).then(({data:e})=>e),"v-d7188082":()=>Ne(()=>import("./index.html-a63adfde.js"),[]).then(({data:e})=>e),"v-d1061704":()=>Ne(()=>import("./paper-tools.html-60251304.js"),[]).then(({data:e})=>e),"v-4322d0a7":()=>Ne(()=>import("./index.html-8deb1c72.js"),[]).then(({data:e})=>e),"v-69b23ddf":()=>Ne(()=>import("./index.html-83cc8007.js"),[]).then(({data:e})=>e),"v-57bda71b":()=>Ne(()=>import("./bustimer-old.html-3fa28d4a.js"),[]).then(({data:e})=>e),"v-1678dd6f":()=>Ne(()=>import("./bustimer-wx.html-5340cb55.js"),[]).then(({data:e})=>e),"v-1630dfb5":()=>Ne(()=>import("./bustimer.html-3a0ac59e.js"),[]).then(({data:e})=>e),"v-6a28f6e0":()=>Ne(()=>import("./holiday.html-154443ae.js"),[]).then(({data:e})=>e),"v-48975204":()=>Ne(()=>import("./redirect.html-d18ba873.js"),[]).then(({data:e})=>e),"v-8059a7a6":()=>Ne(()=>import("./workday.html-2d182c51.js"),[]).then(({data:e})=>e),"v-181cc452":()=>Ne(()=>import("./index.html-8738d0f4.js"),[]).then(({data:e})=>e),"v-22cd7d0c":()=>Ne(()=>import("./index.html-64466982.js"),[]).then(({data:e})=>e),"v-0e92d420":()=>Ne(()=>import("./index.html-75b00be9.js"),[]).then(({data:e})=>e),"v-2b8cac58":()=>Ne(()=>import("./.html-0d2fe2da.js"),[]).then(({data:e})=>e),"v-66965350":()=>Ne(()=>import("./.html-72f9af6d.js"),[]).then(({data:e})=>e),"v-66317da4":()=>Ne(()=>import("./.html-c33ad481.js"),[]).then(({data:e})=>e),"v-5c3fcdf6":()=>Ne(()=>import("./index.html-db49a6e1.js"),[]).then(({data:e})=>e),"v-04710004":()=>Ne(()=>import("./index.html-6e033e10.js"),[]).then(({data:e})=>e),"v-5589dd0c":()=>Ne(()=>import("./dorm-floor-plan.html-6ee8bfb0.js"),[]).then(({data:e})=>e),"v-d42194b6":()=>Ne(()=>import("./index.html-f8e292f5.js"),[]).then(({data:e})=>e),"v-20383a78":()=>Ne(()=>import("./index.html-bf6a4e46.js"),[]).then(({data:e})=>e),"v-42c1fa44":()=>Ne(()=>import("./index.html-a7f6b4a6.js"),[]).then(({data:e})=>e),"v-76cff034":()=>Ne(()=>import("./index.html-e5b751d4.js"),[]).then(({data:e})=>e),"v-ac3449b2":()=>Ne(()=>import("./send-receive-email-by-proxy.html-ef9676fa.js"),[]).then(({data:e})=>e),"v-29860ed0":()=>Ne(()=>import("./index.html-19231713.js"),[]).then(({data:e})=>e),"v-622da02f":()=>Ne(()=>import("./index.html-46ffb0d9.js"),[]).then(({data:e})=>e),"v-5e590ec6":()=>Ne(()=>import("./index.html-55df6efe.js"),[]).then(({data:e})=>e),"v-1fa222d4":()=>Ne(()=>import("./index.html-029f5c94.js"),[]).then(({data:e})=>e),"v-48519846":()=>Ne(()=>import("./index.html-3e960530.js"),[]).then(({data:e})=>e),"v-369295b4":()=>Ne(()=>import("./index.html-552b04b5.js"),[]).then(({data:e})=>e),"v-3692bb1f":()=>Ne(()=>import("./index.html-9fe9badf.js"),[]).then(({data:e})=>e),"v-425958ce":()=>Ne(()=>import("./index.html-e591657c.js"),[]).then(({data:e})=>e),"v-3692ee77":()=>Ne(()=>import("./index.html-f923fcd8.js"),[]).then(({data:e})=>e),"v-2686552a":()=>Ne(()=>import("./index.html-2f188677.js"),[]).then(({data:e})=>e),"v-45d74ec0":()=>Ne(()=>import("./index.html-14741737.js"),[]).then(({data:e})=>e),"v-772a5784":()=>Ne(()=>import("./index.html-789f2b28.js"),[]).then(({data:e})=>e),"v-8460eeb8":()=>Ne(()=>import("./advice-on-study.html-ef8bfd6e.js"),[]).then(({data:e})=>e),"v-435bd49a":()=>Ne(()=>import("./info-on-study.html-25641cb9.js"),[]).then(({data:e})=>e),"v-6323734e":()=>Ne(()=>import("./.html-85ec4859.js"),[]).then(({data:e})=>e),"v-5eb748bf":()=>Ne(()=>import("./innovative-project.html-71803d9e.js"),[]).then(({data:e})=>e),"v-2a23f022":()=>Ne(()=>import("./index.html-454a6b7e.js"),[]).then(({data:e})=>e),"v-66061b92":()=>Ne(()=>import("./index.html-75885907.js"),[]).then(({data:e})=>e),"v-89ac2bec":()=>Ne(()=>import("./index.html-10468cac.js"),[]).then(({data:e})=>e),"v-1549b190":()=>Ne(()=>import("./index.html-5a2e0f63.js"),[]).then(({data:e})=>e),"v-9e1961f8":()=>Ne(()=>import("./index.html-67d10bc8.js"),[]).then(({data:e})=>e),"v-6bba5e58":()=>Ne(()=>import("./index.html-b9c5d45e.js"),[]).then(({data:e})=>e),"v-83a77034":()=>Ne(()=>import("./index.html-b292bf67.js"),[]).then(({data:e})=>e),"v-296d1d15":()=>Ne(()=>import("./index.html-0f8514a5.js"),[]).then(({data:e})=>e),"v-fb711be8":()=>Ne(()=>import("./index.html-252b8cfb.js"),[]).then(({data:e})=>e),"v-3706649a":()=>Ne(()=>import("./404.html-f9875e7b.js"),[]).then(({data:e})=>e)},TV=JSON.parse(`{"base":"/","lang":"en-US","title":"","description":"","head":[["link",{"rel":"icon","href":"/logo-assets/touch/homescreen192.png"}],["meta",{"name":"theme-color","content":"#49BF7C"}],["link",{"rel":"manifest","href":"/manifest.webmanifest"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:type","content":"article"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:image","content":"https://mirrors.sustech.edu.cn/git/sustech-online/sustech-online-ng/-/raw/master/docs/assets/og-image.png"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:article:author","content":"sustech.online"}],["meta",{"name":"apple-mobile-web-app-capable","content":"yes"}],["meta",{"name":"apple-mobile-web-app-status-bar-style","content":"black"}],["link",{"rel":"apple-touch-icon","href":"/logo-assets/touch/homescreen168.png"}],["meta",{"name":"msapplication-TileImage","content":"/logo-assets/touch/homescreen144.png"}],["meta",{"name":"msapplication-TileColor","content":"#49BF7C"}],["meta",{"name":"google-site-verification","content":"Av-srANCmFA_yZ8Iasa1yQsIPJCF_zlP5AoD35m6_Ww"}],["script",{"async":true,"src":"https://googletagmanager.com/gtag/js?id=G-1BQBXDGY3R"}],["script",{},"\\n                        window.dataLayer = window.dataLayer || [];\\n                        function gtag(){dataLayer.push(arguments);}\\n                        gtag('js', new Date());\\n                        gtag('config', 'G-1BQBXDGY3R');\\n                        "],["script",{"src":"/wx_helper.js"}],["script",{"src":"https://res.wx.qq.com/open/js/jweixin-1.6.0.js"}],["script",{"src":"https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"}],["script",{"src":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"}],["script",{"src":"https://lib.baomitu.com/datatables/1.10.21/js/jquery.dataTables.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/datatables/1.10.21/css/jquery.dataTables.min.css"}]],"locales":{"/":{"title":"","lang":"zh-CN","description":"Online manual for sustecher"}}}`),cv=Array.isArray,CV=e=>typeof e=="function",ms=e=>typeof e=="string";var EV=([e,t,r])=>e==="meta"&&t.name?`${e}.${t.name}`:["title","base"].includes(e)?e:e==="template"&&t.id?`${e}.${t.id}`:JSON.stringify([e,t,r]),AV=e=>{const t=new Set,r=[];return e.forEach(n=>{const i=EV(n);t.has(i)||(t.add(i),r.push(n))}),r},hv=e=>/^(https?:)?\/\//.test(e),MV=e=>/^mailto:/.test(e),IV=e=>/^tel:/.test(e),tT=e=>Object.prototype.toString.call(e)==="[object Object]",Zk=e=>e[e.length-1]==="/"?e.slice(0,-1):e,Yk=e=>e[0]==="/"?e.slice(1):e,Kk=(e,t)=>{const r=Object.keys(e).sort((n,i)=>{const a=i.split("/").length-n.split("/").length;return a!==0?a:i.length-n.length});for(const n of r)if(t.startsWith(n))return n;return"/"},RM=(e,t="/")=>{const r=e.replace(/^(https?:)?\/\/[^/]*/,"");return r.startsWith(t)?`/${r.slice(t.length)}`:r};const Jk={"v-8daa1a0e":It(()=>Ne(()=>import("./index.html-12bf8d21.js"),[])),"v-74bc627b":It(()=>Ne(()=>import("./index.html-a19eccc2.js"),[])),"v-08ae5eba":It(()=>Ne(()=>import("./2018-2019.html-4f14e284.js"),[])),"v-93cfbde4":It(()=>Ne(()=>import("./2019-2020.html-4ce6c29c.js"),[])),"v-f917537a":It(()=>Ne(()=>import("./2020-2021.html-693b40ae.js"),[])),"v-1a0de1a3":It(()=>Ne(()=>import("./2021-2022.html-af3b1c17.js"),[])),"v-190ab309":It(()=>Ne(()=>import("./2021fall.html-ce4e0fbb.js"),[])),"v-9eb125fa":It(()=>Ne(()=>import("./2022-2023.html-025f10cc.js"),["assets/2022-2023.html-025f10cc.js","assets/22-23-spring-0b3d9f4c.js"])),"v-96167c50":It(()=>Ne(()=>import("./index.html-c0f55c81.js"),["assets/index.html-c0f55c81.js","assets/22-23-spring-0b3d9f4c.js"])),"v-96536bf0":It(()=>Ne(()=>import("./index.html-afd69386.js"),[])),"v-dbd38712":It(()=>Ne(()=>import("./index.html-224ffa42.js"),[])),"v-c73889da":It(()=>Ne(()=>import("./index.html-d720b3f4.js"),[])),"v-2c5c0e04":It(()=>Ne(()=>import("./building-11-elevator.html-ed378097.js"),[])),"v-104cfa63":It(()=>Ne(()=>import("./2021.html-bcf2a55f.js"),[])),"v-780207b9":It(()=>Ne(()=>import("./index.html-269af3a0.js"),[])),"v-14e6315a":It(()=>Ne(()=>import("./index.html-c41d4043.js"),[])),"v-42f2be94":It(()=>Ne(()=>import("./vehicle-charger.html-364a24d6.js"),[])),"v-ed48bdf8":It(()=>Ne(()=>import("./index.html-beecf797.js"),[])),"v-f4bc5604":It(()=>Ne(()=>import("./index.html-7991f237.js"),[])),"v-1500d063":It(()=>Ne(()=>import("./index.html-f25e98ef.js"),[])),"v-014445c8":It(()=>Ne(()=>import("./index.html-964afda5.js"),[])),"v-461d4a7c":It(()=>Ne(()=>import("./registered-organization-2019.html-82a22c86.js"),[])),"v-6ba7e826":It(()=>Ne(()=>import("./registered-organization-2020.html-efd01ba0.js"),[])),"v-6d5cc0c5":It(()=>Ne(()=>import("./registered-organization-2021.html-1b11fc91.js"),[])),"v-28ddfa13":It(()=>Ne(()=>import("./index.html-1ca089a4.js"),[])),"v-be92ea7e":It(()=>Ne(()=>import("./index.html-7d4a67ae.js"),[])),"v-d7188082":It(()=>Ne(()=>import("./index.html-1e43251c.js"),[])),"v-d1061704":It(()=>Ne(()=>import("./paper-tools.html-9a1fcfbe.js"),[])),"v-4322d0a7":It(()=>Ne(()=>import("./index.html-f2215abd.js"),["assets/index.html-f2215abd.js","assets/1-ba814636.js"])),"v-69b23ddf":It(()=>Ne(()=>import("./index.html-c1f06254.js"),["assets/index.html-c1f06254.js","assets/1-ba814636.js"])),"v-57bda71b":It(()=>Ne(()=>import("./bustimer-old.html-799e9c99.js"),["assets/bustimer-old.html-799e9c99.js","assets/busline2-c318b2e1.js"])),"v-1678dd6f":It(()=>Ne(()=>import("./bustimer-wx.html-d146fb20.js"),[])),"v-1630dfb5":It(()=>Ne(()=>import("./bustimer.html-441c9e55.js"),[])),"v-6a28f6e0":It(()=>Ne(()=>import("./holiday.html-1eb1d17b.js"),["assets/holiday.html-1eb1d17b.js","assets/busline2-c318b2e1.js"])),"v-48975204":It(()=>Ne(()=>import("./redirect.html-b9f752fe.js"),[])),"v-8059a7a6":It(()=>Ne(()=>import("./workday.html-b64ddb05.js"),["assets/workday.html-b64ddb05.js","assets/busline2-c318b2e1.js"])),"v-181cc452":It(()=>Ne(()=>import("./index.html-64a2042c.js"),[])),"v-22cd7d0c":It(()=>Ne(()=>import("./index.html-a702fd71.js"),[])),"v-0e92d420":It(()=>Ne(()=>import("./index.html-0d53b1a7.js"),[])),"v-2b8cac58":It(()=>Ne(()=>import("./.html-2a9bdbb7.js"),[])),"v-66965350":It(()=>Ne(()=>import("./.html-cce0f604.js"),[])),"v-66317da4":It(()=>Ne(()=>import("./.html-716f7840.js"),[])),"v-5c3fcdf6":It(()=>Ne(()=>import("./index.html-5887456f.js"),[])),"v-04710004":It(()=>Ne(()=>import("./index.html-533128e2.js"),[])),"v-5589dd0c":It(()=>Ne(()=>import("./dorm-floor-plan.html-82377a91.js"),[])),"v-d42194b6":It(()=>Ne(()=>import("./index.html-e7ac1f10.js"),[])),"v-20383a78":It(()=>Ne(()=>import("./index.html-01dd5162.js"),[])),"v-42c1fa44":It(()=>Ne(()=>import("./index.html-cbc7a773.js"),[])),"v-76cff034":It(()=>Ne(()=>import("./index.html-722a16e5.js"),[])),"v-ac3449b2":It(()=>Ne(()=>import("./send-receive-email-by-proxy.html-85fc27e6.js"),[])),"v-29860ed0":It(()=>Ne(()=>import("./index.html-e3882e3f.js"),[])),"v-622da02f":It(()=>Ne(()=>import("./index.html-5a271d23.js"),[])),"v-5e590ec6":It(()=>Ne(()=>import("./index.html-0a0c3287.js"),[])),"v-1fa222d4":It(()=>Ne(()=>import("./index.html-c77ab5dd.js"),[])),"v-48519846":It(()=>Ne(()=>import("./index.html-b2e03dea.js"),[])),"v-369295b4":It(()=>Ne(()=>import("./index.html-bebf3378.js"),[])),"v-3692bb1f":It(()=>Ne(()=>import("./index.html-dc815495.js"),[])),"v-425958ce":It(()=>Ne(()=>import("./index.html-6b086a7e.js"),[])),"v-3692ee77":It(()=>Ne(()=>import("./index.html-b7f850b2.js"),[])),"v-2686552a":It(()=>Ne(()=>import("./index.html-f5128e20.js"),[])),"v-45d74ec0":It(()=>Ne(()=>import("./index.html-0c21fe22.js"),[])),"v-772a5784":It(()=>Ne(()=>import("./index.html-515d9f67.js"),[])),"v-8460eeb8":It(()=>Ne(()=>import("./advice-on-study.html-0ef3e209.js"),[])),"v-435bd49a":It(()=>Ne(()=>import("./info-on-study.html-93db5c8f.js"),[])),"v-6323734e":It(()=>Ne(()=>import("./.html-b9bf8262.js"),[])),"v-5eb748bf":It(()=>Ne(()=>import("./innovative-project.html-8a4ade91.js"),[])),"v-2a23f022":It(()=>Ne(()=>import("./index.html-00484c34.js"),[])),"v-66061b92":It(()=>Ne(()=>import("./index.html-469142f7.js"),[])),"v-89ac2bec":It(()=>Ne(()=>import("./index.html-356e7e10.js"),[])),"v-1549b190":It(()=>Ne(()=>import("./index.html-ba220154.js"),[])),"v-9e1961f8":It(()=>Ne(()=>import("./index.html-0b347844.js"),[])),"v-6bba5e58":It(()=>Ne(()=>import("./index.html-ad5de8d3.js"),[])),"v-83a77034":It(()=>Ne(()=>import("./index.html-5a2341d7.js"),[])),"v-296d1d15":It(()=>Ne(()=>import("./index.html-8b7f4a94.js"),[])),"v-fb711be8":It(()=>Ne(()=>import("./index.html-492e80e6.js"),[])),"v-3706649a":It(()=>Ne(()=>import("./404.html-91387a4b.js"),[]))};var PV=Symbol(""),Qk=Symbol(""),DV=av({key:"",path:"",title:"",lang:"",frontmatter:{},headers:[]}),su=()=>{const e=Br(Qk);if(!e)throw new Error("pageData() is called without provider.");return e},e4=Symbol(""),rl=()=>{const e=Br(e4);if(!e)throw new Error("usePageFrontmatter() is called without provider.");return e},t4=Symbol(""),LV=()=>{const e=Br(t4);if(!e)throw new Error("usePageHead() is called without provider.");return e},kV=Symbol(""),r4=Symbol(""),n4=()=>{const e=Br(r4);if(!e)throw new Error("usePageLang() is called without provider.");return e},i4=Symbol(""),RV=()=>{const e=Br(i4);if(!e)throw new Error("usePageLayout() is called without provider.");return e},OV=xr(SV),rT=Symbol(""),fv=()=>{const e=Br(rT);if(!e)throw new Error("useRouteLocale() is called without provider.");return e},sf=xr(TV),a4=()=>sf,o4=Symbol(""),nT=()=>{const e=Br(o4);if(!e)throw new Error("useSiteLocaleData() is called without provider.");return e},zV=Symbol(""),BV="Layout",FV="NotFound",Xs=wa({resolveLayouts:e=>e.reduce((t,r)=>({...t,...r.layouts}),{}),resolvePageData:async e=>{const t=OV.value[e];return await(t==null?void 0:t())??DV},resolvePageFrontmatter:e=>e.frontmatter,resolvePageHead:(e,t,r)=>{const n=ms(t.description)?t.description:r.description,i=[...cv(t.head)?t.head:[],...r.head,["title",{},e],["meta",{name:"description",content:n}]];return AV(i)},resolvePageHeadTitle:(e,t)=>[e.title,t.title].filter(r=>!!r).join(" | "),resolvePageLang:(e,t)=>e.lang||t.lang||"en-US",resolvePageLayout:(e,t)=>{let r;if(e.path){const n=e.frontmatter.layout;ms(n)?r=n:r=BV}else r=FV;return t[r]},resolveRouteLocale:(e,t)=>Kk(e,t),resolveSiteLocaleData:(e,t)=>({...e,...e.locales[t]})}),iT=jt({name:"ClientOnly",setup(e,t){const r=xr(!1);return ti(()=>{r.value=!0}),()=>{var n,i;return r.value?(i=(n=t.slots).default)==null?void 0:i.call(n):null}}}),$V=jt({name:"Content",props:{pageKey:{type:String,required:!1,default:""}},setup(e){const t=su(),r=ke(()=>Jk[e.pageKey||t.value.key]);return()=>r.value?_r(r.value):_r("div","404 Not Found")}}),Uo=(e={})=>e,T0=e=>hv(e)?e:`/${Yk(e)}`;function aT(e,t,r){var n,i,a;t===void 0&&(t=50),r===void 0&&(r={});var s=(n=r.isImmediate)!=null&&n,o=(i=r.callback)!=null&&i,h=r.maxWait,d=Date.now(),m=[];function g(){if(h!==void 0){var x=Date.now()-d;if(x+t>=h)return h-x}return t}var y=function(){var x=[].slice.call(arguments),T=this;return new Promise(function(M,P){var I=s&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,d=Date.now(),!s){var R=e.apply(T,x);o&&o(R),m.forEach(function(B){return(0,B.resolve)(R)}),m=[]}},g()),I){var D=e.apply(T,x);return o&&o(D),M(D)}m.push({resolve:M,reject:P})})};return y.cancel=function(x){a!==void 0&&clearTimeout(a),m.forEach(function(T){return(0,T.reject)(x)}),m=[]},y}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const tf=typeof window<"u";function NV(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Jr=Object.assign;function Ix(e,t){const r={};for(const n in t){const i=t[n];r[n]=$o(i)?i.map(e):e(i)}return r}const Zp=()=>{},$o=Array.isArray,VV=/\/$/,UV=e=>e.replace(VV,"");function Px(e,t,r="/"){let n,i={},a="",s="";const o=t.indexOf("#");let h=t.indexOf("?");return o<h&&o>=0&&(h=-1),h>-1&&(n=t.slice(0,h),a=t.slice(h+1,o>-1?o:t.length),i=e(a)),o>-1&&(n=n||t.slice(0,o),s=t.slice(o,t.length)),n=qV(n??t,r),{fullPath:n+(a&&"?")+a+s,path:n,query:i,hash:s}}function HV(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function OM(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function jV(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&If(t.matched[n],r.matched[i])&&s4(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function If(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function s4(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!GV(e[r],t[r]))return!1;return!0}function GV(e,t){return $o(e)?zM(e,t):$o(t)?zM(t,e):e===t}function zM(e,t){return $o(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function qV(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let a=r.length-1,s,o;for(s=0;s<n.length;s++)if(o=n[s],o!==".")if(o==="..")a>1&&a--;else break;return r.slice(0,a).join("/")+"/"+n.slice(s-(s===n.length?1:0)).join("/")}var Cm;(function(e){e.pop="pop",e.push="push"})(Cm||(Cm={}));var Yp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Yp||(Yp={}));function WV(e){if(!e)if(tf){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),UV(e)}const XV=/^[^#]+#/;function ZV(e,t){return e.replace(XV,"#")+t}function YV(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const C0=()=>({left:window.pageXOffset,top:window.pageYOffset});function KV(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=YV(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function BM(e,t){return(history.state?history.state.position-t:-1)+e}const qw=new Map;function JV(e,t){qw.set(e,t)}function QV(e){const t=qw.get(e);return qw.delete(e),t}let eU=()=>location.protocol+"//"+location.host;function l4(e,t){const{pathname:r,search:n,hash:i}=t,a=e.indexOf("#");if(a>-1){let o=i.includes(e.slice(a))?e.slice(a).length:1,h=i.slice(o);return h[0]!=="/"&&(h="/"+h),OM(h,"")}return OM(r,e)+n+i}function tU(e,t,r,n){let i=[],a=[],s=null;const o=({state:y})=>{const x=l4(e,location),T=r.value,M=t.value;let P=0;if(y){if(r.value=x,t.value=y,s&&s===T){s=null;return}P=M?y.position-M.position:0}else n(x);i.forEach(I=>{I(r.value,T,{delta:P,type:Cm.pop,direction:P?P>0?Yp.forward:Yp.back:Yp.unknown})})};function h(){s=r.value}function d(y){i.push(y);const x=()=>{const T=i.indexOf(y);T>-1&&i.splice(T,1)};return a.push(x),x}function m(){const{history:y}=window;y.state&&y.replaceState(Jr({},y.state,{scroll:C0()}),"")}function g(){for(const y of a)y();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",m,{passive:!0}),{pauseListeners:h,listen:d,destroy:g}}function FM(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?C0():null}}function rU(e){const{history:t,location:r}=window,n={value:l4(e,r)},i={value:t.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(h,d,m){const g=e.indexOf("#"),y=g>-1?(r.host&&document.querySelector("base")?e:e.slice(g))+h:eU()+e+h;try{t[m?"replaceState":"pushState"](d,"",y),i.value=d}catch(x){console.error(x),r[m?"replace":"assign"](y)}}function s(h,d){const m=Jr({},t.state,FM(i.value.back,h,i.value.forward,!0),d,{position:i.value.position});a(h,m,!0),n.value=h}function o(h,d){const m=Jr({},i.value,t.state,{forward:h,scroll:C0()});a(m.current,m,!0);const g=Jr({},FM(n.value,h,null),{position:m.position+1},d);a(h,g,!1),n.value=h}return{location:n,state:i,push:o,replace:s}}function nU(e){e=WV(e);const t=rU(e),r=tU(e,t.state,t.location,t.replace);function n(a,s=!0){s||r.pauseListeners(),history.go(a)}const i=Jr({location:"",base:e,go:n,createHref:ZV.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function iU(e){return typeof e=="string"||e&&typeof e=="object"}function u4(e){return typeof e=="string"||typeof e=="symbol"}const Zs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},c4=Symbol("");var $M;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})($M||($M={}));function Pf(e,t){return Jr(new Error,{type:e,[c4]:!0},t)}function Ns(e,t){return e instanceof Error&&c4 in e&&(t==null||!!(e.type&t))}const NM="[^/]+?",aU={sensitive:!1,strict:!1,start:!0,end:!0},oU=/[.+*?^${}()[\]/\\]/g;function sU(e,t){const r=Jr({},aU,t),n=[];let i=r.start?"^":"";const a=[];for(const d of e){const m=d.length?[]:[90];r.strict&&!d.length&&(i+="/");for(let g=0;g<d.length;g++){const y=d[g];let x=40+(r.sensitive?.25:0);if(y.type===0)g||(i+="/"),i+=y.value.replace(oU,"\\$&"),x+=40;else if(y.type===1){const{value:T,repeatable:M,optional:P,regexp:I}=y;a.push({name:T,repeatable:M,optional:P});const D=I||NM;if(D!==NM){x+=10;try{new RegExp(`(${D})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${T}" (${D}): `+B.message)}}let R=M?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;g||(R=P&&d.length<2?`(?:/${R})`:"/"+R),P&&(R+="?"),i+=R,x+=20,P&&(x+=-8),M&&(x+=-20),D===".*"&&(x+=-50)}m.push(x)}n.push(m)}if(r.strict&&r.end){const d=n.length-1;n[d][n[d].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const s=new RegExp(i,r.sensitive?"":"i");function o(d){const m=d.match(s),g={};if(!m)return null;for(let y=1;y<m.length;y++){const x=m[y]||"",T=a[y-1];g[T.name]=x&&T.repeatable?x.split("/"):x}return g}function h(d){let m="",g=!1;for(const y of e){(!g||!m.endsWith("/"))&&(m+="/"),g=!1;for(const x of y)if(x.type===0)m+=x.value;else if(x.type===1){const{value:T,repeatable:M,optional:P}=x,I=T in d?d[T]:"";if($o(I)&&!M)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const D=$o(I)?I.join("/"):I;if(!D)if(P)y.length<2&&(m.endsWith("/")?m=m.slice(0,-1):g=!0);else throw new Error(`Missing required param "${T}"`);m+=D}}return m||"/"}return{re:s,score:n,keys:a,parse:o,stringify:h}}function lU(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function uU(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const a=lU(n[r],i[r]);if(a)return a;r++}if(Math.abs(i.length-n.length)===1){if(VM(n))return 1;if(VM(i))return-1}return i.length-n.length}function VM(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const cU={type:0,value:""},hU=/[a-zA-Z0-9_]/;function fU(e){if(!e)return[[]];if(e==="/")return[[cU]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(x){throw new Error(`ERR (${r})/"${d}": ${x}`)}let r=0,n=r;const i=[];let a;function s(){a&&i.push(a),a=[]}let o=0,h,d="",m="";function g(){d&&(r===0?a.push({type:0,value:d}):r===1||r===2||r===3?(a.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:d,regexp:m,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),d="")}function y(){d+=h}for(;o<e.length;){if(h=e[o++],h==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:h==="/"?(d&&g(),s()):h===":"?(g(),r=1):y();break;case 4:y(),r=n;break;case 1:h==="("?r=2:hU.test(h)?y():(g(),r=0,h!=="*"&&h!=="?"&&h!=="+"&&o--);break;case 2:h===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+h:r=3:m+=h;break;case 3:g(),r=0,h!=="*"&&h!=="?"&&h!=="+"&&o--,m="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${d}"`),g(),s(),i}function dU(e,t,r){const n=sU(fU(e.path),r),i=Jr(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function pU(e,t){const r=[],n=new Map;t=jM({strict:!1,end:!0,sensitive:!1},t);function i(m){return n.get(m)}function a(m,g,y){const x=!y,T=mU(m);T.aliasOf=y&&y.record;const M=jM(t,m),P=[T];if("alias"in m){const R=typeof m.alias=="string"?[m.alias]:m.alias;for(const B of R)P.push(Jr({},T,{components:y?y.record.components:T.components,path:B,aliasOf:y?y.record:T}))}let I,D;for(const R of P){const{path:B}=R;if(g&&B[0]!=="/"){const H=g.record.path,V=H[H.length-1]==="/"?"":"/";R.path=g.record.path+(B&&V+B)}if(I=dU(R,g,M),y?y.alias.push(I):(D=D||I,D!==I&&D.alias.push(I),x&&m.name&&!HM(I)&&s(m.name)),T.children){const H=T.children;for(let V=0;V<H.length;V++)a(H[V],I,y&&y.children[V])}y=y||I,(I.record.components&&Object.keys(I.record.components).length||I.record.name||I.record.redirect)&&h(I)}return D?()=>{s(D)}:Zp}function s(m){if(u4(m)){const g=n.get(m);g&&(n.delete(m),r.splice(r.indexOf(g),1),g.children.forEach(s),g.alias.forEach(s))}else{const g=r.indexOf(m);g>-1&&(r.splice(g,1),m.record.name&&n.delete(m.record.name),m.children.forEach(s),m.alias.forEach(s))}}function o(){return r}function h(m){let g=0;for(;g<r.length&&uU(m,r[g])>=0&&(m.record.path!==r[g].record.path||!h4(m,r[g]));)g++;r.splice(g,0,m),m.record.name&&!HM(m)&&n.set(m.record.name,m)}function d(m,g){let y,x={},T,M;if("name"in m&&m.name){if(y=n.get(m.name),!y)throw Pf(1,{location:m});M=y.record.name,x=Jr(UM(g.params,y.keys.filter(D=>!D.optional).map(D=>D.name)),m.params&&UM(m.params,y.keys.map(D=>D.name))),T=y.stringify(x)}else if("path"in m)T=m.path,y=r.find(D=>D.re.test(T)),y&&(x=y.parse(T),M=y.record.name);else{if(y=g.name?n.get(g.name):r.find(D=>D.re.test(g.path)),!y)throw Pf(1,{location:m,currentLocation:g});M=y.record.name,x=Jr({},g.params,m.params),T=y.stringify(x)}const P=[];let I=y;for(;I;)P.unshift(I.record),I=I.parent;return{name:M,path:T,params:x,matched:P,meta:gU(P)}}return e.forEach(m=>a(m)),{addRoute:a,resolve:d,removeRoute:s,getRoutes:o,getRecordMatcher:i}}function UM(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function mU(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:vU(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function vU(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="object"?r[n]:r;return t}function HM(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function gU(e){return e.reduce((t,r)=>Jr(t,r.meta),{})}function jM(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function h4(e,t){return t.children.some(r=>r===e||h4(e,r))}const f4=/#/g,yU=/&/g,_U=/\//g,xU=/=/g,bU=/\?/g,d4=/\+/g,wU=/%5B/g,SU=/%5D/g,p4=/%5E/g,TU=/%60/g,m4=/%7B/g,CU=/%7C/g,v4=/%7D/g,EU=/%20/g;function oT(e){return encodeURI(""+e).replace(CU,"|").replace(wU,"[").replace(SU,"]")}function AU(e){return oT(e).replace(m4,"{").replace(v4,"}").replace(p4,"^")}function Ww(e){return oT(e).replace(d4,"%2B").replace(EU,"+").replace(f4,"%23").replace(yU,"%26").replace(TU,"`").replace(m4,"{").replace(v4,"}").replace(p4,"^")}function MU(e){return Ww(e).replace(xU,"%3D")}function IU(e){return oT(e).replace(f4,"%23").replace(bU,"%3F")}function PU(e){return e==null?"":IU(e).replace(_U,"%2F")}function C_(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function DU(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(d4," "),s=a.indexOf("="),o=C_(s<0?a:a.slice(0,s)),h=s<0?null:C_(a.slice(s+1));if(o in t){let d=t[o];$o(d)||(d=t[o]=[d]),d.push(h)}else t[o]=h}return t}function GM(e){let t="";for(let r in e){const n=e[r];if(r=MU(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}($o(n)?n.map(a=>a&&Ww(a)):[n&&Ww(n)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+r,a!=null&&(t+="="+a))})}return t}function LU(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=$o(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const kU=Symbol(""),qM=Symbol(""),E0=Symbol(""),sT=Symbol(""),Xw=Symbol("");function sp(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function Jl(e,t,r,n,i){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,o)=>{const h=g=>{g===!1?o(Pf(4,{from:r,to:t})):g instanceof Error?o(g):iU(g)?o(Pf(2,{from:t,to:g})):(a&&n.enterCallbacks[i]===a&&typeof g=="function"&&a.push(g),s())},d=e.call(n&&n.instances[i],t,r,h);let m=Promise.resolve(d);e.length<3&&(m=m.then(h)),m.catch(g=>o(g))})}function Dx(e,t,r,n){const i=[];for(const a of e)for(const s in a.components){let o=a.components[s];if(!(t!=="beforeRouteEnter"&&!a.instances[s]))if(RU(o)){const d=(o.__vccOpts||o)[t];d&&i.push(Jl(d,r,n,a,s))}else{let h=o();i.push(()=>h.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${a.path}"`));const m=NV(d)?d.default:d;a.components[s]=m;const y=(m.__vccOpts||m)[t];return y&&Jl(y,r,n,a,s)()}))}}return i}function RU(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function WM(e){const t=Br(E0),r=Br(sT),n=ke(()=>t.resolve(Xt(e.to))),i=ke(()=>{const{matched:h}=n.value,{length:d}=h,m=h[d-1],g=r.matched;if(!m||!g.length)return-1;const y=g.findIndex(If.bind(null,m));if(y>-1)return y;const x=XM(h[d-2]);return d>1&&XM(m)===x&&g[g.length-1].path!==x?g.findIndex(If.bind(null,h[d-2])):y}),a=ke(()=>i.value>-1&&BU(r.params,n.value.params)),s=ke(()=>i.value>-1&&i.value===r.matched.length-1&&s4(r.params,n.value.params));function o(h={}){return zU(h)?t[Xt(e.replace)?"replace":"push"](Xt(e.to)).catch(Zp):Promise.resolve()}return{route:n,href:ke(()=>n.value.href),isActive:a,isExactActive:s,navigate:o}}const OU=jt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:WM,setup(e,{slots:t}){const r=wa(WM(e)),{options:n}=Br(E0),i=ke(()=>({[ZM(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[ZM(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const a=t.default&&t.default(r);return e.custom?a:_r("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},a)}}}),g4=OU;function zU(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function BU(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!$o(i)||i.length!==n.length||n.some((a,s)=>a!==i[s]))return!1}return!0}function XM(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ZM=(e,t,r)=>e??t??r,FU=jt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=Br(Xw),i=ke(()=>e.route||n.value),a=Br(qM,0),s=ke(()=>{let d=Xt(a);const{matched:m}=i.value;let g;for(;(g=m[d])&&!g.components;)d++;return d}),o=ke(()=>i.value.matched[s.value]);Mi(qM,ke(()=>s.value+1)),Mi(kU,o),Mi(Xw,i);const h=xr();return mn(()=>[h.value,o.value,e.name],([d,m,g],[y,x,T])=>{m&&(m.instances[g]=d,x&&x!==m&&d&&d===y&&(m.leaveGuards.size||(m.leaveGuards=x.leaveGuards),m.updateGuards.size||(m.updateGuards=x.updateGuards))),d&&m&&(!x||!If(m,x)||!y)&&(m.enterCallbacks[g]||[]).forEach(M=>M(d))},{flush:"post"}),()=>{const d=i.value,m=e.name,g=o.value,y=g&&g.components[m];if(!y)return YM(r.default,{Component:y,route:d});const x=g.props[m],T=x?x===!0?d.params:typeof x=="function"?x(d):x:null,P=_r(y,Jr({},T,t,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(g.instances[m]=null)},ref:h}));return YM(r.default,{Component:P,route:d})||P}}});function YM(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const y4=FU;function $U(e){const t=pU(e.routes,e),r=e.parseQuery||DU,n=e.stringifyQuery||GM,i=e.history,a=sp(),s=sp(),o=sp(),h=In(Zs);let d=Zs;tf&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=Ix.bind(null,qe=>""+qe),g=Ix.bind(null,PU),y=Ix.bind(null,C_);function x(qe,st){let et,mt;return u4(qe)?(et=t.getRecordMatcher(qe),mt=st):mt=qe,t.addRoute(mt,et)}function T(qe){const st=t.getRecordMatcher(qe);st&&t.removeRoute(st)}function M(){return t.getRoutes().map(qe=>qe.record)}function P(qe){return!!t.getRecordMatcher(qe)}function I(qe,st){if(st=Jr({},st||h.value),typeof qe=="string"){const Ie=Px(r,qe,st.path),je=t.resolve({path:Ie.path},st),Ke=i.createHref(Ie.fullPath);return Jr(Ie,je,{params:y(je.params),hash:C_(Ie.hash),redirectedFrom:void 0,href:Ke})}let et;if("path"in qe)et=Jr({},qe,{path:Px(r,qe.path,st.path).path});else{const Ie=Jr({},qe.params);for(const je in Ie)Ie[je]==null&&delete Ie[je];et=Jr({},qe,{params:g(Ie)}),st.params=g(st.params)}const mt=t.resolve(et,st),ft=qe.hash||"";mt.params=m(y(mt.params));const ue=HV(n,Jr({},qe,{hash:AU(ft),path:mt.path})),ge=i.createHref(ue);return Jr({fullPath:ue,hash:ft,query:n===GM?LU(qe.query):qe.query||{}},mt,{redirectedFrom:void 0,href:ge})}function D(qe){return typeof qe=="string"?Px(r,qe,h.value.path):Jr({},qe)}function R(qe,st){if(d!==qe)return Pf(8,{from:st,to:qe})}function B(qe){return q(qe)}function H(qe){return B(Jr(D(qe),{replace:!0}))}function V(qe){const st=qe.matched[qe.matched.length-1];if(st&&st.redirect){const{redirect:et}=st;let mt=typeof et=="function"?et(qe):et;return typeof mt=="string"&&(mt=mt.includes("?")||mt.includes("#")?mt=D(mt):{path:mt},mt.params={}),Jr({query:qe.query,hash:qe.hash,params:"path"in mt?{}:qe.params},mt)}}function q(qe,st){const et=d=I(qe),mt=h.value,ft=qe.state,ue=qe.force,ge=qe.replace===!0,Ie=V(et);if(Ie)return q(Jr(D(Ie),{state:typeof Ie=="object"?Jr({},ft,Ie.state):ft,force:ue,replace:ge}),st||et);const je=et;je.redirectedFrom=st;let Ke;return!ue&&jV(n,mt,et)&&(Ke=Pf(16,{to:je,from:mt}),Kt(mt,mt,!0,!1)),(Ke?Promise.resolve(Ke):ne(je,mt)).catch(rt=>Ns(rt)?Ns(rt,2)?rt:St(rt):Qe(rt,je,mt)).then(rt=>{if(rt){if(Ns(rt,2))return q(Jr({replace:ge},D(rt.to),{state:typeof rt.to=="object"?Jr({},ft,rt.to.state):ft,force:ue}),st||je)}else rt=le(je,mt,!0,ge,ft);return ce(je,mt,rt),rt})}function j(qe,st){const et=R(qe,st);return et?Promise.reject(et):Promise.resolve()}function te(qe){const st=Ir.values().next().value;return st&&typeof st.runWithContext=="function"?st.runWithContext(qe):qe()}function ne(qe,st){let et;const[mt,ft,ue]=NU(qe,st);et=Dx(mt.reverse(),"beforeRouteLeave",qe,st);for(const Ie of mt)Ie.leaveGuards.forEach(je=>{et.push(Jl(je,qe,st))});const ge=j.bind(null,qe,st);return et.push(ge),fr(et).then(()=>{et=[];for(const Ie of a.list())et.push(Jl(Ie,qe,st));return et.push(ge),fr(et)}).then(()=>{et=Dx(ft,"beforeRouteUpdate",qe,st);for(const Ie of ft)Ie.updateGuards.forEach(je=>{et.push(Jl(je,qe,st))});return et.push(ge),fr(et)}).then(()=>{et=[];for(const Ie of ue)if(Ie.beforeEnter)if($o(Ie.beforeEnter))for(const je of Ie.beforeEnter)et.push(Jl(je,qe,st));else et.push(Jl(Ie.beforeEnter,qe,st));return et.push(ge),fr(et)}).then(()=>(qe.matched.forEach(Ie=>Ie.enterCallbacks={}),et=Dx(ue,"beforeRouteEnter",qe,st),et.push(ge),fr(et))).then(()=>{et=[];for(const Ie of s.list())et.push(Jl(Ie,qe,st));return et.push(ge),fr(et)}).catch(Ie=>Ns(Ie,8)?Ie:Promise.reject(Ie))}function ce(qe,st,et){o.list().forEach(mt=>te(()=>mt(qe,st,et)))}function le(qe,st,et,mt,ft){const ue=R(qe,st);if(ue)return ue;const ge=st===Zs,Ie=tf?history.state:{};et&&(mt||ge?i.replace(qe.fullPath,Jr({scroll:ge&&Ie&&Ie.scroll},ft)):i.push(qe.fullPath,ft)),h.value=qe,Kt(qe,st,et,ge),St()}let de;function ae(){de||(de=i.listen((qe,st,et)=>{if(!vr.listening)return;const mt=I(qe),ft=V(mt);if(ft){q(Jr(ft,{replace:!0}),mt).catch(Zp);return}d=mt;const ue=h.value;tf&&JV(BM(ue.fullPath,et.delta),C0()),ne(mt,ue).catch(ge=>Ns(ge,12)?ge:Ns(ge,2)?(q(ge.to,mt).then(Ie=>{Ns(Ie,20)&&!et.delta&&et.type===Cm.pop&&i.go(-1,!1)}).catch(Zp),Promise.reject()):(et.delta&&i.go(-et.delta,!1),Qe(ge,mt,ue))).then(ge=>{ge=ge||le(mt,ue,!1),ge&&(et.delta&&!Ns(ge,8)?i.go(-et.delta,!1):et.type===Cm.pop&&Ns(ge,20)&&i.go(-1,!1)),ce(mt,ue,ge)}).catch(Zp)}))}let Se=sp(),ve=sp(),Ye;function Qe(qe,st,et){St(qe);const mt=ve.list();return mt.length?mt.forEach(ft=>ft(qe,st,et)):console.error(qe),Promise.reject(qe)}function Ct(){return Ye&&h.value!==Zs?Promise.resolve():new Promise((qe,st)=>{Se.add([qe,st])})}function St(qe){return Ye||(Ye=!qe,ae(),Se.list().forEach(([st,et])=>qe?et(qe):st()),Se.reset()),qe}function Kt(qe,st,et,mt){const{scrollBehavior:ft}=e;if(!tf||!ft)return Promise.resolve();const ue=!et&&QV(BM(qe.fullPath,0))||(mt||!et)&&history.state&&history.state.scroll||null;return xs().then(()=>ft(qe,st,ue)).then(ge=>ge&&KV(ge)).catch(ge=>Qe(ge,qe,st))}const Ft=qe=>i.go(qe);let br;const Ir=new Set,vr={currentRoute:h,listening:!0,addRoute:x,removeRoute:T,hasRoute:P,getRoutes:M,resolve:I,options:e,push:B,replace:H,go:Ft,back:()=>Ft(-1),forward:()=>Ft(1),beforeEach:a.add,beforeResolve:s.add,afterEach:o.add,onError:ve.add,isReady:Ct,install(qe){const st=this;qe.component("RouterLink",g4),qe.component("RouterView",y4),qe.config.globalProperties.$router=st,Object.defineProperty(qe.config.globalProperties,"$route",{enumerable:!0,get:()=>Xt(h)}),tf&&!br&&h.value===Zs&&(br=!0,B(i.location).catch(ft=>{}));const et={};for(const ft in Zs)Object.defineProperty(et,ft,{get:()=>h.value[ft],enumerable:!0});qe.provide(E0,st),qe.provide(sT,QL(et)),qe.provide(Xw,h);const mt=qe.unmount;Ir.add(qe),qe.unmount=function(){Ir.delete(qe),Ir.size<1&&(d=Zs,de&&de(),de=null,h.value=Zs,br=!1,Ye=!1),mt()}}};function fr(qe){return qe.reduce((st,et)=>st.then(()=>te(et)),Promise.resolve())}return vr}function NU(e,t){const r=[],n=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let s=0;s<a;s++){const o=t.matched[s];o&&(e.matched.find(d=>If(d,o))?n.push(o):r.push(o));const h=e.matched[s];h&&(t.matched.find(d=>If(d,h))||i.push(h))}return[r,n,i]}function Qc(){return Br(E0)}function gu(){return Br(sT)}const VU=({headerLinkSelector:e,headerAnchorSelector:t,delay:r,offset:n=5})=>{const i=Qc(),s=aT(()=>{var M,P;const o=Math.max(window.scrollY,document.documentElement.scrollTop,document.body.scrollTop);if(Math.abs(o-0)<n){KM(i,"");return}const d=window.innerHeight+o,m=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),g=Math.abs(m-d)<n,y=Array.from(document.querySelectorAll(e)),T=Array.from(document.querySelectorAll(t)).filter(I=>y.some(D=>D.hash===I.hash));for(let I=0;I<T.length;I++){const D=T[I],R=T[I+1],B=o>=(((M=D.parentElement)==null?void 0:M.offsetTop)??0)-n,H=!R||o<(((P=R.parentElement)==null?void 0:P.offsetTop)??0)-n;if(!(B&&H))continue;const q=decodeURIComponent(i.currentRoute.value.hash),j=decodeURIComponent(D.hash);if(q===j)return;if(g){for(let te=I+1;te<T.length;te++)if(q===decodeURIComponent(T[te].hash))return}KM(i,j);return}},r);ti(()=>{window.addEventListener("scroll",s)}),hl(()=>{window.removeEventListener("scroll",s)})},KM=async(e,t)=>{const{scrollBehavior:r}=e.options;e.options.scrollBehavior=void 0,await e.replace({query:e.currentRoute.value.query,hash:t}).finally(()=>e.options.scrollBehavior=r)},UU="a.sidebar-item",HU=".header-anchor",jU=300,GU=5,qU=Uo({setup(){VU({headerLinkSelector:UU,headerAnchorSelector:HU,delay:jU,offset:GU})}}),JM=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,WU=()=>window.scrollTo({top:0,behavior:"smooth"});const XU=jt({name:"BackToTop",setup(){const e=xr(0),t=ke(()=>e.value>300),r=aT(()=>{e.value=JM()},100);ti(()=>{e.value=JM(),window.addEventListener("scroll",()=>r())});const n=_r("div",{class:"back-to-top",onClick:WU});return()=>_r(vu,{name:"back-to-top"},()=>t.value?n:null)}}),ZU=Uo({rootComponents:[XU]});const YU=_r("svg",{class:"external-link-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[_r("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),_r("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),KU=jt({name:"ExternalLinkIcon",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(e){const t=fv(),r=ke(()=>e.locales[t.value]??{openInNewWindow:"open in new window"});return()=>_r("span",[YU,_r("span",{class:"external-link-icon-sr-only"},r.value.openInNewWindow)])}}),JU={"/":{openInNewWindow:""}},QU=Uo({enhance({app:e}){e.component("ExternalLinkIcon",_r(KU,{locales:JU}))}});/*! medium-zoom 1.0.8 | MIT License | https://github.com/francoischalifour/medium-zoom */var bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ug=function(t){return t.tagName==="IMG"},eH=function(t){return NodeList.prototype.isPrototypeOf(t)},Hy=function(t){return t&&t.nodeType===1},QM=function(t){var r=t.currentSrc||t.src;return r.substr(-4).toLowerCase()===".svg"},eI=function(t){try{return Array.isArray(t)?t.filter(Ug):eH(t)?[].slice.call(t).filter(Ug):Hy(t)?[t].filter(Ug):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(Ug):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},tH=function(t){var r=document.createElement("div");return r.classList.add("medium-zoom-overlay"),r.style.background=t,r},rH=function(t){var r=t.getBoundingClientRect(),n=r.top,i=r.left,a=r.width,s=r.height,o=t.cloneNode(),h=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,d=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return o.removeAttribute("id"),o.style.position="absolute",o.style.top=n+h+"px",o.style.left=i+d+"px",o.style.width=a+"px",o.style.height=s+"px",o.style.transform="",o},Fh=function(t,r){var n=bc({bubbles:!1,cancelable:!1,detail:void 0},r);if(typeof window.CustomEvent=="function")return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i},nH=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=window.Promise||function(le){function de(){}le(de,de)},i=function(le){var de=le.target;if(de===te){T();return}R.indexOf(de)!==-1&&M({target:de})},a=function(){if(!(H||!j.original)){var le=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(V-le)>q.scrollOffset&&setTimeout(T,150)}},s=function(le){var de=le.key||le.keyCode;(de==="Escape"||de==="Esc"||de===27)&&T()},o=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=le;if(le.background&&(te.style.background=le.background),le.container&&le.container instanceof Object&&(de.container=bc({},q.container,le.container)),le.template){var ae=Hy(le.template)?le.template:document.querySelector(le.template);de.template=ae}return q=bc({},q,de),R.forEach(function(Se){Se.dispatchEvent(Fh("medium-zoom:update",{detail:{zoom:ne}}))}),ne},h=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e(bc({},q,le))},d=function(){for(var le=arguments.length,de=Array(le),ae=0;ae<le;ae++)de[ae]=arguments[ae];var Se=de.reduce(function(ve,Ye){return[].concat(ve,eI(Ye))},[]);return Se.filter(function(ve){return R.indexOf(ve)===-1}).forEach(function(ve){R.push(ve),ve.classList.add("medium-zoom-image")}),B.forEach(function(ve){var Ye=ve.type,Qe=ve.listener,Ct=ve.options;Se.forEach(function(St){St.addEventListener(Ye,Qe,Ct)})}),ne},m=function(){for(var le=arguments.length,de=Array(le),ae=0;ae<le;ae++)de[ae]=arguments[ae];j.zoomed&&T();var Se=de.length>0?de.reduce(function(ve,Ye){return[].concat(ve,eI(Ye))},[]):R;return Se.forEach(function(ve){ve.classList.remove("medium-zoom-image"),ve.dispatchEvent(Fh("medium-zoom:detach",{detail:{zoom:ne}}))}),R=R.filter(function(ve){return Se.indexOf(ve)===-1}),ne},g=function(le,de){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return R.forEach(function(Se){Se.addEventListener("medium-zoom:"+le,de,ae)}),B.push({type:"medium-zoom:"+le,listener:de,options:ae}),ne},y=function(le,de){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return R.forEach(function(Se){Se.removeEventListener("medium-zoom:"+le,de,ae)}),B=B.filter(function(Se){return!(Se.type==="medium-zoom:"+le&&Se.listener.toString()===de.toString())}),ne},x=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=le.target,ae=function(){var ve={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},Ye=void 0,Qe=void 0;if(q.container)if(q.container instanceof Object)ve=bc({},ve,q.container),Ye=ve.width-ve.left-ve.right-q.margin*2,Qe=ve.height-ve.top-ve.bottom-q.margin*2;else{var Ct=Hy(q.container)?q.container:document.querySelector(q.container),St=Ct.getBoundingClientRect(),Kt=St.width,Ft=St.height,br=St.left,Ir=St.top;ve=bc({},ve,{width:Kt,height:Ft,left:br,top:Ir})}Ye=Ye||ve.width-q.margin*2,Qe=Qe||ve.height-q.margin*2;var vr=j.zoomedHd||j.original,fr=QM(vr)?Ye:vr.naturalWidth||Ye,qe=QM(vr)?Qe:vr.naturalHeight||Qe,st=vr.getBoundingClientRect(),et=st.top,mt=st.left,ft=st.width,ue=st.height,ge=Math.min(Math.max(ft,fr),Ye)/ft,Ie=Math.min(Math.max(ue,qe),Qe)/ue,je=Math.min(ge,Ie),Ke=(-mt+(Ye-ft)/2+q.margin+ve.left)/je,rt=(-et+(Qe-ue)/2+q.margin+ve.top)/je,vt="scale("+je+") translate3d("+Ke+"px, "+rt+"px, 0)";j.zoomed.style.transform=vt,j.zoomedHd&&(j.zoomedHd.style.transform=vt)};return new n(function(Se){if(de&&R.indexOf(de)===-1){Se(ne);return}var ve=function Kt(){H=!1,j.zoomed.removeEventListener("transitionend",Kt),j.original.dispatchEvent(Fh("medium-zoom:opened",{detail:{zoom:ne}})),Se(ne)};if(j.zoomed){Se(ne);return}if(de)j.original=de;else if(R.length>0){var Ye=R;j.original=Ye[0]}else{Se(ne);return}if(j.original.dispatchEvent(Fh("medium-zoom:open",{detail:{zoom:ne}})),V=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,H=!0,j.zoomed=rH(j.original),document.body.appendChild(te),q.template){var Qe=Hy(q.template)?q.template:document.querySelector(q.template);j.template=document.createElement("div"),j.template.appendChild(Qe.content.cloneNode(!0)),document.body.appendChild(j.template)}if(j.original.parentElement&&j.original.parentElement.tagName==="PICTURE"&&j.original.currentSrc&&(j.zoomed.src=j.original.currentSrc),document.body.appendChild(j.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),j.original.classList.add("medium-zoom-image--hidden"),j.zoomed.classList.add("medium-zoom-image--opened"),j.zoomed.addEventListener("click",T),j.zoomed.addEventListener("transitionend",ve),j.original.getAttribute("data-zoom-src")){j.zoomedHd=j.zoomed.cloneNode(),j.zoomedHd.removeAttribute("srcset"),j.zoomedHd.removeAttribute("sizes"),j.zoomedHd.removeAttribute("loading"),j.zoomedHd.src=j.zoomed.getAttribute("data-zoom-src"),j.zoomedHd.onerror=function(){clearInterval(Ct),console.warn("Unable to reach the zoom image target "+j.zoomedHd.src),j.zoomedHd=null,ae()};var Ct=setInterval(function(){j.zoomedHd.complete&&(clearInterval(Ct),j.zoomedHd.classList.add("medium-zoom-image--opened"),j.zoomedHd.addEventListener("click",T),document.body.appendChild(j.zoomedHd),ae())},10)}else if(j.original.hasAttribute("srcset")){j.zoomedHd=j.zoomed.cloneNode(),j.zoomedHd.removeAttribute("sizes"),j.zoomedHd.removeAttribute("loading");var St=j.zoomedHd.addEventListener("load",function(){j.zoomedHd.removeEventListener("load",St),j.zoomedHd.classList.add("medium-zoom-image--opened"),j.zoomedHd.addEventListener("click",T),document.body.appendChild(j.zoomedHd),ae()})}else ae()})},T=function(){return new n(function(le){if(H||!j.original){le(ne);return}var de=function ae(){j.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(j.zoomed),j.zoomedHd&&document.body.removeChild(j.zoomedHd),document.body.removeChild(te),j.zoomed.classList.remove("medium-zoom-image--opened"),j.template&&document.body.removeChild(j.template),H=!1,j.zoomed.removeEventListener("transitionend",ae),j.original.dispatchEvent(Fh("medium-zoom:closed",{detail:{zoom:ne}})),j.original=null,j.zoomed=null,j.zoomedHd=null,j.template=null,le(ne)};H=!0,document.body.classList.remove("medium-zoom--opened"),j.zoomed.style.transform="",j.zoomedHd&&(j.zoomedHd.style.transform=""),j.template&&(j.template.style.transition="opacity 150ms",j.template.style.opacity=0),j.original.dispatchEvent(Fh("medium-zoom:close",{detail:{zoom:ne}})),j.zoomed.addEventListener("transitionend",de)})},M=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=le.target;return j.original?T():x({target:de})},P=function(){return q},I=function(){return R},D=function(){return j.original},R=[],B=[],H=!1,V=0,q=r,j={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?q=t:(t||typeof t=="string")&&d(t),q=bc({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},q);var te=tH(q.background);document.addEventListener("click",i),document.addEventListener("keyup",s),document.addEventListener("scroll",a),window.addEventListener("resize",T);var ne={open:x,close:T,toggle:M,update:o,clone:h,attach:d,detach:m,on:g,off:y,getOptions:P,getImages:I,getZoomedImage:D};return ne};function iH(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var aH=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";iH(aH);const oH=nH,sH=Symbol("mediumZoom");const lH=".theme-default-content > img, .theme-default-content :not(a) > img",uH={},cH=300,hH=Uo({enhance({app:e,router:t}){const r=oH(uH);r.refresh=(n=lH)=>{r.detach(),r.attach(n)},e.provide(sH,r),t.afterEach(()=>{setTimeout(()=>r.refresh(),cH)})}});/**
 * NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT
 */const Vr={settings:{minimum:.08,easing:"ease",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"></div>'},status:null,set:e=>{const t=Vr.isStarted();e=Lx(e,Vr.settings.minimum,1),Vr.status=e===1?null:e;const r=Vr.render(!t),n=r.querySelector(Vr.settings.barSelector),i=Vr.settings.speed,a=Vr.settings.easing;return r.offsetWidth,fH(s=>{Hg(n,{transform:"translate3d("+tI(e)+"%,0,0)",transition:"all "+i+"ms "+a}),e===1?(Hg(r,{transition:"none",opacity:"1"}),r.offsetWidth,setTimeout(function(){Hg(r,{transition:"all "+i+"ms linear",opacity:"0"}),setTimeout(function(){Vr.remove(),s()},i)},i)):setTimeout(()=>s(),i)}),Vr},isStarted:()=>typeof Vr.status=="number",start:()=>{Vr.status||Vr.set(0);const e=()=>{setTimeout(()=>{Vr.status&&(Vr.trickle(),e())},Vr.settings.trickleSpeed)};return Vr.settings.trickle&&e(),Vr},done:e=>!e&&!Vr.status?Vr:Vr.inc(.3+.5*Math.random()).set(1),inc:e=>{let t=Vr.status;return t?(typeof e!="number"&&(e=(1-t)*Lx(Math.random()*t,.1,.95)),t=Lx(t+e,0,.994),Vr.set(t)):Vr.start()},trickle:()=>Vr.inc(Math.random()*Vr.settings.trickleRate),render:e=>{if(Vr.isRendered())return document.getElementById("nprogress");rI(document.documentElement,"nprogress-busy");const t=document.createElement("div");t.id="nprogress",t.innerHTML=Vr.settings.template;const r=t.querySelector(Vr.settings.barSelector),n=e?"-100":tI(Vr.status||0),i=document.querySelector(Vr.settings.parent);return Hg(r,{transition:"all 0 linear",transform:"translate3d("+n+"%,0,0)"}),i!==document.body&&rI(i,"nprogress-custom-parent"),i==null||i.appendChild(t),t},remove:()=>{nI(document.documentElement,"nprogress-busy"),nI(document.querySelector(Vr.settings.parent),"nprogress-custom-parent");const e=document.getElementById("nprogress");e&&dH(e)},isRendered:()=>!!document.getElementById("nprogress")},Lx=(e,t,r)=>e<t?t:e>r?r:e,tI=e=>(-1+e)*100,fH=function(){const e=[];function t(){const r=e.shift();r&&r(t)}return function(r){e.push(r),e.length===1&&t()}}(),Hg=function(){const e=["Webkit","O","Moz","ms"],t={};function r(s){return s.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(o,h){return h.toUpperCase()})}function n(s){const o=document.body.style;if(s in o)return s;let h=e.length;const d=s.charAt(0).toUpperCase()+s.slice(1);let m;for(;h--;)if(m=e[h]+d,m in o)return m;return s}function i(s){return s=r(s),t[s]??(t[s]=n(s))}function a(s,o,h){o=i(o),s.style[o]=h}return function(s,o){for(const h in o){const d=o[h];d!==void 0&&Object.prototype.hasOwnProperty.call(o,h)&&a(s,h,d)}}}(),_4=(e,t)=>(typeof e=="string"?e:lT(e)).indexOf(" "+t+" ")>=0,rI=(e,t)=>{const r=lT(e),n=r+t;_4(r,t)||(e.className=n.substring(1))},nI=(e,t)=>{const r=lT(e);if(!_4(e,t))return;const n=r.replace(" "+t+" "," ");e.className=n.substring(1,n.length-1)},lT=e=>(" "+(e.className||"")+" ").replace(/\s+/gi," "),dH=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)};const pH=()=>{ti(()=>{const e=Qc(),t=new Set;t.add(e.currentRoute.value.path),e.beforeEach(r=>{t.has(r.path)||Vr.start()}),e.afterEach(r=>{t.add(r.path),Vr.done()})})},mH=Uo({setup(){pH()}}),vH=JSON.parse('{"navbar":[{"text":"","link":"/"},{"text":"","link":"https://daily.sustech.online/"},{"text":"","link":"/miniapp/"},{"text":"","link":"/about/"},{"text":"","link":"/site-help/"}],"repo":"sustech-cra/sustech-online-ng","repoLabel":"Github","docsRepo":"sustech-cra/sustech-online-ng","docsDir":"docs","editLinkText":"","lastUpdatedText":"","contributorsText":"","editLink":true,"docsBranch":"master","tip":"","warning":"","danger":"","notFound":["",""," 404 ",""],"backToHome":"","openInNewWindow":"","toggleColorMode":"","toggleSidebar":"","sidebarDepth":2,"sidebar":["/","/facility/","/contact/","/calendar/","/service/","/life/","/study/","/organizations/","/media/",{"text":"","link":"/transport/","children":[{"text":"","link":"/transport/bustimer.md","children":[]},{"text":"-","link":"/transport/workday.md","children":[]},{"text":"-","link":"/transport/holiday.md","children":[]},{"text":"","link":"/transport/","children":[]}]},"/surroundings/"],"locales":{"/":{"selectLanguageName":"English"}},"colorMode":"auto","colorModeSwitch":true,"logo":null,"selectLanguageText":"Languages","selectLanguageAriaLabel":"Select language","lastUpdated":true,"contributors":true}'),gH=xr(vH),x4=()=>gH,b4=Symbol(""),yH=()=>{const e=Br(b4);if(!e)throw new Error("useThemeLocaleData() is called without provider.");return e},_H=(e,t)=>{const{locales:r,...n}=e;return{...n,...r==null?void 0:r[t]}},xH=Uo({enhance({app:e}){const t=x4(),r=e._context.provides[rT],n=ke(()=>_H(t.value,r.value));e.provide(b4,n),Object.defineProperties(e.config.globalProperties,{$theme:{get(){return t.value}},$themeLocale:{get(){return n.value}}})}}),bH=jt({__name:"Badge",props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(e){return(t,r)=>(lt(),Rt("span",{class:Ai(["badge",e.type]),style:Xf({verticalAlign:e.vertical})},[nn(t.$slots,"default",{},()=>[ol(Or(e.text),1)])],6))}}),Ur=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},wH=Ur(bH,[["__file","Badge.vue"]]),SH=jt({name:"CodeGroup",slots:Object,setup(e,{slots:t}){const r=xr(-1),n=xr([]),i=(o=r.value)=>{o<n.value.length-1?r.value=o+1:r.value=0,n.value[r.value].focus()},a=(o=r.value)=>{o>0?r.value=o-1:r.value=n.value.length-1,n.value[r.value].focus()},s=(o,h)=>{o.key===" "||o.key==="Enter"?(o.preventDefault(),r.value=h):o.key==="ArrowRight"?(o.preventDefault(),i(h)):o.key==="ArrowLeft"&&(o.preventDefault(),a(h))};return()=>{var h;const o=(((h=t.default)==null?void 0:h.call(t))||[]).filter(d=>d.type.name==="CodeGroupItem").map(d=>(d.props===null&&(d.props={}),d));return o.length===0?null:(r.value<0||r.value>o.length-1?(r.value=o.findIndex(d=>d.props.active===""||d.props.active===!0),r.value===-1&&(r.value=0)):o.forEach((d,m)=>{d.props.active=m===r.value}),_r("div",{class:"code-group"},[_r("div",{class:"code-group__nav"},_r("ul",{class:"code-group__ul"},o.map((d,m)=>{const g=m===r.value;return _r("li",{class:"code-group__li"},_r("button",{ref:y=>{y&&(n.value[m]=y)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":g},ariaPressed:g,ariaExpanded:g,onClick:()=>r.value=m,onKeydown:y=>s(y,m)},d.props.title))}))),o]))}}}),TH=["aria-selected"],CH=jt({name:"CodeGroupItem"}),EH=jt({...CH,props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup(e){return(t,r)=>(lt(),Rt("div",{class:Ai(["code-group-item",{"code-group-item__active":e.active}]),"aria-selected":e.active},[nn(t.$slots,"default")],10,TH))}}),AH=Ur(EH,[["__file","CodeGroupItem.vue"]]);function iI(e,t){var r;const n=In();return Bo(()=>{n.value=e()},{...t,flush:(r=t==null?void 0:t.flush)!=null?r:"sync"}),av(n)}function MH(e,t){let r,n,i;const a=xr(!0),s=()=>{a.value=!0,i()};mn(e,s,{flush:"sync"});const o=typeof t=="function"?t:t.get,h=typeof t=="function"?void 0:t.set,d=fN((m,g)=>(n=m,i=g,{get(){return a.value&&(r=o(),a.value=!1),n(),r},set(y){h==null||h(y)}}));return Object.isExtensible(d)&&(d.trigger=s),d}function w4(e){return UL()?(O$(e),!0):!1}function Df(e){return typeof e=="function"?e():Xt(e)}const IH=typeof window<"u"&&typeof document<"u",PH=Object.prototype.toString,DH=e=>PH.call(e)==="[object Object]",LH=()=>{};function kH(e,t){function r(...n){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(i).catch(a)})}return r}const S4=e=>e();function RH(e=S4){const t=xr(!0);function r(){t.value=!1}function n(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:av(t),pause:r,resume:n,eventFilter:i}}function OH(e,t,r={}){const{eventFilter:n=S4,...i}=r;return mn(e,kH(n,t),i)}function zH(e,t,r={}){const{eventFilter:n,...i}=r,{eventFilter:a,pause:s,resume:o,isActive:h}=RH(n);return{stop:OH(e,t,{...i,eventFilter:a}),pause:s,resume:o,isActive:h}}function BH(e=!1,t={}){const{truthyValue:r=!0,falsyValue:n=!1}=t,i=oi(e),a=xr(e);function s(o){if(arguments.length)return a.value=o,a.value;{const h=Df(r);return a.value=a.value===h?Df(n):h,a.value}}return i?s:[a,s]}function FH(e){var t;const r=Df(e);return(t=r==null?void 0:r.$el)!=null?t:r}const E_=IH?window:void 0;function Zw(...e){let t,r,n,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,n,i]=e,t=E_):[t,r,n,i]=e,!t)return LH;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const a=[],s=()=>{a.forEach(m=>m()),a.length=0},o=(m,g,y,x)=>(m.addEventListener(g,y,x),()=>m.removeEventListener(g,y,x)),h=mn(()=>[FH(t),Df(i)],([m,g])=>{if(s(),!m)return;const y=DH(g)?{...g}:g;a.push(...r.flatMap(x=>n.map(T=>o(m,x,T,y))))},{immediate:!0,flush:"post"}),d=()=>{h(),s()};return w4(d),d}function $H(){const e=xr(!1);return uv()&&ti(()=>{e.value=!0}),e}function NH(e){const t=$H();return ke(()=>(t.value,!!e()))}function VH(e,t={}){const{window:r=E_}=t,n=NH(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let i;const a=xr(!1),s=d=>{a.value=d.matches},o=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",s):i.removeListener(s))},h=Bo(()=>{n.value&&(o(),i=r.matchMedia(Df(e)),"addEventListener"in i?i.addEventListener("change",s):i.addListener(s),a.value=i.matches)});return w4(()=>{h(),o(),i=void 0}),a}const jg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gg="__vueuse_ssr_handlers__",UH=HH();function HH(){return Gg in jg||(jg[Gg]=jg[Gg]||{}),jg[Gg]}function jH(e,t){return UH[e]||t}function GH(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const qH={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},aI="vueuse-storage";function WH(e,t,r,n={}){var i;const{flush:a="pre",deep:s=!0,listenToStorageChanges:o=!0,writeDefaults:h=!0,mergeDefaults:d=!1,shallow:m,window:g=E_,eventFilter:y,onError:x=j=>{console.error(j)}}=n,T=(m?In:xr)(t);if(!r)try{r=jH("getDefaultStorage",()=>{var j;return(j=E_)==null?void 0:j.localStorage})()}catch(j){x(j)}if(!r)return T;const M=Df(t),P=GH(M),I=(i=n.serializer)!=null?i:qH[P],{pause:D,resume:R}=zH(T,()=>B(T.value),{flush:a,deep:s,eventFilter:y});return g&&o&&(Zw(g,"storage",q),Zw(g,aI,V)),q(),T;function B(j){try{if(j==null)r.removeItem(e);else{const te=I.write(j),ne=r.getItem(e);ne!==te&&(r.setItem(e,te),g&&g.dispatchEvent(new CustomEvent(aI,{detail:{key:e,oldValue:ne,newValue:te,storageArea:r}})))}}catch(te){x(te)}}function H(j){const te=j?j.newValue:r.getItem(e);if(te==null)return h&&M!==null&&r.setItem(e,I.write(M)),M;if(!j&&d){const ne=I.read(te);return typeof d=="function"?d(ne,M):P==="object"&&!Array.isArray(ne)?{...M,...ne}:ne}else return typeof te!="string"?te:I.read(te)}function V(j){q(j.detail)}function q(j){if(!(j&&j.storageArea!==r)){if(j&&j.key==null){T.value=M;return}if(!(j&&j.key!==e)){D();try{(j==null?void 0:j.newValue)!==I.write(T.value)&&(T.value=H(j))}catch(te){x(te)}finally{j?xs(R):R()}}}}}function XH(e){return VH("(prefers-color-scheme: dark)",e)}const ZH=()=>x4(),oa=()=>yH(),T4=Symbol(""),uT=()=>{const e=Br(T4);if(!e)throw new Error("useDarkMode() is called without provider.");return e},YH=()=>{const e=oa(),t=XH(),r=WH("vuepress-color-scheme",e.value.colorMode),n=ke({get(){return e.value.colorModeSwitch?r.value==="auto"?t.value:r.value==="dark":e.value.colorMode==="dark"},set(i){i===t.value?r.value="auto":r.value=i?"dark":"light"}});Mi(T4,n),KH(n)},KH=e=>{const t=(r=e.value)=>{const n=window==null?void 0:window.document.querySelector("html");n==null||n.classList.toggle("dark",r)};ti(()=>{mn(e,t,{immediate:!0})}),Zf(()=>t())},C4=(...e)=>{const r=Qc().resolve(...e),n=r.matched[r.matched.length-1];if(!(n!=null&&n.redirect))return r;const{redirect:i}=n,a=CV(i)?i(r):i,s=ms(a)?{path:a}:a;return C4({hash:r.hash,query:r.query,params:r.params,...s})},cT=e=>{const t=C4(encodeURI(e));return{text:t.meta.title||e,link:t.name==="404"?e:t.fullPath}};let kx=null,lp=null;const JH={wait:()=>kx,pending:()=>{kx=new Promise(e=>lp=e)},resolve:()=>{lp==null||lp(),kx=null,lp=null}},E4=()=>JH,A4=Symbol("sidebarItems"),hT=()=>{const e=Br(A4);if(!e)throw new Error("useSidebarItems() is called without provider.");return e},QH=()=>{const e=oa(),t=rl(),r=ke(()=>ej(t.value,e.value));Mi(A4,r)},ej=(e,t)=>{const r=e.sidebar??t.sidebar??"auto",n=e.sidebarDepth??t.sidebarDepth??2;return e.home||r===!1?[]:r==="auto"?rj(n):cv(r)?M4(r,n):tT(r)?nj(r,n):[]},tj=(e,t)=>({text:e.title,link:e.link,children:fT(e.children,t)}),fT=(e,t)=>t>0?e.map(r=>tj(r,t-1)):[],rj=e=>{const t=su();return[{text:t.value.title,children:fT(t.value.headers,e)}]},M4=(e,t)=>{const r=gu(),n=su(),i=a=>{var o;let s;if(ms(a)?s=cT(a):s=a,s.children)return{...s,children:s.children.map(h=>i(h))};if(s.link===r.path){const h=((o=n.value.headers[0])==null?void 0:o.level)===1?n.value.headers[0].children:n.value.headers;return{...s,children:fT(h,t)}}return s};return e.map(a=>i(a))},nj=(e,t)=>{const r=gu(),n=Kk(e,r.path),i=e[n]??[];return M4(i,t)},ij="719px",aj={mobile:ij};var Em;(function(e){e.MOBILE="mobile"})(Em||(Em={}));var NL;const oj={[Em.MOBILE]:Number.parseInt((NL=aj.mobile)==null?void 0:NL.replace("px",""),10)},I4=(e,t)=>{const r=oj[e];Number.isInteger(r)&&ti(()=>{t(r),window.addEventListener("resize",()=>t(r),!1),window.addEventListener("orientationchange",()=>t(r),!1)})},sj={},lj={class:"theme-default-content"};function uj(e,t){const r=Rn("Content");return lt(),Rt("div",lj,[Pe(r)])}const cj=Ur(sj,[["render",uj],["__file","HomeContent.vue"]]),hj={key:0,class:"features"},fj=jt({__name:"HomeFeatures",setup(e){const t=rl(),r=ke(()=>cv(t.value.features)?t.value.features:[]);return(n,i)=>r.value.length?(lt(),Rt("div",hj,[(lt(!0),Rt(Pr,null,Fo(r.value,a=>(lt(),Rt("div",{key:a.title,class:"feature"},[er("h2",null,Or(a.title),1),er("p",null,Or(a.details),1)]))),128))])):on("",!0)}}),dj=Ur(fj,[["__file","HomeFeatures.vue"]]),pj=["innerHTML"],mj=["textContent"],vj=jt({__name:"HomeFooter",setup(e){const t=rl(),r=ke(()=>t.value.footer),n=ke(()=>t.value.footerHtml);return(i,a)=>r.value?(lt(),Rt(Pr,{key:0},[n.value?(lt(),Rt("div",{key:0,class:"footer",innerHTML:r.value},null,8,pj)):(lt(),Rt("div",{key:1,class:"footer",textContent:Or(r.value)},null,8,mj))],64)):on("",!0)}}),gj=Ur(vj,[["__file","HomeFooter.vue"]]),yj=["href","rel","target","aria-label"],_j=jt({inheritAttrs:!1}),xj=jt({..._j,__name:"AutoLink",props:{item:{type:Object,required:!0}},setup(e){const t=e,r=gu(),n=a4(),{item:i}=ov(t),a=ke(()=>hv(i.value.link)),s=ke(()=>MV(i.value.link)||IV(i.value.link)),o=ke(()=>{if(!s.value){if(i.value.target)return i.value.target;if(a.value)return"_blank"}}),h=ke(()=>o.value==="_blank"),d=ke(()=>!a.value&&!s.value&&!h.value),m=ke(()=>{if(!s.value){if(i.value.rel)return i.value.rel;if(h.value)return"noopener noreferrer"}}),g=ke(()=>i.value.ariaLabel||i.value.text),y=ke(()=>{const M=Object.keys(n.value.locales);return M.length?!M.some(P=>P===i.value.link):i.value.link!=="/"}),x=ke(()=>y.value?r.path.startsWith(i.value.link):!1),T=ke(()=>d.value?i.value.activeMatch?new RegExp(i.value.activeMatch).test(r.path):x.value:!1);return(M,P)=>{const I=Rn("RouterLink"),D=Rn("AutoLinkExternalIcon");return d.value?(lt(),En(I,w_({key:0,class:{"router-link-active":T.value},to:Xt(i).link,"aria-label":g.value},M.$attrs),{default:Cn(()=>[nn(M.$slots,"before"),ol(" "+Or(Xt(i).text)+" ",1),nn(M.$slots,"after")]),_:3},16,["class","to","aria-label"])):(lt(),Rt("a",w_({key:1,class:"external-link",href:Xt(i).link,rel:m.value,target:o.value,"aria-label":g.value},M.$attrs),[nn(M.$slots,"before"),ol(" "+Or(Xt(i).text)+" ",1),h.value?(lt(),En(D,{key:0})):on("",!0),nn(M.$slots,"after")],16,yj))}}}),nl=Ur(xj,[["__file","AutoLink.vue"]]),bj={class:"hero"},wj={key:0,id:"main-title"},Sj={key:1,class:"description"},Tj={key:2,class:"actions"},Cj=jt({__name:"HomeHero",setup(e){const t=rl(),r=nT(),n=uT(),i=ke(()=>n.value&&t.value.heroImageDark!==void 0?t.value.heroImageDark:t.value.heroImage),a=ke(()=>t.value.heroAlt||o.value||"hero"),s=ke(()=>t.value.heroHeight||280),o=ke(()=>t.value.heroText===null?null:t.value.heroText||r.value.title||"Hello"),h=ke(()=>t.value.tagline===null?null:t.value.tagline||r.value.description||"Welcome to your VuePress site"),d=ke(()=>cv(t.value.actions)?t.value.actions.map(({text:g,link:y,type:x="primary"})=>({text:g,link:y,type:x})):[]),m=()=>{if(!i.value)return null;const g=_r("img",{src:T0(i.value),alt:a.value,height:s.value});return t.value.heroImageDark===void 0?g:_r(iT,()=>g)};return(g,y)=>(lt(),Rt("header",bj,[Pe(m),o.value?(lt(),Rt("h1",wj,Or(o.value),1)):on("",!0),h.value?(lt(),Rt("p",Sj,Or(h.value),1)):on("",!0),d.value.length?(lt(),Rt("p",Tj,[(lt(!0),Rt(Pr,null,Fo(d.value,x=>(lt(),En(nl,{key:x.text,class:Ai(["action-button",[x.type]]),item:x},null,8,["class","item"]))),128))])):on("",!0)]))}}),Ej=Ur(Cj,[["__file","HomeHero.vue"]]),Aj={class:"home"},Mj=jt({__name:"Home",setup(e){return(t,r)=>(lt(),Rt("main",Aj,[Pe(Ej),Pe(dj),Pe(cj),Pe(gj)]))}}),Ij=Ur(Mj,[["__file","Home.vue"]]),Pj=jt({__name:"NavbarBrand",setup(e){const t=fv(),r=nT(),n=oa(),i=uT(),a=ke(()=>n.value.home||t.value),s=ke(()=>r.value.title),o=ke(()=>i.value&&n.value.logoDark!==void 0?n.value.logoDark:n.value.logo),h=()=>{if(!o.value)return null;const d=_r("img",{class:"logo",src:T0(o.value),alt:s.value});return n.value.logoDark===void 0?d:_r(iT,()=>d)};return(d,m)=>{const g=Rn("RouterLink");return lt(),En(g,{to:a.value},{default:Cn(()=>[Pe(h),s.value?(lt(),Rt("span",{key:0,class:Ai(["site-name",{"can-hide":o.value}])},Or(s.value),3)):on("",!0)]),_:1},8,["to"])}}}),Dj=Ur(Pj,[["__file","NavbarBrand.vue"]]),Lj=jt({__name:"DropdownTransition",setup(e){const t=n=>{n.style.height=n.scrollHeight+"px"},r=n=>{n.style.height=""};return(n,i)=>(lt(),En(vu,{name:"dropdown",onEnter:t,onAfterEnter:r,onBeforeLeave:t},{default:Cn(()=>[nn(n.$slots,"default")]),_:3}))}}),P4=Ur(Lj,[["__file","DropdownTransition.vue"]]),kj=["aria-label"],Rj={class:"title"},Oj=er("span",{class:"arrow down"},null,-1),zj=["aria-label"],Bj={class:"title"},Fj={class:"navbar-dropdown"},$j={class:"navbar-dropdown-subtitle"},Nj={key:1},Vj={class:"navbar-dropdown-subitem-wrapper"},Uj=jt({__name:"NavbarDropdown",props:{item:{type:Object,required:!0}},setup(e){const t=e,{item:r}=ov(t),n=ke(()=>r.value.ariaLabel||r.value.text),i=xr(!1),a=gu();mn(()=>a.path,()=>{i.value=!1});const s=h=>{h.detail===0?i.value=!i.value:i.value=!1},o=(h,d)=>d[d.length-1]===h;return(h,d)=>(lt(),Rt("div",{class:Ai(["navbar-dropdown-wrapper",{open:i.value}])},[er("button",{class:"navbar-dropdown-title",type:"button","aria-label":n.value,onClick:s},[er("span",Rj,Or(Xt(r).text),1),Oj],8,kj),er("button",{class:"navbar-dropdown-title-mobile",type:"button","aria-label":n.value,onClick:d[0]||(d[0]=m=>i.value=!i.value)},[er("span",Bj,Or(Xt(r).text),1),er("span",{class:Ai(["arrow",i.value?"down":"right"])},null,2)],8,zj),Pe(P4,null,{default:Cn(()=>[y_(er("ul",Fj,[(lt(!0),Rt(Pr,null,Fo(Xt(r).children,m=>(lt(),Rt("li",{key:m.text,class:"navbar-dropdown-item"},[m.children?(lt(),Rt(Pr,{key:0},[er("h4",$j,[m.link?(lt(),En(nl,{key:0,item:m,onFocusout:g=>o(m,Xt(r).children)&&m.children.length===0&&(i.value=!1)},null,8,["item","onFocusout"])):(lt(),Rt("span",Nj,Or(m.text),1))]),er("ul",Vj,[(lt(!0),Rt(Pr,null,Fo(m.children,g=>(lt(),Rt("li",{key:g.link,class:"navbar-dropdown-subitem"},[Pe(nl,{item:g,onFocusout:y=>o(g,m.children)&&o(m,Xt(r).children)&&(i.value=!1)},null,8,["item","onFocusout"])]))),128))])],64)):(lt(),En(nl,{key:1,item:m,onFocusout:g=>o(m,Xt(r).children)&&(i.value=!1)},null,8,["item","onFocusout"]))]))),128))],512),[[S_,i.value]])]),_:1})],2))}}),Hj=Ur(Uj,[["__file","NavbarDropdown.vue"]]),oI=e=>decodeURI(e).replace(/#.*$/,"").replace(/(index)?\.(md|html)$/,""),jj=(e,t)=>{if(t.hash===e)return!0;const r=oI(t.path),n=oI(e);return r===n},D4=(e,t)=>e.link&&jj(e.link,t)?!0:e.children?e.children.some(r=>D4(r,t)):!1,L4=e=>!hv(e)||/github\.com/.test(e)?"GitHub":/bitbucket\.org/.test(e)?"Bitbucket":/gitlab\.com/.test(e)?"GitLab":/gitee\.com/.test(e)?"Gitee":null,Gj={GitHub:":repo/edit/:branch/:path",GitLab:":repo/-/edit/:branch/:path",Gitee:":repo/edit/:branch/:path",Bitbucket:":repo/src/:branch/:path?mode=edit&spa=0&at=:branch&fileviewer=file-view-default"},qj=({docsRepo:e,editLinkPattern:t})=>{if(t)return t;const r=L4(e);return r!==null?Gj[r]:null},Wj=({docsRepo:e,docsBranch:t,docsDir:r,filePathRelative:n,editLinkPattern:i})=>{if(!n)return null;const a=qj({docsRepo:e,editLinkPattern:i});return a?a.replace(/:repo/,hv(e)?e:`https://github.com/${e}`).replace(/:branch/,t).replace(/:path/,Yk(`${Zk(r)}/${n}`)):null},Xj={key:0,class:"navbar-items"},Zj=jt({__name:"NavbarItems",setup(e){const t=()=>{const m=Qc(),g=fv(),y=a4(),x=nT(),T=ZH(),M=oa();return ke(()=>{const P=Object.keys(y.value.locales);if(P.length<2)return[];const I=m.currentRoute.value.path,D=m.currentRoute.value.fullPath;return[{text:`${M.value.selectLanguageText}`,ariaLabel:`${M.value.selectLanguageAriaLabel??M.value.selectLanguageText}`,children:P.map(B=>{var ne,ce;const H=((ne=y.value.locales)==null?void 0:ne[B])??{},V=((ce=T.value.locales)==null?void 0:ce[B])??{},q=`${H.lang}`,j=V.selectLanguageName??q;let te;if(q===x.value.lang)te=D;else{const le=I.replace(g.value,B);m.getRoutes().some(de=>de.path===le)?te=D.replace(I,le):te=V.home??B}return{text:j,link:te}})}]})},r=()=>{const m=oa(),g=ke(()=>m.value.repo),y=ke(()=>g.value?L4(g.value):null),x=ke(()=>g.value&&!hv(g.value)?`https://github.com/${g.value}`:g.value),T=ke(()=>x.value?m.value.repoLabel?m.value.repoLabel:y.value===null?"Source":y.value:null);return ke(()=>!x.value||!T.value?[]:[{text:T.value,link:x.value}])},n=m=>ms(m)?cT(m):m.children?{...m,children:m.children.map(n)}:m,i=()=>{const m=oa();return ke(()=>(m.value.navbar||[]).map(n))},a=xr(!1),s=i(),o=t(),h=r(),d=ke(()=>[...s.value,...o.value,...h.value]);return I4(Em.MOBILE,m=>{window.innerWidth<m?a.value=!0:a.value=!1}),(m,g)=>d.value.length?(lt(),Rt("nav",Xj,[(lt(!0),Rt(Pr,null,Fo(d.value,y=>(lt(),Rt("div",{key:y.text,class:"navbar-item"},[y.children?(lt(),En(Hj,{key:0,item:y,class:Ai(a.value?"mobile":"")},null,8,["item","class"])):(lt(),En(nl,{key:1,item:y},null,8,["item"]))]))),128))])):on("",!0)}}),k4=Ur(Zj,[["__file","NavbarItems.vue"]]),Yj=["title"],Kj={class:"icon",focusable:"false",viewBox:"0 0 32 32"},Jj=w7('<path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path>',9),Qj=[Jj],eG={class:"icon",focusable:"false",viewBox:"0 0 32 32"},tG=er("path",{d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z",fill:"currentColor"},null,-1),rG=[tG],nG=jt({__name:"ToggleColorModeButton",setup(e){const t=oa(),r=uT(),n=()=>{r.value=!r.value};return(i,a)=>(lt(),Rt("button",{class:"toggle-color-mode-button",title:Xt(t).toggleColorMode,onClick:n},[y_((lt(),Rt("svg",Kj,Qj,512)),[[S_,!Xt(r)]]),y_((lt(),Rt("svg",eG,rG,512)),[[S_,Xt(r)]])],8,Yj))}}),iG=Ur(nG,[["__file","ToggleColorModeButton.vue"]]),aG=["title"],oG=er("div",{class:"icon","aria-hidden":"true"},[er("span"),er("span"),er("span")],-1),sG=[oG],lG=jt({__name:"ToggleSidebarButton",emits:["toggle"],setup(e){const t=oa();return(r,n)=>(lt(),Rt("div",{class:"toggle-sidebar-button",title:Xt(t).toggleSidebar,"aria-expanded":"false",role:"button",tabindex:"0",onClick:n[0]||(n[0]=i=>r.$emit("toggle"))},sG,8,aG))}}),uG=Ur(lG,[["__file","ToggleSidebarButton.vue"]]),cG=jt({__name:"Navbar",emits:["toggle-sidebar"],setup(e){const t=oa(),r=xr(null),n=xr(null),i=xr(0),a=ke(()=>i.value?{maxWidth:i.value+"px"}:{});I4(Em.MOBILE,o=>{var d;const h=s(r.value,"paddingLeft")+s(r.value,"paddingRight");window.innerWidth<o?i.value=0:i.value=r.value.offsetWidth-h-(((d=n.value)==null?void 0:d.offsetWidth)||0)});function s(o,h){var g,y,x;const d=(x=(y=(g=o==null?void 0:o.ownerDocument)==null?void 0:g.defaultView)==null?void 0:y.getComputedStyle(o,null))==null?void 0:x[h],m=Number.parseInt(d,10);return Number.isNaN(m)?0:m}return(o,h)=>{const d=Rn("NavbarSearch");return lt(),Rt("header",{ref_key:"navbar",ref:r,class:"navbar"},[Pe(uG,{onToggle:h[0]||(h[0]=m=>o.$emit("toggle-sidebar"))}),er("span",{ref_key:"navbarBrand",ref:n},[Pe(Dj)],512),er("div",{class:"navbar-items-wrapper",style:Xf(a.value)},[nn(o.$slots,"before"),Pe(k4,{class:"can-hide"}),nn(o.$slots,"after"),Xt(t).colorModeSwitch?(lt(),En(iG,{key:0})):on("",!0),Pe(d)],4)],512)}}}),hG=Ur(cG,[["__file","Navbar.vue"]]),fG={class:"page-meta"},dG={key:0,class:"meta-item edit-link"},pG={key:1,class:"meta-item last-updated"},mG={class:"meta-item-label"},vG={class:"meta-item-info"},gG={key:2,class:"meta-item contributors"},yG={class:"meta-item-label"},_G={class:"meta-item-info"},xG=["title"],bG=jt({__name:"PageMeta",setup(e){const t=()=>{const h=oa(),d=su(),m=rl();return ke(()=>{if(!(m.value.editLink??h.value.editLink??!0))return null;const{repo:y,docsRepo:x=y,docsBranch:T="main",docsDir:M="",editLinkText:P}=h.value;if(!x)return null;const I=Wj({docsRepo:x,docsBranch:T,docsDir:M,filePathRelative:d.value.filePathRelative,editLinkPattern:m.value.editLinkPattern??h.value.editLinkPattern});return I?{text:P??"Edit this page",link:I}:null})},r=()=>{const h=oa(),d=su(),m=rl();return ke(()=>{var x,T;return!(m.value.lastUpdated??h.value.lastUpdated??!0)||!((x=d.value.git)!=null&&x.updatedTime)?null:new Date((T=d.value.git)==null?void 0:T.updatedTime).toLocaleString()})},n=()=>{const h=oa(),d=su(),m=rl();return ke(()=>{var y;return m.value.contributors??h.value.contributors??!0?((y=d.value.git)==null?void 0:y.contributors)??null:null})},i=oa(),a=t(),s=r(),o=n();return(h,d)=>{const m=Rn("ClientOnly");return lt(),Rt("footer",fG,[Xt(a)?(lt(),Rt("div",dG,[Pe(nl,{class:"meta-item-label",item:Xt(a)},null,8,["item"])])):on("",!0),Xt(s)?(lt(),Rt("div",pG,[er("span",mG,Or(Xt(i).lastUpdatedText)+": ",1),Pe(m,null,{default:Cn(()=>[er("span",vG,Or(Xt(s)),1)]),_:1})])):on("",!0),Xt(o)&&Xt(o).length?(lt(),Rt("div",gG,[er("span",yG,Or(Xt(i).contributorsText)+": ",1),er("span",_G,[(lt(!0),Rt(Pr,null,Fo(Xt(o),(g,y)=>(lt(),Rt(Pr,{key:y},[er("span",{class:"contributor",title:`email: ${g.email}`},Or(g.name),9,xG),y!==Xt(o).length-1?(lt(),Rt(Pr,{key:0},[ol(", ")],64)):on("",!0)],64))),128))])])):on("",!0)])}}}),wG=Ur(bG,[["__file","PageMeta.vue"]]),SG={key:0,class:"page-nav"},TG={class:"inner"},CG={key:0,class:"prev"},EG={key:1,class:"next"},AG=jt({__name:"PageNav",setup(e){const t=h=>h===!1?null:ms(h)?cT(h):tT(h)?h:!1,r=(h,d,m)=>{const g=h.findIndex(y=>y.link===d);if(g!==-1){const y=h[g+m];return y!=null&&y.link?y:null}for(const y of h)if(y.children){const x=r(y.children,d,m);if(x)return x}return null},n=rl(),i=hT(),a=gu(),s=ke(()=>{const h=t(n.value.prev);return h!==!1?h:r(i.value,a.path,-1)}),o=ke(()=>{const h=t(n.value.next);return h!==!1?h:r(i.value,a.path,1)});return(h,d)=>s.value||o.value?(lt(),Rt("nav",SG,[er("p",TG,[s.value?(lt(),Rt("span",CG,[Pe(nl,{item:s.value},null,8,["item"])])):on("",!0),o.value?(lt(),Rt("span",EG,[Pe(nl,{item:o.value},null,8,["item"])])):on("",!0)])])):on("",!0)}}),MG=Ur(AG,[["__file","PageNav.vue"]]),IG={class:"page"},PG={class:"theme-default-content"},DG=jt({__name:"Page",setup(e){return(t,r)=>{const n=Rn("Content");return lt(),Rt("main",IG,[nn(t.$slots,"top"),er("div",PG,[nn(t.$slots,"content-top"),Pe(n),nn(t.$slots,"content-bottom")]),Pe(wG),Pe(MG),nn(t.$slots,"bottom")])}}}),LG=Ur(DG,[["__file","Page.vue"]]),kG=["onKeydown"],RG={class:"sidebar-item-children"},OG=jt({__name:"SidebarItem",props:{item:{type:Object,required:!0},depth:{type:Number,required:!1,default:0}},setup(e){const t=e,{item:r,depth:n}=ov(t),i=gu(),a=Qc(),s=ke(()=>D4(r.value,i)),o=ke(()=>({"sidebar-item":!0,"sidebar-heading":n.value===0,active:s.value,collapsible:r.value.collapsible})),h=ke(()=>r.value.collapsible?s.value:!0),[d,m]=BH(h.value),g=x=>{r.value.collapsible&&(x.preventDefault(),m())},y=a.afterEach(x=>{xs(()=>{d.value=h.value})});return hl(()=>{y()}),(x,T)=>{var P;const M=Rn("SidebarItem",!0);return lt(),Rt("li",null,[Xt(r).link?(lt(),En(nl,{key:0,class:Ai(o.value),item:Xt(r)},null,8,["class","item"])):(lt(),Rt("p",{key:1,tabindex:"0",class:Ai(o.value),onClick:g,onKeydown:yV(g,["enter"])},[ol(Or(Xt(r).text)+" ",1),Xt(r).collapsible?(lt(),Rt("span",{key:0,class:Ai(["arrow",Xt(d)?"down":"right"])},null,2)):on("",!0)],42,kG)),(P=Xt(r).children)!=null&&P.length?(lt(),En(P4,{key:2},{default:Cn(()=>[y_(er("ul",RG,[(lt(!0),Rt(Pr,null,Fo(Xt(r).children,I=>(lt(),En(M,{key:`${Xt(n)}${I.text}${I.link}`,item:I,depth:Xt(n)+1},null,8,["item","depth"]))),128))],512),[[S_,Xt(d)]])]),_:1})):on("",!0)])}}}),zG=Ur(OG,[["__file","SidebarItem.vue"]]),BG={key:0,class:"sidebar-items"},FG=jt({__name:"SidebarItems",setup(e){const t=gu(),r=hT();return ti(()=>{mn(()=>t.hash,n=>{const i=document.querySelector(".sidebar");if(!i)return;const a=document.querySelector(`.sidebar a.sidebar-item[href="${t.path}${n}"]`);if(!a)return;const{top:s,height:o}=i.getBoundingClientRect(),{top:h,height:d}=a.getBoundingClientRect();h<s?a.scrollIntoView(!0):h+d>s+o&&a.scrollIntoView(!1)})}),(n,i)=>Xt(r).length?(lt(),Rt("ul",BG,[(lt(!0),Rt(Pr,null,Fo(Xt(r),a=>(lt(),En(zG,{key:`${a.text}${a.link}`,item:a},null,8,["item"]))),128))])):on("",!0)}}),$G=Ur(FG,[["__file","SidebarItems.vue"]]),NG={class:"sidebar"},VG=jt({__name:"Sidebar",setup(e){return(t,r)=>(lt(),Rt("aside",NG,[Pe(k4),nn(t.$slots,"top"),Pe($G),nn(t.$slots,"bottom")]))}}),UG=Ur(VG,[["__file","Sidebar.vue"]]),HG=jt({__name:"Layout",setup(e){const t=su(),r=rl(),n=oa(),i=ke(()=>r.value.navbar!==!1&&n.value.navbar!==!1),a=hT(),s=xr(!1),o=P=>{s.value=typeof P=="boolean"?P:!s.value},h={x:0,y:0},d=P=>{h.x=P.changedTouches[0].clientX,h.y=P.changedTouches[0].clientY},m=P=>{const I=P.changedTouches[0].clientX-h.x,D=P.changedTouches[0].clientY-h.y;Math.abs(I)>Math.abs(D)&&Math.abs(I)>40&&(I>0&&h.x<=80?o(!0):o(!1))},g=ke(()=>[{"no-navbar":!i.value,"no-sidebar":!a.value.length,"sidebar-open":s.value},r.value.pageClass]);let y;ti(()=>{y=Qc().afterEach(()=>{o(!1)})}),Zf(()=>{y()});const x=E4(),T=x.resolve,M=x.pending;return(P,I)=>(lt(),Rt("div",{class:Ai(["theme-container",g.value]),onTouchstart:d,onTouchend:m},[nn(P.$slots,"navbar",{},()=>[i.value?(lt(),En(hG,{key:0,onToggleSidebar:o},{before:Cn(()=>[nn(P.$slots,"navbar-before")]),after:Cn(()=>[nn(P.$slots,"navbar-after")]),_:3})):on("",!0)]),er("div",{class:"sidebar-mask",onClick:I[0]||(I[0]=D=>o(!1))}),nn(P.$slots,"sidebar",{},()=>[Pe(UG,null,{top:Cn(()=>[nn(P.$slots,"sidebar-top")]),bottom:Cn(()=>[nn(P.$slots,"sidebar-bottom")]),_:3})]),nn(P.$slots,"page",{},()=>[Xt(r).home?(lt(),En(Ij,{key:0})):(lt(),En(vu,{key:1,name:"fade-slide-y",mode:"out-in",onBeforeEnter:Xt(T),onBeforeLeave:Xt(M)},{default:Cn(()=>[(lt(),En(LG,{key:Xt(t).path},{top:Cn(()=>[nn(P.$slots,"page-top")]),"content-top":Cn(()=>[nn(P.$slots,"page-content-top")]),"content-bottom":Cn(()=>[nn(P.$slots,"page-content-bottom")]),bottom:Cn(()=>[nn(P.$slots,"page-bottom")]),_:3}))]),_:3},8,["onBeforeEnter","onBeforeLeave"]))])],34))}}),jG=Ur(HG,[["__file","Layout.vue"]]),GG={class:"theme-container"},qG={class:"page"},WG={class:"theme-default-content"},XG=er("h1",null,"404",-1),ZG=jt({__name:"NotFound",setup(e){const t=fv(),r=oa(),n=r.value.notFound??["Not Found"],i=()=>n[Math.floor(Math.random()*n.length)],a=r.value.home??t.value,s=r.value.backToHome??"Back to home";return(o,h)=>{const d=Rn("RouterLink");return lt(),Rt("div",GG,[er("main",qG,[er("div",WG,[XG,er("blockquote",null,Or(i()),1),Pe(d,{to:Xt(a)},{default:Cn(()=>[ol(Or(Xt(s)),1)]),_:1},8,["to"])])])])}}}),YG=Ur(ZG,[["__file","NotFound.vue"]]);const KG=Uo({enhance({app:e,router:t}){e.component("Badge",wH),e.component("CodeGroup",SH),e.component("CodeGroupItem",AH),e.component("AutoLinkExternalIcon",()=>{const n=e.component("ExternalLinkIcon");return n?_r(n):null}),e.component("NavbarSearch",()=>{const n=e.component("Docsearch")||e.component("SearchBox");return n?_r(n):null});const r=t.options.scrollBehavior;t.options.scrollBehavior=async(...n)=>(await E4().wait(),r(...n))},setup(){YH(),QH()},layouts:{Layout:jG,NotFound:YG}}),JG=e=>{const t=Zw("keydown",r=>{const n=r.key==="k"&&(r.ctrlKey||r.metaKey);!(r.key==="/")&&!n||(r.preventDefault(),e(),t())})},QG=e=>e.button===1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey,eq=()=>{const e=Qc();return{hitComponent:({hit:t,children:r})=>({type:"a",ref:void 0,constructor:void 0,key:void 0,props:{href:t.url,onClick:n=>{QG(n)||(n.preventDefault(),e.push(RM(t.url,"/")))},children:r},__v:null}),navigator:{navigate:({itemUrl:t})=>{e.push(RM(t,"/"))}},transformSearchClient:t=>{const r=aT(t.search,500);return{...t,search:async(...n)=>r(...n)}}}},tq=(e=[],t)=>[`lang:${t}`,...cv(e)?e:[e]],rq=({buttonText:e="Search",buttonAriaLabel:t=e}={})=>`<button type="button" class="DocSearch DocSearch-Button" aria-label="${t}"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">${e}</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button>`,nq=16,R4=()=>{if(document.querySelector(".DocSearch-Modal"))return;const e=new Event("keydown");e.key="k",e.metaKey=!0,window.dispatchEvent(e),setTimeout(R4,nq)},iq=e=>{const t="algolia-preconnect";(window.requestIdleCallback||setTimeout)(()=>{if(document.head.querySelector(`#${t}`))return;const n=document.createElement("link");n.id=t,n.rel="preconnect",n.href=`https://${e}-dsn.algolia.net`,n.crossOrigin="",document.head.appendChild(n)})},aq={appId:"6KECEJUGJH",apiKey:"9a5c8aa7cb2d5d32ebd66790e1a84789",indexName:"sustech-online-keys",locales:{"/":{placeholder:"",translations:{button:{buttonText:"",buttonAriaLabel:""},modal:{searchBox:{resetButtonTitle:"",resetButtonAriaLabel:"",cancelButtonText:"",cancelButtonAriaLabel:""},startScreen:{recentSearchesTitle:"",noRecentSearchesText:"",saveRecentSearchButtonTitle:"",removeRecentSearchButtonTitle:"",favoriteSearchesTitle:"",removeFavoriteSearchButtonTitle:""},errorScreen:{titleText:"",helpText:""},footer:{selectText:"",navigateText:"",closeText:"",searchByText:""},noResultsScreen:{noResultsText:"",suggestedQueryText:"",reportMissingResultsText:"",reportMissingResultsLinkText:""}}}}}};Ne(()=>import("./style-e9220a04.js"),[]),Ne(()=>import("./docsearch-1d421ddb.js"),[]);const oq=jt({name:"Docsearch",props:{containerId:{type:String,required:!1,default:"docsearch-container"},options:{type:Object,required:!1,default:()=>aq}},setup(e){const t=eq(),r=n4(),n=fv(),i=xr(!1),a=xr(!1),s=ke(()=>{var d;return{...e.options,...(d=e.options.locales)==null?void 0:d[n.value]}}),o=async()=>{var m;const{default:d}=await Ne(()=>import("./index-82585c84.js"),[]);d({...t,...s.value,container:`#${e.containerId}`,searchParameters:{...s.value.searchParameters,facetFilters:tq((m=s.value.searchParameters)==null?void 0:m.facetFilters,r.value)}}),i.value=!0},h=()=>{a.value||i.value||(a.value=!0,o(),R4(),mn(n,o))};return JG(h),ti(()=>iq(s.value.appId)),()=>{var d;return[_r("div",{id:e.containerId,style:{display:i.value?"block":"none"}}),i.value?null:_r("div",{onClick:h,innerHTML:rq((d=s.value.translations)==null?void 0:d.button)})]}}}),sq=Uo({enhance({app:e}){e.component("Docsearch",oq)}});function lq(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}const uq=Symbol("pwaEvent"),cq="service-worker.js",hq=Uo({setup(){const e=(...r)=>console.log("[@vuepress/plugin-pwa]",...r),t=lq();Mi(uq,t),ti(async()=>{const{register:r}=await Ne(()=>import("./index-e32a7948.js"),[]);r(T0(cq),{ready(n){e("Service worker is active."),t.emit("ready",n)},registered(n){e("Service worker has been registered."),t.emit("registered",n)},cached(n){e("Content has been cached for offline use."),t.emit("cached",n)},updatefound(n){e("New content is downloading."),t.emit("updatefound",n)},updated(n){e("New content is available, please refresh."),t.emit("updated",n)},offline(){e("No internet connection found. App is running in offline mode."),t.emit("offline")},error(n){e("Error during service worker registration:",n),t.emit("error",n)}})})}}),fq=(e,t,r)=>{const n=`#${e.slug}`,i=[t.linkClass];return t.linkActiveClass&&r.hash===n&&i.push(t.linkActiveClass),t.linkChildrenActiveClass&&e.children.some(a=>`#${a.slug}`===r.hash)&&i.push(t.linkChildrenActiveClass),t.linkTag==="RouterLink"?_r(g4,{to:n,class:i,ariaLabel:e.title},()=>e.title):_r("a",{href:n,class:i,ariaLabel:e.title},e.title)},O4=(e,t,r)=>e.length===0?[]:[_r("ul",{class:t.listClass},e.map(n=>_r("li",{class:t.itemClass},[fq(n,t,r),O4(n.children,t,r)])))],dq=jt({name:"Toc",props:{headers:{type:Array,required:!1,default:null},options:{type:Object,required:!1,default:()=>({})}},setup(e){const{headers:t,options:r}=ov(e),n=gu(),i=su(),a=ke(()=>{var h;const o=t.value||i.value.headers;return((h=o[0])==null?void 0:h.level)===1?o[0].children:o}),s=ke(()=>({containerTag:"nav",containerClass:"vuepress-toc",listClass:"vuepress-toc-list",itemClass:"vuepress-toc-item",linkTag:"RouterLink",linkClass:"vuepress-toc-link",linkActiveClass:"active",linkChildrenActiveClass:"active",...r.value}));return()=>{const o=O4(a.value,s.value,n);return s.value.containerTag?_r(s.value.containerTag,{class:s.value.containerClass},o):o}}}),pq={},mq=Uo({enhance({app:e}){e.component("Toc",t=>_r(dq,{headers:t.headers,options:{...pq,...t.options}}))}});var z4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var mT={exports:{}},B4=function(t,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(r,i)}},vq=B4,vT=Object.prototype.toString,gT=function(e){return function(t){var r=vT.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function eh(e){return e=e.toLowerCase(),function(r){return gT(r)===e}}function yT(e){return Array.isArray(e)}function A_(e){return typeof e>"u"}function gq(e){return e!==null&&!A_(e)&&e.constructor!==null&&!A_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var F4=eh("ArrayBuffer");function yq(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&F4(e.buffer),t}function _q(e){return typeof e=="string"}function xq(e){return typeof e=="number"}function $4(e){return e!==null&&typeof e=="object"}function jy(e){if(gT(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var bq=eh("Date"),wq=eh("File"),Sq=eh("Blob"),Tq=eh("FileList");function _T(e){return vT.call(e)==="[object Function]"}function Cq(e){return $4(e)&&_T(e.pipe)}function Eq(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||vT.call(e)===t||_T(e.toString)&&e.toString()===t)}var Aq=eh("URLSearchParams");function Mq(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Iq(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function xT(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),yT(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function Yw(){var e={};function t(i,a){jy(e[a])&&jy(i)?e[a]=Yw(e[a],i):jy(i)?e[a]=Yw({},i):yT(i)?e[a]=i.slice():e[a]=i}for(var r=0,n=arguments.length;r<n;r++)xT(arguments[r],t);return e}function Pq(e,t,r){return xT(t,function(i,a){r&&typeof i=="function"?e[a]=vq(i,r):e[a]=i}),e}function Dq(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function Lq(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function kq(e,t,r){var n,i,a,s={};t=t||{};do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)a=n[i],s[a]||(t[a]=e[a],s[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t}function Rq(e,t,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return n!==-1&&n===r}function Oq(e){if(!e)return null;var t=e.length;if(A_(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r}var zq=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),Di={isArray:yT,isArrayBuffer:F4,isBuffer:gq,isFormData:Eq,isArrayBufferView:yq,isString:_q,isNumber:xq,isObject:$4,isPlainObject:jy,isUndefined:A_,isDate:bq,isFile:wq,isBlob:Sq,isFunction:_T,isStream:Cq,isURLSearchParams:Aq,isStandardBrowserEnv:Iq,forEach:xT,merge:Yw,extend:Pq,trim:Mq,stripBOM:Dq,inherits:Lq,toFlatObject:kq,kindOf:gT,kindOfTest:eh,endsWith:Rq,toArray:Oq,isTypedArray:zq,isFileList:Tq},$h=Di;function sI(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var N4=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if($h.isURLSearchParams(r))i=r.toString();else{var a=[];$h.forEach(r,function(h,d){h===null||typeof h>"u"||($h.isArray(h)?d=d+"[]":h=[h],$h.forEach(h,function(g){$h.isDate(g)?g=g.toISOString():$h.isObject(g)&&(g=JSON.stringify(g)),a.push(sI(d)+"="+sI(g))}))}),i=a.join("&")}if(i){var s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},Bq=Di;function A0(){this.handlers=[]}A0.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};A0.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};A0.prototype.forEach=function(t){Bq.forEach(this.handlers,function(n){n!==null&&t(n)})};var Fq=A0,$q=Di,Nq=function(t,r){$q.forEach(t,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[a])})},V4=Di;function Lf(e,t,r,n,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}V4.inherits(Lf,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var U4=Lf.prototype,H4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){H4[e]={value:e}});Object.defineProperties(Lf,H4);Object.defineProperty(U4,"isAxiosError",{value:!0});Lf.from=function(e,t,r,n,i,a){var s=Object.create(U4);return V4.toFlatObject(e,s,function(h){return h!==Error.prototype}),Lf.call(s,e.message,t,r,n,i),s.name=e.name,a&&Object.assign(s,a),s};var Yf=Lf,j4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},To=Di;function Vq(e,t){t=t||new FormData;var r=[];function n(a){return a===null?"":To.isDate(a)?a.toISOString():To.isArrayBuffer(a)||To.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function i(a,s){if(To.isPlainObject(a)||To.isArray(a)){if(r.indexOf(a)!==-1)throw Error("Circular reference detected in "+s);r.push(a),To.forEach(a,function(h,d){if(!To.isUndefined(h)){var m=s?s+"."+d:d,g;if(h&&!s&&typeof h=="object"){if(To.endsWith(d,"{}"))h=JSON.stringify(h);else if(To.endsWith(d,"[]")&&(g=To.toArray(h))){g.forEach(function(y){!To.isUndefined(y)&&t.append(m,n(y))});return}}i(h,m)}}),r.pop()}else t.append(s,n(a))}return i(e),t}var G4=Vq,Rx,lI;function Uq(){if(lI)return Rx;lI=1;var e=Yf;return Rx=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(new e("Request failed with status code "+i.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},Rx}var Ox,uI;function Hq(){if(uI)return Ox;uI=1;var e=Di;return Ox=e.isStandardBrowserEnv()?function(){return{write:function(n,i,a,s,o,h){var d=[];d.push(n+"="+encodeURIComponent(i)),e.isNumber(a)&&d.push("expires="+new Date(a).toGMTString()),e.isString(s)&&d.push("path="+s),e.isString(o)&&d.push("domain="+o),h===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ox}var jq=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},Gq=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},qq=jq,Wq=Gq,q4=function(t,r){return t&&!qq(r)?Wq(t,r):r},zx,cI;function Xq(){if(cI)return zx;cI=1;var e=Di,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return zx=function(n){var i={},a,s,o;return n&&e.forEach(n.split(`
`),function(d){if(o=d.indexOf(":"),a=e.trim(d.substr(0,o)).toLowerCase(),s=e.trim(d.substr(o+1)),a){if(i[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([s]):i[a]=i[a]?i[a]+", "+s:s}}),i},zx}var Bx,hI;function Zq(){if(hI)return Bx;hI=1;var e=Di;return Bx=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(s){var o=s;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(o){var h=e.isString(o)?a(o):o;return h.protocol===i.protocol&&h.host===i.host}}():function(){return function(){return!0}}(),Bx}var Fx,fI;function M0(){if(fI)return Fx;fI=1;var e=Yf,t=Di;function r(n){e.call(this,n??"canceled",e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(r,e,{__CANCEL__:!0}),Fx=r,Fx}var $x,dI;function Yq(){return dI||(dI=1,$x=function(t){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}),$x}var Nx,pI;function mI(){if(pI)return Nx;pI=1;var e=Di,t=Uq(),r=Hq(),n=N4,i=q4,a=Xq(),s=Zq(),o=j4,h=Yf,d=M0(),m=Yq();return Nx=function(y){return new Promise(function(T,M){var P=y.data,I=y.headers,D=y.responseType,R;function B(){y.cancelToken&&y.cancelToken.unsubscribe(R),y.signal&&y.signal.removeEventListener("abort",R)}e.isFormData(P)&&e.isStandardBrowserEnv()&&delete I["Content-Type"];var H=new XMLHttpRequest;if(y.auth){var V=y.auth.username||"",q=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";I.Authorization="Basic "+btoa(V+":"+q)}var j=i(y.baseURL,y.url);H.open(y.method.toUpperCase(),n(j,y.params,y.paramsSerializer),!0),H.timeout=y.timeout;function te(){if(H){var le="getAllResponseHeaders"in H?a(H.getAllResponseHeaders()):null,de=!D||D==="text"||D==="json"?H.responseText:H.response,ae={data:de,status:H.status,statusText:H.statusText,headers:le,config:y,request:H};t(function(ve){T(ve),B()},function(ve){M(ve),B()},ae),H=null}}if("onloadend"in H?H.onloadend=te:H.onreadystatechange=function(){!H||H.readyState!==4||H.status===0&&!(H.responseURL&&H.responseURL.indexOf("file:")===0)||setTimeout(te)},H.onabort=function(){H&&(M(new h("Request aborted",h.ECONNABORTED,y,H)),H=null)},H.onerror=function(){M(new h("Network Error",h.ERR_NETWORK,y,H,H)),H=null},H.ontimeout=function(){var de=y.timeout?"timeout of "+y.timeout+"ms exceeded":"timeout exceeded",ae=y.transitional||o;y.timeoutErrorMessage&&(de=y.timeoutErrorMessage),M(new h(de,ae.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,y,H)),H=null},e.isStandardBrowserEnv()){var ne=(y.withCredentials||s(j))&&y.xsrfCookieName?r.read(y.xsrfCookieName):void 0;ne&&(I[y.xsrfHeaderName]=ne)}"setRequestHeader"in H&&e.forEach(I,function(de,ae){typeof P>"u"&&ae.toLowerCase()==="content-type"?delete I[ae]:H.setRequestHeader(ae,de)}),e.isUndefined(y.withCredentials)||(H.withCredentials=!!y.withCredentials),D&&D!=="json"&&(H.responseType=y.responseType),typeof y.onDownloadProgress=="function"&&H.addEventListener("progress",y.onDownloadProgress),typeof y.onUploadProgress=="function"&&H.upload&&H.upload.addEventListener("progress",y.onUploadProgress),(y.cancelToken||y.signal)&&(R=function(le){H&&(M(!le||le&&le.type?new d:le),H.abort(),H=null)},y.cancelToken&&y.cancelToken.subscribe(R),y.signal&&(y.signal.aborted?R():y.signal.addEventListener("abort",R))),P||(P=null);var ce=m(j);if(ce&&["http","https","file"].indexOf(ce)===-1){M(new h("Unsupported protocol "+ce+":",h.ERR_BAD_REQUEST,y));return}H.send(P)})},Nx}var Vx,vI;function Kq(){return vI||(vI=1,Vx=null),Vx}var vi=Di,gI=Nq,yI=Yf,Jq=j4,Qq=G4,eW={"Content-Type":"application/x-www-form-urlencoded"};function _I(e,t){!vi.isUndefined(e)&&vi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function tW(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=mI()),e}function rW(e,t,r){if(vi.isString(e))try{return(t||JSON.parse)(e),vi.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var I0={transitional:Jq,adapter:tW(),transformRequest:[function(t,r){if(gI(r,"Accept"),gI(r,"Content-Type"),vi.isFormData(t)||vi.isArrayBuffer(t)||vi.isBuffer(t)||vi.isStream(t)||vi.isFile(t)||vi.isBlob(t))return t;if(vi.isArrayBufferView(t))return t.buffer;if(vi.isURLSearchParams(t))return _I(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n=vi.isObject(t),i=r&&r["Content-Type"],a;if((a=vi.isFileList(t))||n&&i==="multipart/form-data"){var s=this.env&&this.env.FormData;return Qq(a?{"files[]":t}:t,s&&new s)}else if(n||i==="application/json")return _I(r,"application/json"),rW(t);return t}],transformResponse:[function(t){var r=this.transitional||I0.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&vi.isString(t)&&t.length)try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?yI.from(s,yI.ERR_BAD_RESPONSE,this,null,this.response):s}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kq()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};vi.forEach(["delete","get","head"],function(t){I0.headers[t]={}});vi.forEach(["post","put","patch"],function(t){I0.headers[t]=vi.merge(eW)});var bT=I0,nW=Di,iW=bT,aW=function(t,r,n){var i=this||iW;return nW.forEach(n,function(s){t=s.call(i,t,r)}),t},Ux,xI;function W4(){return xI||(xI=1,Ux=function(t){return!!(t&&t.__CANCEL__)}),Ux}var bI=Di,Hx=aW,oW=W4(),sW=bT,lW=M0();function jx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lW}var uW=function(t){jx(t),t.headers=t.headers||{},t.data=Hx.call(t,t.data,t.headers,t.transformRequest),t.headers=bI.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),bI.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||sW.adapter;return r(t).then(function(i){return jx(t),i.data=Hx.call(t,i.data,i.headers,t.transformResponse),i},function(i){return oW(i)||(jx(t),i&&i.response&&(i.response.data=Hx.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},La=Di,X4=function(t,r){r=r||{};var n={};function i(m,g){return La.isPlainObject(m)&&La.isPlainObject(g)?La.merge(m,g):La.isPlainObject(g)?La.merge({},g):La.isArray(g)?g.slice():g}function a(m){if(La.isUndefined(r[m])){if(!La.isUndefined(t[m]))return i(void 0,t[m])}else return i(t[m],r[m])}function s(m){if(!La.isUndefined(r[m]))return i(void 0,r[m])}function o(m){if(La.isUndefined(r[m])){if(!La.isUndefined(t[m]))return i(void 0,t[m])}else return i(void 0,r[m])}function h(m){if(m in r)return i(t[m],r[m]);if(m in t)return i(void 0,t[m])}var d={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:h};return La.forEach(Object.keys(t).concat(Object.keys(r)),function(g){var y=d[g]||a,x=y(g);La.isUndefined(x)&&y!==h||(n[g]=x)}),n},Gx,wI;function Z4(){return wI||(wI=1,Gx={version:"0.27.2"}),Gx}var cW=Z4().version,Ql=Yf,wT={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){wT[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var SI={};wT.transitional=function(t,r,n){function i(a,s){return"[Axios v"+cW+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,o){if(t===!1)throw new Ql(i(s," has been removed"+(r?" in "+r:"")),Ql.ERR_DEPRECATED);return r&&!SI[s]&&(SI[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,s,o):!0}};function hW(e,t,r){if(typeof e!="object")throw new Ql("options must be an object",Ql.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),i=n.length;i-- >0;){var a=n[i],s=t[a];if(s){var o=e[a],h=o===void 0||s(o,a,e);if(h!==!0)throw new Ql("option "+a+" must be "+h,Ql.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ql("Unknown option "+a,Ql.ERR_BAD_OPTION)}}var fW={assertOptions:hW,validators:wT},Y4=Di,dW=N4,TI=Fq,CI=uW,P0=X4,pW=q4,K4=fW,Nh=K4.validators;function kf(e){this.defaults=e,this.interceptors={request:new TI,response:new TI}}kf.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=P0(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&K4.assertOptions(n,{silentJSONParsing:Nh.transitional(Nh.boolean),forcedJSONParsing:Nh.transitional(Nh.boolean),clarifyTimeoutError:Nh.transitional(Nh.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(a=a&&x.synchronous,i.unshift(x.fulfilled,x.rejected))});var s=[];this.interceptors.response.forEach(function(x){s.push(x.fulfilled,x.rejected)});var o;if(!a){var h=[CI,void 0];for(Array.prototype.unshift.apply(h,i),h=h.concat(s),o=Promise.resolve(r);h.length;)o=o.then(h.shift(),h.shift());return o}for(var d=r;i.length;){var m=i.shift(),g=i.shift();try{d=m(d)}catch(y){g(y);break}}try{o=CI(d)}catch(y){return Promise.reject(y)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};kf.prototype.getUri=function(t){t=P0(this.defaults,t);var r=pW(t.baseURL,t.url);return dW(r,t.params,t.paramsSerializer)};Y4.forEach(["delete","get","head","options"],function(t){kf.prototype[t]=function(r,n){return this.request(P0(n||{},{method:t,url:r,data:(n||{}).data}))}});Y4.forEach(["post","put","patch"],function(t){function r(n){return function(a,s,o){return this.request(P0(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}kf.prototype[t]=r(),kf.prototype[t+"Form"]=r(!0)});var mW=kf,qx,EI;function vW(){if(EI)return qx;EI=1;var e=M0();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var i=this;this.promise.then(function(a){if(i._listeners){var s,o=i._listeners.length;for(s=0;s<o;s++)i._listeners[s](a);i._listeners=null}}),this.promise.then=function(a){var s,o=new Promise(function(h){i.subscribe(h),s=h}).then(a);return o.cancel=function(){i.unsubscribe(s)},o},r(function(s){i.reason||(i.reason=new e(s),n(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var n,i=new t(function(s){n=s});return{token:i,cancel:n}},qx=t,qx}var Wx,AI;function gW(){return AI||(AI=1,Wx=function(t){return function(n){return t.apply(null,n)}}),Wx}var Xx,MI;function yW(){if(MI)return Xx;MI=1;var e=Di;return Xx=function(r){return e.isObject(r)&&r.isAxiosError===!0},Xx}var II=Di,_W=B4,Gy=mW,xW=X4,bW=bT;function J4(e){var t=new Gy(e),r=_W(Gy.prototype.request,t);return II.extend(r,Gy.prototype,t),II.extend(r,t),r.create=function(i){return J4(xW(e,i))},r}var Sa=J4(bW);Sa.Axios=Gy;Sa.CanceledError=M0();Sa.CancelToken=vW();Sa.isCancel=W4();Sa.VERSION=Z4().version;Sa.toFormData=G4;Sa.AxiosError=Yf;Sa.Cancel=Sa.CanceledError;Sa.all=function(t){return Promise.all(t)};Sa.spread=gW();Sa.isAxiosError=yW();mT.exports=Sa;mT.exports.default=Sa;var wW=mT.exports,SW=wW;const Fa=dT(SW);function PI(e){let t=Math.abs(e),r=Math.floor(t/3600);t-=r*3600;let n=Math.floor(t/60);return t-=n*60,[r,n,t]}function DI(e){return e<10?"0"+e:e}const TW={props:{secondFromDispatch:{type:Number},stationEstimate:{type:String},startSecond:{type:Number}},computed:{timeToShow:function(){let e=PI(this.secondFromDispatch),t=e[2]>=30;return e[1]>0?[e[0]>0?e[0]+"":"",e[1],"",t?"":""].join(""):t?"":""},startTime:function(){let e=PI(this.startSecond);return["",DI(e[0]),":",DI(e[1])].join("")},isWaiting:function(){return this.secondFromDispatch<=0}}},CW={key:0};function EW(e,t,r,n,i,a){return r.secondFromDispatch?(lt(),Rt("tr",{key:0,class:Ai(a.isWaiting?"bus-waiting":"bus-running")},[er("td",null,Or(a.startTime),1),er("td",null,Or(a.isWaiting?"":""),1),er("td",null,Or((a.isWaiting,""+a.timeToShow)),1),r.stationEstimate?(lt(),Rt("td",CW,Or(r.stationEstimate),1)):on("",!0)],2)):on("",!0)}const AW=Ur(TW,[["render",EW],["__scopeId","data-v-259a8620"],["__file","BusItem.vue"]]);function Q4(e,t,r){return e*3600+t*60+r}function MW(e){let t=[];for(let r of e){let n=r.split(":"),i=Q4(Number(n[0].trim()),Number(n[1].trim()),0);t.push(i)}return t.sort((r,n)=>r-n)}const IW={data(){return{secondFromZero:0,second:0,minute:0,hour:0,timeRangeAfterReach:3}},props:{times:{},stations:{},minuteOnRoad:{type:Number,default:20},timeRangeBeforeDispatch:{type:Number,default:60}},components:{BusItem:AW},mounted(){setInterval(()=>{this.tick()},1e3)},methods:{tick:function(){var e=new Date;this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds(),this.secondFromZero=Q4(this.hour,this.minute,this.second)},formatNumber:function(e){return e<10?"0"+e:e},stationEstimate:function(e){if(!this.stationNames)return"null";if(e<=0)return this.stationNames[0];let t=this.stationNames.length;if(e>=this.minuteOnRoad*60)return this.stationNames[t-1];let r=e/60/this.minuteOnRoad,n="";for(let i in this.stationPositions)if(r<this.stationPositions[i]){n=this.stationNames[i];break}return n}},computed:{secondList:function(){return MW(this.times)},busToShow:function(){if(!this.secondList)return null;let e=[],t=[];for(let r of this.secondList){let n=this.secondFromZero-r;n<0&&n>-this.timeRangeBeforeDispatch*60&&t.push([n,r]),n>0&&n<(this.minuteOnRoad+this.timeRangeAfterReach)*60&&e.push([n,r])}return e.concat(t)},stationNames:function(){let e=[];for(let t of this.stations)e.push(t[0]);return e},stationPositions:function(){let e=[];for(let t of this.stations)e.push(t[1]);return e}}},PW=e=>(GS("data-v-dc817d2c"),e=e(),qS(),e),DW={key:0,class:"bus-timer-tb"},LW={colspan:"2"},kW={colspan:"2",style:{"text-align":"right"}},RW={key:0,colspan:"4"},OW=PW(()=>er("p",{class:"plus-note"},"* ",-1));function zW(e,t,r,n,i,a){const s=Rn("bus-item");return lt(),Rt("div",null,[a.busToShow?(lt(),Rt("table",DW,[er("thead",null,[er("tr",null,[er("th",LW,Or(r.stations[0][0])+" > "+Or(r.stations[r.stations.length-1][0]),1),er("th",kW,Or(a.formatNumber(i.hour))+":"+Or(a.formatNumber(i.minute))+":"+Or(a.formatNumber(i.second)),1)]),(lt(!0),Rt(Pr,null,Fo(a.busToShow,(o,h)=>(lt(),En(s,{secondFromDispatch:o[0],stationEstimate:a.stationEstimate(o[0]),startSecond:o[1],key:h},null,8,["secondFromDispatch","stationEstimate","startSecond"]))),128)),er("tr",null,[Object.keys(a.busToShow).length==0?(lt(),Rt("td",RW,"  ")):on("",!0)])])])):on("",!0),OW])}const BW=Ur(IW,[["render",zW],["__scopeId","data-v-dc817d2c"],["__file","BusTimer.vue"]]);function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}function FW(e,t){if(Am(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Am(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $W(e){var t=FW(e,"string");return Am(t)==="symbol"?t:String(t)}function NW(e,t,r){return t=$W(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(r),!0).forEach(function(n){NW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ze.apply(this,arguments)}const VW=Array.isArray,UW=e=>typeof e=="string",HW=e=>e!==null&&typeof e=="object";function lf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return typeof e=="function"?e(t):e??r}function jW(e){let t;const r=new Promise(i=>{t=e(()=>{i(!0)})}),n=()=>{t==null||t()};return n.then=(i,a)=>r.then(i,a),n.promise=r,n}function ui(){const e=[];for(let t=0;t<arguments.length;t++){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r){if(UW(r))e.push(r);else if(VW(r))for(let n=0;n<r.length;n++){const i=ui(r[n]);i&&e.push(i)}else if(HW(r))for(const n in r)r[n]&&e.push(n)}}return e.join(" ")}const GW=e=>e!=null&&e!=="",qW=GW,WW=(e,t)=>{const r=ze({},e);return Object.keys(t).forEach(n=>{const i=r[n];if(i)i.type||i.default?i.default=t[n]:i.def?i.def(t[n]):r[n]={type:i,default:t[n]};else throw new Error(`not have ${n} prop`)}),r},ST=WW,XW=Symbol("skipFlatten"),Mm=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=Array.isArray(e)?e:[e],n=[];return r.forEach(i=>{Array.isArray(i)?n.push(...Mm(i,t)):i&&i.type===Pr?i.key===XW?n.push(i):n.push(...Mm(i.children,t)):i&&Sm(i)?t&&!eR(i)?n.push(i):t||n.push(i):qW(i)&&n.push(i)}),n},Kw=e=>{var t;let r=((t=e==null?void 0:e.vnode)===null||t===void 0?void 0:t.el)||e&&(e.$el||e);for(;r&&!r.tagName;)r=r.nextSibling;return r};function eR(e){return e&&(e.type===_a||e.type===Pr&&e.children.length===0||e.type===hu&&e.children.trim()==="")}function tR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return e.forEach(r=>{Array.isArray(r)?t.push(...r):(r==null?void 0:r.type)===Pr?t.push(...tR(r.children)):t.push(r)}),t.filter(r=>!eR(r))}let rR=e=>setTimeout(e,16),nR=e=>clearTimeout(e);typeof window<"u"&&"requestAnimationFrame"in window&&(rR=e=>window.requestAnimationFrame(e),nR=e=>window.cancelAnimationFrame(e));let kI=0;const TT=new Map;function iR(e){TT.delete(e)}function Jw(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;kI+=1;const r=kI;function n(i){if(i===0)iR(r),e();else{const a=rR(()=>{n(i-1)});TT.set(r,a)}}return n(t),r}Jw.cancel=e=>{const t=TT.get(e);return iR(t),nR(t)};const M_=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t},D0=e=>{const t=e;return t.install=function(r){r.component(t.displayName||t.name,e)},e};function RI(){return{type:[Function,Array]}}function Ba(e){return{type:Object,default:e}}function $c(e){return{type:Boolean,default:e}}function OI(e){return{type:Function,default:e}}function Do(e,t){const r={validator:()=>!0,default:e};return r}function Qw(e){return{type:Array,default:e}}function e2(e){return{type:String,default:e}}function aR(e,t){return e?{type:e,default:t}:Do(t)}const CT="anticon",ZW=Symbol("GlobalFormContextKey"),YW=e=>{Mi(ZW,e)},KW=()=>({iconPrefixCls:String,getTargetContainer:{type:Function},getPopupContainer:{type:Function},prefixCls:String,getPrefixCls:{type:Function},renderEmpty:{type:Function},transformCellText:{type:Function},csp:Ba(),input:Ba(),autoInsertSpaceInButton:{type:Boolean,default:void 0},locale:Ba(),pageHeader:Ba(),componentSize:{type:String},componentDisabled:{type:Boolean,default:void 0},direction:{type:String,default:"ltr"},space:Ba(),virtual:{type:Boolean,default:void 0},dropdownMatchSelectWidth:{type:[Number,Boolean],default:!0},form:Ba(),pagination:Ba(),theme:Ba(),select:Ba()}),ET=Symbol("configProvider"),oR={getPrefixCls:(e,t)=>t||(e?`ant-${e}`:"ant"),iconPrefixCls:ke(()=>CT),getPopupContainer:ke(()=>()=>document.body),direction:ke(()=>"ltr")},sR=()=>Br(ET,oR),JW=e=>Mi(ET,e),lR=Symbol("DisabledContextKey"),AT=()=>Br(lR,xr(void 0)),QW=e=>{const t=AT();return Mi(lR,ke(()=>{var r;return(r=e.value)!==null&&r!==void 0?r:t.value})),e},eX={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},tX={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},rX=tX,nX={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},uR=nX,iX={lang:ze({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},rX),timePickerLocale:ze({},uR)},zI=iX,ka="${label} is not a valid ${type}",aX={locale:"en",Pagination:eX,DatePicker:zI,TimePicker:uR,Calendar:zI,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:ka,method:ka,array:ka,object:ka,number:ka,date:ka,boolean:ka,integer:ka,float:ka,regexp:ka,email:ka,url:ka,hex:ka},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"}},Im=aX,cR=jt({compatConfig:{MODE:3},name:"LocaleReceiver",props:{componentName:String,defaultLocale:{type:[Object,Function]},children:{type:Function}},setup(e,t){let{slots:r}=t;const n=Br("localeData",{}),i=ke(()=>{const{componentName:s="global",defaultLocale:o}=e,h=o||Im[s||"global"],{antLocale:d}=n,m=s&&d?d[s]:{};return ze(ze({},typeof h=="function"?h():h),m||{})}),a=ke(()=>{const{antLocale:s}=n,o=s&&s.locale;return s&&s.exist&&!o?Im.locale:o});return()=>{const s=e.children||r.default,{antLocale:o}=n;return s==null?void 0:s(i.value,a.value,o)}}});function MT(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}class oX{constructor(){this.cache=new Map}get(t){return this.cache.get(Array.isArray(t)?t.join("%"):t)||null}update(t,r){const n=Array.isArray(t)?t.join("%"):t,i=this.cache.get(n),a=r(i);a===null?this.cache.delete(n):this.cache.set(n,a)}}const sX=oX,hR="data-token-hash",yf="data-css-hash",Kp="__cssinjs_instance__",I_=Math.random().toString(12).slice(2);function fR(){if(typeof document<"u"&&document.head&&document.body){const e=document.body.querySelectorAll(`style[${yf}]`)||[],{firstChild:t}=document.head;Array.from(e).forEach(n=>{n[Kp]=n[Kp]||I_,document.head.insertBefore(n,t)});const r={};Array.from(document.querySelectorAll(`style[${yf}]`)).forEach(n=>{var i;const a=n.getAttribute(yf);r[a]?n[Kp]===I_&&((i=n.parentNode)===null||i===void 0||i.removeChild(n)):r[a]=!0})}return new sX}const dR=Symbol("StyleContextKey"),IT={cache:fR(),defaultCache:!0,hashPriority:"low"},PT=()=>Br(dR,In(ze({},IT))),lX=e=>{const t=PT(),r=In(ze({},IT));return mn([()=>Xt(e),t],()=>{const n=ze({},t.value),i=Xt(e);Object.keys(i).forEach(s=>{const o=i[s];i[s]!==void 0&&(n[s]=o)});const{cache:a}=i;n.cache=n.cache||fR(),n.defaultCache=!a&&t.value.defaultCache,r.value=n},{immediate:!0}),Mi(dR,r),r},uX=()=>({autoClear:$c(),mock:e2(),cache:Ba(),defaultCache:$c(),hashPriority:e2(),container:aR(),ssrInline:$c(),transformers:Qw(),linters:Qw()});D0(jt({name:"AStyleProvider",inheritAttrs:!1,props:ST(uX(),IT),setup(e,t){let{slots:r}=t;return lX(e),()=>{var n;return(n=r.default)===null||n===void 0?void 0:n.call(r)}}}));function pR(e,t,r,n){const i=PT(),a=In(""),s=In();Bo(()=>{a.value=[e,...t.value].join("%")});const o=h=>{i.value.cache.update(h,d=>{const[m=0,g]=d||[];return m-1===0?(n==null||n(g,!1),null):[m-1,g]})};return mn(a,(h,d)=>{d&&o(d),i.value.cache.update(h,m=>{const[g=0,y]=m||[],T=y||r();return[g+1,T]}),s.value=i.value.cache.get(a.value)[1]},{immediate:!0}),hl(()=>{o(a.value)}),s}function L0(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function cX(e,t){return e&&e.contains?e.contains(t):!1}const BI="data-vc-order",hX="vc-util-key",t2=new Map;function mR(){let{mark:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e?e.startsWith("data-")?e:`data-${e}`:hX}function k0(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function fX(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function vR(e){return Array.from((t2.get(e)||e).children).filter(t=>t.tagName==="STYLE")}function gR(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!L0())return null;const{csp:r,prepend:n}=t,i=document.createElement("style");i.setAttribute(BI,fX(n)),r!=null&&r.nonce&&(i.nonce=r==null?void 0:r.nonce),i.innerHTML=e;const a=k0(t),{firstChild:s}=a;if(n){if(n==="queue"){const o=vR(a).filter(h=>["prepend","prependQueue"].includes(h.getAttribute(BI)));if(o.length)return a.insertBefore(i,o[o.length-1].nextSibling),i}a.insertBefore(i,s)}else a.appendChild(i);return i}function yR(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=k0(t);return vR(r).find(n=>n.getAttribute(mR(t))===e)}function _R(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=yR(e,t);r&&k0(t).removeChild(r)}function dX(e,t){const r=t2.get(e);if(!r||!cX(document,r)){const n=gR("",t),{parentNode:i}=n;t2.set(e,i),e.removeChild(n)}}function P_(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var n,i,a;const s=k0(r);dX(s,r);const o=yR(t,r);if(o)return!((n=r.csp)===null||n===void 0)&&n.nonce&&o.nonce!==((i=r.csp)===null||i===void 0?void 0:i.nonce)&&(o.nonce=(a=r.csp)===null||a===void 0?void 0:a.nonce),o.innerHTML!==e&&(o.innerHTML=e),o;const h=gR(e,r);return h.setAttribute(mR(r),t),h}function D_(e){let t="";return Object.keys(e).forEach(r=>{const n=e[r];t+=r,n&&typeof n=="object"?t+=D_(n):t+=n}),t}function pX(e,t){return MT(`${t}_${D_(e)}`)}const Jp=`layer-${Date.now()}-${Math.random()}`.replace(/\./g,""),xR="903px";function mX(e,t){var r;if(L0()){P_(e,Jp);const n=document.createElement("div");n.style.position="fixed",n.style.left="0",n.style.top="0",t==null||t(n),document.body.appendChild(n);const i=getComputedStyle(n).width===xR;return(r=n.parentNode)===null||r===void 0||r.removeChild(n),_R(Jp),i}return!1}let Zx;function vX(){return Zx===void 0&&(Zx=mX(`@layer ${Jp} { .${Jp} { width: ${xR}!important; } }`,e=>{e.className=Jp})),Zx}const FI={},gX="css",Mc=new Map;function yX(e){Mc.set(e,(Mc.get(e)||0)+1)}function _X(e){typeof document<"u"&&document.querySelectorAll(`style[${hR}="${e}"]`).forEach(r=>{var n;r[Kp]===I_&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))})}function xX(e){Mc.set(e,(Mc.get(e)||0)-1);const t=Array.from(Mc.keys()),r=t.filter(n=>(Mc.get(n)||0)<=0);r.length<t.length&&r.forEach(n=>{_X(n),Mc.delete(n)})}function bX(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xr({});const n=ke(()=>ze({},...t.value)),i=ke(()=>D_(n.value)),a=ke(()=>D_(r.value.override||FI));return pR("token",ke(()=>[r.value.salt||"",e.value.id,i.value,a.value]),()=>{const{salt:o="",override:h=FI,formatToken:d}=r.value,m=e.value.getDerivativeToken(n.value);let g=ze(ze({},m),h);d&&(g=d(g));const y=pX(g,o);g._tokenKey=y,yX(y);const x=`${gX}-${MT(y)}`;return g._hashId=x,[g,x]},o=>{xX(o[0]._tokenKey)})}var wX={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bR="comm",wR="rule",SR="decl",SX="@import",TX="@keyframes",CX="@layer",EX=Math.abs,DT=String.fromCharCode;function TR(e){return e.trim()}function qy(e,t,r){return e.replace(t,r)}function AX(e,t){return e.indexOf(t)}function Pm(e,t){return e.charCodeAt(t)|0}function Dm(e,t,r){return e.slice(t,r)}function Qs(e){return e.length}function MX(e){return e.length}function qg(e,t){return t.push(e),e}var R0=1,Rf=1,CR=0,fo=0,Qn=0,Kf="";function LT(e,t,r,n,i,a,s,o){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:R0,column:Rf,length:s,return:"",siblings:o}}function IX(){return Qn}function PX(){return Qn=fo>0?Pm(Kf,--fo):0,Rf--,Qn===10&&(Rf=1,R0--),Qn}function zo(){return Qn=fo<CR?Pm(Kf,fo++):0,Rf++,Qn===10&&(Rf=1,R0++),Qn}function Nc(){return Pm(Kf,fo)}function Wy(){return fo}function O0(e,t){return Dm(Kf,e,t)}function r2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function DX(e){return R0=Rf=1,CR=Qs(Kf=e),fo=0,[]}function LX(e){return Kf="",e}function Yx(e){return TR(O0(fo-1,n2(e===91?e+2:e===40?e+1:e)))}function kX(e){for(;(Qn=Nc())&&Qn<33;)zo();return r2(e)>2||r2(Qn)>3?"":" "}function RX(e,t){for(;--t&&zo()&&!(Qn<48||Qn>102||Qn>57&&Qn<65||Qn>70&&Qn<97););return O0(e,Wy()+(t<6&&Nc()==32&&zo()==32))}function n2(e){for(;zo();)switch(Qn){case e:return fo;case 34:case 39:e!==34&&e!==39&&n2(Qn);break;case 40:e===41&&n2(e);break;case 92:zo();break}return fo}function OX(e,t){for(;zo()&&e+Qn!==47+10;)if(e+Qn===42+42&&Nc()===47)break;return"/*"+O0(t,fo-1)+"*"+DT(e===47?e:zo())}function zX(e){for(;!r2(Nc());)zo();return O0(e,fo)}function BX(e){return LX(Xy("",null,null,null,[""],e=DX(e),0,[0],e))}function Xy(e,t,r,n,i,a,s,o,h){for(var d=0,m=0,g=s,y=0,x=0,T=0,M=1,P=1,I=1,D=0,R="",B=i,H=a,V=n,q=R;P;)switch(T=D,D=zo()){case 40:if(T!=108&&Pm(q,g-1)==58){AX(q+=qy(Yx(D),"&","&\f"),"&\f")!=-1&&(I=-1);break}case 34:case 39:case 91:q+=Yx(D);break;case 9:case 10:case 13:case 32:q+=kX(T);break;case 92:q+=RX(Wy()-1,7);continue;case 47:switch(Nc()){case 42:case 47:qg(FX(OX(zo(),Wy()),t,r,h),h);break;default:q+="/"}break;case 123*M:o[d++]=Qs(q)*I;case 125*M:case 59:case 0:switch(D){case 0:case 125:P=0;case 59+m:I==-1&&(q=qy(q,/\f/g,"")),x>0&&Qs(q)-g&&qg(x>32?NI(q+";",n,r,g-1,h):NI(qy(q," ","")+";",n,r,g-2,h),h);break;case 59:q+=";";default:if(qg(V=$I(q,t,r,d,m,i,o,R,B=[],H=[],g,a),a),D===123)if(m===0)Xy(q,t,V,V,B,a,g,o,H);else switch(y===99&&Pm(q,3)===110?100:y){case 100:case 108:case 109:case 115:Xy(e,V,V,n&&qg($I(e,V,V,0,0,i,o,R,i,B=[],g,H),H),i,H,g,o,n?B:H);break;default:Xy(q,V,V,V,[""],H,0,o,H)}}d=m=x=0,M=I=1,R=q="",g=s;break;case 58:g=1+Qs(q),x=T;default:if(M<1){if(D==123)--M;else if(D==125&&M++==0&&PX()==125)continue}switch(q+=DT(D),D*M){case 38:I=m>0?1:(q+="\f",-1);break;case 44:o[d++]=(Qs(q)-1)*I,I=1;break;case 64:Nc()===45&&(q+=Yx(zo())),y=Nc(),m=g=Qs(R=q+=zX(Wy())),D++;break;case 45:T===45&&Qs(q)==2&&(M=0)}}return a}function $I(e,t,r,n,i,a,s,o,h,d,m,g){for(var y=i-1,x=i===0?a:[""],T=MX(x),M=0,P=0,I=0;M<n;++M)for(var D=0,R=Dm(e,y+1,y=EX(P=s[M])),B=e;D<T;++D)(B=TR(P>0?x[D]+" "+R:qy(R,/&\f/g,x[D])))&&(h[I++]=B);return LT(e,t,r,i===0?wR:o,h,d,m,g)}function FX(e,t,r,n){return LT(e,t,r,bR,DT(IX()),Dm(e,2,-2),0,n)}function NI(e,t,r,n,i){return LT(e,t,r,SR,Dm(e,0,n),Dm(e,n+1,-1),n,i)}function i2(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function $X(e,t,r,n){switch(e.type){case CX:if(e.children.length)break;case SX:case SR:return e.return=e.return||e.value;case bR:return"";case TX:return e.return=e.value+"{"+i2(e.children,n)+"}";case wR:if(!Qs(e.value=e.props.join(",")))return""}return Qs(r=i2(e.children,n))?e.return=e.value+"{"+r+"}":""}let VI={};function NX(e,t){}function VX(e,t,r){!t&&!VI[r]&&(e(!1,r),VI[r]=!0)}function UX(e,t){VX(NX,e,t)}const UI=L0(),HX="_skip_check_",ER="_multi_value_";function HI(e){return i2(BX(e),$X).replace(/\{%%%\:[^;];}/g,";")}function jX(e){return typeof e=="object"&&e&&(HX in e||ER in e)}function GX(e,t,r){if(!t)return e;const n=`.${t}`,i=r==="low"?`:where(${n})`:n;return e.split(",").map(s=>{var o;const h=s.trim().split(/\s+/);let d=h[0]||"";const m=((o=d.match(/^\w+/))===null||o===void 0?void 0:o[0])||"";return d=`${m}${i}${d.slice(m.length)}`,[d,...h.slice(1)].join(" ")}).join(",")}const jI=new Set,a2=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{root:r,injectHash:n,parentSelectors:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]};const{hashId:a,layer:s,path:o,hashPriority:h,transformers:d=[],linters:m=[]}=t;let g="",y={};function x(P){const I=P.getName(a);if(!y[I]){const[D]=a2(P.style,t,{root:!1,parentSelectors:i});y[I]=`@keyframes ${P.getName(a)}${D}`}}function T(P){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return P.forEach(D=>{Array.isArray(D)?T(D,I):D&&I.push(D)}),I}if(T(Array.isArray(e)?e:[e]).forEach(P=>{const I=typeof P=="string"&&!r?{}:P;if(typeof I=="string")g+=`${I}
`;else if(I._keyframe)x(I);else{const D=d.reduce((R,B)=>{var H;return((H=B==null?void 0:B.visit)===null||H===void 0?void 0:H.call(B,R))||R},I);Object.keys(D).forEach(R=>{var B;const H=D[R];if(typeof H=="object"&&H&&(R!=="animationName"||!H._keyframe)&&!jX(H)){let V=!1,q=R.trim(),j=!1;(r||n)&&a?q.startsWith("@")?V=!0:q=GX(R,a,h):r&&!a&&(q==="&"||q==="")&&(q="",j=!0);const[te,ne]=a2(H,t,{root:j,injectHash:V,parentSelectors:[...i,q]});y=ze(ze({},y),ne),g+=`${q}${te}`}else{let V=function(j,te){const ne=j.replace(/[A-Z]/g,le=>`-${le.toLowerCase()}`);let ce=te;!wX[j]&&typeof ce=="number"&&ce!==0&&(ce=`${ce}px`),j==="animationName"&&(te!=null&&te._keyframe)&&(x(te),ce=te.getName(a)),g+=`${ne}:${ce};`};const q=(B=H==null?void 0:H.value)!==null&&B!==void 0?B:H;typeof H=="object"&&(H!=null&&H[ER])&&Array.isArray(q)?q.forEach(j=>{V(R,j)}):V(R,q)}})}}),!r)g=`{${g}}`;else if(s&&vX()){const P=s.split(",");g=`@layer ${P[P.length-1].trim()} {${g}}`,P.length>1&&(g=`@layer ${s}{%%%:%}${g}`)}return[g,y]};function qX(e,t){return MT(`${e.join("%")}${t}`)}function o2(e,t){const r=PT(),n=ke(()=>e.value.token._tokenKey),i=ke(()=>[n.value,...e.value.path]);let a=UI;return pR("style",i,()=>{const s=t(),{hashPriority:o,container:h,transformers:d,linters:m}=r.value,{path:g,hashId:y,layer:x}=e.value,[T,M]=a2(s,{hashId:y,hashPriority:o,layer:x,path:g.join("-"),transformers:d,linters:m}),P=HI(T),I=qX(i.value,P);if(a){const D=P_(P,I,{mark:yf,prepend:"queue",attachTo:h});D[Kp]=I_,D.setAttribute(hR,n.value),Object.keys(M).forEach(R=>{jI.has(R)||(jI.add(R),P_(HI(M[R]),`_effect-${R}`,{mark:yf,prepend:"queue",attachTo:h}))})}return[P,n.value,I]},(s,o)=>{let[,,h]=s;(o||r.value.autoClear)&&UI&&_R(h,{mark:yf})}),s=>s}class WX{constructor(t,r){this._keyframe=!0,this.name=t,this.style=r}getName(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t?`${t}-${this.name}`:this.name}}const Vc=WX;function XX(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}class Of{constructor(){this.cache=new Map,this.keys=[],this.cacheCallTimes=0}size(){return this.keys.length}internalGet(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n={map:this.cache};return t.forEach(i=>{var a;n?n=(a=n==null?void 0:n.map)===null||a===void 0?void 0:a.get(i):n=void 0}),n!=null&&n.value&&r&&(n.value[1]=this.cacheCallTimes++),n==null?void 0:n.value}get(t){var r;return(r=this.internalGet(t,!0))===null||r===void 0?void 0:r[0]}has(t){return!!this.internalGet(t)}set(t,r){if(!this.has(t)){if(this.size()+1>Of.MAX_CACHE_SIZE+Of.MAX_CACHE_OFFSET){const[i]=this.keys.reduce((a,s)=>{const[,o]=a;return this.internalGet(s)[1]<o?[s,this.internalGet(s)[1]]:a},[this.keys[0],this.cacheCallTimes]);this.delete(i)}this.keys.push(t)}let n=this.cache;t.forEach((i,a)=>{if(a===t.length-1)n.set(i,{value:[r,this.cacheCallTimes++]});else{const s=n.get(i);s?s.map||(s.map=new Map):n.set(i,{map:new Map}),n=n.get(i).map}})}deleteByPath(t,r){var n;const i=t.get(r[0]);if(r.length===1)return i.map?t.set(r[0],{map:i.map}):t.delete(r[0]),(n=i.value)===null||n===void 0?void 0:n[0];const a=this.deleteByPath(i.map,r.slice(1));return(!i.map||i.map.size===0)&&!i.value&&t.delete(r[0]),a}delete(t){if(this.has(t))return this.keys=this.keys.filter(r=>!XX(r,t)),this.deleteByPath(this.cache,t)}}Of.MAX_CACHE_SIZE=20;Of.MAX_CACHE_OFFSET=5;function ZX(){}let YX=ZX;const kT=YX;let GI=0;class KX{constructor(t){this.derivatives=Array.isArray(t)?t:[t],this.id=GI,t.length===0&&kT(t.length>0),GI+=1}getDerivativeToken(t){return this.derivatives.reduce((r,n)=>n(t,r),void 0)}}const Kx=new Of;function AR(e){const t=Array.isArray(e)?e:[e];return Kx.has(t)||Kx.set(t,new KX(t)),Kx.get(t)}const JX="4.0.2";function Ii(e,t){QX(e)&&(e="100%");var r=eZ(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Wg(e){return Math.min(1,Math.max(0,e))}function QX(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function eZ(e){return typeof e=="string"&&e.indexOf("%")!==-1}function MR(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Xg(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Rc(e){return e.length===1?"0"+e:String(e)}function tZ(e,t,r){return{r:Ii(e,255)*255,g:Ii(t,255)*255,b:Ii(r,255)*255}}function qI(e,t,r){e=Ii(e,255),t=Ii(t,255),r=Ii(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),a=0,s=0,o=(n+i)/2;if(n===i)s=0,a=0;else{var h=n-i;switch(s=o>.5?h/(2-n-i):h/(n+i),n){case e:a=(t-r)/h+(t<r?6:0);break;case t:a=(r-e)/h+2;break;case r:a=(e-t)/h+4;break}a/=6}return{h:a,s,l:o}}function Jx(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*(6*r):r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rZ(e,t,r){var n,i,a;if(e=Ii(e,360),t=Ii(t,100),r=Ii(r,100),t===0)i=r,a=r,n=r;else{var s=r<.5?r*(1+t):r+t-r*t,o=2*r-s;n=Jx(o,s,e+1/3),i=Jx(o,s,e),a=Jx(o,s,e-1/3)}return{r:n*255,g:i*255,b:a*255}}function s2(e,t,r){e=Ii(e,255),t=Ii(t,255),r=Ii(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),a=0,s=n,o=n-i,h=n===0?0:o/n;if(n===i)a=0;else{switch(n){case e:a=(t-r)/o+(t<r?6:0);break;case t:a=(r-e)/o+2;break;case r:a=(e-t)/o+4;break}a/=6}return{h:a,s:h,v:s}}function nZ(e,t,r){e=Ii(e,360)*6,t=Ii(t,100),r=Ii(r,100);var n=Math.floor(e),i=e-n,a=r*(1-t),s=r*(1-i*t),o=r*(1-(1-i)*t),h=n%6,d=[r,s,a,a,o,r][h],m=[o,r,r,s,a,a][h],g=[a,a,o,r,r,s][h];return{r:d*255,g:m*255,b:g*255}}function l2(e,t,r,n){var i=[Rc(Math.round(e).toString(16)),Rc(Math.round(t).toString(16)),Rc(Math.round(r).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function iZ(e,t,r,n,i){var a=[Rc(Math.round(e).toString(16)),Rc(Math.round(t).toString(16)),Rc(Math.round(r).toString(16)),Rc(aZ(n))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function aZ(e){return Math.round(parseFloat(e)*255).toString(16)}function WI(e){return Ra(e)/255}function Ra(e){return parseInt(e,16)}function oZ(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var u2={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function rf(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,a=null,s=!1,o=!1;return typeof e=="string"&&(e=uZ(e)),typeof e=="object"&&(Vs(e.r)&&Vs(e.g)&&Vs(e.b)?(t=tZ(e.r,e.g,e.b),s=!0,o=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Vs(e.h)&&Vs(e.s)&&Vs(e.v)?(n=Xg(e.s),i=Xg(e.v),t=nZ(e.h,n,i),s=!0,o="hsv"):Vs(e.h)&&Vs(e.s)&&Vs(e.l)&&(n=Xg(e.s),a=Xg(e.l),t=rZ(e.h,n,a),s=!0,o="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=MR(r),{ok:s,format:e.format||o,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var sZ="[-\\+]?\\d+%?",lZ="[-\\+]?\\d*\\.\\d+%?",tu="(?:".concat(lZ,")|(?:").concat(sZ,")"),Qx="[\\s|\\(]+(".concat(tu,")[,|\\s]+(").concat(tu,")[,|\\s]+(").concat(tu,")\\s*\\)?"),eb="[\\s|\\(]+(".concat(tu,")[,|\\s]+(").concat(tu,")[,|\\s]+(").concat(tu,")[,|\\s]+(").concat(tu,")\\s*\\)?"),Ao={CSS_UNIT:new RegExp(tu),rgb:new RegExp("rgb"+Qx),rgba:new RegExp("rgba"+eb),hsl:new RegExp("hsl"+Qx),hsla:new RegExp("hsla"+eb),hsv:new RegExp("hsv"+Qx),hsva:new RegExp("hsva"+eb),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function uZ(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(u2[e])e=u2[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=Ao.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=Ao.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Ao.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=Ao.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Ao.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=Ao.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Ao.hex8.exec(e),r?{r:Ra(r[1]),g:Ra(r[2]),b:Ra(r[3]),a:WI(r[4]),format:t?"name":"hex8"}:(r=Ao.hex6.exec(e),r?{r:Ra(r[1]),g:Ra(r[2]),b:Ra(r[3]),format:t?"name":"hex"}:(r=Ao.hex4.exec(e),r?{r:Ra(r[1]+r[1]),g:Ra(r[2]+r[2]),b:Ra(r[3]+r[3]),a:WI(r[4]+r[4]),format:t?"name":"hex8"}:(r=Ao.hex3.exec(e),r?{r:Ra(r[1]+r[1]),g:Ra(r[2]+r[2]),b:Ra(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function Vs(e){return!!Ao.CSS_UNIT.exec(String(e))}var Ei=function(){function e(t,r){t===void 0&&(t=""),r===void 0&&(r={});var n;if(t instanceof e)return t;typeof t=="number"&&(t=oZ(t)),this.originalInput=t;var i=rf(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=r.format)!==null&&n!==void 0?n:i.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),r,n,i,a=t.r/255,s=t.g/255,o=t.b/255;return a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),s<=.03928?n=s/12.92:n=Math.pow((s+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),.2126*r+.7152*n+.0722*i},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=MR(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=s2(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=s2(this.r,this.g,this.b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this.a===1?"hsv(".concat(r,", ").concat(n,"%, ").concat(i,"%)"):"hsva(".concat(r,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=qI(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=qI(this.r,this.g,this.b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this.a===1?"hsl(".concat(r,", ").concat(n,"%, ").concat(i,"%)"):"hsla(".concat(r,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),l2(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),iZ(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),r=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(r,", ").concat(n,")"):"rgba(".concat(t,", ").concat(r,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(r){return"".concat(Math.round(Ii(r,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(r){return Math.round(Ii(r,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+l2(this.r,this.g,this.b,!1),r=0,n=Object.entries(u2);r<n.length;r++){var i=n[r],a=i[0],s=i[1];if(t===s)return a}return!1},e.prototype.toString=function(t){var r=!!t;t=t??this.format;var n=!1,i=this.a<1&&this.a>=0,a=!r&&i&&(t.startsWith("hex")||t==="name");return a?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=Wg(r.l),new e(r)},e.prototype.brighten=function(t){t===void 0&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new e(r)},e.prototype.darken=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=Wg(r.l),new e(r)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=Wg(r.s),new e(r)},e.prototype.saturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=Wg(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,new e(r)},e.prototype.mix=function(t,r){r===void 0&&(r=50);var n=this.toRgb(),i=new e(t).toRgb(),a=r/100,s={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return new e(s)},e.prototype.analogous=function(t,r){t===void 0&&(t=6),r===void 0&&(r=30);var n=this.toHsl(),i=360/r,a=[this];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,a.push(new e(n));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var r=this.toHsv(),n=r.h,i=r.s,a=r.v,s=[],o=1/t;t--;)s.push(new e({h:n,s:i,v:a})),a=(a+o)%1;return s},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),n=new e(t).toRgb(),i=r.a+n.a*(1-r.a);return new e({r:(r.r*r.a+n.r*n.a*(1-r.a))/i,g:(r.g*r.a+n.g*n.a*(1-r.a))/i,b:(r.b*r.a+n.b*n.a*(1-r.a))/i,a:i})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),n=r.h,i=[this],a=360/t,s=1;s<t;s++)i.push(new e({h:(n+s*a)%360,s:r.s,l:r.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),Zg=2,XI=.16,cZ=.05,hZ=.05,fZ=.15,IR=5,PR=4,dZ=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function ZI(e){var t=e.r,r=e.g,n=e.b,i=s2(t,r,n);return{h:i.h*360,s:i.s,v:i.v}}function Yg(e){var t=e.r,r=e.g,n=e.b;return"#".concat(l2(t,r,n,!1))}function pZ(e,t,r){var n=r/100,i={r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b};return i}function YI(e,t,r){var n;return Math.round(e.h)>=60&&Math.round(e.h)<=240?n=r?Math.round(e.h)-Zg*t:Math.round(e.h)+Zg*t:n=r?Math.round(e.h)+Zg*t:Math.round(e.h)-Zg*t,n<0?n+=360:n>=360&&(n-=360),n}function KI(e,t,r){if(e.h===0&&e.s===0)return e.s;var n;return r?n=e.s-XI*t:t===PR?n=e.s+XI:n=e.s+cZ*t,n>1&&(n=1),r&&t===IR&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function JI(e,t,r){var n;return r?n=e.v+hZ*t:n=e.v-fZ*t,n>1&&(n=1),Number(n.toFixed(2))}function Wc(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],n=rf(e),i=IR;i>0;i-=1){var a=ZI(n),s=Yg(rf({h:YI(a,i,!0),s:KI(a,i,!0),v:JI(a,i,!0)}));r.push(s)}r.push(Yg(n));for(var o=1;o<=PR;o+=1){var h=ZI(n),d=Yg(rf({h:YI(h,o),s:KI(h,o),v:JI(h,o)}));r.push(d)}return t.theme==="dark"?dZ.map(function(m){var g=m.index,y=m.opacity,x=Yg(pZ(rf(t.backgroundColor||"#141414"),rf(r[g]),y*100));return x}):r}var tb={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},rb={},nb={};Object.keys(tb).forEach(function(e){rb[e]=Wc(tb[e]),rb[e].primary=rb[e][5],nb[e]=Wc(tb[e],{theme:"dark",backgroundColor:"#141414"}),nb[e].primary=nb[e][5]});const mZ=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},vZ=mZ;function gZ(e){const{sizeUnit:t,sizeStep:r}=e;return{sizeXXL:t*(r+8),sizeXL:t*(r+4),sizeLG:t*(r+2),sizeMD:t*(r+1),sizeMS:t*r,size:t*r,sizeSM:t*(r-1),sizeXS:t*(r-2),sizeXXS:t*(r-3)}}const DR={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},yZ=ze(ze({},DR),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1}),z0=yZ;function _Z(e,t){let{generateColorPalettes:r,generateNeutralColorPalettes:n}=t;const{colorSuccess:i,colorWarning:a,colorError:s,colorInfo:o,colorPrimary:h,colorBgBase:d,colorTextBase:m}=e,g=r(h),y=r(i),x=r(a),T=r(s),M=r(o),P=n(d,m);return ze(ze({},P),{colorPrimaryBg:g[1],colorPrimaryBgHover:g[2],colorPrimaryBorder:g[3],colorPrimaryBorderHover:g[4],colorPrimaryHover:g[5],colorPrimary:g[6],colorPrimaryActive:g[7],colorPrimaryTextHover:g[8],colorPrimaryText:g[9],colorPrimaryTextActive:g[10],colorSuccessBg:y[1],colorSuccessBgHover:y[2],colorSuccessBorder:y[3],colorSuccessBorderHover:y[4],colorSuccessHover:y[4],colorSuccess:y[6],colorSuccessActive:y[7],colorSuccessTextHover:y[8],colorSuccessText:y[9],colorSuccessTextActive:y[10],colorErrorBg:T[1],colorErrorBgHover:T[2],colorErrorBorder:T[3],colorErrorBorderHover:T[4],colorErrorHover:T[5],colorError:T[6],colorErrorActive:T[7],colorErrorTextHover:T[8],colorErrorText:T[9],colorErrorTextActive:T[10],colorWarningBg:x[1],colorWarningBgHover:x[2],colorWarningBorder:x[3],colorWarningBorderHover:x[4],colorWarningHover:x[4],colorWarning:x[6],colorWarningActive:x[7],colorWarningTextHover:x[8],colorWarningText:x[9],colorWarningTextActive:x[10],colorInfoBg:M[1],colorInfoBgHover:M[2],colorInfoBorder:M[3],colorInfoBorderHover:M[4],colorInfoHover:M[4],colorInfo:M[6],colorInfoActive:M[7],colorInfoTextHover:M[8],colorInfoText:M[9],colorInfoTextActive:M[10],colorBgMask:new Ei("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const xZ=e=>{let t=e,r=e,n=e,i=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?r=4:e<8&&e>=7?r=5:e<14&&e>=8?r=6:e<16&&e>=14?r=7:e>=16&&(r=8),e<6&&e>=2?n=1:e>=6&&(n=2),e>4&&e<8?i=4:e>=8&&(i=6),{borderRadius:e>16?16:e,borderRadiusXS:n,borderRadiusSM:r,borderRadiusLG:t,borderRadiusOuter:i}},bZ=xZ;function wZ(e){const{motionUnit:t,motionBase:r,borderRadius:n,lineWidth:i}=e;return ze({motionDurationFast:`${(r+t).toFixed(1)}s`,motionDurationMid:`${(r+t*2).toFixed(1)}s`,motionDurationSlow:`${(r+t*3).toFixed(1)}s`,lineWidthBold:i+1},bZ(n))}const Us=(e,t)=>new Ei(e).setAlpha(t).toRgbString(),up=(e,t)=>new Ei(e).darken(t).toHexString(),SZ=e=>{const t=Wc(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},TZ=(e,t)=>{const r=e||"#fff",n=t||"#000";return{colorBgBase:r,colorTextBase:n,colorText:Us(n,.88),colorTextSecondary:Us(n,.65),colorTextTertiary:Us(n,.45),colorTextQuaternary:Us(n,.25),colorFill:Us(n,.15),colorFillSecondary:Us(n,.06),colorFillTertiary:Us(n,.04),colorFillQuaternary:Us(n,.02),colorBgLayout:up(r,4),colorBgContainer:up(r,0),colorBgElevated:up(r,0),colorBgSpotlight:Us(n,.85),colorBorder:up(r,15),colorBorderSecondary:up(r,6)}};function CZ(e){const t=new Array(10).fill(null).map((r,n)=>{const i=n-1,a=e*Math.pow(2.71828,i/5),s=n>1?Math.floor(a):Math.ceil(a);return Math.floor(s/2)*2});return t[1]=e,t.map(r=>{const n=r+8;return{size:r,lineHeight:n/r}})}const EZ=e=>{const t=CZ(e),r=t.map(i=>i.size),n=t.map(i=>i.lineHeight);return{fontSizeSM:r[0],fontSize:r[1],fontSizeLG:r[2],fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:n[1],lineHeightLG:n[2],lineHeightSM:n[0],lineHeightHeading1:n[6],lineHeightHeading2:n[5],lineHeightHeading3:n[4],lineHeightHeading4:n[3],lineHeightHeading5:n[2]}},AZ=EZ;function MZ(e){const t=Object.keys(DR).map(r=>{const n=Wc(e[r]);return new Array(10).fill(1).reduce((i,a,s)=>(i[`${r}-${s+1}`]=n[s],i),{})}).reduce((r,n)=>(r=ze(ze({},r),n),r),{});return ze(ze(ze(ze(ze(ze(ze({},e),t),_Z(e,{generateColorPalettes:SZ,generateNeutralColorPalettes:TZ})),AZ(e.fontSize)),gZ(e)),vZ(e)),wZ(e))}function ib(e){return e>=0&&e<=255}function Kg(e,t){const{r,g:n,b:i,a}=new Ei(e).toRgb();if(a<1)return e;const{r:s,g:o,b:h}=new Ei(t).toRgb();for(let d=.01;d<=1;d+=.01){const m=Math.round((r-s*(1-d))/d),g=Math.round((n-o*(1-d))/d),y=Math.round((i-h*(1-d))/d);if(ib(m)&&ib(g)&&ib(y))return new Ei({r:m,g,b:y,a:Math.round(d*100)/100}).toRgbString()}return new Ei({r,g:n,b:i,a:1}).toRgbString()}var IZ=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function PZ(e){const{override:t}=e,r=IZ(e,["override"]),n=ze({},t);Object.keys(z0).forEach(x=>{delete n[x]});const i=ze(ze({},r),n),a=480,s=576,o=768,h=992,d=1200,m=1600,g=2e3;return ze(ze(ze({},i),{colorLink:i.colorInfoText,colorLinkHover:i.colorInfoHover,colorLinkActive:i.colorInfoActive,colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:Kg(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:Kg(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:Kg(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:Kg(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:a,screenXSMin:a,screenXSMax:s-1,screenSM:s,screenSMMin:s,screenSMMax:o-1,screenMD:o,screenMDMin:o,screenMDMax:h-1,screenLG:h,screenLGMin:h,screenLGMax:d-1,screenXL:d,screenXLMin:d,screenXLMax:m-1,screenXXL:m,screenXXLMin:m,screenXXLMax:g-1,screenXXXL:g,screenXXXLMin:g,boxShadowPopoverArrow:"3px 3px 7px rgba(0, 0, 0, 0.1)",boxShadowCard:`
      0 1px 2px -2px ${new Ei("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ei("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ei("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),n)}const DZ={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},RT=e=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}),LZ=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),kZ=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),RZ=(e,t)=>{const{fontFamily:r,fontSize:n}=e,i=`[class^="${t}"], [class*=" ${t}"]`;return{[i]:{fontFamily:r,fontSize:n,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[i]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},OZ=e=>({outline:`${e.lineWidthBold}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),zZ=e=>({"&:focus-visible":ze({},OZ(e))});function th(e,t,r){return n=>{const i=ke(()=>n==null?void 0:n.value),[a,s,o]=dv(),{getPrefixCls:h,iconPrefixCls:d}=sR(),m=ke(()=>h()),g=ke(()=>({theme:a.value,token:s.value,hashId:o.value,path:["Shared",m.value]}));o2(g,()=>[{"&":kZ(s.value)}]);const y=ke(()=>({theme:a.value,token:s.value,hashId:o.value,path:[e,i.value,d.value]}));return[o2(y,()=>{const{token:x,flush:T}=FZ(s.value),M=typeof r=="function"?r(x):r,P=ze(ze({},M),s.value[e]),I=`.${i.value}`,D=yu(x,{componentCls:I,prefixCls:i.value,iconCls:`.${d.value}`,antCls:`.${m.value}`},P),R=t(D,{hashId:o.value,prefixCls:i.value,rootPrefixCls:m.value,iconPrefixCls:d.value,overrideComponentToken:s.value[e]});return T(e,P),[RZ(s.value,i.value),R]}),o]}}const LR=typeof CSSINJS_STATISTIC<"u";let c2=!0;function yu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!LR)return ze({},...t);c2=!1;const n={};return t.forEach(i=>{Object.keys(i).forEach(s=>{Object.defineProperty(n,s,{configurable:!0,enumerable:!0,get:()=>i[s]})})}),c2=!0,n}function BZ(){}function FZ(e){let t,r=e,n=BZ;return LR&&(t=new Set,r=new Proxy(e,{get(i,a){return c2&&t.add(a),i[a]}}),n=(i,a)=>{Array.from(t)}),{token:r,keys:t,flush:n}}function $Z(e){if(!oi(e))return wa(e);const t=new Proxy({},{get(r,n,i){return Reflect.get(e.value,n,i)},set(r,n,i){return e.value[n]=i,!0},deleteProperty(r,n){return Reflect.deleteProperty(e.value,n)},has(r,n){return Reflect.has(e.value,n)},ownKeys(){return Object.keys(e.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return wa(t)}const NZ=AR(MZ),kR={token:z0,hashed:!0},RR=Symbol("DesignTokenContext"),OR=xr(),VZ=e=>{Mi(RR,e),Bo(()=>{OR.value=e})},UZ=jt({props:{value:Ba()},setup(e,t){let{slots:r}=t;return VZ($Z(ke(()=>e.value))),()=>{var n;return(n=r.default)===null||n===void 0?void 0:n.call(r)}}});function dv(){const e=Br(RR,OR.value||kR),t=ke(()=>`${JX}-${e.hashed||""}`),r=ke(()=>e.theme||NZ),n=bX(r,ke(()=>[z0,e.token]),ke(()=>({salt:t.value,override:ze({override:e.token},e.components),formatToken:PZ})));return[r,ke(()=>n.value[0]),ke(()=>e.hashed?n.value[1]:"")]}const zR=jt({compatConfig:{MODE:3},setup(){const[,e]=dv(),t=ke(()=>new Ei(e.value.colorBgBase).toHsl().l<.5?{opacity:.65}:{});return()=>Pe("svg",{style:t.value,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},[Pe("g",{fill:"none","fill-rule":"evenodd"},[Pe("g",{transform:"translate(24 31.67)"},[Pe("ellipse",{"fill-opacity":".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},null),Pe("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"},null),Pe("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"},null),Pe("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"},null),Pe("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"},null)]),Pe("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"},null),Pe("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},[Pe("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},null),Pe("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},null)])])])}});zR.PRESENTED_IMAGE_DEFAULT=!0;const HZ=zR,BR=jt({compatConfig:{MODE:3},setup(){const[,e]=dv(),t=ke(()=>{const{colorFill:r,colorFillTertiary:n,colorFillQuaternary:i,colorBgContainer:a}=e.value;return{borderColor:new Ei(r).onBackground(a).toHexString(),shadowColor:new Ei(n).onBackground(a).toHexString(),contentColor:new Ei(i).onBackground(a).toHexString()}});return()=>Pe("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},[Pe("g",{transform:"translate(0 1)",fill:"none","fill-rule":"evenodd"},[Pe("ellipse",{fill:t.value.shadowColor,cx:"32",cy:"33",rx:"32",ry:"7"},null),Pe("g",{"fill-rule":"nonzero",stroke:t.value.borderColor},[Pe("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"},null),Pe("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:t.value.contentColor},null)])])])}});BR.PRESENTED_IMAGE_SIMPLE=!0;const jZ=BR,GZ=e=>{const{componentCls:t,margin:r,marginXS:n,marginXL:i,fontSize:a,lineHeight:s}=e;return{[t]:{marginInline:n,fontSize:a,lineHeight:s,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:n,opacity:e.opacityImage,img:{height:"100%"},svg:{height:"100%",margin:"auto"}},[`${t}-footer`]:{marginTop:r},"&-normal":{marginBlock:i,color:e.colorTextDisabled,[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:n,color:e.colorTextDisabled,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},qZ=th("Empty",e=>{const{componentCls:t,controlHeightLG:r}=e,n=yu(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r*2.5,emptyImgHeightMD:r,emptyImgHeightSM:r*.875});return[GZ(n)]});var WZ=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const FR=Pe(HZ,null,null),$R=Pe(jZ,null,null),XZ=()=>({prefixCls:String,imageStyle:Ba(),image:Do(),description:Do()}),OT=jt({name:"AEmpty",compatConfig:{MODE:3},inheritAttrs:!1,props:XZ(),setup(e,t){let{slots:r={},attrs:n}=t;const{direction:i,prefixCls:a}=fl("empty",e),[s,o]=qZ(a);return()=>{var h,d;const m=a.value,g=ze(ze({},e),n),{image:y=((h=r.image)===null||h===void 0?void 0:h.call(r))||FR,description:x=((d=r.description)===null||d===void 0?void 0:d.call(r))||void 0,imageStyle:T,class:M=""}=g,P=WZ(g,["image","description","imageStyle","class"]);return s(Pe(cR,{componentName:"Empty",children:I=>{const D=typeof x<"u"?x:I.description,R=typeof D=="string"?D:"empty";let B=null;return typeof y=="string"?B=Pe("img",{alt:R,src:y},null):B=y,Pe("div",vn({class:ui(m,M,o.value,{[`${m}-normal`]:y===$R,[`${m}-rtl`]:i.value==="rtl"})},P),[Pe("div",{class:`${m}-image`,style:T},[B]),D&&Pe("p",{class:`${m}-description`},[D]),r.default&&Pe("div",{class:`${m}-footer`},[tR(r.default())])])}},null))}}});OT.PRESENTED_IMAGE_DEFAULT=FR;OT.PRESENTED_IMAGE_SIMPLE=$R;const cp=D0(OT),NR=e=>{const{prefixCls:t}=fl("empty",e);return(n=>{switch(n){case"Table":case"List":return Pe(cp,{image:cp.PRESENTED_IMAGE_SIMPLE},null);case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Pe(cp,{image:cp.PRESENTED_IMAGE_SIMPLE,class:`${t.value}-small`},null);default:return Pe(cp,null,null)}})(e.componentName)};function ZZ(e){return Pe(NR,{componentName:e},null)}const VR=Symbol("SizeContextKey"),UR=()=>Br(VR,xr(void 0)),YZ=e=>{const t=UR();return Mi(VR,ke(()=>e.value||t.value)),e},fl=(e,t)=>{const r=UR(),n=AT(),i=Br(ET,ze(ze({},oR),{renderEmpty:V=>_r(NR,{componentName:V})})),a=ke(()=>i.getPrefixCls(e,t.prefixCls)),s=ke(()=>{var V,q;return(V=t.direction)!==null&&V!==void 0?V:(q=i.direction)===null||q===void 0?void 0:q.value}),o=ke(()=>{var V;return(V=t.iconPrefixCls)!==null&&V!==void 0?V:i.iconPrefixCls.value}),h=ke(()=>i.getPrefixCls()),d=ke(()=>{var V;return(V=i.autoInsertSpaceInButton)===null||V===void 0?void 0:V.value}),m=i.renderEmpty,g=i.space,y=i.pageHeader,x=i.form,T=ke(()=>{var V,q;return(V=t.getTargetContainer)!==null&&V!==void 0?V:(q=i.getTargetContainer)===null||q===void 0?void 0:q.value}),M=ke(()=>{var V,q;return(V=t.getPopupContainer)!==null&&V!==void 0?V:(q=i.getPopupContainer)===null||q===void 0?void 0:q.value}),P=ke(()=>{var V,q;return(V=t.dropdownMatchSelectWidth)!==null&&V!==void 0?V:(q=i.dropdownMatchSelectWidth)===null||q===void 0?void 0:q.value}),I=ke(()=>{var V;return(t.virtual===void 0?((V=i.virtual)===null||V===void 0?void 0:V.value)!==!1:t.virtual!==!1)&&P.value!==!1}),D=ke(()=>t.size||r.value),R=ke(()=>{var V,q,j;return(V=t.autocomplete)!==null&&V!==void 0?V:(j=(q=i.input)===null||q===void 0?void 0:q.value)===null||j===void 0?void 0:j.autocomplete}),B=ke(()=>{var V;return(V=t.disabled)!==null&&V!==void 0?V:n.value}),H=ke(()=>{var V;return(V=t.csp)!==null&&V!==void 0?V:i.csp});return{configProvider:i,prefixCls:a,direction:s,size:D,getTargetContainer:T,getPopupContainer:M,space:g,pageHeader:y,form:x,autoInsertSpaceInButton:d,renderEmpty:m,virtual:I,dropdownMatchSelectWidth:P,rootPrefixCls:h,getPrefixCls:i.getPrefixCls,autocomplete:R,csp:H,iconPrefixCls:o,disabled:B,select:i.select}};function QI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HR(e,t,r){return t&&QI(e.prototype,t),r&&QI(e,r),e}function Zy(){return(Zy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function jR(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function GR(e,t){if(e==null)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(i[r]=e[r]);return i}function eP(e){return((t=e)!=null&&typeof t=="object"&&Array.isArray(t)===!1)==1&&Object.prototype.toString.call(e)==="[object Object]";var t}var qR=Object.prototype,WR=qR.toString,KZ=qR.hasOwnProperty,XR=/^\s*function (\w+)/;function tP(e){var t,r=(t=e==null?void 0:e.type)!==null&&t!==void 0?t:e;if(r){var n=r.toString().match(XR);return n?n[1]:""}return""}var Xc=function(e){var t,r;return eP(e)!==!1&&typeof(t=e.constructor)=="function"&&eP(r=t.prototype)!==!1&&r.hasOwnProperty("isPrototypeOf")!==!1},JZ=function(e){return e},ia=JZ,Lm=function(e,t){return KZ.call(e,t)},QZ=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e},zf=Array.isArray||function(e){return WR.call(e)==="[object Array]"},Bf=function(e){return WR.call(e)==="[object Function]"},L_=function(e){return Xc(e)&&Lm(e,"_vueTypes_name")},ZR=function(e){return Xc(e)&&(Lm(e,"type")||["_vueTypes_name","validator","default","required"].some(function(t){return Lm(e,t)}))};function zT(e,t){return Object.defineProperty(e.bind(t),"__original",{value:e})}function rh(e,t,r){var n;r===void 0&&(r=!1);var i=!0,a="";n=Xc(e)?e:{type:e};var s=L_(n)?n._vueTypes_name+" - ":"";if(ZR(n)&&n.type!==null){if(n.type===void 0||n.type===!0||!n.required&&t===void 0)return i;zf(n.type)?(i=n.type.some(function(g){return rh(g,t,!0)===!0}),a=n.type.map(function(g){return tP(g)}).join(" or ")):i=(a=tP(n))==="Array"?zf(t):a==="Object"?Xc(t):a==="String"||a==="Number"||a==="Boolean"||a==="Function"?function(g){if(g==null)return"";var y=g.constructor.toString().match(XR);return y?y[1]:""}(t)===a:t instanceof n.type}if(!i){var o=s+'value "'+t+'" should be of type "'+a+'"';return r===!1?(ia(o),!1):o}if(Lm(n,"validator")&&Bf(n.validator)){var h=ia,d=[];if(ia=function(g){d.push(g)},i=n.validator(t),ia=h,!i){var m=(d.length>1?"* ":"")+d.join(`
* `);return d.length=0,r===!1?(ia(m),i):m}}return i}function Va(e,t){var r=Object.defineProperties(t,{_vueTypes_name:{value:e,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(i){return i!==void 0||this.default?Bf(i)||rh(this,i,!0)===!0?(this.default=zf(i)?function(){return[].concat(i)}:Xc(i)?function(){return Object.assign({},i)}:i,this):(ia(this._vueTypes_name+' - invalid default value: "'+i+'"'),this):this}}}),n=r.validator;return Bf(n)&&(r.validator=zT(n,r)),r}function ys(e,t){var r=Va(e,t);return Object.defineProperty(r,"validate",{value:function(n){return Bf(this.validator)&&ia(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=zT(n,this),this}})}function rP(e,t,r){var n,i,a=(n=t,i={},Object.getOwnPropertyNames(n).forEach(function(g){i[g]=Object.getOwnPropertyDescriptor(n,g)}),Object.defineProperties({},i));if(a._vueTypes_name=e,!Xc(r))return a;var s,o,h=r.validator,d=GR(r,["validator"]);if(Bf(h)){var m=a.validator;m&&(m=(o=(s=m).__original)!==null&&o!==void 0?o:s),a.validator=zT(m?function(g){return m.call(this,g)&&h.call(this,g)}:h,a)}return Object.assign(a,d)}function B0(e){return e.replace(/^(?!\s*$)/gm,"  ")}var eY=function(){return ys("any",{})},tY=function(){return ys("function",{type:Function})},rY=function(){return ys("boolean",{type:Boolean})},nY=function(){return ys("string",{type:String})},iY=function(){return ys("number",{type:Number})},aY=function(){return ys("array",{type:Array})},oY=function(){return ys("object",{type:Object})},sY=function(){return Va("integer",{type:Number,validator:function(e){return QZ(e)}})},lY=function(){return Va("symbol",{validator:function(e){return typeof e=="symbol"}})};function uY(e,t){if(t===void 0&&(t="custom validation failed"),typeof e!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return Va(e.name||"<<anonymous function>>",{validator:function(r){var n=e(r);return n||ia(this._vueTypes_name+" - "+t),n}})}function cY(e){if(!zf(e))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var t='oneOf - value should be one of "'+e.join('", "')+'".',r=e.reduce(function(n,i){if(i!=null){var a=i.constructor;n.indexOf(a)===-1&&n.push(a)}return n},[]);return Va("oneOf",{type:r.length>0?r:void 0,validator:function(n){var i=e.indexOf(n)!==-1;return i||ia(t),i}})}function hY(e){if(!zf(e))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var t=!1,r=[],n=0;n<e.length;n+=1){var i=e[n];if(ZR(i)){if(L_(i)&&i._vueTypes_name==="oneOf"){r=r.concat(i.type);continue}if(Bf(i.validator)&&(t=!0),i.type!==!0&&i.type){r=r.concat(i.type);continue}}r.push(i)}return r=r.filter(function(a,s){return r.indexOf(a)===s}),Va("oneOfType",t?{type:r,validator:function(a){var s=[],o=e.some(function(h){var d=rh(L_(h)&&h._vueTypes_name==="oneOf"?h.type||null:h,a,!0);return typeof d=="string"&&s.push(d),d===!0});return o||ia("oneOfType - provided value does not match any of the "+s.length+` passed-in validators:
`+B0(s.join(`
`))),o}}:{type:r})}function fY(e){return Va("arrayOf",{type:Array,validator:function(t){var r,n=t.every(function(i){return(r=rh(e,i,!0))===!0});return n||ia(`arrayOf - value validation error:
`+B0(r)),n}})}function dY(e){return Va("instanceOf",{type:e})}function pY(e){return Va("objectOf",{type:Object,validator:function(t){var r,n=Object.keys(t).every(function(i){return(r=rh(e,t[i],!0))===!0});return n||ia(`objectOf - value validation error:
`+B0(r)),n}})}function mY(e){var t=Object.keys(e),r=t.filter(function(i){var a;return!!(!((a=e[i])===null||a===void 0)&&a.required)}),n=Va("shape",{type:Object,validator:function(i){var a=this;if(!Xc(i))return!1;var s=Object.keys(i);if(r.length>0&&r.some(function(h){return s.indexOf(h)===-1})){var o=r.filter(function(h){return s.indexOf(h)===-1});return ia(o.length===1?'shape - required property "'+o[0]+'" is not defined.':'shape - required properties "'+o.join('", "')+'" are not defined.'),!1}return s.every(function(h){if(t.indexOf(h)===-1)return a._vueTypes_isLoose===!0||(ia('shape - shape definition does not include a "'+h+'" property. Allowed keys: "'+t.join('", "')+'".'),!1);var d=rh(e[h],i[h],!0);return typeof d=="string"&&ia('shape - "'+h+`" property validation error:
 `+B0(d)),d===!0})}});return Object.defineProperty(n,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(n,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),n}var os=function(){function e(){}return e.extend=function(t){var r=this;if(zf(t))return t.forEach(function(g){return r.extend(g)}),this;var n=t.name,i=t.validate,a=i!==void 0&&i,s=t.getter,o=s!==void 0&&s,h=GR(t,["name","validate","getter"]);if(Lm(this,n))throw new TypeError('[VueTypes error]: Type "'+n+'" already defined');var d,m=h.type;return L_(m)?(delete h.type,Object.defineProperty(this,n,o?{get:function(){return rP(n,m,h)}}:{value:function(){var g,y=rP(n,m,h);return y.validator&&(y.validator=(g=y.validator).bind.apply(g,[y].concat([].slice.call(arguments)))),y}})):(d=o?{get:function(){var g=Object.assign({},h);return a?ys(n,g):Va(n,g)},enumerable:!0}:{value:function(){var g,y,x=Object.assign({},h);return g=a?ys(n,x):Va(n,x),x.validator&&(g.validator=(y=x.validator).bind.apply(y,[g].concat([].slice.call(arguments)))),g},enumerable:!0},Object.defineProperty(this,n,d))},HR(e,null,[{key:"any",get:function(){return eY()}},{key:"func",get:function(){return tY().def(this.defaults.func)}},{key:"bool",get:function(){return rY().def(this.defaults.bool)}},{key:"string",get:function(){return nY().def(this.defaults.string)}},{key:"number",get:function(){return iY().def(this.defaults.number)}},{key:"array",get:function(){return aY().def(this.defaults.array)}},{key:"object",get:function(){return oY().def(this.defaults.object)}},{key:"integer",get:function(){return sY().def(this.defaults.integer)}},{key:"symbol",get:function(){return lY()}}]),e}();function YR(e){var t;return e===void 0&&(e={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(t=function(r){function n(){return r.apply(this,arguments)||this}return jR(n,r),HR(n,null,[{key:"sensibleDefaults",get:function(){return Zy({},this.defaults)},set:function(i){this.defaults=i!==!1?Zy({},i!==!0?i:e):{}}}]),n}(os)).defaults=Zy({},e),t}os.defaults={},os.custom=uY,os.oneOf=cY,os.instanceOf=dY,os.oneOfType=hY,os.arrayOf=fY,os.objectOf=pY,os.shape=mY,os.utils={validate:function(e,t){return rh(t,e,!0)===!0},toType:function(e,t,r){return r===void 0&&(r=!1),r?ys(e,t):Va(e,t)}};(function(e){function t(){return e.apply(this,arguments)||this}return jR(t,e),t})(YR());const KR=YR({func:void 0,bool:void 0,string:void 0,number:void 0,array:void 0,object:void 0,integer:void 0});KR.extend([{name:"looseBool",getter:!0,type:Boolean,default:void 0},{name:"style",getter:!0,type:[String,Object],default:void 0},{name:"VueNode",getter:!0,type:null}]);const km=KR,JR=(e,t,r)=>{UX(e,`[ant-design-vue: ${t}] ${r}`)};function vY(e){let{prefixCls:t,animation:r,transitionName:n}=e;return r?{name:`${t}-${r}`}:n?{name:n}:{}}const gY=e=>{if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){const t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){const t=e.getBoundingClientRect();if(t.width||t.height)return!0}return!1};var yY=typeof global=="object"&&global&&global.Object===Object&&global;const QR=yY;var _Y=typeof self=="object"&&self&&self.Object===Object&&self,xY=QR||_Y||Function("return this")();const _u=xY;var bY=_u.Symbol;const k_=bY;var e6=Object.prototype,wY=e6.hasOwnProperty,SY=e6.toString,hp=k_?k_.toStringTag:void 0;function TY(e){var t=wY.call(e,hp),r=e[hp];try{e[hp]=void 0;var n=!0}catch{}var i=SY.call(e);return n&&(t?e[hp]=r:delete e[hp]),i}var CY=Object.prototype,EY=CY.toString;function AY(e){return EY.call(e)}var MY="[object Null]",IY="[object Undefined]",nP=k_?k_.toStringTag:void 0;function pv(e){return e==null?e===void 0?IY:MY:nP&&nP in Object(e)?TY(e):AY(e)}function t6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var PY="[object AsyncFunction]",DY="[object Function]",LY="[object GeneratorFunction]",kY="[object Proxy]";function r6(e){if(!t6(e))return!1;var t=pv(e);return t==DY||t==LY||t==PY||t==kY}var RY=_u["__core-js_shared__"];const ab=RY;var iP=function(){var e=/[^.]+$/.exec(ab&&ab.keys&&ab.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function OY(e){return!!iP&&iP in e}var zY=Function.prototype,BY=zY.toString;function nh(e){if(e!=null){try{return BY.call(e)}catch{}try{return e+""}catch{}}return""}var FY=/[\\^$.*+?()[\]{}|]/g,$Y=/^\[object .+?Constructor\]$/,NY=Function.prototype,VY=Object.prototype,UY=NY.toString,HY=VY.hasOwnProperty,jY=RegExp("^"+UY.call(HY).replace(FY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function GY(e){if(!t6(e)||OY(e))return!1;var t=r6(e)?jY:$Y;return t.test(nh(e))}function qY(e,t){return e==null?void 0:e[t]}function mv(e,t){var r=qY(e,t);return GY(r)?r:void 0}var WY=mv(_u,"Map");const h2=WY;var XY=Array.isArray;const ZY=XY;function BT(e){return e!=null&&typeof e=="object"}var YY="[object Arguments]";function aP(e){return BT(e)&&pv(e)==YY}var n6=Object.prototype,KY=n6.hasOwnProperty,JY=n6.propertyIsEnumerable,QY=aP(function(){return arguments}())?aP:function(e){return BT(e)&&KY.call(e,"callee")&&!JY.call(e,"callee")};const eK=QY;function tK(){return!1}var i6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oP=i6&&typeof module=="object"&&module&&!module.nodeType&&module,rK=oP&&oP.exports===i6,sP=rK?_u.Buffer:void 0,nK=sP?sP.isBuffer:void 0,iK=nK||tK;const aK=iK;var oK=9007199254740991;function a6(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=oK}var sK="[object Arguments]",lK="[object Array]",uK="[object Boolean]",cK="[object Date]",hK="[object Error]",fK="[object Function]",dK="[object Map]",pK="[object Number]",mK="[object Object]",vK="[object RegExp]",gK="[object Set]",yK="[object String]",_K="[object WeakMap]",xK="[object ArrayBuffer]",bK="[object DataView]",wK="[object Float32Array]",SK="[object Float64Array]",TK="[object Int8Array]",CK="[object Int16Array]",EK="[object Int32Array]",AK="[object Uint8Array]",MK="[object Uint8ClampedArray]",IK="[object Uint16Array]",PK="[object Uint32Array]",xn={};xn[wK]=xn[SK]=xn[TK]=xn[CK]=xn[EK]=xn[AK]=xn[MK]=xn[IK]=xn[PK]=!0;xn[sK]=xn[lK]=xn[xK]=xn[uK]=xn[bK]=xn[cK]=xn[hK]=xn[fK]=xn[dK]=xn[pK]=xn[mK]=xn[vK]=xn[gK]=xn[yK]=xn[_K]=!1;function DK(e){return BT(e)&&a6(e.length)&&!!xn[pv(e)]}function LK(e){return function(t){return e(t)}}var o6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qp=o6&&typeof module=="object"&&module&&!module.nodeType&&module,kK=Qp&&Qp.exports===o6,ob=kK&&QR.process,RK=function(){try{var e=Qp&&Qp.require&&Qp.require("util").types;return e||ob&&ob.binding&&ob.binding("util")}catch{}}();const lP=RK;var uP=lP&&lP.isTypedArray,OK=uP?LK(uP):DK;const zK=OK;var BK=Object.prototype;function s6(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||BK;return e===r}function FK(e,t){return function(r){return e(t(r))}}var $K=FK(Object.keys,Object);const NK=$K;var VK=Object.prototype,UK=VK.hasOwnProperty;function HK(e){if(!s6(e))return NK(e);var t=[];for(var r in Object(e))UK.call(e,r)&&r!="constructor"&&t.push(r);return t}function jK(e){return e!=null&&a6(e.length)&&!r6(e)}var GK=mv(_u,"DataView");const f2=GK;var qK=mv(_u,"Promise");const d2=qK;var WK=mv(_u,"Set");const p2=WK;var XK=mv(_u,"WeakMap");const m2=XK;var cP="[object Map]",ZK="[object Object]",hP="[object Promise]",fP="[object Set]",dP="[object WeakMap]",pP="[object DataView]",YK=nh(f2),KK=nh(h2),JK=nh(d2),QK=nh(p2),eJ=nh(m2),wc=pv;(f2&&wc(new f2(new ArrayBuffer(1)))!=pP||h2&&wc(new h2)!=cP||d2&&wc(d2.resolve())!=hP||p2&&wc(new p2)!=fP||m2&&wc(new m2)!=dP)&&(wc=function(e){var t=pv(e),r=t==ZK?e.constructor:void 0,n=r?nh(r):"";if(n)switch(n){case YK:return pP;case KK:return cP;case JK:return hP;case QK:return fP;case eJ:return dP}return t});const tJ=wc;M_("bottomLeft","bottomRight","topLeft","topRight");const l6=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ze(e?{name:e,appear:!0,appearActiveClass:`${e}`,appearToClass:`${e}-appear ${e}-appear-active`,enterFromClass:`${e}-appear ${e}-enter ${e}-appear-prepare ${e}-enter-prepare`,enterActiveClass:`${e}`,enterToClass:`${e}-enter ${e}-appear ${e}-appear-active ${e}-enter-active`,leaveActiveClass:`${e} ${e}-leave`,leaveToClass:`${e}-leave-active`}:{css:!1},t)},u6=Symbol("PortalContextKey"),rJ=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inTriggerContext:!0};Mi(u6,{inTriggerContext:t.inTriggerContext,shouldRender:ke(()=>{const{sPopupVisible:r,popupRef:n,forceRender:i,autoDestroy:a}=e||{};let s=!1;return(r||n||i)&&(s=!0),!r&&a&&(s=!1),s})})},nJ=()=>{rJ({},{inTriggerContext:!1});const e=Br(u6,{shouldRender:ke(()=>!1),inTriggerContext:!1});return{shouldRender:ke(()=>e.shouldRender.value||e.inTriggerContext===!1)}},iJ=jt({compatConfig:{MODE:3},name:"Portal",inheritAttrs:!1,props:{getContainer:km.func.isRequired,didUpdate:Function},setup(e,t){let{slots:r}=t,n=!0,i;const{shouldRender:a}=nJ();bk(()=>{n=!1,a.value&&(i=e.getContainer())});const s=mn(a,()=>{a.value&&!i&&(i=e.getContainer()),i&&s()});return _0(()=>{xs(()=>{var o;a.value&&((o=e.didUpdate)===null||o===void 0||o.call(e,e))})}),()=>{var o;return a.value?n?(o=r.default)===null||o===void 0?void 0:o.call(r):i?Pe(Lk,{to:i},r):null:null}}});function Ku(e){const t=typeof e=="function"?e():e,r=xr(t);function n(i){r.value=i}return[r,n]}var mP=[],fp=[],aJ="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function oJ(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}function sJ(e,t){if(t=t||{},e===void 0)throw new Error(aJ);var r=t.prepend===!0?"prepend":"append",n=t.container!==void 0?t.container:document.querySelector("head"),i=mP.indexOf(n);i===-1&&(i=mP.push(n)-1,fp[i]={});var a;return fp[i]!==void 0&&fp[i][r]!==void 0?a=fp[i][r]:(a=fp[i][r]=oJ(),r==="prepend"?n.insertBefore(a,n.childNodes[0]):n.appendChild(a)),e.charCodeAt(0)===65279&&(e=e.substr(1,e.length)),a.styleSheet?a.styleSheet.cssText+=e:a.textContent+=e,a}function vP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){lJ(e,i,r[i])})}return e}function lJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gP(e){return typeof e=="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(typeof e.icon=="object"||typeof e.icon=="function")}function v2(e,t,r){return r?_r(e.tag,vP({key:t},r,e.attrs),(e.children||[]).map(function(n,i){return v2(n,"".concat(t,"-").concat(e.tag,"-").concat(i))})):_r(e.tag,vP({key:t},e.attrs),(e.children||[]).map(function(n,i){return v2(n,"".concat(t,"-").concat(e.tag,"-").concat(i))}))}function c6(e){return Wc(e)[0]}function h6(e){return e?Array.isArray(e)?e:[e]:[]}var uJ={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},cJ=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,yP=!1,f6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cJ;xs(function(){yP||(typeof window<"u"&&window.document&&window.document.documentElement&&sJ(t,{prepend:!0}),yP=!0)})},hJ=["icon","primaryColor","secondaryColor"];function fJ(e,t){if(e==null)return{};var r=dJ(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Yy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){pJ(e,i,r[i])})}return e}function pJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var em={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function mJ(e){var t=e.primaryColor,r=e.secondaryColor;em.primaryColor=t,em.secondaryColor=r||c6(t),em.calculated=!!r}function vJ(){return Yy({},em)}var Jf=function(t,r){var n=Yy({},t,r.attrs),i=n.icon,a=n.primaryColor,s=n.secondaryColor,o=fJ(n,hJ),h=em;if(a&&(h={primaryColor:a,secondaryColor:s||c6(a)}),f6(),gP(i),!gP(i))return null;var d=i;return d&&typeof d.icon=="function"&&(d=Yy({},d,{icon:d.icon(h.primaryColor,h.secondaryColor)})),v2(d.icon,"svg-".concat(d.name),Yy({},o,{"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}))};Jf.props={icon:Object,primaryColor:String,secondaryColor:String,focusable:String};Jf.inheritAttrs=!1;Jf.displayName="IconBase";Jf.getTwoToneColors=vJ;Jf.setTwoToneColors=mJ;const FT=Jf;function gJ(e,t){return bJ(e)||xJ(e,t)||_J(e,t)||yJ()}function yJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _J(e,t){if(e){if(typeof e=="string")return _P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _P(e,t)}}function _P(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,s,o;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(h){a=!0,o=h}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw o}}return n}}function bJ(e){if(Array.isArray(e))return e}function d6(e){var t=h6(e),r=gJ(t,2),n=r[0],i=r[1];return FT.setTwoToneColors({primaryColor:n,secondaryColor:i})}function wJ(){var e=FT.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var SJ=["class","icon","spin","rotate","tabindex","twoToneColor","onClick"];function TJ(e,t){return MJ(e)||AJ(e,t)||EJ(e,t)||CJ()}function CJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EJ(e,t){if(e){if(typeof e=="string")return xP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xP(e,t)}}function xP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,s,o;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(h){a=!0,o=h}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw o}}return n}}function MJ(e){if(Array.isArray(e))return e}function bP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){g2(e,i,r[i])})}return e}function g2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IJ(e,t){if(e==null)return{};var r=PJ(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function PJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}d6("#1890ff");var Qf=function(t,r){var n,i=bP({},t,r.attrs),a=i.class,s=i.icon,o=i.spin,h=i.rotate,d=i.tabindex,m=i.twoToneColor,g=i.onClick,y=IJ(i,SJ),x=(n={anticon:!0},g2(n,"anticon-".concat(s.name),!!s.name),g2(n,a,a),n),T=o===""||o||s.name==="loading"?"anticon-spin":"",M=d;M===void 0&&g&&(M=-1,y.tabindex=M);var P=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,I=h6(m),D=TJ(I,2),R=D[0],B=D[1];return Pe("span",bP({role:"img","aria-label":s.name},y,{onClick:g,class:x}),[Pe(FT,{class:T,icon:s,primaryColor:R,secondaryColor:B,style:P},null)])};Qf.props={spin:Boolean,rotate:Number,icon:Object,twoToneColor:String};Qf.displayName="AntdIcon";Qf.inheritAttrs=!1;Qf.getTwoToneColor=wJ;Qf.setTwoToneColor=d6;const bs=Qf;var DJ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const LJ=DJ;function wP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){kJ(e,i,r[i])})}return e}function kJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $T=function(t,r){var n=wP({},t,r.attrs);return Pe(bs,wP({},n,{icon:LJ}),null)};$T.displayName="LoadingOutlined";$T.inheritAttrs=!1;const Rm=$T;var RJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"};const OJ=RJ;function SP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){zJ(e,i,r[i])})}return e}function zJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NT=function(t,r){var n=SP({},t,r.attrs);return Pe(bs,SP({},n,{icon:OJ}),null)};NT.displayName="CloseOutlined";NT.inheritAttrs=!1;const p6=NT;var BJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"};const FJ=BJ;function TP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){$J(e,i,r[i])})}return e}function $J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var VT=function(t,r){var n=TP({},t,r.attrs);return Pe(bs,TP({},n,{icon:FJ}),null)};VT.displayName="CloseCircleFilled";VT.inheritAttrs=!1;const F0=VT;function m6(e){const t=Symbol("contextKey");return{useProvide:(i,a)=>{const s=wa({});return Mi(t,s),Bo(()=>{ze(s,i,a||{})}),s},useInject:()=>Br(t,e)||{}}}const NJ=e=>{const{componentCls:t}=e;return{[t]:{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},VJ=NJ,UJ=e=>{const{componentCls:t}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-space-item`]:{"&:empty":{display:"none"}}}}},HJ=th("Space",e=>[UJ(e),VJ(e)]);var jJ="[object Map]",GJ="[object Set]",qJ=Object.prototype,WJ=qJ.hasOwnProperty;function v6(e){if(e==null)return!0;if(jK(e)&&(ZY(e)||typeof e=="string"||typeof e.splice=="function"||aK(e)||zK(e)||eK(e)))return!e.length;var t=tJ(e);if(t==jJ||t==GJ)return!e.size;if(s6(e))return!HK(e).length;for(var r in e)if(WJ.call(e,r))return!1;return!0}const XJ=()=>({compactSize:String,compactDirection:km.oneOf(M_("horizontal","vertical")).def("horizontal"),isFirstItem:$c(),isLastItem:$c()}),UT=m6(null),ZJ=(e,t)=>{const r=UT.useInject(),n=ke(()=>{if(!r||v6(r))return"";const{compactDirection:i,isFirstItem:a,isLastItem:s}=r,o=i==="vertical"?"-vertical-":"-";return ui({[`${e.value}-compact${o}item`]:!0,[`${e.value}-compact${o}first-item`]:a,[`${e.value}-compact${o}last-item`]:s,[`${e.value}-compact${o}item-rtl`]:t.value==="rtl"})});return{compactSize:ke(()=>r==null?void 0:r.compactSize),compactDirection:ke(()=>r==null?void 0:r.compactDirection),compactItemClassnames:n}},YJ=()=>({prefixCls:String,size:{type:String},direction:km.oneOf(M_("horizontal","vertical")).def("horizontal"),align:km.oneOf(M_("start","end","center","baseline")),block:{type:Boolean,default:void 0}}),KJ=jt({name:"CompactItem",props:XJ(),setup(e,t){let{slots:r}=t;return UT.useProvide(e),()=>{var n;return(n=r.default)===null||n===void 0?void 0:n.call(r)}}});jt({name:"ASpaceCompact",inheritAttrs:!1,props:YJ(),setup(e,t){let{attrs:r,slots:n}=t;const{prefixCls:i,direction:a}=fl("space-compact",e),s=UT.useInject(),[o,h]=HJ(i),d=ke(()=>ui(i.value,h.value,{[`${i.value}-rtl`]:a.value==="rtl",[`${i.value}-block`]:e.block,[`${i.value}-vertical`]:e.direction==="vertical"}));return()=>{var m;const g=Mm(((m=n.default)===null||m===void 0?void 0:m.call(n))||[]);return g.length===0?null:o(Pe("div",vn(vn({},r),{},{class:[d.value,r.class]}),[g.map((y,x)=>{var T;const M=y&&y.key||`${i.value}-item-${x}`,P=!s||v6(s);return Pe(KJ,{key:M,compactSize:(T=e.size)!==null&&T!==void 0?T:"middle",compactDirection:e.direction,isFirstItem:x===0&&(P||(s==null?void 0:s.isFirstItem)),isLastItem:x===g.length-1&&(P||(s==null?void 0:s.isLastItem))},{default:()=>[y]})})]))}}});function JJ(e,t,r){const{focusElCls:n,focus:i,borderElCls:a}=r,s=a?"> *":"",o=["hover",i?"focus":null,"active"].filter(Boolean).map(h=>`&:${h} ${s}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":ze(ze({[o]:{zIndex:2}},n?{[`&${n}`]:{zIndex:2}}:{}),{[`&[disabled] ${s}`]:{zIndex:0}})}}function QJ(e,t,r){const{borderElCls:n}=r,i=n?`> ${n}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function eQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=e,n=`${r}-compact`;return{[n]:ze(ze({},JJ(e,n,t)),QJ(r,n,t))}}var tQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};const rQ=tQ;function CP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){nQ(e,i,r[i])})}return e}function nQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var HT=function(t,r){var n=CP({},t,r.attrs);return Pe(bs,CP({},n,{icon:rQ}),null)};HT.displayName="CheckCircleOutlined";HT.inheritAttrs=!1;const iQ=HT;var aQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};const oQ=aQ;function EP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){sQ(e,i,r[i])})}return e}function sQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jT=function(t,r){var n=EP({},t,r.attrs);return Pe(bs,EP({},n,{icon:oQ}),null)};jT.displayName="ExclamationCircleOutlined";jT.inheritAttrs=!1;const lQ=jT;var uQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};const cQ=uQ;function AP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){hQ(e,i,r[i])})}return e}function hQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var GT=function(t,r){var n=AP({},t,r.attrs);return Pe(bs,AP({},n,{icon:cQ}),null)};GT.displayName="InfoCircleOutlined";GT.inheritAttrs=!1;const fQ=GT;var dQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"};const pQ=dQ;function MP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){mQ(e,i,r[i])})}return e}function mQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qT=function(t,r){var n=MP({},t,r.attrs);return Pe(bs,MP({},n,{icon:pQ}),null)};qT.displayName="CloseCircleOutlined";qT.inheritAttrs=!1;const vQ=qT;var gQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const yQ=gQ;function IP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){_Q(e,i,r[i])})}return e}function _Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var WT=function(t,r){var n=IP({},t,r.attrs);return Pe(bs,IP({},n,{icon:yQ}),null)};WT.displayName="CheckCircleFilled";WT.inheritAttrs=!1;const $0=WT;var xQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const bQ=xQ;function PP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){wQ(e,i,r[i])})}return e}function wQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var XT=function(t,r){var n=PP({},t,r.attrs);return Pe(bs,PP({},n,{icon:bQ}),null)};XT.displayName="ExclamationCircleFilled";XT.inheritAttrs=!1;const N0=XT;var SQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const TQ=SQ;function DP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){CQ(e,i,r[i])})}return e}function CQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ZT=function(t,r){var n=DP({},t,r.attrs);return Pe(bs,DP({},n,{icon:TQ}),null)};ZT.displayName="InfoCircleFilled";ZT.inheritAttrs=!1;const V0=ZT,EQ=e=>{const{componentCls:t,colorPrimary:r}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},AQ=th("Wave",e=>[EQ(e)]);function MQ(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function sb(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&MQ(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function IQ(e){const{borderTopColor:t,borderColor:r,backgroundColor:n}=getComputedStyle(e);return sb(t)?t:sb(r)?r:sb(n)?n:null}function lb(e){return Number.isNaN(e)?0:e}const PQ=jt({props:{target:Ba(),className:String},setup(e){const t=In(null),[r,n]=Ku(null),[i,a]=Ku([]),[s,o]=Ku(0),[h,d]=Ku(0),[m,g]=Ku(0),[y,x]=Ku(0),[T,M]=Ku(!1);function P(){const{target:q}=e,j=getComputedStyle(q);n(IQ(q));const te=j.position==="static",{borderLeftWidth:ne,borderTopWidth:ce}=j;o(te?q.offsetLeft:lb(-parseFloat(ne))),d(te?q.offsetTop:lb(-parseFloat(ce))),g(q.offsetWidth),x(q.offsetHeight);const{borderTopLeftRadius:le,borderTopRightRadius:de,borderBottomLeftRadius:ae,borderBottomRightRadius:Se}=j;a([le,de,Se,ae].map(ve=>lb(parseFloat(ve))))}let I,D,R;const B=()=>{clearTimeout(R),Jw.cancel(D),I==null||I.disconnect()},H=()=>{var q;const j=(q=t.value)===null||q===void 0?void 0:q.parentElement;j&&(T_(null,j),j.parentElement&&j.parentElement.removeChild(j))};ti(()=>{B(),R=setTimeout(()=>{H()},5e3);const{target:q}=e;q&&(D=Jw(()=>{P(),M(!0)}),typeof ResizeObserver<"u"&&(I=new ResizeObserver(P),I.observe(q)))}),hl(()=>{B()});const V=q=>{q.propertyName==="opacity"&&H()};return()=>{if(!T.value)return null;const q={left:`${s.value}px`,top:`${h.value}px`,width:`${m.value}px`,height:`${y.value}px`,borderRadius:i.value.map(j=>`${j}px`).join(" ")};return r&&(q["--wave-color"]=r.value),Pe(vu,{appear:!0,name:"wave-motion",appearFromClass:"wave-motion-appear",appearActiveClass:"wave-motion-appear",appearToClass:"wave-motion-appear wave-motion-appear-active"},{default:()=>[Pe("div",{ref:t,class:e.className,style:q,onTransitionend:V},null)]})}}});function DQ(e,t){const r=document.createElement("div");r.style.position="absolute",r.style.left="0px",r.style.top="0px",e==null||e.insertBefore(r,e==null?void 0:e.firstChild),T_(Pe(PQ,{target:e,className:t},null),r)}function LQ(e,t){function r(){const n=Kw(e);DQ(n,t.value)}return r}const kQ=jt({compatConfig:{MODE:3},name:"Wave",props:{disabled:Boolean},setup(e,t){let{slots:r}=t;const n=uv(),{prefixCls:i}=fl("wave",e),[,a]=AQ(i),s=LQ(n,ke(()=>ui(i.value,a.value)));let o;const h=()=>{Kw(n).removeEventListener("click",o,!0)};return ti(()=>{mn(()=>e.disabled,()=>{h(),xs(()=>{const d=Kw(n);d==null||d.removeEventListener("click",o,!0),!(!d||d.nodeType!==1||e.disabled)&&(o=m=>{m.target.tagName==="INPUT"||!gY(m.target)||!d.getAttribute||d.getAttribute("disabled")||d.disabled||d.className.includes("disabled")||d.className.includes("-leave")||s()},d.addEventListener("click",o,!0))})},{immediate:!0,flush:"post"})}),hl(()=>{h()}),()=>{var d;return(d=r.default)===null||d===void 0?void 0:d.call(r)[0]}}}),RQ=()=>({prefixCls:String,type:String,htmlType:{type:String,default:"button"},shape:{type:String},size:{type:String},loading:{type:[Boolean,Object],default:()=>!1},disabled:{type:Boolean,default:void 0},ghost:{type:Boolean,default:void 0},block:{type:Boolean,default:void 0},danger:{type:Boolean,default:void 0},icon:km.any,href:String,target:String,title:String,onClick:RI(),onMousedown:RI()}),OQ=RQ,LP=e=>{e&&(e.style.width="0px",e.style.opacity="0",e.style.transform="scale(0)")},kP=e=>{xs(()=>{e&&(e.style.width=`${e.scrollWidth}px`,e.style.opacity="1",e.style.transform="scale(1)")})},RP=e=>{e&&e.style&&(e.style.width=null,e.style.opacity=null,e.style.transform=null)},zQ=jt({compatConfig:{MODE:3},name:"LoadingIcon",props:{prefixCls:String,loading:[Boolean,Object],existIcon:Boolean},setup(e){return()=>{const{existIcon:t,prefixCls:r,loading:n}=e;if(t)return Pe("span",{class:`${r}-loading-icon`},[Pe(Rm,null,null)]);const i=!!n;return Pe(vu,{name:`${r}-loading-icon-motion`,onBeforeEnter:LP,onEnter:kP,onAfterEnter:RP,onBeforeLeave:kP,onLeave:a=>{setTimeout(()=>{LP(a)})},onAfterLeave:RP},{default:()=>[i?Pe("span",{class:`${r}-loading-icon`},[Pe(Rm,null,null)]):null]})}}}),OP=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),BQ=e=>{const{componentCls:t,fontSize:r,lineWidth:n,colorPrimaryHover:i,colorErrorHover:a}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-n,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:r}},OP(`${t}-primary`,i),OP(`${t}-danger`,a)]}},FQ=BQ;function $Q(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function NQ(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function VQ(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:ze(ze({},$Q(e,t)),NQ(e.componentCls,t))}}const UQ=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:400,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"> span":{display:"inline-block"},[`> ${r} + span, > span + ${r}`]:{marginInlineStart:e.marginXS},"> a":{color:"currentColor"},"&:not(:disabled)":ze({},zZ(e)),[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},sl=(e,t)=>({"&:not(:disabled)":{"&:hover":e,"&:active":t}}),HQ=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),jQ=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),y2=e=>({cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),R_=(e,t,r,n,i,a,s)=>({[`&${e}-background-ghost`]:ze(ze({color:t||void 0,backgroundColor:"transparent",borderColor:r||void 0,boxShadow:"none"},sl(ze({backgroundColor:"transparent"},a),ze({backgroundColor:"transparent"},s))),{"&:disabled":{cursor:"not-allowed",color:n||void 0,borderColor:i||void 0}})}),YT=e=>({"&:disabled":ze({},y2(e))}),g6=e=>ze({},YT(e)),O_=e=>({"&:disabled":{cursor:"not-allowed",color:e.colorTextDisabled}}),y6=e=>ze(ze(ze(ze(ze({},g6(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`}),sl({color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),R_(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:ze(ze(ze({color:e.colorError,borderColor:e.colorError},sl({color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),R_(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),YT(e))}),GQ=e=>ze(ze(ze(ze(ze({},g6(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`}),sl({color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),R_(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:ze(ze(ze({backgroundColor:e.colorError,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`},sl({backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),R_(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),YT(e))}),qQ=e=>ze(ze({},y6(e)),{borderStyle:"dashed"}),WQ=e=>ze(ze(ze({color:e.colorLink},sl({color:e.colorLinkHover},{color:e.colorLinkActive})),O_(e)),{[`&${e.componentCls}-dangerous`]:ze(ze({color:e.colorError},sl({color:e.colorErrorHover},{color:e.colorErrorActive})),O_(e))}),XQ=e=>ze(ze(ze({},sl({color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),O_(e)),{[`&${e.componentCls}-dangerous`]:ze(ze({color:e.colorError},O_(e)),sl({color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),ZQ=e=>ze(ze({},y2(e)),{[`&${e.componentCls}:hover`]:ze({},y2(e))}),YQ=e=>{const{componentCls:t}=e;return{[`${t}-default`]:y6(e),[`${t}-primary`]:GQ(e),[`${t}-dashed`]:qQ(e),[`${t}-link`]:WQ(e),[`${t}-text`]:XQ(e),[`${t}-disabled`]:ZQ(e)}},KT=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,iconCls:n,controlHeight:i,fontSize:a,lineHeight:s,lineWidth:o,borderRadius:h,buttonPaddingHorizontal:d}=e,m=Math.max(0,(i-a*s)/2-o),g=d-o,y=`${r}-icon-only`;return[{[`${r}${t}`]:{fontSize:a,height:i,padding:`${m}px ${g}px`,borderRadius:h,[`&${y}`]:{width:i,paddingInlineStart:0,paddingInlineEnd:0,[`&${r}-round`]:{width:"auto"},"> span":{transform:"scale(1.143)"}},[`&${r}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${r}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`&:not(${y}) ${r}-loading-icon > ${n}`]:{marginInlineEnd:e.marginXS}}},{[`${r}${r}-circle${t}`]:HQ(e)},{[`${r}${r}-round${t}`]:jQ(e)}]},KQ=e=>KT(e),JQ=e=>{const t=yu(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM});return KT(t,`${e.componentCls}-sm`)},QQ=e=>{const t=yu(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG});return KT(t,`${e.componentCls}-lg`)},eee=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},tee=th("Button",e=>{const{controlTmpOutline:t,paddingContentHorizontal:r}=e,n=yu(e,{colorOutlineDefault:t,buttonPaddingHorizontal:r});return[UQ(n),JQ(n),KQ(n),QQ(n),eee(n),YQ(n),FQ(n),eQ(e,{focus:!1}),VQ(e)]}),ree=()=>({prefixCls:String,size:{type:String}}),_6=m6(),_2=jt({compatConfig:{MODE:3},name:"AButtonGroup",props:ree(),setup(e,t){let{slots:r}=t;const{prefixCls:n,direction:i}=fl("btn-group",e),[,,a]=dv();_6.useProvide(wa({size:ke(()=>e.size)}));const s=ke(()=>{const{size:o}=e;let h="";switch(o){case"large":h="lg";break;case"small":h="sm";break;case"middle":case void 0:break;default:JR(!o,"Button.Group","Invalid prop `size`.")}return{[`${n.value}`]:!0,[`${n.value}-${h}`]:h,[`${n.value}-rtl`]:i.value==="rtl",[a.value]:!0}});return()=>{var o;return Pe("div",{class:s.value},[Mm((o=r.default)===null||o===void 0?void 0:o.call(r))])}}}),zP=/^[\u4e00-\u9fa5]{2}$/,BP=zP.test.bind(zP);function Jg(e){return e==="text"||e==="link"}const tm=jt({compatConfig:{MODE:3},name:"AButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:ST(OQ(),{type:"default"}),slots:Object,setup(e,t){let{slots:r,attrs:n,emit:i,expose:a}=t;const{prefixCls:s,autoInsertSpaceInButton:o,direction:h,size:d}=fl("btn",e),[m,g]=tee(s),y=_6.useInject(),x=AT(),T=ke(()=>{var Se;return(Se=e.disabled)!==null&&Se!==void 0?Se:x.value}),M=In(null),P=In(void 0);let I=!1;const D=In(!1),R=In(!1),B=ke(()=>o.value!==!1),{compactSize:H,compactItemClassnames:V}=ZJ(s,h),q=ke(()=>typeof e.loading=="object"&&e.loading.delay?e.loading.delay||!0:!!e.loading);mn(q,Se=>{clearTimeout(P.value),typeof q.value=="number"?P.value=setTimeout(()=>{D.value=Se},q.value):D.value=Se},{immediate:!0});const j=ke(()=>{const{type:Se,shape:ve="default",ghost:Ye,block:Qe,danger:Ct}=e,St=s.value,Kt={large:"lg",small:"sm",middle:void 0},Ft=H.value||(y==null?void 0:y.size)||d.value,br=Ft&&Kt[Ft]||"";return[V.value,{[g.value]:!0,[`${St}`]:!0,[`${St}-${ve}`]:ve!=="default"&&ve,[`${St}-${Se}`]:Se,[`${St}-${br}`]:br,[`${St}-loading`]:D.value,[`${St}-background-ghost`]:Ye&&!Jg(Se),[`${St}-two-chinese-chars`]:R.value&&B.value,[`${St}-block`]:Qe,[`${St}-dangerous`]:!!Ct,[`${St}-rtl`]:h.value==="rtl"}]}),te=()=>{const Se=M.value;if(!Se||o.value===!1)return;const ve=Se.textContent;I&&BP(ve)?R.value||(R.value=!0):R.value&&(R.value=!1)},ne=Se=>{if(D.value||T.value){Se.preventDefault();return}i("click",Se)},ce=Se=>{i("mousedown",Se)},le=(Se,ve)=>{const Ye=ve?" ":"";if(Se.type===hu){let Qe=Se.children.trim();return BP(Qe)&&(Qe=Qe.split("").join(Ye)),Pe("span",null,[Qe])}return Se};return Bo(()=>{JR(!(e.ghost&&Jg(e.type)),"Button","`link` or `text` button can't be a `ghost` button.")}),ti(te),_0(te),hl(()=>{P.value&&clearTimeout(P.value)}),a({focus:()=>{var Se;(Se=M.value)===null||Se===void 0||Se.focus()},blur:()=>{var Se;(Se=M.value)===null||Se===void 0||Se.blur()}}),()=>{var Se,ve;const{icon:Ye=(Se=r.icon)===null||Se===void 0?void 0:Se.call(r)}=e,Qe=Mm((ve=r.default)===null||ve===void 0?void 0:ve.call(r));I=Qe.length===1&&!Ye&&!Jg(e.type);const{type:Ct,htmlType:St,href:Kt,title:Ft,target:br}=e,Ir=D.value?"loading":Ye,vr=ze(ze({},n),{title:Ft,disabled:T.value,class:[j.value,n.class,{[`${s.value}-icon-only`]:Qe.length===0&&!!Ir}],onClick:ne,onMousedown:ce});T.value||delete vr.disabled;const fr=Ye&&!D.value?Ye:Pe(zQ,{existIcon:!!Ye,prefixCls:s.value,loading:!!D.value},null),qe=Qe.map(et=>le(et,I&&B.value));if(Kt!==void 0)return m(Pe("a",vn(vn({},vr),{},{href:Kt,target:br,ref:M}),[fr,qe]));let st=Pe("button",vn(vn({},vr),{},{ref:M,type:St}),[fr,qe]);if(!Jg(Ct)){const et=function(){return st}();st=Pe(kQ,{ref:"wave",disabled:!!D.value},{default:()=>[et]})}return m(st)}}});tm.Group=_2;tm.install=function(e){return e.component(tm.name,tm),e.component(_2.name,_2),e};function x6(e,t){return e.classList?e.classList.contains(t):` ${e.className} `.indexOf(` ${t} `)>-1}function nee(e,t){e.classList?e.classList.add(t):x6(e,t)||(e.className=`${e.className} ${t}`)}function iee(e,t){if(e.classList)e.classList.remove(t);else if(x6(e,t)){const r=e.className;e.className=` ${r} `.replace(` ${t} `," ")}}let ub=ze({},Im.Modal);function aee(e){e?ub=ze(ze({},ub),e):ub=ze({},Im.Modal)}const x2="internalMark",Ky=jt({compatConfig:{MODE:3},name:"ALocaleProvider",props:{locale:{type:Object},ANT_MARK__:String},setup(e,t){let{slots:r}=t;kT(e.ANT_MARK__===x2);const n=wa({antLocale:ze(ze({},e.locale),{exist:!0}),ANT_MARK__:x2});return Mi("localeData",n),mn(()=>e.locale,i=>{aee(i&&i.Modal),n.antLocale=ze(ze({},i),{exist:!0})},{immediate:!0}),()=>{var i;return(i=r.default)===null||i===void 0?void 0:i.call(r)}}});Ky.install=function(e){return e.component(Ky.name,Ky),e};const oee=D0(Ky),b6=jt({name:"Notice",inheritAttrs:!1,props:["prefixCls","duration","updateMark","noticeKey","closeIcon","closable","props","onClick","onClose","holder","visible"],setup(e,t){let{attrs:r,slots:n}=t,i,a=!1;const s=ke(()=>e.duration===void 0?4.5:e.duration),o=()=>{s.value&&!a&&(i=setTimeout(()=>{d()},s.value*1e3))},h=()=>{i&&(clearTimeout(i),i=null)},d=g=>{g&&g.stopPropagation(),h();const{onClose:y,noticeKey:x}=e;y&&y(x)},m=()=>{h(),o()};return ti(()=>{o()}),Zf(()=>{a=!0,h()}),mn([s,()=>e.updateMark,()=>e.visible],(g,y)=>{let[x,T,M]=g,[P,I,D]=y;(x!==P||T!==I||M!==D&&D)&&m()},{flush:"post"}),()=>{var g,y;const{prefixCls:x,closable:T,closeIcon:M=(g=n.closeIcon)===null||g===void 0?void 0:g.call(n),onClick:P,holder:I}=e,{class:D,style:R}=r,B=`${x}-notice`,H=Object.keys(r).reduce((q,j)=>((j.startsWith("data-")||j.startsWith("aria-")||j==="role")&&(q[j]=r[j]),q),{}),V=Pe("div",vn({class:ui(B,D,{[`${B}-closable`]:T}),style:R,onMouseenter:h,onMouseleave:o,onClick:P},H),[Pe("div",{class:`${B}-content`},[(y=n.default)===null||y===void 0?void 0:y.call(n)]),T?Pe("a",{tabindex:0,onClick:d,class:`${B}-close`},[M||Pe("span",{class:`${B}-close-x`},null)]):null]);return I?Pe(Lk,{to:I},{default:()=>V}):V}}});var see=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};let FP=0;const lee=Date.now();function $P(){const e=FP;return FP+=1,`rcNotification_${lee}_${e}`}const b2=jt({name:"Notification",inheritAttrs:!1,props:["prefixCls","transitionName","animation","maxCount","closeIcon","hashId"],setup(e,t){let{attrs:r,expose:n,slots:i}=t;const a=new Map,s=xr([]),o=ke(()=>{const{prefixCls:m,animation:g="fade"}=e;let y=e.transitionName;return!y&&g&&(y=`${m}-${g}`),l6(y)}),h=(m,g)=>{const y=m.key||$P(),x=ze(ze({},m),{key:y}),{maxCount:T}=e,M=s.value.map(I=>I.notice.key).indexOf(y),P=s.value.concat();M!==-1?P.splice(M,1,{notice:x,holderCallback:g}):(T&&s.value.length>=T&&(x.key=P[0].notice.key,x.updateMark=$P(),x.userPassKey=y,P.shift()),P.push({notice:x,holderCallback:g})),s.value=P},d=m=>{s.value=s.value.filter(g=>{let{notice:{key:y,userPassKey:x}}=g;return(x||y)!==m})};return n({add:h,remove:d,notices:s}),()=>{var m;const{prefixCls:g,closeIcon:y=(m=i.closeIcon)===null||m===void 0?void 0:m.call(i,{prefixCls:g})}=e,x=s.value.map((M,P)=>{let{notice:I,holderCallback:D}=M;const R=P===s.value.length-1?I.updateMark:void 0,{key:B,userPassKey:H}=I,{content:V}=I,q=ze(ze(ze({prefixCls:g,closeIcon:typeof y=="function"?y({prefixCls:g}):y},I),I.props),{key:B,noticeKey:H||B,updateMark:R,onClose:j=>{var te;d(j),(te=I.onClose)===null||te===void 0||te.call(I)},onClick:I.onClick});return D?Pe("div",{key:B,class:`${g}-hook-holder`,ref:j=>{typeof B>"u"||(j?(a.set(B,j),D(j,q)):a.delete(B))}},null):Pe(b6,vn(vn({},q),{},{class:ui(q.class,e.hashId)}),{default:()=>[typeof V=="function"?V({prefixCls:g}):V]})}),T={[g]:1,[r.class]:!!r.class,[e.hashId]:!0};return Pe("div",{class:T,style:r.style||{top:"65px",left:"50%"}},[Pe(Wk,vn({tag:"div"},o.value),{default:()=>[x]})])}}});b2.newInstance=function(t,r){const n=t||{},{name:i="notification",getContainer:a,appContext:s,prefixCls:o,rootPrefixCls:h,transitionName:d,hasTransitionName:m,useStyle:g}=n,y=see(n,["name","getContainer","appContext","prefixCls","rootPrefixCls","transitionName","hasTransitionName","useStyle"]),x=document.createElement("div");a?a().appendChild(x):document.body.appendChild(x);const T=jt({compatConfig:{MODE:3},name:"NotificationWrapper",setup(P,I){let{attrs:D}=I;const R=In(),B=ke(()=>Ni.getPrefixCls(i,o)),[,H]=g(B);return ti(()=>{r({notice(V){var q;(q=R.value)===null||q===void 0||q.add(V)},removeNotice(V){var q;(q=R.value)===null||q===void 0||q.remove(V)},destroy(){T_(null,x),x.parentNode&&x.parentNode.removeChild(x)},component:R})}),()=>{const V=Ni,q=V.getRootPrefixCls(h,B.value),j=m?d:`${B.value}-${d}`;return Pe(QT,vn(vn({},V),{},{prefixCls:q}),{default:()=>[Pe(b2,vn(vn({ref:R},D),{},{prefixCls:B.value,transitionName:j,hashId:H.value}),null)]})}}}),M=Pe(T,y);M.appContext=s||M.appContext,T_(M,x)};const w6=b2;let NP=0;const uee=Date.now();function VP(){const e=NP;return NP+=1,`rcNotification_${uee}_${e}`}const cee=jt({name:"HookNotification",inheritAttrs:!1,props:["prefixCls","transitionName","animation","maxCount","closeIcon","hashId","remove","notices","getStyles","getClassName","onAllRemoved","getContainer"],setup(e,t){let{attrs:r,slots:n}=t;const i=new Map,a=ke(()=>e.notices),s=ke(()=>{let m=e.transitionName;if(!m&&e.animation)switch(typeof e.animation){case"string":m=e.animation;break;case"function":m=e.animation().name;break;case"object":m=e.animation.name;break;default:m=`${e.prefixCls}-fade`;break}return l6(m)}),o=m=>e.remove(m),h=xr({});mn(a,()=>{const m={};Object.keys(h.value).forEach(g=>{m[g]=[]}),e.notices.forEach(g=>{const{placement:y="topRight"}=g.notice;y&&(m[y]=m[y]||[],m[y].push(g))}),h.value=m});const d=ke(()=>Object.keys(h.value));return()=>{var m;const{prefixCls:g,closeIcon:y=(m=n.closeIcon)===null||m===void 0?void 0:m.call(n,{prefixCls:g})}=e,x=d.value.map(T=>{var M,P;const I=h.value[T],D=(M=e.getClassName)===null||M===void 0?void 0:M.call(e,T),R=(P=e.getStyles)===null||P===void 0?void 0:P.call(e,T),B=I.map((q,j)=>{let{notice:te,holderCallback:ne}=q;const ce=j===a.value.length-1?te.updateMark:void 0,{key:le,userPassKey:de}=te,{content:ae}=te,Se=ze(ze(ze({prefixCls:g,closeIcon:typeof y=="function"?y({prefixCls:g}):y},te),te.props),{key:le,noticeKey:de||le,updateMark:ce,onClose:ve=>{var Ye;o(ve),(Ye=te.onClose)===null||Ye===void 0||Ye.call(te)},onClick:te.onClick});return ne?Pe("div",{key:le,class:`${g}-hook-holder`,ref:ve=>{typeof le>"u"||(ve?(i.set(le,ve),ne(ve,Se)):i.delete(le))}},null):Pe(b6,vn(vn({},Se),{},{class:ui(Se.class,e.hashId)}),{default:()=>[typeof ae=="function"?ae({prefixCls:g}):ae]})}),H={[g]:1,[`${g}-${T}`]:1,[r.class]:!!r.class,[e.hashId]:!0,[D]:!!D};function V(){var q;I.length>0||(Reflect.deleteProperty(h.value,T),(q=e.onAllRemoved)===null||q===void 0||q.call(e))}return Pe("div",{key:T,class:H,style:r.style||R||{top:"65px",left:"50%"}},[Pe(Wk,vn(vn({tag:"div"},s.value),{},{onAfterLeave:V}),{default:()=>[B]})])});return Pe(iJ,{getContainer:e.getContainer},{default:()=>[x]})}}}),hee=cee;var fee=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const dee=()=>document.body;let UP=0;function pee(){const e={};for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(i=>{i&&Object.keys(i).forEach(a=>{const s=i[a];s!==void 0&&(e[a]=s)})}),e}function S6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{getContainer:t=dee,motion:r,prefixCls:n,maxCount:i,getClassName:a,getStyles:s,onAllRemoved:o}=e,h=fee(e,["getContainer","motion","prefixCls","maxCount","getClassName","getStyles","onAllRemoved"]),d=In([]),m=In(),g=(I,D)=>{const R=I.key||VP(),B=ze(ze({},I),{key:R}),H=d.value.map(q=>q.notice.key).indexOf(R),V=d.value.concat();H!==-1?V.splice(H,1,{notice:B,holderCallback:D}):(i&&d.value.length>=i&&(B.key=V[0].notice.key,B.updateMark=VP(),B.userPassKey=R,V.shift()),V.push({notice:B,holderCallback:D})),d.value=V},y=I=>{d.value=d.value.filter(D=>{let{notice:{key:R,userPassKey:B}}=D;return(B||R)!==I})},x=()=>{d.value=[]},T=ke(()=>Pe(hee,{ref:m,prefixCls:n,maxCount:i,notices:d.value,remove:y,getClassName:a,getStyles:s,animation:r,hashId:e.hashId,onAllRemoved:o,getContainer:t},null)),M=In([]),P={open:I=>{const D=pee(h,I);(D.key===null||D.key===void 0)&&(D.key=`vc-notification-${UP}`,UP+=1),M.value=[...M.value,{type:"open",config:D}]},close:I=>{M.value=[...M.value,{type:"close",key:I}]},destroy:()=>{M.value=[...M.value,{type:"destroy"}]}};return mn(M,()=>{M.value.length&&(M.value.forEach(I=>{switch(I.type){case"open":g(I.config);break;case"close":y(I.key);break;case"destroy":x();break}}),M.value=[])}),[P,()=>T.value]}const mee=e=>{const{componentCls:t,iconCls:r,boxShadowSecondary:n,colorBgElevated:i,colorSuccess:a,colorError:s,colorWarning:o,colorInfo:h,fontSizeLG:d,motionEaseInOutCirc:m,motionDurationSlow:g,marginXS:y,paddingXS:x,borderRadiusLG:T,zIndexPopup:M,messageNoticeContentPadding:P}=e,I=new Vc("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:x,transform:"translateY(0)",opacity:1}}),D=new Vc("MessageMoveOut",{"0%":{maxHeight:e.height,padding:x,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}});return[{[t]:ze(ze({},RT(e)),{position:"fixed",top:y,width:"100%",pointerEvents:"none",zIndex:M,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:I,animationDuration:g,animationPlayState:"paused",animationTimingFunction:m},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:D,animationDuration:g,animationPlayState:"paused",animationTimingFunction:m},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[`${t}-notice`]:{padding:x,textAlign:"center",[r]:{verticalAlign:"text-bottom",marginInlineEnd:y,fontSize:d},[`${t}-notice-content`]:{display:"inline-block",padding:P,background:i,borderRadius:T,boxShadow:n,pointerEvents:"all"},[`${t}-success ${r}`]:{color:a},[`${t}-error ${r}`]:{color:s},[`${t}-warning ${r}`]:{color:o},[`
        ${t}-info ${r},
        ${t}-loading ${r}`]:{color:h}}},{[`${t}-notice-pure-panel`]:{padding:0,textAlign:"start"}}]},T6=th("Message",e=>{const t=yu(e,{messageNoticeContentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`});return[mee(t)]},e=>({height:150,zIndexPopup:e.zIndexPopupBase+10}));var vee=["class","component","viewBox","spin","rotate","tabindex","onClick"];function Qg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){C6(e,i,r[i])})}return e}function C6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gee(e,t){if(e==null)return{};var r=yee(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yee(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var U0=function(t,r){var n=r.attrs,i=r.slots,a=Qg({},t,n),s=a.class,o=a.component,h=a.viewBox,d=a.spin,m=a.rotate,g=a.tabindex,y=a.onClick,x=gee(a,vee),T=i.default&&i.default(),M=T&&T.length,P=i.component;f6();var I=C6({anticon:!0},s,s),D={"anticon-spin":d===""||!!d},R=m?{msTransform:"rotate(".concat(m,"deg)"),transform:"rotate(".concat(m,"deg)")}:void 0,B=Qg({},uJ,{viewBox:h,class:D,style:R});h||delete B.viewBox;var H=function(){return o?Pe(o,B,{default:function(){return[T]}}):P?P(B):M?(h||T.length===1&&T[0]&&T[0].type,Pe("svg",Qg({},B,{viewBox:h}),[T])):null},V=g;return V===void 0&&y&&(V=-1,x.tabindex=V),Pe("span",Qg({role:"img"},x,{onClick:y,class:I}),[H()])};U0.props={spin:Boolean,rotate:Number,viewBox:String,ariaLabel:String};U0.inheritAttrs=!1;U0.displayName="Icon";const _ee=U0,xee={info:Pe(V0,null,null),success:Pe($0,null,null),error:Pe(F0,null,null),warning:Pe(N0,null,null),loading:Pe(Rm,null,null)},bee=jt({name:"PureContent",inheritAttrs:!1,props:["prefixCls","type","icon"],setup(e,t){let{slots:r}=t;return()=>{var n;return Pe("div",{class:ui(`${e.prefixCls}-custom-content`,`${e.prefixCls}-${e.type}`)},[e.icon||xee[e.type],Pe("span",null,[(n=r.default)===null||n===void 0?void 0:n.call(r)])])}}});var wee=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const See=8,Tee=3,Cee=jt({name:"Holder",inheritAttrs:!1,props:["top","prefixCls","getContainer","maxCount","duration","rtl","transitionName","onAllRemoved"],setup(e,t){let{expose:r}=t;var n;const{getPrefixCls:i,getPopupContainer:a}=fl("message",e),s=ke(()=>i("message",e.prefixCls)),[,o]=T6(s),h=()=>{var T;const M=(T=e.top)!==null&&T!==void 0?T:See;return{left:"50%",transform:"translateX(-50%)",top:typeof M=="number"?`${M}px`:M}},d=()=>ui(o.value,e.rtl?`${s.value}-rtl`:""),m=()=>{var T;return vY({prefixCls:s.value,animation:(T=e.animation)!==null&&T!==void 0?T:"move-up",transitionName:e.transitionName})},g=Pe("span",{class:`${s.value}-close-x`},[Pe(_ee,{class:`${s.value}-close-icon`},null)]),[y,x]=S6({getStyles:h,prefixCls:s.value,getClassName:d,motion:m,closable:!1,closeIcon:g,duration:(n=e.duration)!==null&&n!==void 0?n:Tee,getContainer:()=>{var T,M;return((T=e.staticGetContainer)===null||T===void 0?void 0:T.call(e))||((M=a.value)===null||M===void 0?void 0:M.call(a))||document.body},maxCount:e.maxCount,onAllRemoved:e.onAllRemoved});return r(ze(ze({},y),{prefixCls:s,hashId:o})),x}});let HP=0;function Eee(e){const t=In(null),r=Symbol("messageHolderKey"),n=h=>{var d;(d=t.value)===null||d===void 0||d.close(h)},i=h=>{if(!t.value){const H=()=>{};return H.then=()=>{},H}const{open:d,prefixCls:m,hashId:g}=t.value,y=`${m}-notice`,{content:x,icon:T,type:M,key:P,class:I,onClose:D}=h,R=wee(h,["content","icon","type","key","class","onClose"]);let B=P;return B==null&&(HP+=1,B=`antd-message-${HP}`),jW(H=>(d(ze(ze({},R),{key:B,content:()=>Pe(bee,{prefixCls:m,type:M,icon:typeof T=="function"?T():T},{default:()=>[typeof x=="function"?x():x]}),placement:"top",class:ui(M&&`${y}-${M}`,g,I),onClose:()=>{D==null||D(),H()}})),()=>{n(B)}))},s={open:i,destroy:h=>{var d;h!==void 0?n(h):(d=t.value)===null||d===void 0||d.destroy()}};return["info","success","warning","error","loading"].forEach(h=>{const d=(m,g,y)=>{let x;m&&typeof m=="object"&&"content"in m?x=m:x={content:m};let T,M;typeof g=="function"?M=g:(T=g,M=y);const P=ze(ze({onClose:M,duration:T},x),{type:h});return i(P)};s[h]=d}),[s,()=>Pe(Cee,vn(vn({key:r},e),{},{ref:t}),null)]}function Aee(e){return Eee(e)}let E6=3,A6,aa,Mee=1,M6="",I6="move-up",P6=!1,D6=()=>document.body,L6,k6=!1;function Iee(){return Mee++}function Pee(e){e.top!==void 0&&(A6=e.top,aa=null),e.duration!==void 0&&(E6=e.duration),e.prefixCls!==void 0&&(M6=e.prefixCls),e.getContainer!==void 0&&(D6=e.getContainer,aa=null),e.transitionName!==void 0&&(I6=e.transitionName,aa=null,P6=!0),e.maxCount!==void 0&&(L6=e.maxCount,aa=null),e.rtl!==void 0&&(k6=e.rtl)}function Dee(e,t){if(aa){t(aa);return}w6.newInstance({appContext:e.appContext,prefixCls:e.prefixCls||M6,rootPrefixCls:e.rootPrefixCls,transitionName:I6,hasTransitionName:P6,style:{top:A6},getContainer:D6||e.getPopupContainer,maxCount:L6,name:"message",useStyle:T6},r=>{if(aa){t(aa);return}aa=r,t(r)})}const R6={info:V0,success:$0,error:F0,warning:N0,loading:Rm},Lee=Object.keys(R6);function kee(e){const t=e.duration!==void 0?e.duration:E6,r=e.key||Iee(),n=new Promise(a=>{const s=()=>(typeof e.onClose=="function"&&e.onClose(),a(!0));Dee(e,o=>{o.notice({key:r,duration:t,style:e.style||{},class:e.class,content:h=>{let{prefixCls:d}=h;const m=R6[e.type],g=m?Pe(m,null,null):"",y=ui(`${d}-custom-content`,{[`${d}-${e.type}`]:e.type,[`${d}-rtl`]:k6===!0});return Pe("div",{class:y},[typeof e.icon=="function"?e.icon():e.icon||g,Pe("span",null,[typeof e.content=="function"?e.content():e.content])])},onClose:s,onClick:e.onClick})})}),i=()=>{aa&&aa.removeNotice(r)};return i.then=(a,s)=>n.then(a,s),i.promise=n,i}function Ree(e){return Object.prototype.toString.call(e)==="[object Object]"&&!!e.content}const Om={open:kee,config:Pee,destroy(e){if(aa)if(e){const{removeNotice:t}=aa;t(e)}else{const{destroy:t}=aa;t(),aa=null}}};function Oee(e,t){e[t]=(r,n,i)=>Ree(r)?e.open(ze(ze({},r),{type:t})):(typeof n=="function"&&(i=n,n=void 0),e.open({content:r,duration:n,type:t,onClose:i}))}Lee.forEach(e=>Oee(Om,e));Om.warn=Om.warning;Om.useMessage=Aee;const zee=Om,Bee=e=>{const{componentCls:t,width:r,notificationMarginEdge:n}=e,i=new Vc("antNotificationTopFadeIn",{"0%":{marginTop:"-100%",opacity:0},"100%":{marginTop:0,opacity:1}}),a=new Vc("antNotificationBottomFadeIn",{"0%":{marginBottom:"-100%",opacity:0},"100%":{marginBottom:0,opacity:1}}),s=new Vc("antNotificationLeftFadeIn",{"0%":{right:{_skip_check_:!0,value:r},opacity:0},"100%":{right:{_skip_check_:!0,value:0},opacity:1}});return{[`&${t}-top, &${t}-bottom`]:{marginInline:0},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:i}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:a}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginInlineEnd:0,marginInlineStart:n,[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:s}}}},Fee=Bee,$ee=e=>{const{iconCls:t,componentCls:r,boxShadowSecondary:n,fontSizeLG:i,notificationMarginBottom:a,borderRadiusLG:s,colorSuccess:o,colorInfo:h,colorWarning:d,colorError:m,colorTextHeading:g,notificationBg:y,notificationPadding:x,notificationMarginEdge:T,motionDurationMid:M,motionEaseInOut:P,fontSize:I,lineHeight:D,width:R,notificationIconSize:B}=e,H=`${r}-notice`,V=new Vc("antNotificationFadeIn",{"0%":{left:{_skip_check_:!0,value:R},opacity:0},"100%":{left:{_skip_check_:!0,value:0},opacity:1}}),q=new Vc("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:a,opacity:1},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[r]:ze(ze(ze(ze({},RT(e)),{position:"fixed",zIndex:e.zIndexPopup,marginInlineEnd:T,[`${r}-hook-holder`]:{position:"relative"},[`&${r}-top, &${r}-bottom`]:{[`${r}-notice`]:{marginInline:"auto auto"}},[`&${r}-topLeft, &${r}-bottomLeft`]:{[`${r}-notice`]:{marginInlineEnd:"auto",marginInlineStart:0}},[`${r}-fade-enter, ${r}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:P,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${r}-fade-leave`]:{animationTimingFunction:P,animationFillMode:"both",animationDuration:M,animationPlayState:"paused"},[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:V,animationPlayState:"running"},[`${r}-fade-leave${r}-fade-leave-active`]:{animationName:q,animationPlayState:"running"}}),Fee(e)),{"&-rtl":{direction:"rtl",[`${r}-notice-btn`]:{float:"left"}}})},{[H]:{position:"relative",width:R,maxWidth:`calc(100vw - ${T*2}px)`,marginBottom:a,marginInlineStart:"auto",padding:x,overflow:"hidden",lineHeight:D,wordWrap:"break-word",background:y,borderRadius:s,boxShadow:n,[`${r}-close-icon`]:{fontSize:I,cursor:"pointer"},[`${H}-message`]:{marginBottom:e.marginXS,color:g,fontSize:i,lineHeight:e.lineHeightLG},[`${H}-description`]:{fontSize:I},[`&${H}-closable ${H}-message`]:{paddingInlineEnd:e.paddingLG},[`${H}-with-icon ${H}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.marginSM+B,fontSize:i},[`${H}-with-icon ${H}-description`]:{marginInlineStart:e.marginSM+B,fontSize:I},[`${H}-icon`]:{position:"absolute",fontSize:B,lineHeight:0,[`&-success${t}`]:{color:o},[`&-info${t}`]:{color:h},[`&-warning${t}`]:{color:d},[`&-error${t}`]:{color:m}},[`${H}-close`]:{position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.wireframe?"transparent":e.colorFillContent}},[`${H}-btn`]:{float:"right",marginTop:e.marginSM}}},{[`${H}-pure-panel`]:{margin:0}}]},O6=th("Notification",e=>{const t=e.paddingMD,r=e.paddingLG,n=yu(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:r,notificationPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`,notificationMarginBottom:e.margin,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationIconSize:e.fontSizeLG*e.lineHeightLG,notificationCloseButtonSize:e.controlHeightLG*.55});return[$ee(n)]},e=>({zIndexPopup:e.zIndexPopupBase+50,width:384}));function Nee(e,t){return t||Pe("span",{class:`${e}-close-x`},[Pe(p6,{class:`${e}-close-icon`},null)])}Pe(V0,null,null),Pe($0,null,null),Pe(F0,null,null),Pe(N0,null,null),Pe(Rm,null,null);const Vee={success:$0,info:V0,error:F0,warning:N0};function Uee(e){let{prefixCls:t,icon:r,type:n,message:i,description:a,btn:s}=e,o=null;if(r)o=Pe("span",{class:`${t}-icon`},[lf(r)]);else if(n){const h=Vee[n];o=Pe(h,{class:`${t}-icon ${t}-icon-${n}`},null)}return Pe("div",{class:ui({[`${t}-with-icon`]:o}),role:"alert"},[o,Pe("div",{class:`${t}-message`},[i]),Pe("div",{class:`${t}-description`},[a]),s&&Pe("div",{class:`${t}-btn`},[s])])}function z6(e,t,r){let n;switch(t=typeof t=="number"?`${t}px`:t,r=typeof r=="number"?`${r}px`:r,e){case"top":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":n={left:0,top:t,bottom:"auto"};break;case"topRight":n={right:0,top:t,bottom:"auto"};break;case"bottom":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":n={left:0,top:"auto",bottom:r};break;default:n={right:0,top:"auto",bottom:r};break}return n}function Hee(e){return{name:`${e}-fade`}}var jee=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const jP=24,Gee=4.5,qee=jt({name:"Holder",inheritAttrs:!1,props:["prefixCls","class","type","icon","content","onAllRemoved"],setup(e,t){let{expose:r}=t;const{getPrefixCls:n,getPopupContainer:i}=fl("notification",e),a=ke(()=>e.prefixCls||n("notification")),s=y=>{var x,T;return z6(y,(x=e.top)!==null&&x!==void 0?x:jP,(T=e.bottom)!==null&&T!==void 0?T:jP)},[,o]=O6(a),h=()=>ui(o.value,{[`${a.value}-rtl`]:e.rtl}),d=()=>Hee(a.value),[m,g]=S6({prefixCls:a.value,getStyles:s,getClassName:h,motion:d,closable:!0,closeIcon:Nee(a.value),duration:Gee,getContainer:()=>{var y,x;return((y=e.getPopupContainer)===null||y===void 0?void 0:y.call(e))||((x=i.value)===null||x===void 0?void 0:x.call(i))||document.body},maxCount:e.maxCount,hashId:o.value,onAllRemoved:e.onAllRemoved});return r(ze(ze({},m),{prefixCls:a.value,hashId:o})),g}});function Wee(e){const t=In(null),r=Symbol("notificationHolderKey"),n=o=>{if(!t.value)return;const{open:h,prefixCls:d,hashId:m}=t.value,g=`${d}-notice`,{message:y,description:x,icon:T,type:M,btn:P,class:I}=o,D=jee(o,["message","description","icon","type","btn","class"]);return h(ze(ze({placement:"topRight"},D),{content:()=>Pe(Uee,{prefixCls:g,icon:typeof T=="function"?T():T,type:M,message:typeof y=="function"?y():y,description:typeof x=="function"?x():x,btn:typeof P=="function"?P():P},null),class:ui(M&&`${g}-${M}`,m,I)}))},a={open:n,destroy:o=>{var h,d;o!==void 0?(h=t.value)===null||h===void 0||h.close(o):(d=t.value)===null||d===void 0||d.destroy()}};return["success","info","warning","error"].forEach(o=>{a[o]=h=>n(ze(ze({},h),{type:o}))}),[a,()=>Pe(qee,vn(vn({key:r},e),{},{ref:t}),null)]}function Xee(e){return Wee(e)}globalThis&&globalThis.__awaiter;const Ic={};let B6=4.5,F6="24px",$6="24px",w2="",N6="topRight",V6=()=>document.body,U6=null,S2=!1,H6;function Zee(e){const{duration:t,placement:r,bottom:n,top:i,getContainer:a,closeIcon:s,prefixCls:o}=e;o!==void 0&&(w2=o),t!==void 0&&(B6=t),r!==void 0&&(N6=r),n!==void 0&&($6=typeof n=="number"?`${n}px`:n),i!==void 0&&(F6=typeof i=="number"?`${i}px`:i),a!==void 0&&(V6=a),s!==void 0&&(U6=s),e.rtl!==void 0&&(S2=e.rtl),e.maxCount!==void 0&&(H6=e.maxCount)}function Yee(e,t){let{prefixCls:r,placement:n=N6,getContainer:i=V6,top:a,bottom:s,closeIcon:o=U6,appContext:h}=e;const{getPrefixCls:d}=cte(),m=d("notification",r||w2),g=`${m}-${n}-${S2}`,y=Ic[g];if(y){Promise.resolve(y).then(T=>{t(T)});return}const x=ui(`${m}-${n}`,{[`${m}-rtl`]:S2===!0});w6.newInstance({name:"notification",prefixCls:r||w2,useStyle:O6,class:x,style:z6(n,a??F6,s??$6),appContext:h,getContainer:i,closeIcon:T=>{let{prefixCls:M}=T;return Pe("span",{class:`${M}-close-x`},[lf(o,{},Pe(p6,{class:`${M}-close-icon`},null))])},maxCount:H6,hasTransitionName:!0},T=>{Ic[g]=T,t(T)})}const Kee={success:iQ,info:fQ,error:vQ,warning:lQ};function Jee(e){const{icon:t,type:r,description:n,message:i,btn:a}=e,s=e.duration===void 0?B6:e.duration;Yee(e,o=>{o.notice({content:h=>{let{prefixCls:d}=h;const m=`${d}-notice`;let g=null;if(t)g=()=>Pe("span",{class:`${m}-icon`},[lf(t)]);else if(r){const y=Kee[r];g=()=>Pe(y,{class:`${m}-icon ${m}-icon-${r}`},null)}return Pe("div",{class:g?`${m}-with-icon`:""},[g&&g(),Pe("div",{class:`${m}-message`},[!n&&g?Pe("span",{class:`${m}-message-single-line-auto-margin`},null):null,lf(i)]),Pe("div",{class:`${m}-description`},[lf(n)]),a?Pe("span",{class:`${m}-btn`},[lf(a)]):null])},duration:s,closable:!0,onClose:e.onClose,onClick:e.onClick,key:e.key,style:e.style||{},class:e.class})})}const Ff={open:Jee,close(e){Object.keys(Ic).forEach(t=>Promise.resolve(Ic[t]).then(r=>{r.removeNotice(e)}))},config:Zee,destroy(){Object.keys(Ic).forEach(e=>{Promise.resolve(Ic[e]).then(t=>{t.destroy()}),delete Ic[e]})}},Qee=["success","info","warning","error"];Qee.forEach(e=>{Ff[e]=t=>Ff.open(ze(ze({},t),{type:e}))});Ff.warn=Ff.warning;Ff.useNotification=Xee;const ete=Ff,tte=`-ant-${Date.now()}-${Math.random()}`;function rte(e,t){const r={},n=(s,o)=>{let h=s.clone();return h=(o==null?void 0:o(h))||h,h.toRgbString()},i=(s,o)=>{const h=new Ei(s),d=Wc(h.toRgbString());r[`${o}-color`]=n(h),r[`${o}-color-disabled`]=d[1],r[`${o}-color-hover`]=d[4],r[`${o}-color-active`]=d[6],r[`${o}-color-outline`]=h.clone().setAlpha(.2).toRgbString(),r[`${o}-color-deprecated-bg`]=d[0],r[`${o}-color-deprecated-border`]=d[2]};if(t.primaryColor){i(t.primaryColor,"primary");const s=new Ei(t.primaryColor),o=Wc(s.toRgbString());o.forEach((d,m)=>{r[`primary-${m+1}`]=d}),r["primary-color-deprecated-l-35"]=n(s,d=>d.lighten(35)),r["primary-color-deprecated-l-20"]=n(s,d=>d.lighten(20)),r["primary-color-deprecated-t-20"]=n(s,d=>d.tint(20)),r["primary-color-deprecated-t-50"]=n(s,d=>d.tint(50)),r["primary-color-deprecated-f-12"]=n(s,d=>d.setAlpha(d.getAlpha()*.12));const h=new Ei(o[0]);r["primary-color-active-deprecated-f-30"]=n(h,d=>d.setAlpha(d.getAlpha()*.3)),r["primary-color-active-deprecated-d-02"]=n(h,d=>d.darken(2))}return t.successColor&&i(t.successColor,"success"),t.warningColor&&i(t.warningColor,"warning"),t.errorColor&&i(t.errorColor,"error"),t.infoColor&&i(t.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(s=>`--${e}-${s}: ${r[s]};`).join(`
`)}
  }
  `.trim()}function nte(e,t){const r=rte(e,t);L0()?P_(r,`${tte}-dynamic-theme`):kT()}const ite=e=>{const[t,r]=dv();return o2(ke(()=>({theme:t.value,token:r.value,hashId:"",path:["ant-design-icons",e.value]})),()=>[{[`.${e.value}`]:ze(ze({},LZ()),{[`.${e.value} .${e.value}-icon`]:{display:"block"}})}])},ate=ite;function ote(e,t){const r=ke(()=>(e==null?void 0:e.value)||{}),n=ke(()=>r.value.inherit===!1||!(t!=null&&t.value)?kR:t.value);return ke(()=>{if(!(e!=null&&e.value))return t==null?void 0:t.value;const a=ze({},n.value.components);return Object.keys(e.value.components||{}).forEach(s=>{a[s]=ze(ze({},a[s]),e.value.components[s])}),ze(ze(ze({},n.value),r.value),{token:ze(ze({},n.value.token),r.value.token),components:a})})}var ste=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const lte="ant";function _f(){return Ni.prefixCls||lte}function j6(){return Ni.iconPrefixCls||CT}const JT=wa({}),Ni=wa({});Bo(()=>{ze(Ni,JT),Ni.prefixCls=_f(),Ni.iconPrefixCls=j6(),Ni.getPrefixCls=(e,t)=>t||(e?`${Ni.prefixCls}-${e}`:Ni.prefixCls),Ni.getRootPrefixCls=()=>Ni.prefixCls?Ni.prefixCls:_f()});let cb;const ute=e=>{cb&&cb(),cb=Bo(()=>{ze(JT,wa(e)),ze(Ni,wa(e))}),e.theme&&nte(_f(),e.theme)},cte=()=>({getPrefixCls:(e,t)=>t||(e?`${_f()}-${e}`:_f()),getIconPrefixCls:j6,getRootPrefixCls:()=>Ni.prefixCls?Ni.prefixCls:_f()}),rm=jt({compatConfig:{MODE:3},name:"AConfigProvider",inheritAttrs:!1,props:KW(),setup(e,t){let{slots:r}=t;const n=sR(),i=(ae,Se)=>{const{prefixCls:ve="ant"}=e;if(Se)return Se;const Ye=ve||n.getPrefixCls("");return ae?`${Ye}-${ae}`:Ye},a=ke(()=>e.iconPrefixCls||n.iconPrefixCls.value||CT),s=ke(()=>a.value!==n.iconPrefixCls.value),o=ke(()=>{var ae;return e.csp||((ae=n.csp)===null||ae===void 0?void 0:ae.value)}),h=ate(a),d=ote(ke(()=>e.theme),ke(()=>{var ae;return(ae=n.theme)===null||ae===void 0?void 0:ae.value})),m=ae=>(e.renderEmpty||r.renderEmpty||n.renderEmpty||ZZ)(ae),g=ke(()=>{var ae,Se;return(ae=e.autoInsertSpaceInButton)!==null&&ae!==void 0?ae:(Se=n.autoInsertSpaceInButton)===null||Se===void 0?void 0:Se.value}),y=ke(()=>{var ae;return e.locale||((ae=n.locale)===null||ae===void 0?void 0:ae.value)});mn(y,()=>{JT.locale=y.value},{immediate:!0});const x=ke(()=>{var ae;return e.direction||((ae=n.direction)===null||ae===void 0?void 0:ae.value)}),T=ke(()=>{var ae,Se;return(ae=e.space)!==null&&ae!==void 0?ae:(Se=n.space)===null||Se===void 0?void 0:Se.value}),M=ke(()=>{var ae,Se;return(ae=e.virtual)!==null&&ae!==void 0?ae:(Se=n.virtual)===null||Se===void 0?void 0:Se.value}),P=ke(()=>{var ae,Se;return(ae=e.dropdownMatchSelectWidth)!==null&&ae!==void 0?ae:(Se=n.dropdownMatchSelectWidth)===null||Se===void 0?void 0:Se.value}),I=ke(()=>{var ae;return e.getTargetContainer!==void 0?e.getTargetContainer:(ae=n.getTargetContainer)===null||ae===void 0?void 0:ae.value}),D=ke(()=>{var ae;return e.getPopupContainer!==void 0?e.getPopupContainer:(ae=n.getPopupContainer)===null||ae===void 0?void 0:ae.value}),R=ke(()=>{var ae;return e.pageHeader!==void 0?e.pageHeader:(ae=n.pageHeader)===null||ae===void 0?void 0:ae.value}),B=ke(()=>{var ae;return e.input!==void 0?e.input:(ae=n.input)===null||ae===void 0?void 0:ae.value}),H=ke(()=>{var ae;return e.pagination!==void 0?e.pagination:(ae=n.pagination)===null||ae===void 0?void 0:ae.value}),V=ke(()=>{var ae;return e.form!==void 0?e.form:(ae=n.form)===null||ae===void 0?void 0:ae.value}),q=ke(()=>{var ae;return e.select!==void 0?e.select:(ae=n.select)===null||ae===void 0?void 0:ae.value}),j=ke(()=>e.componentSize),te=ke(()=>e.componentDisabled),ne={csp:o,autoInsertSpaceInButton:g,locale:y,direction:x,space:T,virtual:M,dropdownMatchSelectWidth:P,getPrefixCls:i,iconPrefixCls:a,theme:ke(()=>{var ae,Se;return(ae=d.value)!==null&&ae!==void 0?ae:(Se=n.theme)===null||Se===void 0?void 0:Se.value}),renderEmpty:m,getTargetContainer:I,getPopupContainer:D,pageHeader:R,input:B,pagination:H,form:V,select:q,componentSize:j,componentDisabled:te,transformCellText:ke(()=>e.transformCellText)},ce=ke(()=>{const ae=d.value||{},{algorithm:Se,token:ve}=ae,Ye=ste(ae,["algorithm","token"]),Qe=Se&&(!Array.isArray(Se)||Se.length>0)?AR(Se):void 0;return ze(ze({},Ye),{theme:Qe,token:ze(ze({},z0),ve)})}),le=ke(()=>{var ae,Se;let ve={};return y.value&&(ve=((ae=y.value.Form)===null||ae===void 0?void 0:ae.defaultValidateMessages)||((Se=Im.Form)===null||Se===void 0?void 0:Se.defaultValidateMessages)||{}),e.form&&e.form.validateMessages&&(ve=ze(ze({},ve),e.form.validateMessages)),ve});JW(ne),YW({validateMessages:le}),YZ(j),QW(te);const de=ae=>{var Se,ve;let Ye=s.value?h((Se=r.default)===null||Se===void 0?void 0:Se.call(r)):(ve=r.default)===null||ve===void 0?void 0:ve.call(r);if(e.theme){const Qe=function(){return Ye}();Ye=Pe(UZ,{value:ce.value},{default:()=>[Qe]})}return Pe(oee,{locale:y.value||ae,ANT_MARK__:x2},{default:()=>[Ye]})};return Bo(()=>{x.value&&(zee.config({rtl:x.value==="rtl"}),ete.config({rtl:x.value==="rtl"}))}),()=>Pe(cR,{children:(ae,Se,ve)=>de(ve)},null)}});rm.config=ute;rm.install=function(e){e.component(rm.name,rm)};const QT=rm;function GP(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function qP(e){return{backgroundColor:e.bgColorSelected,boxShadow:e.boxShadow}}const hte=ze({overflow:"hidden"},DZ),fte=e=>{const{componentCls:t}=e;return{[t]:ze(ze(ze(ze(ze({},RT(e)),{display:"inline-block",padding:e.segmentedContainerPadding,color:e.labelColor,backgroundColor:e.bgColor,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid} ${e.motionEaseInOut}`,borderRadius:e.borderRadiusSM,"&-selected":ze(ze({},qP(e)),{color:e.labelColorHover}),"&::after":{content:'""',position:"absolute",width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",transition:`background-color ${e.motionDurationMid}`},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.labelColorHover,"&::after":{backgroundColor:e.bgColorHover}},"&-label":ze({minHeight:e.controlHeight-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeight-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`},hte),"&-icon + *":{marginInlineStart:e.marginSM/2},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:ze(ze({},qP(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${e.paddingXXS}px 0`,borderRadius:e.borderRadiusSM,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:e.controlHeightLG-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeightLG-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:e.controlHeightSM-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeightSM-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontalSM}px`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}}}),GP(`&-disabled ${t}-item`,e)),GP(`${t}-item-disabled`,e)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"}})}},dte=th("Segmented",e=>{const{lineWidthBold:t,lineWidth:r,colorTextLabel:n,colorText:i,colorFillSecondary:a,colorBgLayout:s,colorBgElevated:o}=e,h=yu(e,{segmentedPaddingHorizontal:e.controlPaddingHorizontal-r,segmentedPaddingHorizontalSM:e.controlPaddingHorizontalSM-r,segmentedContainerPadding:t,labelColor:n,labelColorHover:i,bgColor:s,bgColorHover:a,bgColorSelected:o});return[fte(h)]}),WP=e=>e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null,Vh=e=>e!==void 0?`${e}px`:void 0,pte=jt({props:{value:Do(),getValueIndex:Do(),prefixCls:Do(),motionName:Do(),onMotionStart:Do(),onMotionEnd:Do(),direction:Do(),containerRef:Do()},emits:["motionStart","motionEnd"],setup(e,t){let{emit:r}=t;const n=xr(),i=T=>{var M;const P=e.getValueIndex(T),I=(M=e.containerRef.value)===null||M===void 0?void 0:M.querySelectorAll(`.${e.prefixCls}-item`)[P];return(I==null?void 0:I.offsetParent)&&I},a=xr(null),s=xr(null);mn(()=>e.value,(T,M)=>{const P=i(M),I=i(T),D=WP(P),R=WP(I);a.value=D,s.value=R,r(P&&I?"motionStart":"motionEnd")},{flush:"post"});const o=ke(()=>{var T,M;return e.direction==="rtl"?Vh(-((T=a.value)===null||T===void 0?void 0:T.right)):Vh((M=a.value)===null||M===void 0?void 0:M.left)}),h=ke(()=>{var T,M;return e.direction==="rtl"?Vh(-((T=s.value)===null||T===void 0?void 0:T.right)):Vh((M=s.value)===null||M===void 0?void 0:M.left)});let d;const m=T=>{clearTimeout(d),xs(()=>{T&&(T.style.transform="translateX(var(--thumb-start-left))",T.style.width="var(--thumb-start-width)")})},g=T=>{d=setTimeout(()=>{T&&(nee(T,`${e.motionName}-appear-active`),T.style.transform="translateX(var(--thumb-active-left))",T.style.width="var(--thumb-active-width)")})},y=T=>{a.value=null,s.value=null,T&&(T.style.transform=null,T.style.width=null,iee(T,`${e.motionName}-appear-active`)),r("motionEnd")},x=ke(()=>{var T,M;return{"--thumb-start-left":o.value,"--thumb-start-width":Vh((T=a.value)===null||T===void 0?void 0:T.width),"--thumb-active-left":h.value,"--thumb-active-width":Vh((M=s.value)===null||M===void 0?void 0:M.width)}});return hl(()=>{clearTimeout(d)}),()=>{const T={ref:n,style:x.value,class:[`${e.prefixCls}-thumb`]};return Pe(vu,{appear:!0,onBeforeEnter:m,onEnter:g,onAfterEnter:y},{default:()=>[!a.value||!s.value?null:Pe("div",T,null)]})}}}),mte=pte;function vte(e){return e.map(t=>typeof t=="object"&&t!==null?t:{label:t==null?void 0:t.toString(),title:t==null?void 0:t.toString(),value:t})}const gte=()=>({prefixCls:String,options:Qw(),block:$c(),disabled:$c(),size:e2(),value:ze(ze({},aR([String,Number])),{required:!0}),motionName:String,onChange:OI(),"onUpdate:value":OI()}),G6=(e,t)=>{let{slots:r,emit:n}=t;const{value:i,disabled:a,payload:s,title:o,prefixCls:h,label:d=r.label,checked:m,className:g}=e,y=x=>{a||n("change",x,i)};return Pe("label",{class:ui({[`${h}-item-disabled`]:a},g)},[Pe("input",{class:`${h}-item-input`,type:"radio",disabled:a,checked:m,onChange:y},null),Pe("div",{class:`${h}-item-label`,title:typeof o=="string"?o:""},[typeof d=="function"?d({value:i,disabled:a,payload:s,title:o}):d??i])])};G6.inheritAttrs=!1;const yte=jt({name:"ASegmented",inheritAttrs:!1,props:ST(gte(),{options:[],motionName:"thumb-motion"}),slots:Object,setup(e,t){let{emit:r,slots:n,attrs:i}=t;const{prefixCls:a,direction:s,size:o}=fl("segmented",e),[h,d]=dte(a),m=In(),g=In(!1),y=ke(()=>vte(e.options)),x=(T,M)=>{e.disabled||(r("update:value",M),r("change",M))};return()=>{const T=a.value;return h(Pe("div",vn(vn({},i),{},{class:ui(T,{[d.value]:!0,[`${T}-block`]:e.block,[`${T}-disabled`]:e.disabled,[`${T}-lg`]:o.value=="large",[`${T}-sm`]:o.value=="small",[`${T}-rtl`]:s.value==="rtl"},i.class),ref:m}),[Pe("div",{class:`${T}-group`},[Pe(mte,{containerRef:m,prefixCls:T,value:e.value,motionName:`${T}-${e.motionName}`,direction:s.value,getValueIndex:M=>y.value.findIndex(P=>P.value===M),onMotionStart:()=>{g.value=!0},onMotionEnd:()=>{g.value=!1}},null),y.value.map(M=>Pe(G6,vn(vn({key:M.value,prefixCls:T,checked:M.value===e.value,onChange:x},M),{},{className:ui(M.className,`${T}-item`,{[`${T}-item-selected`]:M.value===e.value&&!g.value}),disabled:!!e.disabled||!!M.disabled}),n))])]))}}}),_te=D0(yte);const xte={components:{AButton:tm,AConfigProvider:QT},data(){return{keySelected:null}},props:{objs:{},initPos:{type:Number,default:0}},mounted(){this.select(Object.keys(this.objs)[this.initPos])},watch:{objs(e){for(let t in this.objs){this.keySelected=t;break}}},computed:{},methods:{select:function(e){this.keySelected=e}}};function bte(e,t,r,n,i,a){const s=Rn("a-button"),o=Rn("a-config-provider");return lt(),Rt(Pr,null,[Pe(o,{theme:{token:{colorPrimary:"#49BF7C"}}},{default:Cn(()=>[(lt(!0),Rt(Pr,null,Fo(r.objs,(h,d,m)=>(lt(),En(s,{key:m,onClick:g=>a.select(d),class:Ai(d==i.keySelected?"selected":"unselected"),type:d==i.keySelected?"primary":"default",size:"large"},{default:Cn(()=>[ol(Or(d),1)]),_:2},1032,["onClick","class","type"]))),128))]),_:1}),nn(e.$slots,"default",{selected:r.objs[i.keySelected]})],64)}const wte=Ur(xte,[["render",bte],["__file","ObjectSelector.vue"]]),Ste={data(){return{data:null}},props:{path:{type:String}},watch:{path(e){if(e)return Fa.get(e).then(t=>{this.data=t.data})}}};function Tte(e,t,r,n,i,a){return nn(e.$slots,"default",{data:i.data})}const Cte=Ur(Ste,[["render",Tte],["__file","DataRequest.vue"]]);const Ete={props:["data"]},Ate={class:"cards"};function Mte(e,t,r,n,i,a){return lt(),Rt("div",Ate,[(lt(!0),Rt(Pr,null,Fo(r.data,(s,o)=>(lt(),Rt("div",{key:o,class:"card"},Or(s),1))),128))])}const Ite=Ur(Ete,[["render",Mte],["__scopeId","data-v-00202de1"],["__file","GridList.vue"]]),Pte={name:"BusTable",components:{BusTimer:BW,ObjectSelector:wte,DataRequest:Cte,GridList:Ite},mounted(){function e(t){var r={};for(let g=0;g<t.days.length;g++)r[t.days[g].date]=t.days[g].isOffDay;var n=new Date,i=new Intl.DateTimeFormat("en",{year:"numeric"}).format(n),a=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(n),s=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(n),o=`${i}-${a}-${s}`,h;if(r[o]==null){console.log("Not in GOV declaration");var d=n.getDay(),m=d==6||d==0;h=m}else console.log("In GOV declaration"),h=r[o];h?(console.log(""),document.getElementById("bustable").getElementsByTagName("button")[1].click()):(console.log(""),document.getElementById("bustable").getElementsByTagName("button")[0].click())}Fa.get("/2023.json").then(t=>{e(t.data)})}},Dte={id:"bustable"},Lte=er("br",null,null,-1);function kte(e,t,r,n,i,a){const s=Rn("bus-timer"),o=Rn("grid-list"),h=Rn("data-request"),d=Rn("object-selector");return lt(),Rt("div",Dte,[Pe(d,{objs:{" Workday":!0," Holiday":!1}},{default:Cn(m=>[Lte,Pe(d,{objs:m.selected?{"Line 1    To COE":"/bus_times/one_down.json","Line 1    To Joy Highland":"/bus_times/one_up.json","Line 2    To Research Bldg.":"/bus_times/two_down.json","Line 2    To Joy Highland":"/bus_times/two_up.json"}:{"Line 1     To COE":"/bus_times/one_down_holiday.json","Line 1    To Joy Highland":"/bus_times/one_up_holiday.json"}},{default:Cn(g=>[Pe(h,{path:g.selected},{default:Cn(({data:y})=>[y?(lt(),En(s,MN(w_({key:0},y)),null,16)):on("",!0),y?(lt(),En(o,{key:1,data:y.times},null,8,["data"])):on("",!0)]),_:2},1032,["path"])]),_:2},1032,["objs"])]),_:1})])}const Rte=Ur(Pte,[["render",kte],["__file","BusTable.vue"]]);const Ote={name:"TabView",components:{AConfigProvider:QT,ASegmented:_te},setup(){const e=xr("bus-location"),t=xr("bus-location"),r=xr([{value:"bus-location",payload:{title:"",subTitle:"Bus Realtime Location"}},{value:"timetable",payload:{title:"",subTitle:"Timetable"}}]);return{initSelect:e,currentSelect:t,tabOptions:r,switchTab:i=>{t.value=i}}}},zte=e=>(GS("data-v-4fc19259"),e=e(),qS(),e),Bte={style:{padding:"4px 8px"}},Fte={class:"tab-container"},$te={key:0},Nte=zte(()=>er("div",{class:"bus-location-hint"},"5Location refreshes automatically every 5 seconds.",-1)),Vte={key:1};function Ute(e,t,r,n,i,a){const s=Rn("a-segmented"),o=Rn("RealtimeMap"),h=Rn("BusChartVue"),d=Rn("BusTable"),m=Rn("a-config-provider");return lt(),Rt("div",null,[Pe(m,{theme:{token:{colorPrimary:"#49BF7C"}}},{default:Cn(()=>[Pe(s,{value:n.initSelect,"onUpdate:value":t[0]||(t[0]=g=>n.initSelect=g),options:n.tabOptions,onChange:n.switchTab},{label:Cn(({payload:g})=>[er("div",Bte,[er("div",null,Or(g.title),1),er("div",null,Or(g.subTitle),1)])]),_:1},8,["value","options","onChange"]),er("div",Fte,[n.currentSelect==="bus-location"?(lt(),Rt("div",$te,[Nte,Pe(o),Pe(h)])):on("",!0),n.currentSelect==="timetable"?(lt(),Rt("div",Vte,[Pe(d)])):on("",!0)])]),_:1})])}const Hte=Ur(Ote,[["render",Ute],["__scopeId","data-v-4fc19259"],["__file","TabView.vue"]]);var q6={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(z4,function(){var r,n,i;function a(o,h){if(!r)r=h;else if(!n)n=h;else{var d="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",m={};r(m),i=h(m),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([d],{type:"text/javascript"})))}}a(["exports"],function(o){var h=d;function d(c,l,f,v){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(v-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=l,this.p2x=f,this.p2y=v}function m(c,l,f,v){const w=new h(c,l,f,v);return function(C){return w.solve(C)}}d.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,l){if(l===void 0&&(l=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,v=0;v<8;v++){var w=this.sampleCurveX(f)-c;if(Math.abs(w)<l)return f;var C=this.sampleCurveDerivativeX(f);if(Math.abs(C)<1e-6)break;f-=w/C}var A=0,k=1;for(f=c,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-c)<l));v++)c>w?A=f:k=f,f=.5*(k-A)+A;return f},solve:function(c,l){return this.sampleCurveY(this.solveCurveX(c,l))}};const g=m(.25,.1,.25,1);function y(c,l,f){return Math.min(f,Math.max(l,c))}function x(c,l,f){const v=f-l,w=((c-l)%v+v)%v+l;return w===l?f:w}function T(c,...l){for(const f of l)for(const v in f)c[v]=f[v];return c}let M=1;function P(c,l){c.forEach(f=>{l[f]&&(l[f]=l[f].bind(l))})}function I(c,l,f){const v={};for(const w in c)v[w]=l.call(f||this,c[w],w,c);return v}function D(c,l,f){const v={};for(const w in c)l.call(f||this,c[w],w,c)&&(v[w]=c[w]);return v}function R(c){return Array.isArray(c)?c.map(R):typeof c=="object"&&c?I(c,R):c}const B={};function H(c){B[c]||(typeof console<"u"&&console.warn(c),B[c]=!0)}function V(c,l,f){return(f.y-c.y)*(l.x-c.x)>(l.y-c.y)*(f.x-c.x)}function q(c){let l=0;for(let f,v,w=0,C=c.length,A=C-1;w<C;A=w++)f=c[w],v=c[A],l+=(v.x-f.x)*(f.y+v.y);return l}function j(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function te(c){const l={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,v,w,C)=>{const A=w||C;return l[v]=!A||A.toLowerCase(),""}),l["max-age"]){const f=parseInt(l["max-age"],10);isNaN(f)?delete l["max-age"]:l["max-age"]=f}return l}let ne,ce,le=null;function de(c){if(le==null){const l=c.navigator?c.navigator.userAgent:null;le=!!c.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return le}function ae(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Se={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const l=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(l)}},getImageData(c,l=0){const f=window.document.createElement("canvas"),v=f.getContext("2d");if(!v)throw new Error("failed to create canvas 2d context");return f.width=c.width,f.height=c.height,v.drawImage(c,0,0,c.width,c.height),v.getImageData(-l,-l,c.width+2*l,c.height+2*l)},resolveURL:c=>(ne||(ne=document.createElement("a")),ne.href=c,ne.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ce==null&&(ce=matchMedia("(prefers-reduced-motion: reduce)")),ce.matches)}};var ve=Ye;function Ye(c,l){this.x=c,this.y=l}Ye.prototype={clone:function(){return new Ye(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,l){return this.clone()._rotateAround(c,l)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var l=c.x-this.x,f=c.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,l){return Math.atan2(this.x*l-this.y*c,this.x*c+this.y*l)},_matMult:function(c){var l=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=l,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var l=Math.cos(c),f=Math.sin(c),v=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=v,this},_rotateAround:function(c,l){var f=Math.cos(c),v=Math.sin(c),w=l.y+v*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-v*(this.y-l.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ye.convert=function(c){return c instanceof Ye?c:Array.isArray(c)?new Ye(c[0],c[1]):c};const Qe={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Ct="mapbox-tiles";let St,Kt,Ft=500,br=50;function Ir(){typeof caches>"u"||St||(St=caches.open(Ct))}let vr=1/0;const fr={supported:!1,testSupport:function(c){!et&&st&&(mt?ft(c):qe=c)}};let qe,st,et=!1,mt=!1;function ft(c){const l=c.createTexture();c.bindTexture(c.TEXTURE_2D,l);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,st),c.isContextLost())return;fr.supported=!0}catch{}c.deleteTexture(l),et=!0}typeof document<"u"&&(st=document.createElement("img"),st.onload=function(){qe&&ft(qe),qe=null,mt=!0},st.onerror=function(){et=!0,qe=null},st.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ue={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ue);class ge extends Error{constructor(l,f,v,w){super(`AJAXError: ${f} (${l}): ${v}`),this.status=l,this.statusText=f,this.url=v,this.body=w}}const Ie=j()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function je(c,l){const f=new AbortController,v=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:Ie(),signal:f.signal});let w=!1,C=!1;return c.type==="json"&&v.headers.set("Accept","application/json"),((A,k,O)=>{if(C)return;const $=Date.now();fetch(v).then(G=>G.ok?((X,K,Q)=>{(c.type==="arrayBuffer"?X.arrayBuffer():c.type==="json"?X.json():X.text()).then(ee=>{C||(K&&Q&&function(ye,me,De){if(Ir(),!St)return;const $e={status:me.status,statusText:me.statusText,headers:new Headers};me.headers.forEach((Oe,Je)=>$e.headers.set(Je,Oe));const Me=te(me.headers.get("Cache-Control")||"");Me["no-store"]||(Me["max-age"]&&$e.headers.set("Expires",new Date(De+1e3*Me["max-age"]).toUTCString()),new Date($e.headers.get("Expires")).getTime()-De<42e4||function(Oe,Je){if(Kt===void 0)try{new Response(new ReadableStream),Kt=!0}catch{Kt=!1}Kt?Je(Oe.body):Oe.blob().then(Je)}(me,Oe=>{const Je=new Response(Oe,$e);Ir(),St&&St.then(Ze=>Ze.put(function(At){const Dt=At.indexOf("?");return Dt<0?At:At.slice(0,Dt)}(ye.url),Je)).catch(Ze=>H(Ze.message))}))}(v,K,Q),w=!0,l(null,ee,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(ee=>{C||l(new Error(ee.message))})})(G,null,$):G.blob().then(X=>l(new ge(G.status,G.statusText,c.url,X)))).catch(G=>{G.code!==20&&l(new Error(G.message))})})(),{cancel:()=>{C=!0,w||f.abort()}}}const Ke=function(c,l){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(j()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,l);if(!j()){const v=c.url.substring(0,c.url.indexOf("://"));return(Qe.REGISTERED_PROTOCOLS[v]||je)(c,l)}}if(!(/^file:/.test(f=c.url)||/^file:/.test(Ie())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return je(c,l);if(j()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,l,void 0,!0)}var f;return function(v,w){const C=new XMLHttpRequest;C.open(v.method||"GET",v.url,!0),v.type==="arrayBuffer"&&(C.responseType="arraybuffer");for(const A in v.headers)C.setRequestHeader(A,v.headers[A]);return v.type==="json"&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials=v.credentials==="include",C.onerror=()=>{w(new Error(C.statusText))},C.onload=()=>{if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let A=C.response;if(v.type==="json")try{A=JSON.parse(C.response)}catch(k){return w(k)}w(null,A,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else{const A=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});w(new ge(C.status,C.statusText,v.url,A))}},C.send(v.body),{cancel:()=>C.abort()}}(c,l)},rt=function(c,l){return Ke(T(c,{type:"arrayBuffer"}),l)};function vt(c){const l=window.document.createElement("a");return l.href=c,l.protocol===window.document.location.protocol&&l.host===window.document.location.host}const Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ut,it;ut=[],it=0;const Nt=function(c,l){if(fr.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),it>=Qe.MAX_PARALLEL_IMAGE_REQUESTS){const C={requestParameters:c,callback:l,cancelled:!1,cancel(){this.cancelled=!0}};return ut.push(C),C}it++;let f=!1;const v=()=>{if(!f)for(f=!0,it--;ut.length&&it<Qe.MAX_PARALLEL_IMAGE_REQUESTS;){const C=ut.shift(),{requestParameters:A,callback:k,cancelled:O}=C;O||(C.cancel=Nt(A,k).cancel)}},w=rt(c,(C,A,k,O)=>{v(),C?l(C):A&&function($,G){typeof createImageBitmap=="function"?function(X,K){const Q=new Blob([new Uint8Array(X)],{type:"image/png"});createImageBitmap(Q).then(ee=>{K(null,ee)}).catch(ee=>{K(new Error(`Could not load image because of ${ee.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}($,G):function(X,K){const Q=new Image;Q.onload=()=>{K(null,Q),URL.revokeObjectURL(Q.src),Q.onload=null,window.requestAnimationFrame(()=>{Q.src=Xe})},Q.onerror=()=>K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ee=new Blob([new Uint8Array(X)],{type:"image/png"});Q.src=X.byteLength?URL.createObjectURL(ee):Xe}($,G)}(A,($,G)=>{$!=null?l($):G!=null&&l(null,G,{cacheControl:k,expires:O})})});return{cancel:()=>{w.cancel(),v()}}};function zt(c,l,f){f[c]&&f[c].indexOf(l)!==-1||(f[c]=f[c]||[],f[c].push(l))}function $t(c,l,f){if(f&&f[c]){const v=f[c].indexOf(l);v!==-1&&f[c].splice(v,1)}}class Wt{constructor(l,f={}){T(this,f),this.type=l}}class ar extends Wt{constructor(l,f={}){super("error",T({error:l},f))}}class wr{on(l,f){return this._listeners=this._listeners||{},zt(l,f,this._listeners),this}off(l,f){return $t(l,f,this._listeners),$t(l,f,this._oneTimeListeners),this}once(l,f){return this._oneTimeListeners=this._oneTimeListeners||{},zt(l,f,this._oneTimeListeners),this}fire(l,f){typeof l=="string"&&(l=new Wt(l,f||{}));const v=l.type;if(this.listens(v)){l.target=this;const w=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const k of w)k.call(this,l);const C=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const k of C)$t(v,k,this._oneTimeListeners),k.call(this,l);const A=this._eventedParent;A&&(T(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(l))}else l instanceof ar&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,f){return this._eventedParent=l,this._eventedParentData=f,this}}var Be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class at{constructor(l,f,v,w){this.message=(l?`${l}: `:"")+v,w&&(this.identifier=w),f!=null&&f.__line__&&(this.line=f.__line__)}}function Bn(c){const l=c.value;return l?[new at(c.key,l,"constants have been deprecated as of v8")]:[]}function jn(c,...l){for(const f of l)for(const v in f)c[v]=f[v];return c}function pr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Gn(c){if(Array.isArray(c))return c.map(Gn);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const l={};for(const f in c)l[f]=Gn(c[f]);return l}return pr(c)}class ci extends Error{constructor(l,f){super(f),this.message=f,this.key=l}}class Yr{constructor(l,f=[]){this.parent=l,this.bindings={};for(const[v,w]of f)this.bindings[v]=w}concat(l){return new Yr(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const Fn={kind:"null"},ht={kind:"number"},or={kind:"string"},nr={kind:"boolean"},ri={kind:"color"},Go={kind:"object"},tr={kind:"value"},vo={kind:"collator"},qn={kind:"formatted"},yl={kind:"padding"},Pn={kind:"resolvedImage"};function yi(c,l){return{kind:"array",itemType:c,N:l}}function Hr(c){if(c.kind==="array"){const l=Hr(c.itemType);return typeof c.N=="number"?`array<${l}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${l}>`}return c.kind}const _l=[Fn,ht,or,nr,ri,qn,Go,yi(tr),yl,Pn];function Ha(c,l){if(l.kind==="error")return null;if(c.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Ha(c.itemType,l.itemType))&&(typeof c.N!="number"||c.N===l.N))return null}else{if(c.kind===l.kind)return null;if(c.kind==="value"){for(const f of _l)if(!Ha(f,l))return null}}return`Expected ${Hr(c)} but found ${Hr(l)} instead.`}function Ss(c,l){return l.some(f=>f.kind===c.kind)}function Ts(c,l){return l.some(f=>f==="null"?c===null:f==="array"?Array.isArray(c):f==="object"?c&&!Array.isArray(c)&&typeof c=="object":f===typeof c)}var xl,Cs={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function oe(c){return(c=Math.round(c))<0?0:c>255?255:c}function U(c){return oe(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function Z(c){return(l=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:l>1?1:l;var l}function re(c,l,f){return f<0?f+=1:f>1&&(f-=1),6*f<1?c+(l-c)*f*6:2*f<1?l:3*f<2?c+(l-c)*(2/3-f)*6:c}try{xl={}.parseCSSColor=function(c){var l,f=c.replace(/ /g,"").toLowerCase();if(f in Cs)return Cs[f].slice();if(f[0]==="#")return f.length===4?(l=parseInt(f.substr(1),16))>=0&&l<=4095?[(3840&l)>>4|(3840&l)>>8,240&l|(240&l)>>4,15&l|(15&l)<<4,1]:null:f.length===7&&(l=parseInt(f.substr(1),16))>=0&&l<=16777215?[(16711680&l)>>16,(65280&l)>>8,255&l,1]:null;var v=f.indexOf("("),w=f.indexOf(")");if(v!==-1&&w+1===f.length){var C=f.substr(0,v),A=f.substr(v+1,w-(v+1)).split(","),k=1;switch(C){case"rgba":if(A.length!==4)return null;k=Z(A.pop());case"rgb":return A.length!==3?null:[U(A[0]),U(A[1]),U(A[2]),k];case"hsla":if(A.length!==4)return null;k=Z(A.pop());case"hsl":if(A.length!==3)return null;var O=(parseFloat(A[0])%360+360)%360/360,$=Z(A[1]),G=Z(A[2]),X=G<=.5?G*($+1):G+$-G*$,K=2*G-X;return[oe(255*re(K,X,O+1/3)),oe(255*re(K,X,O)),oe(255*re(K,X,O-1/3)),k];default:return null}}return null}}catch{}class ie{constructor(l,f,v,w=1){this.r=l,this.g=f,this.b=v,this.a=w}static parse(l){if(!l)return;if(l instanceof ie)return l;if(typeof l!="string")return;const f=xl(l);return f?new ie(f[0]/255*f[3],f[1]/255*f[3],f[2]/255*f[3],f[3]):void 0}toString(){const[l,f,v,w]=this.toArray();return`rgba(${Math.round(l)},${Math.round(f)},${Math.round(v)},${w})`}toArray(){const{r:l,g:f,b:v,a:w}=this;return w===0?[0,0,0,0]:[255*l/w,255*f/w,255*v/w,w]}}ie.black=new ie(0,0,0,1),ie.white=new ie(1,1,1,1),ie.transparent=new ie(0,0,0,0),ie.red=new ie(1,0,0,1);class _e{constructor(l,f,v){this.sensitivity=l?f?"variant":"case":f?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,f){return this.collator.compare(l,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Te{constructor(l,f,v,w,C){this.text=l,this.image=f,this.scale=v,this.fontStack=w,this.textColor=C}}class be{constructor(l){this.sections=l}static fromString(l){return new be([new Te(l,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof be?l:be.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class xe{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof xe)return l;if(typeof l=="number")return new xe([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const f of l)if(typeof f!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new xe(l)}}toString(){return JSON.stringify(this.values)}}class Ce{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Ce({name:l,available:!1}):null}}function Ue(c,l,f,v){return typeof c=="number"&&c>=0&&c<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof f=="number"&&f>=0&&f<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[c,l,f,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[c,l,f,v]:[c,l,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tt(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof ie||c instanceof _e||c instanceof be||c instanceof xe||c instanceof Ce)return!0;if(Array.isArray(c)){for(const l of c)if(!tt(l))return!1;return!0}if(typeof c=="object"){for(const l in c)if(!tt(c[l]))return!1;return!0}return!1}function Ve(c){if(c===null)return Fn;if(typeof c=="string")return or;if(typeof c=="boolean")return nr;if(typeof c=="number")return ht;if(c instanceof ie)return ri;if(c instanceof _e)return vo;if(c instanceof be)return qn;if(c instanceof xe)return yl;if(c instanceof Ce)return Pn;if(Array.isArray(c)){const l=c.length;let f;for(const v of c){const w=Ve(v);if(f){if(f===w)continue;f=tr;break}f=w}return yi(f||tr,l)}return Go}function Pt(c){const l=typeof c;return c===null?"":l==="string"||l==="number"||l==="boolean"?String(c):c instanceof ie||c instanceof be||c instanceof xe||c instanceof Ce?c.toString():JSON.stringify(c)}class kt{constructor(l,f){this.type=l,this.value=f}static parse(l,f){if(l.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!tt(l[1]))return f.error("invalid value");const v=l[1];let w=Ve(v);const C=f.expectedType;return w.kind!=="array"||w.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(w=C),new kt(w,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class bt{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}const Gt={string:or,number:ht,boolean:nr,object:Go};class Zt{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let v,w=1;const C=l[0];if(C==="array"){let k,O;if(l.length>2){const $=l[1];if(typeof $!="string"||!($ in Gt)||$==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);k=Gt[$],w++}else k=tr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return f.error('The length argument to "array" must be a positive integer literal',2);O=l[2],w++}v=yi(k,O)}else{if(!Gt[C])throw new Error(`Types doesn't contain name = ${C}`);v=Gt[C]}const A=[];for(;w<l.length;w++){const k=f.parse(l[w],w,tr);if(!k)return null;A.push(k)}return new Zt(v,A)}evaluate(l){for(let f=0;f<this.args.length;f++){const v=this.args[f].evaluate(l);if(!Ha(this.type,Ve(v)))return v;if(f===this.args.length-1)throw new bt(`Expected value to be of type ${Hr(this.type)}, but found ${Hr(Ve(v))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Sr={"to-boolean":nr,"to-color":ri,"to-number":ht,"to-string":or};class Qt{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");const v=l[0];if(!Sr[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&l.length!==2)return f.error("Expected one argument.");const w=Sr[v],C=[];for(let A=1;A<l.length;A++){const k=f.parse(l[A],A,tr);if(!k)return null;C.push(k)}return new Qt(w,C)}evaluate(l){if(this.type.kind==="boolean")return!!this.args[0].evaluate(l);if(this.type.kind==="color"){let f,v;for(const w of this.args){if(f=w.evaluate(l),v=null,f instanceof ie)return f;if(typeof f=="string"){const C=l.parseColor(f);if(C)return C}else if(Array.isArray(f)&&(v=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Ue(f[0],f[1],f[2],f[3]),!v))return new ie(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new bt(v||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}if(this.type.kind==="padding"){let f;for(const v of this.args){f=v.evaluate(l);const w=xe.parse(f);if(w)return w}throw new bt(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}if(this.type.kind==="number"){let f=null;for(const v of this.args){if(f=v.evaluate(l),f===null)return 0;const w=Number(f);if(!isNaN(w))return w}throw new bt(`Could not convert ${JSON.stringify(f)} to number.`)}return this.type.kind==="formatted"?be.fromString(Pt(this.args[0].evaluate(l))):this.type.kind==="resolvedImage"?Ce.fromString(Pt(this.args[0].evaluate(l))):Pt(this.args[0].evaluate(l))}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const sr=["Unknown","Point","LineString","Polygon"];class Tr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?sr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let f=this._parseColorCache[l];return f||(f=this._parseColorCache[l]=ie.parse(l)),f}}class qr{constructor(l,f,v,w){this.name=l,this.type=f,this._evaluate=v,this.args=w}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,f){const v=l[0],w=qr.definitions[v];if(!w)return f.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(w)?w[0]:w.type,A=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,k=A.filter(([$])=>!Array.isArray($)||$.length===l.length-1);let O=null;for(const[$,G]of k){O=new Sl(f.registry,f.path,null,f.scope);const X=[];let K=!1;for(let Q=1;Q<l.length;Q++){const ee=l[Q],ye=Array.isArray($)?$[Q-1]:$.type,me=O.parse(ee,1+X.length,ye);if(!me){K=!0;break}X.push(me)}if(!K)if(Array.isArray($)&&$.length!==X.length)O.error(`Expected ${$.length} arguments, but found ${X.length} instead.`);else{for(let Q=0;Q<X.length;Q++){const ee=Array.isArray($)?$[Q]:$.type,ye=X[Q];O.concat(Q+1).checkSubtype(ee,ye.type)}if(O.errors.length===0)return new qr(v,C,G,X)}}if(k.length===1)f.errors.push(...O.errors);else{const $=(k.length?k:A).map(([X])=>{return K=X,Array.isArray(K)?`(${K.map(Hr).join(", ")})`:`(${Hr(K.type)}...)`;var K}).join(" | "),G=[];for(let X=1;X<l.length;X++){const K=f.parse(l[X],1+G.length);if(!K)return null;G.push(Hr(K.type))}f.error(`Expected arguments of type ${$}, but found (${G.join(", ")}) instead.`)}return null}static register(l,f){qr.definitions=f;for(const v in f)l[v]=qr}}class Wn{constructor(l,f,v){this.type=vo,this.locale=v,this.caseSensitive=l,this.diacriticSensitive=f}static parse(l,f){if(l.length!==2)return f.error("Expected one argument.");const v=l[1];if(typeof v!="object"||Array.isArray(v))return f.error("Collator options argument must be an object.");const w=f.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,nr);if(!w)return null;const C=f.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,nr);if(!C)return null;let A=null;return v.locale&&(A=f.parse(v.locale,1,or),!A)?null:new Wn(w,C,A)}evaluate(l){return new _e(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}const ln=8192;function hi(c,l){c[0]=Math.min(c[0],l[0]),c[1]=Math.min(c[1],l[1]),c[2]=Math.max(c[2],l[0]),c[3]=Math.max(c[3],l[1])}function bl(c,l){return!(c[0]<=l[0]||c[2]>=l[2]||c[1]<=l[1]||c[3]>=l[3])}function xu(c,l){const f=(180+c[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,w=Math.pow(2,l.z);return[Math.round(f*w*ln),Math.round(v*w*ln)]}function Wr(c,l,f){const v=c[0]-l[0],w=c[1]-l[1],C=c[0]-f[0],A=c[1]-f[1];return v*A-C*w==0&&v*C<=0&&w*A<=0}function ld(c,l){let f=!1;for(let A=0,k=l.length;A<k;A++){const O=l[A];for(let $=0,G=O.length;$<G-1;$++){if(Wr(c,O[$],O[$+1]))return!1;(w=O[$])[1]>(v=c)[1]!=(C=O[$+1])[1]>v[1]&&v[0]<(C[0]-w[0])*(v[1]-w[1])/(C[1]-w[1])+w[0]&&(f=!f)}}var v,w,C;return f}function ud(c,l){for(let f=0;f<l.length;f++)if(ld(c,l[f]))return!0;return!1}function Ev(c,l,f,v){const w=v[0]-f[0],C=v[1]-f[1],A=(c[0]-f[0])*C-w*(c[1]-f[1]),k=(l[0]-f[0])*C-w*(l[1]-f[1]);return A>0&&k<0||A<0&&k>0}function Av(c,l,f){for(const $ of f)for(let G=0;G<$.length-1;++G)if((k=[(A=$[G+1])[0]-(C=$[G])[0],A[1]-C[1]])[0]*(O=[(w=l)[0]-(v=c)[0],w[1]-v[1]])[1]-k[1]*O[0]!=0&&Ev(v,w,C,A)&&Ev(C,A,v,w))return!0;var v,w,C,A,k,O;return!1}function cd(c,l){for(let f=0;f<c.length;++f)if(!ld(c[f],l))return!1;for(let f=0;f<c.length-1;++f)if(Av(c[f],c[f+1],l))return!1;return!0}function m1(c,l){for(let f=0;f<l.length;f++)if(cd(c,l[f]))return!0;return!1}function sh(c,l,f){const v=[];for(let w=0;w<c.length;w++){const C=[];for(let A=0;A<c[w].length;A++){const k=xu(c[w][A],f);hi(l,k),C.push(k)}v.push(C)}return v}function hd(c,l,f){const v=[];for(let w=0;w<c.length;w++){const C=sh(c[w],l,f);v.push(C)}return v}function Mv(c,l,f,v){if(c[0]<f[0]||c[0]>f[2]){const w=.5*v;let C=c[0]-f[0]>w?-v:f[0]-c[0]>w?v:0;C===0&&(C=c[0]-f[2]>w?-v:f[2]-c[0]>w?v:0),c[0]+=C}hi(l,c)}function Iv(c,l,f,v){const w=Math.pow(2,v.z)*ln,C=[v.x*ln,v.y*ln],A=[];for(const k of c)for(const O of k){const $=[O.x+C[0],O.y+C[1]];Mv($,l,f,w),A.push($)}return A}function Pv(c,l,f,v){const w=Math.pow(2,v.z)*ln,C=[v.x*ln,v.y*ln],A=[];for(const O of c){const $=[];for(const G of O){const X=[G.x+C[0],G.y+C[1]];hi(l,X),$.push(X)}A.push($)}if(l[2]-l[0]<=w/2){(k=l)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const O of A)for(const $ of O)Mv($,l,f,w)}var k;return A}class Es{constructor(l,f){this.type=nr,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(tt(l[1])){const v=l[1];if(v.type==="FeatureCollection")for(let w=0;w<v.features.length;++w){const C=v.features[w].geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new Es(v,v.features[w].geometry)}else if(v.type==="Feature"){const w=v.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new Es(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new Es(v,v)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,v){const w=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=f.canonicalID();if(v.type==="Polygon"){const k=sh(v.coordinates,C,A),O=Iv(f.geometry(),w,C,A);if(!bl(w,C))return!1;for(const $ of O)if(!ld($,k))return!1}if(v.type==="MultiPolygon"){const k=hd(v.coordinates,C,A),O=Iv(f.geometry(),w,C,A);if(!bl(w,C))return!1;for(const $ of O)if(!ud($,k))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,v){const w=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=f.canonicalID();if(v.type==="Polygon"){const k=sh(v.coordinates,C,A),O=Pv(f.geometry(),w,C,A);if(!bl(w,C))return!1;for(const $ of O)if(!cd($,k))return!1}if(v.type==="MultiPolygon"){const k=hd(v.coordinates,C,A),O=Pv(f.geometry(),w,C,A);if(!bl(w,C))return!1;for(const $ of O)if(!m1($,k))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function bu(c){if(c instanceof qr&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Es)return!1;let l=!0;return c.eachChild(f=>{l&&!bu(f)&&(l=!1)}),l}function wl(c){if(c instanceof qr&&c.name==="feature-state")return!1;let l=!0;return c.eachChild(f=>{l&&!wl(f)&&(l=!1)}),l}function lh(c,l){if(c instanceof qr&&l.indexOf(c.name)>=0)return!1;let f=!0;return c.eachChild(v=>{f&&!lh(v,l)&&(f=!1)}),f}class uh{constructor(l,f){this.type=f.type,this.name=l,this.boundExpression=f}static parse(l,f){if(l.length!==2||typeof l[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const v=l[1];return f.scope.has(v)?new uh(v,f.scope.get(v)):f.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class Sl{constructor(l,f=[],v,w=new Yr,C=[]){this.registry=l,this.path=f,this.key=f.map(A=>`[${A}]`).join(""),this.scope=w,this.errors=C,this.expectedType=v}parse(l,f,v,w,C={}){return f?this.concat(f,v,w)._parse(l,C):this._parse(l,C)}_parse(l,f){function v(w,C,A){return A==="assert"?new Zt(C,[w]):A==="coerce"?new Qt(C,[w]):w}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=l[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[w];if(C){let A=C.parse(l,this);if(!A)return null;if(this.expectedType){const k=this.expectedType,O=A.type;if(k.kind!=="string"&&k.kind!=="number"&&k.kind!=="boolean"&&k.kind!=="object"&&k.kind!=="array"||O.kind!=="value")if(k.kind!=="color"&&k.kind!=="formatted"&&k.kind!=="resolvedImage"||O.kind!=="value"&&O.kind!=="string")if(k.kind!=="padding"||O.kind!=="value"&&O.kind!=="number"&&O.kind!=="array"){if(this.checkSubtype(k,O))return null}else A=v(A,k,f.typeAnnotation||"coerce");else A=v(A,k,f.typeAnnotation||"coerce");else A=v(A,k,f.typeAnnotation||"assert")}if(!(A instanceof kt)&&A.type.kind!=="resolvedImage"&&fd(A)){const k=new Tr;try{A=new kt(A.type,A.evaluate(k))}catch(O){return this.error(O.message),null}}return A}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,f,v){const w=typeof l=="number"?this.path.concat(l):this.path,C=v?this.scope.concat(v):this.scope;return new Sl(this.registry,w,f||null,C,this.errors)}error(l,...f){const v=`${this.key}${f.map(w=>`[${w}]`).join("")}`;this.errors.push(new ci(v,l))}checkSubtype(l,f){const v=Ha(l,f);return v&&this.error(v),v}}function fd(c){if(c instanceof uh)return fd(c.boundExpression);if(c instanceof qr&&c.name==="error"||c instanceof Wn||c instanceof Es)return!1;const l=c instanceof Qt||c instanceof Zt;let f=!0;return c.eachChild(v=>{f=l?f&&fd(v):f&&v instanceof kt}),!!f&&bu(c)&&lh(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ch(c,l){const f=c.length-1;let v,w,C=0,A=f,k=0;for(;C<=A;)if(k=Math.floor((C+A)/2),v=c[k],w=c[k+1],v<=l){if(k===f||l<w)return k;C=k+1}else{if(!(v>l))throw new bt("Input is not a number.");A=k-1}return 0}class wu{constructor(l,f,v){this.type=l,this.input=f,this.labels=[],this.outputs=[];for(const[w,C]of v)this.labels.push(w),this.outputs.push(C)}static parse(l,f){if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");const v=f.parse(l[1],1,ht);if(!v)return null;const w=[];let C=null;f.expectedType&&f.expectedType.kind!=="value"&&(C=f.expectedType);for(let A=1;A<l.length;A+=2){const k=A===1?-1/0:l[A],O=l[A+1],$=A,G=A+1;if(typeof k!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(w.length&&w[w.length-1][0]>=k)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const X=f.parse(O,G,C);if(!X)return null;C=C||X.type,w.push([k,X])}return new wu(C,v,w)}evaluate(l){const f=this.labels,v=this.outputs;if(f.length===1)return v[0].evaluate(l);const w=this.input.evaluate(l);if(w<=f[0])return v[0].evaluate(l);const C=f.length;return w>=f[C-1]?v[C-1].evaluate(l):v[ch(f,w)].evaluate(l)}eachChild(l){l(this.input);for(const f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function un(c,l,f){return c*(1-f)+l*f}var Su=Object.freeze({__proto__:null,number:un,color:function(c,l,f){return new ie(un(c.r,l.r,f),un(c.g,l.g,f),un(c.b,l.b,f),un(c.a,l.a,f))},array:function(c,l,f){return c.map((v,w)=>un(v,l[w],f))},padding:function(c,l,f){const v=c.values,w=l.values;return new xe([un(v[0],w[0],f),un(v[1],w[1],f),un(v[2],w[2],f),un(v[3],w[3],f)])}});const Dv=.95047,Lv=1.08883,dd=4/29,hh=6/29,kv=3*hh*hh,v1=Math.PI/180,g1=180/Math.PI;function pd(c){return c>.008856451679035631?Math.pow(c,1/3):c/kv+dd}function md(c){return c>hh?c*c*c:kv*(c-dd)}function vd(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function gd(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Lr(c){const l=gd(c.r),f=gd(c.g),v=gd(c.b),w=pd((.4124564*l+.3575761*f+.1804375*v)/Dv),C=pd((.2126729*l+.7151522*f+.072175*v)/1);return{l:116*C-16,a:500*(w-C),b:200*(C-pd((.0193339*l+.119192*f+.9503041*v)/Lv)),alpha:c.a}}function Rv(c){let l=(c.l+16)/116,f=isNaN(c.a)?l:l+c.a/500,v=isNaN(c.b)?l:l-c.b/200;return l=1*md(l),f=Dv*md(f),v=Lv*md(v),new ie(vd(3.2404542*f-1.5371385*l-.4985314*v),vd(-.969266*f+1.8760108*l+.041556*v),vd(.0556434*f-.2040259*l+1.0572252*v),c.alpha)}function y1(c,l,f){const v=l-c;return c+f*(v>180||v<-180?v-360*Math.round(v/360):v)}const Tu={forward:Lr,reverse:Rv,interpolate:function(c,l,f){return{l:un(c.l,l.l,f),a:un(c.a,l.a,f),b:un(c.b,l.b,f),alpha:un(c.alpha,l.alpha,f)}}},Cu={forward:function(c){const{l,a:f,b:v}=Lr(c),w=Math.atan2(v,f)*g1;return{h:w<0?w+360:w,c:Math.sqrt(f*f+v*v),l,alpha:c.a}},reverse:function(c){const l=c.h*v1,f=c.c;return Rv({l:c.l,a:Math.cos(l)*f,b:Math.sin(l)*f,alpha:c.alpha})},interpolate:function(c,l,f){return{h:y1(c.h,l.h,f),c:un(c.c,l.c,f),l:un(c.l,l.l,f),alpha:un(c.alpha,l.alpha,f)}}};var Ov=Object.freeze({__proto__:null,lab:Tu,hcl:Cu});class Wi{constructor(l,f,v,w,C){this.type=l,this.operator=f,this.interpolation=v,this.input=w,this.labels=[],this.outputs=[];for(const[A,k]of C)this.labels.push(A),this.outputs.push(k)}static interpolationFactor(l,f,v,w){let C=0;if(l.name==="exponential")C=yd(f,l.base,v,w);else if(l.name==="linear")C=yd(f,1,v,w);else if(l.name==="cubic-bezier"){const A=l.controlPoints;C=new h(A[0],A[1],A[2],A[3]).solve(yd(f,1,v,w))}return C}static parse(l,f){let[v,w,C,...A]=l;if(!Array.isArray(w)||w.length===0)return f.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const $=w[1];if(typeof $!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:$}}else{if(w[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const $=w.slice(1);if($.length!==4||$.some(G=>typeof G!="number"||G<0||G>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:$}}}if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(C=f.parse(C,2,ht),!C)return null;const k=[];let O=null;v==="interpolate-hcl"||v==="interpolate-lab"?O=ri:f.expectedType&&f.expectedType.kind!=="value"&&(O=f.expectedType);for(let $=0;$<A.length;$+=2){const G=A[$],X=A[$+1],K=$+3,Q=$+4;if(typeof G!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(k.length&&k[k.length-1][0]>=G)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const ee=f.parse(X,Q,O);if(!ee)return null;O=O||ee.type,k.push([G,ee])}return O.kind==="number"||O.kind==="color"||O.kind==="padding"||O.kind==="array"&&O.itemType.kind==="number"&&typeof O.N=="number"?new Wi(O,v,w,C,k):f.error(`Type ${Hr(O)} is not interpolatable.`)}evaluate(l){const f=this.labels,v=this.outputs;if(f.length===1)return v[0].evaluate(l);const w=this.input.evaluate(l);if(w<=f[0])return v[0].evaluate(l);const C=f.length;if(w>=f[C-1])return v[C-1].evaluate(l);const A=ch(f,w),k=Wi.interpolationFactor(this.interpolation,w,f[A],f[A+1]),O=v[A].evaluate(l),$=v[A+1].evaluate(l);return this.operator==="interpolate"?Su[this.type.kind.toLowerCase()](O,$,k):this.operator==="interpolate-hcl"?Cu.reverse(Cu.interpolate(Cu.forward(O),Cu.forward($),k)):Tu.reverse(Tu.interpolate(Tu.forward(O),Tu.forward($),k))}eachChild(l){l(this.input);for(const f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function yd(c,l,f,v){const w=v-f,C=c-f;return w===0?0:l===1?C/w:(Math.pow(l,C)-1)/(Math.pow(l,w)-1)}class fh{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expectected at least one argument.");let v=null;const w=f.expectedType;w&&w.kind!=="value"&&(v=w);const C=[];for(const k of l.slice(1)){const O=f.parse(k,1+C.length,v,void 0,{typeAnnotation:"omit"});if(!O)return null;v=v||O.type,C.push(O)}if(!v)throw new Error("No output type");const A=w&&C.some(k=>Ha(w,k.type));return new fh(A?tr:v,C)}evaluate(l){let f,v=null,w=0;for(const C of this.args)if(w++,v=C.evaluate(l),v&&v instanceof Ce&&!v.available&&(f||(f=v.name),v=null,w===this.args.length&&(v=f)),v!==null)break;return v}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}class dh{constructor(l,f){this.type=f.type,this.bindings=[].concat(l),this.result=f}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const f of this.bindings)l(f[1]);l(this.result)}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const v=[];for(let C=1;C<l.length-1;C+=2){const A=l[C];if(typeof A!="string")return f.error(`Expected string, but found ${typeof A} instead.`,C);if(/[^a-zA-Z0-9_]/.test(A))return f.error("Variable names must contain only alphanumeric characters or '_'.",C);const k=f.parse(l[C+1],C+1);if(!k)return null;v.push([A,k])}const w=f.parse(l[l.length-1],l.length-1,f.expectedType,v);return w?new dh(v,w):null}outputDefined(){return this.result.outputDefined()}}class _d{constructor(l,f,v){this.type=l,this.index=f,this.input=v}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const v=f.parse(l[1],1,ht),w=f.parse(l[2],2,yi(f.expectedType||tr));return v&&w?new _d(w.type.itemType,v,w):null}evaluate(l){const f=this.index.evaluate(l),v=this.input.evaluate(l);if(f<0)throw new bt(`Array index out of bounds: ${f} < 0.`);if(f>=v.length)throw new bt(`Array index out of bounds: ${f} > ${v.length-1}.`);if(f!==Math.floor(f))throw new bt(`Array index must be an integer, but found ${f} instead.`);return v[f]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class xd{constructor(l,f){this.type=nr,this.needle=l,this.haystack=f}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const v=f.parse(l[1],1,tr),w=f.parse(l[2],2,tr);return v&&w?Ss(v.type,[nr,or,ht,Fn,tr])?new xd(v,w):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(v.type)} instead`):null}evaluate(l){const f=this.needle.evaluate(l),v=this.haystack.evaluate(l);if(!v)return!1;if(!Ts(f,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(Ve(f))} instead.`);if(!Ts(v,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${Hr(Ve(v))} instead.`);return v.indexOf(f)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class ph{constructor(l,f,v){this.type=ht,this.needle=l,this.haystack=f,this.fromIndex=v}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const v=f.parse(l[1],1,tr),w=f.parse(l[2],2,tr);if(!v||!w)return null;if(!Ss(v.type,[nr,or,ht,Fn,tr]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(v.type)} instead`);if(l.length===4){const C=f.parse(l[3],3,ht);return C?new ph(v,w,C):null}return new ph(v,w)}evaluate(l){const f=this.needle.evaluate(l),v=this.haystack.evaluate(l);if(!Ts(f,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(Ve(f))} instead.`);if(!Ts(v,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${Hr(Ve(v))} instead.`);if(this.fromIndex){const w=this.fromIndex.evaluate(l);return v.indexOf(f,w)}return v.indexOf(f)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class bd{constructor(l,f,v,w,C,A){this.inputType=l,this.type=f,this.input=v,this.cases=w,this.outputs=C,this.otherwise=A}static parse(l,f){if(l.length<5)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return f.error("Expected an even number of arguments.");let v,w;f.expectedType&&f.expectedType.kind!=="value"&&(w=f.expectedType);const C={},A=[];for(let $=2;$<l.length-1;$+=2){let G=l[$];const X=l[$+1];Array.isArray(G)||(G=[G]);const K=f.concat($);if(G.length===0)return K.error("Expected at least one branch label.");for(const ee of G){if(typeof ee!="number"&&typeof ee!="string")return K.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return K.error("Numeric branch labels must be integer values.");if(v){if(K.checkSubtype(v,Ve(ee)))return null}else v=Ve(ee);if(C[String(ee)]!==void 0)return K.error("Branch labels must be unique.");C[String(ee)]=A.length}const Q=f.parse(X,$,w);if(!Q)return null;w=w||Q.type,A.push(Q)}const k=f.parse(l[1],1,tr);if(!k)return null;const O=f.parse(l[l.length-1],l.length-1,w);return O?k.type.kind!=="value"&&f.concat(1).checkSubtype(v,k.type)?null:new bd(v,w,k,C,A,O):null}evaluate(l){const f=this.input.evaluate(l);return(Ve(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class wd{constructor(l,f,v){this.type=l,this.branches=f,this.otherwise=v}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return f.error("Expected an odd number of arguments.");let v;f.expectedType&&f.expectedType.kind!=="value"&&(v=f.expectedType);const w=[];for(let A=1;A<l.length-1;A+=2){const k=f.parse(l[A],A,nr);if(!k)return null;const O=f.parse(l[A+1],A+1,v);if(!O)return null;w.push([k,O]),v=v||O.type}const C=f.parse(l[l.length-1],l.length-1,v);if(!C)return null;if(!v)throw new Error("Can't infer output type");return new wd(v,w,C)}evaluate(l){for(const[f,v]of this.branches)if(f.evaluate(l))return v.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[f,v]of this.branches)l(f),l(v);l(this.otherwise)}outputDefined(){return this.branches.every(([l,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class mh{constructor(l,f,v,w){this.type=l,this.input=f,this.beginIndex=v,this.endIndex=w}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const v=f.parse(l[1],1,tr),w=f.parse(l[2],2,ht);if(!v||!w)return null;if(!Ss(v.type,[yi(tr),or,tr]))return f.error(`Expected first argument to be of type array or string, but found ${Hr(v.type)} instead`);if(l.length===4){const C=f.parse(l[3],3,ht);return C?new mh(v.type,v,w,C):null}return new mh(v.type,v,w)}evaluate(l){const f=this.input.evaluate(l),v=this.beginIndex.evaluate(l);if(!Ts(f,["string","array"]))throw new bt(`Expected first argument to be of type array or string, but found ${Hr(Ve(f))} instead.`);if(this.endIndex){const w=this.endIndex.evaluate(l);return f.slice(v,w)}return f.slice(v)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function zv(c,l){return c==="=="||c==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Bv(c,l,f,v){return v.compare(l,f)===0}function Tl(c,l,f){const v=c!=="=="&&c!=="!=";return class W6{constructor(C,A,k){this.type=nr,this.lhs=C,this.rhs=A,this.collator=k,this.hasUntypedArgument=C.type.kind==="value"||A.type.kind==="value"}static parse(C,A){if(C.length!==3&&C.length!==4)return A.error("Expected two or three arguments.");const k=C[0];let O=A.parse(C[1],1,tr);if(!O)return null;if(!zv(k,O.type))return A.concat(1).error(`"${k}" comparisons are not supported for type '${Hr(O.type)}'.`);let $=A.parse(C[2],2,tr);if(!$)return null;if(!zv(k,$.type))return A.concat(2).error(`"${k}" comparisons are not supported for type '${Hr($.type)}'.`);if(O.type.kind!==$.type.kind&&O.type.kind!=="value"&&$.type.kind!=="value")return A.error(`Cannot compare types '${Hr(O.type)}' and '${Hr($.type)}'.`);v&&(O.type.kind==="value"&&$.type.kind!=="value"?O=new Zt($.type,[O]):O.type.kind!=="value"&&$.type.kind==="value"&&($=new Zt(O.type,[$])));let G=null;if(C.length===4){if(O.type.kind!=="string"&&$.type.kind!=="string"&&O.type.kind!=="value"&&$.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(G=A.parse(C[3],3,vo),!G)return null}return new W6(O,$,G)}evaluate(C){const A=this.lhs.evaluate(C),k=this.rhs.evaluate(C);if(v&&this.hasUntypedArgument){const O=Ve(A),$=Ve(k);if(O.kind!==$.kind||O.kind!=="string"&&O.kind!=="number")throw new bt(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${O.kind}, ${$.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const O=Ve(A),$=Ve(k);if(O.kind!=="string"||$.kind!=="string")return l(C,A,k)}return this.collator?f(C,A,k,this.collator.evaluate(C)):l(C,A,k)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const _1=Tl("==",function(c,l,f){return l===f},Bv),x1=Tl("!=",function(c,l,f){return l!==f},function(c,l,f,v){return!Bv(0,l,f,v)}),b1=Tl("<",function(c,l,f){return l<f},function(c,l,f,v){return v.compare(l,f)<0}),w1=Tl(">",function(c,l,f){return l>f},function(c,l,f,v){return v.compare(l,f)>0}),S1=Tl("<=",function(c,l,f){return l<=f},function(c,l,f,v){return v.compare(l,f)<=0}),T1=Tl(">=",function(c,l,f){return l>=f},function(c,l,f,v){return v.compare(l,f)>=0});class Sd{constructor(l,f,v,w,C){this.type=or,this.number=l,this.locale=f,this.currency=v,this.minFractionDigits=w,this.maxFractionDigits=C}static parse(l,f){if(l.length!==3)return f.error("Expected two arguments.");const v=f.parse(l[1],1,ht);if(!v)return null;const w=l[2];if(typeof w!="object"||Array.isArray(w))return f.error("NumberFormat options argument must be an object.");let C=null;if(w.locale&&(C=f.parse(w.locale,1,or),!C))return null;let A=null;if(w.currency&&(A=f.parse(w.currency,1,or),!A))return null;let k=null;if(w["min-fraction-digits"]&&(k=f.parse(w["min-fraction-digits"],1,ht),!k))return null;let O=null;return w["max-fraction-digits"]&&(O=f.parse(w["max-fraction-digits"],1,ht),!O)?null:new Sd(v,C,A,k,O)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class vh{constructor(l){this.type=qn,this.sections=l}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");const v=l[1];if(!Array.isArray(v)&&typeof v=="object")return f.error("First argument must be an image or text section.");const w=[];let C=!1;for(let A=1;A<=l.length-1;++A){const k=l[A];if(C&&typeof k=="object"&&!Array.isArray(k)){C=!1;let O=null;if(k["font-scale"]&&(O=f.parse(k["font-scale"],1,ht),!O))return null;let $=null;if(k["text-font"]&&($=f.parse(k["text-font"],1,yi(or)),!$))return null;let G=null;if(k["text-color"]&&(G=f.parse(k["text-color"],1,ri),!G))return null;const X=w[w.length-1];X.scale=O,X.font=$,X.textColor=G}else{const O=f.parse(l[A],1,tr);if(!O)return null;const $=O.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,w.push({content:O,scale:null,font:null,textColor:null})}}return new vh(w)}evaluate(l){return new be(this.sections.map(f=>{const v=f.content.evaluate(l);return Ve(v)===Pn?new Te("",v,null,null,null):new Te(Pt(v),null,f.scale?f.scale.evaluate(l):null,f.font?f.font.evaluate(l).join(","):null,f.textColor?f.textColor.evaluate(l):null)}))}eachChild(l){for(const f of this.sections)l(f.content),f.scale&&l(f.scale),f.font&&l(f.font),f.textColor&&l(f.textColor)}outputDefined(){return!1}}class Td{constructor(l){this.type=Pn,this.input=l}static parse(l,f){if(l.length!==2)return f.error("Expected two arguments.");const v=f.parse(l[1],1,or);return v?new Td(v):f.error("No image name provided.")}evaluate(l){const f=this.input.evaluate(l),v=Ce.fromString(f);return v&&l.availableImages&&(v.available=l.availableImages.indexOf(f)>-1),v}eachChild(l){l(this.input)}outputDefined(){return!1}}class Cd{constructor(l){this.type=ht,this.input=l}static parse(l,f){if(l.length!==2)return f.error(`Expected 1 argument, but found ${l.length-1} instead.`);const v=f.parse(l[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${Hr(v.type)} instead.`):new Cd(v):null}evaluate(l){const f=this.input.evaluate(l);if(typeof f=="string"||Array.isArray(f))return f.length;throw new bt(`Expected value to be of type string or array, but found ${Hr(Ve(f))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const Cl={"==":_1,"!=":x1,">":w1,"<":b1,">=":T1,"<=":S1,array:Zt,at:_d,boolean:Zt,case:wd,coalesce:fh,collator:Wn,format:vh,image:Td,in:xd,"index-of":ph,interpolate:Wi,"interpolate-hcl":Wi,"interpolate-lab":Wi,length:Cd,let:dh,literal:kt,match:bd,number:Zt,"number-format":Sd,object:Zt,slice:mh,step:wu,string:Zt,"to-boolean":Qt,"to-color":Qt,"to-number":Qt,"to-string":Qt,var:uh,within:Es};function Fv(c,[l,f,v,w]){l=l.evaluate(c),f=f.evaluate(c),v=v.evaluate(c);const C=w?w.evaluate(c):1,A=Ue(l,f,v,C);if(A)throw new bt(A);return new ie(l/255*C,f/255*C,v/255*C,C)}function $v(c,l){return c in l}function gh(c,l){const f=l[c];return f===void 0?null:f}function As(c){return{type:c}}function Nv(c){return{result:"success",value:c}}function El(c){return{result:"error",value:c}}function tn(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function Vv(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function mr(c){return!!c.expression&&c.expression.interpolated}function kr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Kr(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function cn(c){return c}function Eu(c,l){const f=l.type==="color",v=c.stops&&typeof c.stops[0][0]=="object",w=v||!(v||c.property!==void 0),C=c.type||(mr(l)?"exponential":"interval");if(f||l.type==="padding"){const $=f?ie.parse:xe.parse;(c=jn({},c)).stops&&(c.stops=c.stops.map(G=>[G[0],$(G[1])])),c.default=$(c.default?c.default:l.default)}if(c.colorSpace&&c.colorSpace!=="rgb"&&!Ov[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let A,k,O;if(C==="exponential")A=Uv;else if(C==="interval")A=E1;else if(C==="categorical"){A=C1,k=Object.create(null);for(const $ of c.stops)k[$[0]]=$[1];O=typeof c.stops[0][0]}else{if(C!=="identity")throw new Error(`Unknown function type "${C}"`);A=A1}if(v){const $={},G=[];for(let Q=0;Q<c.stops.length;Q++){const ee=c.stops[Q],ye=ee[0].zoom;$[ye]===void 0&&($[ye]={zoom:ye,type:c.type,property:c.property,default:c.default,stops:[]},G.push(ye)),$[ye].stops.push([ee[0].value,ee[1]])}const X=[];for(const Q of G)X.push([$[Q].zoom,Eu($[Q],l)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Wi.interpolationFactor.bind(void 0,K),zoomStops:X.map(Q=>Q[0]),evaluate:({zoom:Q},ee)=>Uv({stops:X,base:c.base},l,Q).evaluate(Q,ee)}}if(w){const $=C==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:Wi.interpolationFactor.bind(void 0,$),zoomStops:c.stops.map(G=>G[0]),evaluate:({zoom:G})=>A(c,l,G,k,O)}}return{kind:"source",evaluate($,G){const X=G&&G.properties?G.properties[c.property]:void 0;return X===void 0?Al(c.default,l.default):A(c,l,X,k,O)}}}function Al(c,l,f){return c!==void 0?c:l!==void 0?l:f!==void 0?f:void 0}function C1(c,l,f,v,w){return Al(typeof f===w?v[f]:void 0,c.default,l.default)}function E1(c,l,f){if(kr(f)!=="number")return Al(c.default,l.default);const v=c.stops.length;if(v===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[v-1][0])return c.stops[v-1][1];const w=ch(c.stops.map(C=>C[0]),f);return c.stops[w][1]}function Uv(c,l,f){const v=c.base!==void 0?c.base:1;if(kr(f)!=="number")return Al(c.default,l.default);const w=c.stops.length;if(w===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[w-1][0])return c.stops[w-1][1];const C=ch(c.stops.map(G=>G[0]),f),A=function(G,X,K,Q){const ee=Q-K,ye=G-K;return ee===0?0:X===1?ye/ee:(Math.pow(X,ye)-1)/(Math.pow(X,ee)-1)}(f,v,c.stops[C][0],c.stops[C+1][0]),k=c.stops[C][1],O=c.stops[C+1][1];let $=Su[l.type]||cn;if(c.colorSpace&&c.colorSpace!=="rgb"){const G=Ov[c.colorSpace];$=(X,K)=>G.reverse(G.interpolate(G.forward(X),G.forward(K),A))}return typeof k.evaluate=="function"?{evaluate(...G){const X=k.evaluate.apply(void 0,G),K=O.evaluate.apply(void 0,G);if(X!==void 0&&K!==void 0)return $(X,K,A)}}:$(k,O,A)}function A1(c,l,f){switch(l.type){case"color":f=ie.parse(f);break;case"formatted":f=be.fromString(f.toString());break;case"resolvedImage":f=Ce.fromString(f.toString());break;case"padding":f=xe.parse(f);break;default:kr(f)===l.type||l.type==="enum"&&l.values[f]||(f=void 0)}return Al(f,c.default,l.default)}qr.register(Cl,{error:[{kind:"error"},[or],(c,[l])=>{throw new bt(l.evaluate(c))}],typeof:[or,[tr],(c,[l])=>Hr(Ve(l.evaluate(c)))],"to-rgba":[yi(ht,4),[ri],(c,[l])=>l.evaluate(c).toArray()],rgb:[ri,[ht,ht,ht],Fv],rgba:[ri,[ht,ht,ht,ht],Fv],has:{type:nr,overloads:[[[or],(c,[l])=>$v(l.evaluate(c),c.properties())],[[or,Go],(c,[l,f])=>$v(l.evaluate(c),f.evaluate(c))]]},get:{type:tr,overloads:[[[or],(c,[l])=>gh(l.evaluate(c),c.properties())],[[or,Go],(c,[l,f])=>gh(l.evaluate(c),f.evaluate(c))]]},"feature-state":[tr,[or],(c,[l])=>gh(l.evaluate(c),c.featureState||{})],properties:[Go,[],c=>c.properties()],"geometry-type":[or,[],c=>c.geometryType()],id:[tr,[],c=>c.id()],zoom:[ht,[],c=>c.globals.zoom],"heatmap-density":[ht,[],c=>c.globals.heatmapDensity||0],"line-progress":[ht,[],c=>c.globals.lineProgress||0],accumulated:[tr,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[ht,As(ht),(c,l)=>{let f=0;for(const v of l)f+=v.evaluate(c);return f}],"*":[ht,As(ht),(c,l)=>{let f=1;for(const v of l)f*=v.evaluate(c);return f}],"-":{type:ht,overloads:[[[ht,ht],(c,[l,f])=>l.evaluate(c)-f.evaluate(c)],[[ht],(c,[l])=>-l.evaluate(c)]]},"/":[ht,[ht,ht],(c,[l,f])=>l.evaluate(c)/f.evaluate(c)],"%":[ht,[ht,ht],(c,[l,f])=>l.evaluate(c)%f.evaluate(c)],ln2:[ht,[],()=>Math.LN2],pi:[ht,[],()=>Math.PI],e:[ht,[],()=>Math.E],"^":[ht,[ht,ht],(c,[l,f])=>Math.pow(l.evaluate(c),f.evaluate(c))],sqrt:[ht,[ht],(c,[l])=>Math.sqrt(l.evaluate(c))],log10:[ht,[ht],(c,[l])=>Math.log(l.evaluate(c))/Math.LN10],ln:[ht,[ht],(c,[l])=>Math.log(l.evaluate(c))],log2:[ht,[ht],(c,[l])=>Math.log(l.evaluate(c))/Math.LN2],sin:[ht,[ht],(c,[l])=>Math.sin(l.evaluate(c))],cos:[ht,[ht],(c,[l])=>Math.cos(l.evaluate(c))],tan:[ht,[ht],(c,[l])=>Math.tan(l.evaluate(c))],asin:[ht,[ht],(c,[l])=>Math.asin(l.evaluate(c))],acos:[ht,[ht],(c,[l])=>Math.acos(l.evaluate(c))],atan:[ht,[ht],(c,[l])=>Math.atan(l.evaluate(c))],min:[ht,As(ht),(c,l)=>Math.min(...l.map(f=>f.evaluate(c)))],max:[ht,As(ht),(c,l)=>Math.max(...l.map(f=>f.evaluate(c)))],abs:[ht,[ht],(c,[l])=>Math.abs(l.evaluate(c))],round:[ht,[ht],(c,[l])=>{const f=l.evaluate(c);return f<0?-Math.round(-f):Math.round(f)}],floor:[ht,[ht],(c,[l])=>Math.floor(l.evaluate(c))],ceil:[ht,[ht],(c,[l])=>Math.ceil(l.evaluate(c))],"filter-==":[nr,[or,tr],(c,[l,f])=>c.properties()[l.value]===f.value],"filter-id-==":[nr,[tr],(c,[l])=>c.id()===l.value],"filter-type-==":[nr,[or],(c,[l])=>c.geometryType()===l.value],"filter-<":[nr,[or,tr],(c,[l,f])=>{const v=c.properties()[l.value],w=f.value;return typeof v==typeof w&&v<w}],"filter-id-<":[nr,[tr],(c,[l])=>{const f=c.id(),v=l.value;return typeof f==typeof v&&f<v}],"filter->":[nr,[or,tr],(c,[l,f])=>{const v=c.properties()[l.value],w=f.value;return typeof v==typeof w&&v>w}],"filter-id->":[nr,[tr],(c,[l])=>{const f=c.id(),v=l.value;return typeof f==typeof v&&f>v}],"filter-<=":[nr,[or,tr],(c,[l,f])=>{const v=c.properties()[l.value],w=f.value;return typeof v==typeof w&&v<=w}],"filter-id-<=":[nr,[tr],(c,[l])=>{const f=c.id(),v=l.value;return typeof f==typeof v&&f<=v}],"filter->=":[nr,[or,tr],(c,[l,f])=>{const v=c.properties()[l.value],w=f.value;return typeof v==typeof w&&v>=w}],"filter-id->=":[nr,[tr],(c,[l])=>{const f=c.id(),v=l.value;return typeof f==typeof v&&f>=v}],"filter-has":[nr,[tr],(c,[l])=>l.value in c.properties()],"filter-has-id":[nr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[nr,[yi(or)],(c,[l])=>l.value.indexOf(c.geometryType())>=0],"filter-id-in":[nr,[yi(tr)],(c,[l])=>l.value.indexOf(c.id())>=0],"filter-in-small":[nr,[or,yi(tr)],(c,[l,f])=>f.value.indexOf(c.properties()[l.value])>=0],"filter-in-large":[nr,[or,yi(tr)],(c,[l,f])=>function(v,w,C,A){for(;C<=A;){const k=C+A>>1;if(w[k]===v)return!0;w[k]>v?A=k-1:C=k+1}return!1}(c.properties()[l.value],f.value,0,f.value.length-1)],all:{type:nr,overloads:[[[nr,nr],(c,[l,f])=>l.evaluate(c)&&f.evaluate(c)],[As(nr),(c,l)=>{for(const f of l)if(!f.evaluate(c))return!1;return!0}]]},any:{type:nr,overloads:[[[nr,nr],(c,[l,f])=>l.evaluate(c)||f.evaluate(c)],[As(nr),(c,l)=>{for(const f of l)if(f.evaluate(c))return!0;return!1}]]},"!":[nr,[nr],(c,[l])=>!l.evaluate(c)],"is-supported-script":[nr,[or],(c,[l])=>{const f=c.globals&&c.globals.isSupportedScript;return!f||f(l.evaluate(c))}],upcase:[or,[or],(c,[l])=>l.evaluate(c).toUpperCase()],downcase:[or,[or],(c,[l])=>l.evaluate(c).toLowerCase()],concat:[or,As(tr),(c,l)=>l.map(f=>Pt(f.evaluate(c))).join("")],"resolved-locale":[or,[vo],(c,[l])=>l.evaluate(c).resolvedLocale()]});class yh{constructor(l,f){this.expression=l,this._warningHistory={},this._evaluator=new Tr,this._defaultValue=f?function(v){return v.type==="color"&&Kr(v.default)?new ie(0,0,0,0):v.type==="color"?ie.parse(v.default)||null:v.type==="padding"?xe.parse(v.default)||null:v.default===void 0?null:v.default}(f):null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(l,f,v,w,C,A){return this._evaluator.globals=l,this._evaluator.feature=f,this._evaluator.featureState=v,this._evaluator.canonical=w,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A,this.expression.evaluate(this._evaluator)}evaluate(l,f,v,w,C,A){this._evaluator.globals=l,this._evaluator.feature=f||null,this._evaluator.featureState=v||null,this._evaluator.canonical=w,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new bt(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function Au(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Cl}function Mu(c,l){const f=new Sl(Cl,[],l?function(w){const C={color:ri,string:or,number:ht,enum:or,boolean:nr,formatted:qn,padding:yl,resolvedImage:Pn};return w.type==="array"?yi(C[w.value]||tr,w.length):C[w.type]}(l):void 0),v=f.parse(c,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Nv(new yh(v,l)):El(f.errors)}class Iu{constructor(l,f){this.kind=l,this._styleExpression=f,this.isStateDependent=l!=="constant"&&!wl(f.expression)}evaluateWithoutErrorHandling(l,f,v,w,C,A){return this._styleExpression.evaluateWithoutErrorHandling(l,f,v,w,C,A)}evaluate(l,f,v,w,C,A){return this._styleExpression.evaluate(l,f,v,w,C,A)}}class Ed{constructor(l,f,v,w){this.kind=l,this.zoomStops=v,this._styleExpression=f,this.isStateDependent=l!=="camera"&&!wl(f.expression),this.interpolationType=w}evaluateWithoutErrorHandling(l,f,v,w,C,A){return this._styleExpression.evaluateWithoutErrorHandling(l,f,v,w,C,A)}evaluate(l,f,v,w,C,A){return this._styleExpression.evaluate(l,f,v,w,C,A)}interpolationFactor(l,f,v){return this.interpolationType?Wi.interpolationFactor(this.interpolationType,l,f,v):0}}function Hv(c,l){const f=Mu(c,l);if(f.result==="error")return f;const v=f.value.expression,w=bu(v);if(!w&&!tn(l))return El([new ci("","data expressions not supported")]);const C=lh(v,["zoom"]);if(!C&&!Vv(l))return El([new ci("","zoom expressions not supported")]);const A=xh(v);return A||C?A instanceof ci?El([A]):A instanceof Wi&&!mr(l)?El([new ci("",'"interpolate" expressions cannot be used with this property')]):Nv(A?new Ed(w?"camera":"composite",f.value,A.labels,A instanceof Wi?A.interpolation:void 0):new Iu(w?"constant":"source",f.value)):El([new ci("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class _h{constructor(l,f){this._parameters=l,this._specification=f,jn(this,Eu(this._parameters,this._specification))}static deserialize(l){return new _h(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function xh(c){let l=null;if(c instanceof dh)l=xh(c.result);else if(c instanceof fh){for(const f of c.args)if(l=xh(f),l)break}else(c instanceof wu||c instanceof Wi)&&c.input instanceof qr&&c.input.name==="zoom"&&(l=c);return l instanceof ci||c.eachChild(f=>{const v=xh(f);v instanceof ci?l=v:!l&&v?l=new ci("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&v&&l!==v&&(l=new ci("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function Ea(c){const l=c.key,f=c.value,v=c.valueSpec||{},w=c.objectElementValidators||{},C=c.style,A=c.styleSpec;let k=[];const O=kr(f);if(O!=="object")return[new at(l,f,`object expected, ${O} found`)];for(const $ in f){const G=$.split(".")[0],X=v[G]||v["*"];let K;if(w[G])K=w[G];else if(v[G])K=Zi;else if(w["*"])K=w["*"];else{if(!v["*"]){k.push(new at(l,f[$],`unknown property "${$}"`));continue}K=Zi}k=k.concat(K({key:(l&&`${l}.`)+$,value:f[$],valueSpec:X,style:C,styleSpec:A,object:f,objectKey:$},f))}for(const $ in v)w[$]||v[$].required&&v[$].default===void 0&&f[$]===void 0&&k.push(new at(l,f,`missing required property "${$}"`));return k}function jv(c){const l=c.value,f=c.valueSpec,v=c.style,w=c.styleSpec,C=c.key,A=c.arrayElementValidator||Zi;if(kr(l)!=="array")return[new at(C,l,`array expected, ${kr(l)} found`)];if(f.length&&l.length!==f.length)return[new at(C,l,`array length ${f.length} expected, length ${l.length} found`)];if(f["min-length"]&&l.length<f["min-length"])return[new at(C,l,`array length at least ${f["min-length"]} expected, length ${l.length} found`)];let k={type:f.value,values:f.values};w.$version<7&&(k.function=f.function),kr(f.value)==="object"&&(k=f.value);let O=[];for(let $=0;$<l.length;$++)O=O.concat(A({array:l,arrayIndex:$,value:l[$],valueSpec:k,style:v,styleSpec:w,key:`${C}[${$}]`}));return O}function Ad(c){const l=c.key,f=c.value,v=c.valueSpec;let w=kr(f);return w==="number"&&f!=f&&(w="NaN"),w!=="number"?[new at(l,f,`number expected, ${w} found`)]:"minimum"in v&&f<v.minimum?[new at(l,f,`${f} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&f>v.maximum?[new at(l,f,`${f} is greater than the maximum value ${v.maximum}`)]:[]}function Gv(c){const l=c.valueSpec,f=pr(c.value.type);let v,w,C,A={};const k=f!=="categorical"&&c.value.property===void 0,O=!k,$=kr(c.value.stops)==="array"&&kr(c.value.stops[0])==="array"&&kr(c.value.stops[0][0])==="object",G=Ea({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Q){if(f==="identity")return[new at(Q.key,Q.value,'identity function may not have a "stops" property')];let ee=[];const ye=Q.value;return ee=ee.concat(jv({key:Q.key,value:ye,valueSpec:Q.valueSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:X})),kr(ye)==="array"&&ye.length===0&&ee.push(new at(Q.key,ye,"array must have at least one stop")),ee},default:function(Q){return Zi({key:Q.key,value:Q.value,valueSpec:l,style:Q.style,styleSpec:Q.styleSpec})}}});return f==="identity"&&k&&G.push(new at(c.key,c.value,'missing required property "property"')),f==="identity"||c.value.stops||G.push(new at(c.key,c.value,'missing required property "stops"')),f==="exponential"&&c.valueSpec.expression&&!mr(c.valueSpec)&&G.push(new at(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(O&&!tn(c.valueSpec)?G.push(new at(c.key,c.value,"property functions not supported")):k&&!Vv(c.valueSpec)&&G.push(new at(c.key,c.value,"zoom functions not supported"))),f!=="categorical"&&!$||c.value.property!==void 0||G.push(new at(c.key,c.value,'"property" property is required')),G;function X(Q){let ee=[];const ye=Q.value,me=Q.key;if(kr(ye)!=="array")return[new at(me,ye,`array expected, ${kr(ye)} found`)];if(ye.length!==2)return[new at(me,ye,`array length 2 expected, length ${ye.length} found`)];if($){if(kr(ye[0])!=="object")return[new at(me,ye,`object expected, ${kr(ye[0])} found`)];if(ye[0].zoom===void 0)return[new at(me,ye,"object stop key must have zoom")];if(ye[0].value===void 0)return[new at(me,ye,"object stop key must have value")];if(C&&C>pr(ye[0].zoom))return[new at(me,ye[0].zoom,"stop zoom values must appear in ascending order")];pr(ye[0].zoom)!==C&&(C=pr(ye[0].zoom),w=void 0,A={}),ee=ee.concat(Ea({key:`${me}[0]`,value:ye[0],valueSpec:{zoom:{}},style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:Ad,value:K}}))}else ee=ee.concat(K({key:`${me}[0]`,value:ye[0],valueSpec:{},style:Q.style,styleSpec:Q.styleSpec},ye));return Au(Gn(ye[1]))?ee.concat([new at(`${me}[1]`,ye[1],"expressions are not allowed in function stops.")]):ee.concat(Zi({key:`${me}[1]`,value:ye[1],valueSpec:l,style:Q.style,styleSpec:Q.styleSpec}))}function K(Q,ee){const ye=kr(Q.value),me=pr(Q.value),De=Q.value!==null?Q.value:ee;if(v){if(ye!==v)return[new at(Q.key,De,`${ye} stop domain type must match previous stop domain type ${v}`)]}else v=ye;if(ye!=="number"&&ye!=="string"&&ye!=="boolean")return[new at(Q.key,De,"stop domain value must be a number, string, or boolean")];if(ye!=="number"&&f!=="categorical"){let $e=`number expected, ${ye} found`;return tn(l)&&f===void 0&&($e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at(Q.key,De,$e)]}return f!=="categorical"||ye!=="number"||isFinite(me)&&Math.floor(me)===me?f!=="categorical"&&ye==="number"&&w!==void 0&&me<w?[new at(Q.key,De,"stop domain values must appear in ascending order")]:(w=me,f==="categorical"&&me in A?[new at(Q.key,De,"stop domain values must be unique")]:(A[me]=!0,[])):[new at(Q.key,De,`integer expected, found ${me}`)]}}function Ms(c){const l=(c.expressionContext==="property"?Hv:Mu)(Gn(c.value),c.valueSpec);if(l.result==="error")return l.value.map(v=>new at(`${c.key}${v.key}`,c.value,v.message));const f=l.value.expression||l.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!f.outputDefined())return[new at(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!wl(f))return[new at(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!wl(f))return[new at(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!lh(f,["zoom","feature-state"]))return[new at(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!bu(f))return[new at(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Pu(c){const l=c.key,f=c.value,v=c.valueSpec,w=[];return Array.isArray(v.values)?v.values.indexOf(pr(f))===-1&&w.push(new at(l,f,`expected one of [${v.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(v.values).indexOf(pr(f))===-1&&w.push(new at(l,f,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(f)} found`)),w}function Ml(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const l of c.slice(1))if(!Ml(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const M1={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function bh(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Ml(c)||(c=Du(c));const l=Mu(c,M1);if(l.result==="error")throw new Error(l.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,v,w)=>l.value.evaluate(f,v,{},w),needGeometry:Wv(c)}}function qv(c,l){return c<l?-1:c>l?1:0}function Wv(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let l=1;l<c.length;l++)if(Wv(c[l]))return!0;return!1}function Du(c){if(!c)return!0;const l=c[0];return c.length<=1?l!=="any":l==="=="?Md(c[1],c[2],"=="):l==="!="?Il(Md(c[1],c[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Md(c[1],c[2],l):l==="any"?(f=c.slice(1),["any"].concat(f.map(Du))):l==="all"?["all"].concat(c.slice(1).map(Du)):l==="none"?["all"].concat(c.slice(1).map(Du).map(Il)):l==="in"?wh(c[1],c.slice(2)):l==="!in"?Il(wh(c[1],c.slice(2))):l==="has"?Lu(c[1]):l==="!has"?Il(Lu(c[1])):l!=="within"||c;var f}function Md(c,l,f){switch(c){case"$type":return[`filter-type-${f}`,l];case"$id":return[`filter-id-${f}`,l];default:return[`filter-${f}`,c,l]}}function wh(c,l){if(l.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(f=>typeof f!=typeof l[0])?["filter-in-large",c,["literal",l.sort(qv)]]:["filter-in-small",c,["literal",l]]}}function Lu(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Il(c){return["!",c]}function ku(c){return Ml(Gn(c.value))?Ms(jn({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xv(c)}function Xv(c){const l=c.value,f=c.key;if(kr(l)!=="array")return[new at(f,l,`array expected, ${kr(l)} found`)];const v=c.styleSpec;let w,C=[];if(l.length<1)return[new at(f,l,"filter array must have at least 1 element")];switch(C=C.concat(Pu({key:`${f}[0]`,value:l[0],valueSpec:v.filter_operator,style:c.style,styleSpec:c.styleSpec})),pr(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&pr(l[1])==="$type"&&C.push(new at(f,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&C.push(new at(f,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(w=kr(l[1]),w!=="string"&&C.push(new at(`${f}[1]`,l[1],`string expected, ${w} found`)));for(let A=2;A<l.length;A++)w=kr(l[A]),pr(l[1])==="$type"?C=C.concat(Pu({key:`${f}[${A}]`,value:l[A],valueSpec:v.geometry_type,style:c.style,styleSpec:c.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&C.push(new at(`${f}[${A}]`,l[A],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let A=1;A<l.length;A++)C=C.concat(Xv({key:`${f}[${A}]`,value:l[A],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":w=kr(l[1]),l.length!==2?C.push(new at(f,l,`filter array for "${l[0]}" operator must have 2 elements`)):w!=="string"&&C.push(new at(`${f}[1]`,l[1],`string expected, ${w} found`));break;case"within":w=kr(l[1]),l.length!==2?C.push(new at(f,l,`filter array for "${l[0]}" operator must have 2 elements`)):w!=="object"&&C.push(new at(`${f}[1]`,l[1],`object expected, ${w} found`))}return C}function Ru(c,l){const f=c.key,v=c.style,w=c.styleSpec,C=c.value,A=c.objectKey,k=w[`${l}_${c.layerType}`];if(!k)return[];const O=A.match(/^(.*)-transition$/);if(l==="paint"&&O&&k[O[1]]&&k[O[1]].transition)return Zi({key:f,value:C,valueSpec:w.transition,style:v,styleSpec:w});const $=c.valueSpec||k[A];if(!$)return[new at(f,C,`unknown property "${A}"`)];let G;if(kr(C)==="string"&&tn($)&&!$.tokens&&(G=/^{([^}]+)}$/.exec(C)))return[new at(f,C,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const X=[];return c.layerType==="symbol"&&(A==="text-field"&&v&&!v.glyphs&&X.push(new at(f,C,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Kr(Gn(C))&&pr(C.type)==="identity"&&X.push(new at(f,C,'"text-font" does not support identity functions'))),X.concat(Zi({key:c.key,value:C,valueSpec:$,style:v,styleSpec:w,expressionContext:"property",propertyType:l,propertyKey:A}))}function Zv(c){return Ru(c,"paint")}function Yv(c){return Ru(c,"layout")}function Kv(c){let l=[];const f=c.value,v=c.key,w=c.style,C=c.styleSpec;f.type||f.ref||l.push(new at(v,f,'either "type" or "ref" is required'));let A=pr(f.type);const k=pr(f.ref);if(f.id){const O=pr(f.id);for(let $=0;$<c.arrayIndex;$++){const G=w.layers[$];pr(G.id)===O&&l.push(new at(v,f.id,`duplicate layer id "${f.id}", previously used at line ${G.id.__line__}`))}}if("ref"in f){let O;["type","source","source-layer","filter","layout"].forEach($=>{$ in f&&l.push(new at(v,f[$],`"${$}" is prohibited for ref layers`))}),w.layers.forEach($=>{pr($.id)===k&&(O=$)}),O?O.ref?l.push(new at(v,f.ref,"ref cannot reference another ref layer")):A=pr(O.type):l.push(new at(v,f.ref,`ref layer "${k}" not found`))}else if(A!=="background")if(f.source){const O=w.sources&&w.sources[f.source],$=O&&pr(O.type);O?$==="vector"&&A==="raster"?l.push(new at(v,f.source,`layer "${f.id}" requires a raster source`)):$==="raster"&&A!=="raster"?l.push(new at(v,f.source,`layer "${f.id}" requires a vector source`)):$!=="vector"||f["source-layer"]?$==="raster-dem"&&A!=="hillshade"?l.push(new at(v,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):A!=="line"||!f.paint||!f.paint["line-gradient"]||$==="geojson"&&O.lineMetrics||l.push(new at(v,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new at(v,f,`layer "${f.id}" must specify a "source-layer"`)):l.push(new at(v,f.source,`source "${f.source}" not found`))}else l.push(new at(v,f,'missing required property "source"'));return l=l.concat(Ea({key:v,value:f,valueSpec:C.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Zi({key:`${v}.type`,value:f.type,valueSpec:C.layer.type,style:c.style,styleSpec:c.styleSpec,object:f,objectKey:"type"}),filter:ku,layout:O=>Ea({layer:f,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":$=>Yv(jn({layerType:A},$))}}),paint:O=>Ea({layer:f,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":$=>Zv(jn({layerType:A},$))}})}})),l}function Pl(c){const l=c.value,f=c.key,v=kr(l);return v!=="string"?[new at(f,l,`string expected, ${v} found`)]:[]}const Jv={promoteId:function({key:c,value:l}){if(kr(l)==="string")return Pl({key:c,value:l});{const f=[];for(const v in l)f.push(...Pl({key:`${c}.${v}`,value:l[v]}));return f}}};function Ou(c){const l=c.value,f=c.key,v=c.styleSpec,w=c.style;if(!l.type)return[new at(f,l,'"type" is required')];const C=pr(l.type);let A;switch(C){case"vector":case"raster":case"raster-dem":return A=Ea({key:f,value:l,valueSpec:v[`source_${C.replace("-","_")}`],style:c.style,styleSpec:v,objectElementValidators:Jv}),A;case"geojson":if(A=Ea({key:f,value:l,valueSpec:v.source_geojson,style:w,styleSpec:v,objectElementValidators:Jv}),l.cluster)for(const k in l.clusterProperties){const[O,$]=l.clusterProperties[k],G=typeof O=="string"?[O,["accumulated"],["get",k]]:O;A.push(...Ms({key:`${f}.${k}.map`,value:$,expressionContext:"cluster-map"})),A.push(...Ms({key:`${f}.${k}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return A;case"video":return Ea({key:f,value:l,valueSpec:v.source_video,style:w,styleSpec:v});case"image":return Ea({key:f,value:l,valueSpec:v.source_image,style:w,styleSpec:v});case"canvas":return[new at(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pu({key:`${f}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:w,styleSpec:v})}}function zu(c){const l=c.value,f=c.styleSpec,v=f.light,w=c.style;let C=[];const A=kr(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new at("light",l,`object expected, ${A} found`)]),C;for(const k in l){const O=k.match(/^(.*)-transition$/);C=C.concat(O&&v[O[1]]&&v[O[1]].transition?Zi({key:k,value:l[k],valueSpec:f.transition,style:w,styleSpec:f}):v[k]?Zi({key:k,value:l[k],valueSpec:v[k],style:w,styleSpec:f}):[new at(k,l[k],`unknown property "${k}"`)])}return C}function Xi(c){const l=c.value,f=c.styleSpec,v=f.terrain,w=c.style;let C=[];const A=kr(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new at("terrain",l,`object expected, ${A} found`)]),C;for(const k in l)C=C.concat(v[k]?Zi({key:k,value:l[k],valueSpec:v[k],style:w,styleSpec:f}):[new at(k,l[k],`unknown property "${k}"`)]);return C}const Bu={"*":()=>[],array:jv,boolean:function(c){const l=c.value,f=c.key,v=kr(l);return v!=="boolean"?[new at(f,l,`boolean expected, ${v} found`)]:[]},number:Ad,color:function(c){const l=c.key,f=c.value,v=kr(f);return v!=="string"?[new at(l,f,`color expected, ${v} found`)]:xl(f)===null?[new at(l,f,`color expected, "${f}" found`)]:[]},constants:Bn,enum:Pu,filter:ku,function:Gv,layer:Kv,object:Ea,source:Ou,light:zu,terrain:Xi,string:Pl,formatted:function(c){return Pl(c).length===0?[]:Ms(c)},resolvedImage:function(c){return Pl(c).length===0?[]:Ms(c)},padding:function(c){const l=c.key,f=c.value;if(kr(f)==="array"){if(f.length<1||f.length>4)return[new at(l,f,`padding requires 1 to 4 values; ${f.length} values found`)];const v={type:"number"};let w=[];for(let C=0;C<f.length;C++)w=w.concat(Zi({key:`${l}[${C}]`,value:f[C],valueSpec:v}));return w}return Ad({key:l,value:f,valueSpec:{}})}};function Zi(c){const l=c.value,f=c.valueSpec,v=c.styleSpec;return f.expression&&Kr(pr(l))?Gv(c):f.expression&&Au(Gn(l))?Ms(c):f.type&&Bu[f.type]?Bu[f.type](c):Ea(jn({},c,{valueSpec:f.type?v[f.type]:f}))}function I1(c){const l=c.value,f=c.key,v=Pl(c);return v.length||(l.indexOf("{fontstack}")===-1&&v.push(new at(f,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&v.push(new at(f,l,'"glyphs" url must include a "{range}" token'))),v}function qo(c,l=Be){let f=[];return f=f.concat(Zi({key:"",value:c,valueSpec:l.$root,styleSpec:l,style:c,objectElementValidators:{glyphs:I1,"*":()=>[]}})),c.constants&&(f=f.concat(Bn({key:"constants",value:c.constants,style:c,styleSpec:l}))),Qv(f)}function Qv(c){return[].concat(c).sort((l,f)=>l.line-f.line)}function go(c){return function(...l){return Qv(c.apply(this,l))}}qo.source=go(Ou),qo.light=go(zu),qo.terrain=go(Xi),qo.layer=go(Kv),qo.filter=go(ku),qo.paintProperty=go(Zv),qo.layoutProperty=go(Yv);const Fu=qo,Id=Fu.light,P1=Fu.paintProperty,D1=Fu.layoutProperty;function Sh(c,l){let f=!1;if(l&&l.length)for(const v of l)c.fire(new ar(new Error(v.message))),f=!0;return f}class $u{constructor(l,f,v){const w=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const A=new Int32Array(this.arrayBuffer);l=A[0],this.d=(f=A[1])+2*(v=A[2]);for(let O=0;O<this.d*this.d;O++){const $=A[3+O],G=A[3+O+1];w.push($===G?null:A.subarray($,G))}const k=A[3+w.length+1];this.keys=A.subarray(A[3+w.length],k),this.bboxes=A.subarray(k),this.insert=this._insertReadonly}else{this.d=f+2*v;for(let A=0;A<this.d*this.d;A++)w.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=v,this.scale=f/l,this.uid=0;const C=v/f*l;this.min=-C,this.max=l+C}insert(l,f,v,w,C){this._forEachCell(f,v,w,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(w),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,f,v,w,C,A){this.cells[C].push(A)}query(l,f,v,w,C){const A=this.min,k=this.max;if(l<=A&&f<=A&&k<=v&&k<=w&&!C)return Array.prototype.slice.call(this.keys);{const O=[];return this._forEachCell(l,f,v,w,this._queryCell,O,{},C),O}}_queryCell(l,f,v,w,C,A,k,O){const $=this.cells[C];if($!==null){const G=this.keys,X=this.bboxes;for(let K=0;K<$.length;K++){const Q=$[K];if(k[Q]===void 0){const ee=4*Q;(O?O(X[ee+0],X[ee+1],X[ee+2],X[ee+3]):l<=X[ee+2]&&f<=X[ee+3]&&v>=X[ee+0]&&w>=X[ee+1])?(k[Q]=!0,A.push(G[Q])):k[Q]=!1}}}}_forEachCell(l,f,v,w,C,A,k,O){const $=this._convertToCellCoord(l),G=this._convertToCellCoord(f),X=this._convertToCellCoord(v),K=this._convertToCellCoord(w);for(let Q=$;Q<=X;Q++)for(let ee=G;ee<=K;ee++){const ye=this.d*ee+Q;if((!O||O(this._convertFromCellCoord(Q),this._convertFromCellCoord(ee),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ee+1)))&&C.call(this,l,f,v,w,ye,A,k,O))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,f=3+this.cells.length+1+1;let v=0;for(let A=0;A<this.cells.length;A++)v+=this.cells[A].length;const w=new Int32Array(f+v+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let C=f;for(let A=0;A<l.length;A++){const k=l[A];w[3+A]=C,w.set(k,C),C+=k.length}return w[3+l.length]=C,w.set(this.keys,C),C+=this.keys.length,w[3+l.length+1]=C,w.set(this.bboxes,C),C+=this.bboxes.length,w.buffer}static serialize(l,f){const v=l.toArrayBuffer();return f&&f.push(v),{buffer:v}}static deserialize(l){return new $u(l.buffer)}}const yo={};function Mt(c,l,f={}){if(yo[c])throw new Error(`${c} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:c,writeable:!1}),yo[c]={klass:l,omit:f.omit||[],shallow:f.shallow||[]}}Mt("Object",Object),Mt("TransferableGridIndex",$u),Mt("Color",ie),Mt("Error",Error),Mt("AJAXError",ge),Mt("ResolvedImage",Ce),Mt("StylePropertyFunction",_h),Mt("StyleExpression",yh,{omit:["_evaluator"]}),Mt("ZoomDependentExpression",Ed),Mt("ZoomConstantExpression",Iu),Mt("CompoundExpression",qr,{omit:["_evaluate"]});for(const c in Cl)Cl[c]._classRegistryKey||Mt(`Expression_${c}`,Cl[c]);function eg(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Is(c,l){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(eg(c)||ae(c))return l&&l.push(c),c;if(ArrayBuffer.isView(c)){const f=c;return l&&l.push(f.buffer),f}if(c instanceof ImageData)return l&&l.push(c.data.buffer),c;if(Array.isArray(c)){const f=[];for(const v of c)f.push(Is(v,l));return f}if(typeof c=="object"){const f=c.constructor,v=f._classRegistryKey;if(!v)throw new Error("can't serialize object of unregistered class");if(!yo[v])throw new Error(`${v} is not registered.`);const w=f.serialize?f.serialize(c,l):{};if(f.serialize){if(l&&w===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in c){if(!c.hasOwnProperty(C)||yo[v].omit.indexOf(C)>=0)continue;const A=c[C];w[C]=yo[v].shallow.indexOf(C)>=0?A:Is(A,l)}c instanceof Error&&(w.message=c.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return v!=="Object"&&(w.$name=v),w}throw new Error("can't serialize object of type "+typeof c)}function Wo(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||eg(c)||ae(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(Wo);if(typeof c=="object"){const l=c.$name||"Object";if(!yo[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:f}=yo[l];if(!f)throw new Error(`can't deserialize unregistered class ${l}`);if(f.deserialize)return f.deserialize(c);const v=Object.create(f.prototype);for(const w of Object.keys(c)){if(w==="$name")continue;const C=c[w];v[w]=yo[l].shallow.indexOf(w)>=0?C:Wo(C)}return v}throw new Error("can't deserialize object of type "+typeof c)}class Pd{constructor(){this.first=!0}update(l,f){const v=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=f),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=v,!0))}}const yt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Th(c){for(const l of c)if(Ld(l.charCodeAt(0)))return!0;return!1}function L1(c){for(const l of c)if(!Dd(l.charCodeAt(0)))return!1;return!0}function Dd(c){return!(yt.Arabic(c)||yt["Arabic Supplement"](c)||yt["Arabic Extended-A"](c)||yt["Arabic Presentation Forms-A"](c)||yt["Arabic Presentation Forms-B"](c))}function Ld(c){return!(c!==746&&c!==747&&(c<4352||!(yt["Bopomofo Extended"](c)||yt.Bopomofo(c)||yt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||yt["CJK Compatibility Ideographs"](c)||yt["CJK Compatibility"](c)||yt["CJK Radicals Supplement"](c)||yt["CJK Strokes"](c)||!(!yt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||yt["CJK Unified Ideographs Extension A"](c)||yt["CJK Unified Ideographs"](c)||yt["Enclosed CJK Letters and Months"](c)||yt["Hangul Compatibility Jamo"](c)||yt["Hangul Jamo Extended-A"](c)||yt["Hangul Jamo Extended-B"](c)||yt["Hangul Jamo"](c)||yt["Hangul Syllables"](c)||yt.Hiragana(c)||yt["Ideographic Description Characters"](c)||yt.Kanbun(c)||yt["Kangxi Radicals"](c)||yt["Katakana Phonetic Extensions"](c)||yt.Katakana(c)&&c!==12540||!(!yt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!yt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||yt["Unified Canadian Aboriginal Syllabics"](c)||yt["Unified Canadian Aboriginal Syllabics Extended"](c)||yt["Vertical Forms"](c)||yt["Yijing Hexagram Symbols"](c)||yt["Yi Syllables"](c)||yt["Yi Radicals"](c))))}function tg(c){return!(Ld(c)||function(l){return!!(yt["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||yt["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||yt["Letterlike Symbols"](l)||yt["Number Forms"](l)||yt["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||yt["Control Pictures"](l)&&l!==9251||yt["Optical Character Recognition"](l)||yt["Enclosed Alphanumerics"](l)||yt["Geometric Shapes"](l)||yt["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||yt["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||yt["CJK Symbols and Punctuation"](l)||yt.Katakana(l)||yt["Private Use Area"](l)||yt["CJK Compatibility Forms"](l)||yt["Small Form Variants"](l)||yt["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(c))}function rg(c){return c>=1424&&c<=2303||yt["Arabic Presentation Forms-A"](c)||yt["Arabic Presentation Forms-B"](c)}function k1(c,l){return!(!l&&rg(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||yt.Khmer(c))}function ng(c){for(const l of c)if(rg(l.charCodeAt(0)))return!0;return!1}const kd="deferred",Rd="loading",Od="loaded";let zd=null,Li="unavailable",Xo=null;const ig=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Li="error"),zd&&zd(c)};function Dl(){Bd.fire(new Wt("pluginStateChange",{pluginStatus:Li,pluginURL:Xo}))}const Bd=new wr,Nu=function(){return Li},ag=function(){if(Li!==kd||!Xo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Li=Rd,Dl(),Xo&&rt({url:Xo},c=>{c?ig(c):(Li=Od,Dl())})},ca={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Li===Od||ca.applyArabicShaping!=null,isLoading:()=>Li===Rd,setState(c){if(!j())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Li=c.pluginStatus,Xo=c.pluginURL},isParsed(){if(!j())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ca.applyArabicShaping!=null&&ca.processBidirectionalText!=null&&ca.processStyledBidirectionalText!=null},getPluginURL(){if(!j())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Xo}};class hn{constructor(l,f){this.zoom=l,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pd,this.transition={})}isSupportedScript(l){return function(f,v){for(const w of f)if(!k1(w.charCodeAt(0),v))return!1;return!0}(l,ca.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,f=l-Math.floor(l),v=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*f}}}class Vu{constructor(l,f){this.property=l,this.value=f,this.expression=function(v,w){if(Kr(v))return new _h(v,w);if(Au(v)){const C=Hv(v,w);if(C.result==="error")throw new Error(C.value.map(A=>`${A.key}: ${A.message}`).join(", "));return C.value}{let C=v;return w.type==="color"&&typeof v=="string"?C=ie.parse(v):w.type!=="padding"||typeof v!="number"&&!Array.isArray(v)||(C=xe.parse(v)),{kind:"constant",evaluate:()=>C}}}(f===void 0?l.specification.default:f,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,f,v){return this.property.possiblyEvaluate(this,l,f,v)}}class Ch{constructor(l){this.property=l,this.value=new Vu(l,void 0)}transitioned(l,f){return new sg(this.property,this.value,f,T({},l.transition,this.transition),l.now)}untransitioned(){return new sg(this.property,this.value,null,{},0)}}class og{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return R(this._values[l].value.value)}setValue(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Ch(this._values[l].property)),this._values[l].value=new Vu(this._values[l].property,f===null?void 0:R(f))}getTransition(l){return R(this._values[l].transition)}setTransition(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Ch(this._values[l].property)),this._values[l].transition=R(f)||void 0}serialize(){const l={};for(const f of Object.keys(this._values)){const v=this.getValue(f);v!==void 0&&(l[f]=v);const w=this.getTransition(f);w!==void 0&&(l[`${f}-transition`]=w)}return l}transitioned(l,f){const v=new lg(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].transitioned(l,f._values[w]);return v}untransitioned(){const l=new lg(this._properties);for(const f of Object.keys(this._values))l._values[f]=this._values[f].untransitioned();return l}}class sg{constructor(l,f,v,w,C){this.property=l,this.value=f,this.begin=C+w.delay||0,this.end=this.begin+w.duration||0,l.specification.transition&&(w.delay||w.duration)&&(this.prior=v)}possiblyEvaluate(l,f,v){const w=l.now||0,C=this.value.possiblyEvaluate(l,f,v),A=this.prior;if(A){if(w>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(w<this.begin)return A.possiblyEvaluate(l,f,v);{const k=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(A.possiblyEvaluate(l,f,v),C,function(O){if(O<=0)return 0;if(O>=1)return 1;const $=O*O,G=$*O;return 4*(O<.5?G:3*(O-$)+G-.75)}(k))}}return C}}class lg{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,f,v){const w=new Uu(this._properties);for(const C of Object.keys(this._values))w._values[C]=this._values[C].possiblyEvaluate(l,f,v);return w}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class R1{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}getValue(l){return R(this._values[l].value)}setValue(l,f){this._values[l]=new Vu(this._values[l].property,f===null?void 0:R(f))}serialize(){const l={};for(const f of Object.keys(this._values)){const v=this.getValue(f);v!==void 0&&(l[f]=v)}return l}possiblyEvaluate(l,f,v){const w=new Uu(this._properties);for(const C of Object.keys(this._values))w._values[C]=this._values[C].possiblyEvaluate(l,f,v);return w}}class ja{constructor(l,f,v){this.property=l,this.value=f,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,f,v,w){return this.property.evaluate(this.value,this.parameters,l,f,v,w)}}class Uu{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Ot{constructor(l){this.specification=l}possiblyEvaluate(l,f){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(f)}interpolate(l,f,v){const w=Su[this.specification.type];return w?w(l,f,v):l}}class qt{constructor(l,f){this.specification=l,this.overrides=f}possiblyEvaluate(l,f,v,w){return new ja(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(f,null,{},v,w)}:l.expression,f)}interpolate(l,f,v){if(l.value.kind!=="constant"||f.value.kind!=="constant")return l;if(l.value.value===void 0||f.value.value===void 0)return new ja(this,{kind:"constant",value:void 0},l.parameters);const w=Su[this.specification.type];return w?new ja(this,{kind:"constant",value:w(l.value.value,f.value.value,v)},l.parameters):l}evaluate(l,f,v,w,C,A){return l.kind==="constant"?l.value:l.evaluate(f,v,w,C,A)}}class Ll extends qt{possiblyEvaluate(l,f,v,w){if(l.value===void 0)return new ja(this,{kind:"constant",value:void 0},f);if(l.expression.kind==="constant"){const C=l.expression.evaluate(f,null,{},v,w),A=l.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,k=this._calculate(A,A,A,f);return new ja(this,{kind:"constant",value:k},f)}if(l.expression.kind==="camera"){const C=this._calculate(l.expression.evaluate({zoom:f.zoom-1}),l.expression.evaluate({zoom:f.zoom}),l.expression.evaluate({zoom:f.zoom+1}),f);return new ja(this,{kind:"constant",value:C},f)}return new ja(this,l.expression,f)}evaluate(l,f,v,w,C,A){if(l.kind==="source"){const k=l.evaluate(f,v,w,C,A);return this._calculate(k,k,k,f)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(f.zoom)-1},v,w),l.evaluate({zoom:Math.floor(f.zoom)},v,w),l.evaluate({zoom:Math.floor(f.zoom)+1},v,w),f):l.value}_calculate(l,f,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:v,to:f}}interpolate(l){return l}}class Fd{constructor(l){this.specification=l}possiblyEvaluate(l,f,v,w){if(l.value!==void 0){if(l.expression.kind==="constant"){const C=l.expression.evaluate(f,null,{},v,w);return this._calculate(C,C,C,f)}return this._calculate(l.expression.evaluate(new hn(Math.floor(f.zoom-1),f)),l.expression.evaluate(new hn(Math.floor(f.zoom),f)),l.expression.evaluate(new hn(Math.floor(f.zoom+1),f)),f)}}_calculate(l,f,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:v,to:f}}interpolate(l){return l}}class Zo{constructor(l){this.specification=l}possiblyEvaluate(l,f,v,w){return!!l.expression.evaluate(f,null,{},v,w)}interpolate(){return!1}}class ni{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in l){const v=l[f];v.specification.overridable&&this.overridableProperties.push(f);const w=this.defaultPropertyValues[f]=new Vu(v,void 0),C=this.defaultTransitionablePropertyValues[f]=new Ch(v);this.defaultTransitioningPropertyValues[f]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=w.possiblyEvaluate({})}}}Mt("DataDrivenProperty",qt),Mt("DataConstantProperty",Ot),Mt("CrossFadedDataDrivenProperty",Ll),Mt("CrossFadedProperty",Fd),Mt("ColorRampProperty",Zo);const Yo="-transition";class Ga extends wr{constructor(l,f){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),f.layout&&(this._unevaluatedLayout=new R1(f.layout)),f.paint)){this._transitionablePaint=new og(f.paint);for(const v in l.paint)this.setPaintProperty(v,l.paint[v],{validate:!1});for(const v in l.layout)this.setLayoutProperty(v,l.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Uu(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,f,v={}){f!=null&&this._validate(D1,`layers.${this.id}.layout.${l}`,l,f,v)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,f):this.visibility=f)}getPaintProperty(l){return l.endsWith(Yo)?this._transitionablePaint.getTransition(l.slice(0,-Yo.length)):this._transitionablePaint.getValue(l)}setPaintProperty(l,f,v={}){if(f!=null&&this._validate(P1,`layers.${this.id}.paint.${l}`,l,f,v))return!1;if(l.endsWith(Yo))return this._transitionablePaint.setTransition(l.slice(0,-Yo.length),f||void 0),!1;{const w=this._transitionablePaint._values[l],C=w.property.specification["property-type"]==="cross-faded-data-driven",A=w.value.isDataDriven(),k=w.value;this._transitionablePaint.setValue(l,f),this._handleSpecialPaintPropertyUpdate(l);const O=this._transitionablePaint._values[l].value;return O.isDataDriven()||A||C||this._handleOverridablePaintPropertyUpdate(l,k,O)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,f,v){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,f){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,f)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),D(l,(f,v)=>!(f===void 0||v==="layout"&&!Object.keys(f).length||v==="paint"&&!Object.keys(f).length))}_validate(l,f,v,w,C={}){return(!C||C.validate!==!1)&&Sh(this,l.call(Fu,{key:f,layerType:this.type,objectKey:v,value:w,styleSpec:Be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const f=this.paint.get(l);if(f instanceof ja&&tn(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const ug={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ko{constructor(l,f){this._structArray=l,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class wn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,f){return l._trim(),f&&(l.isTransferred=!0,f.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const f=Object.create(this.prototype);return f.arrayBuffer=l.arrayBuffer,f.length=l.length,f.capacity=l.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Dn(c,l=1){let f=0,v=0;return{members:c.map(w=>{const C=ug[w.type].BYTES_PER_ELEMENT,A=f=$d(f,Math.max(l,C)),k=w.components||1;return v=Math.max(v,C),f+=C*k,{name:w.name,type:w.type,components:k,offset:A}}),size:$d(f,Math.max(v,l)),alignment:l}}function $d(c,l){return Math.ceil(c/l)*l}class Ps extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f){const v=this.length;return this.resize(v+1),this.emplace(v,l,f)}emplace(l,f,v){const w=2*l;return this.int16[w+0]=f,this.int16[w+1]=v,l}}Ps.prototype.bytesPerElement=4,Mt("StructArrayLayout2i4",Ps);class b extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,v,w){const C=this.length;return this.resize(C+1),this.emplace(C,l,f,v,w)}emplace(l,f,v,w,C){const A=4*l;return this.int16[A+0]=f,this.int16[A+1]=v,this.int16[A+2]=w,this.int16[A+3]=C,l}}b.prototype.bytesPerElement=8,Mt("StructArrayLayout4i8",b);class u extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,v,w,C,A){const k=this.length;return this.resize(k+1),this.emplace(k,l,f,v,w,C,A)}emplace(l,f,v,w,C,A,k){const O=6*l;return this.int16[O+0]=f,this.int16[O+1]=v,this.int16[O+2]=w,this.int16[O+3]=C,this.int16[O+4]=A,this.int16[O+5]=k,l}}u.prototype.bytesPerElement=12,Mt("StructArrayLayout2i4i12",u);class p extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,v,w,C,A){const k=this.length;return this.resize(k+1),this.emplace(k,l,f,v,w,C,A)}emplace(l,f,v,w,C,A,k){const O=4*l,$=8*l;return this.int16[O+0]=f,this.int16[O+1]=v,this.uint8[$+4]=w,this.uint8[$+5]=C,this.uint8[$+6]=A,this.uint8[$+7]=k,l}}p.prototype.bytesPerElement=8,Mt("StructArrayLayout2i4ub8",p);class _ extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f){const v=this.length;return this.resize(v+1),this.emplace(v,l,f)}emplace(l,f,v){const w=2*l;return this.float32[w+0]=f,this.float32[w+1]=v,l}}_.prototype.bytesPerElement=8,Mt("StructArrayLayout2f8",_);class S extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,v,w,C,A,k,O,$,G){const X=this.length;return this.resize(X+1),this.emplace(X,l,f,v,w,C,A,k,O,$,G)}emplace(l,f,v,w,C,A,k,O,$,G,X){const K=10*l;return this.uint16[K+0]=f,this.uint16[K+1]=v,this.uint16[K+2]=w,this.uint16[K+3]=C,this.uint16[K+4]=A,this.uint16[K+5]=k,this.uint16[K+6]=O,this.uint16[K+7]=$,this.uint16[K+8]=G,this.uint16[K+9]=X,l}}S.prototype.bytesPerElement=20,Mt("StructArrayLayout10ui20",S);class E extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,v,w,C,A,k,O,$,G,X,K){const Q=this.length;return this.resize(Q+1),this.emplace(Q,l,f,v,w,C,A,k,O,$,G,X,K)}emplace(l,f,v,w,C,A,k,O,$,G,X,K,Q){const ee=12*l;return this.int16[ee+0]=f,this.int16[ee+1]=v,this.int16[ee+2]=w,this.int16[ee+3]=C,this.uint16[ee+4]=A,this.uint16[ee+5]=k,this.uint16[ee+6]=O,this.uint16[ee+7]=$,this.int16[ee+8]=G,this.int16[ee+9]=X,this.int16[ee+10]=K,this.int16[ee+11]=Q,l}}E.prototype.bytesPerElement=24,Mt("StructArrayLayout4i4ui4i24",E);class L extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,l,f,v)}emplace(l,f,v,w){const C=3*l;return this.float32[C+0]=f,this.float32[C+1]=v,this.float32[C+2]=w,l}}L.prototype.bytesPerElement=12,Mt("StructArrayLayout3f12",L);class z extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint32[1*l+0]=f,l}}z.prototype.bytesPerElement=4,Mt("StructArrayLayout1ul4",z);class F extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,v,w,C,A,k,O,$){const G=this.length;return this.resize(G+1),this.emplace(G,l,f,v,w,C,A,k,O,$)}emplace(l,f,v,w,C,A,k,O,$,G){const X=10*l,K=5*l;return this.int16[X+0]=f,this.int16[X+1]=v,this.int16[X+2]=w,this.int16[X+3]=C,this.int16[X+4]=A,this.int16[X+5]=k,this.uint32[K+3]=O,this.uint16[X+8]=$,this.uint16[X+9]=G,l}}F.prototype.bytesPerElement=20,Mt("StructArrayLayout6i1ul2ui20",F);class N extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,v,w,C,A){const k=this.length;return this.resize(k+1),this.emplace(k,l,f,v,w,C,A)}emplace(l,f,v,w,C,A,k){const O=6*l;return this.int16[O+0]=f,this.int16[O+1]=v,this.int16[O+2]=w,this.int16[O+3]=C,this.int16[O+4]=A,this.int16[O+5]=k,l}}N.prototype.bytesPerElement=12,Mt("StructArrayLayout2i2i2i12",N);class W extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,v,w,C){const A=this.length;return this.resize(A+1),this.emplace(A,l,f,v,w,C)}emplace(l,f,v,w,C,A){const k=4*l,O=8*l;return this.float32[k+0]=f,this.float32[k+1]=v,this.float32[k+2]=w,this.int16[O+6]=C,this.int16[O+7]=A,l}}W.prototype.bytesPerElement=16,Mt("StructArrayLayout2f1f2i16",W);class Y extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,v,w){const C=this.length;return this.resize(C+1),this.emplace(C,l,f,v,w)}emplace(l,f,v,w,C){const A=12*l,k=3*l;return this.uint8[A+0]=f,this.uint8[A+1]=v,this.float32[k+1]=w,this.float32[k+2]=C,l}}Y.prototype.bytesPerElement=12,Mt("StructArrayLayout2ub2f12",Y);class J extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,l,f,v)}emplace(l,f,v,w){const C=3*l;return this.uint16[C+0]=f,this.uint16[C+1]=v,this.uint16[C+2]=w,l}}J.prototype.bytesPerElement=6,Mt("StructArrayLayout3ui6",J);class fe extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,v,w,C,A,k,O,$,G,X,K,Q,ee,ye,me,De){const $e=this.length;return this.resize($e+1),this.emplace($e,l,f,v,w,C,A,k,O,$,G,X,K,Q,ee,ye,me,De)}emplace(l,f,v,w,C,A,k,O,$,G,X,K,Q,ee,ye,me,De,$e){const Me=24*l,Oe=12*l,Je=48*l;return this.int16[Me+0]=f,this.int16[Me+1]=v,this.uint16[Me+2]=w,this.uint16[Me+3]=C,this.uint32[Oe+2]=A,this.uint32[Oe+3]=k,this.uint32[Oe+4]=O,this.uint16[Me+10]=$,this.uint16[Me+11]=G,this.uint16[Me+12]=X,this.float32[Oe+7]=K,this.float32[Oe+8]=Q,this.uint8[Je+36]=ee,this.uint8[Je+37]=ye,this.uint8[Je+38]=me,this.uint32[Oe+10]=De,this.int16[Me+22]=$e,l}}fe.prototype.bytesPerElement=48,Mt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",fe);class se extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,v,w,C,A,k,O,$,G,X,K,Q,ee,ye,me,De,$e,Me,Oe,Je,Ze,At,Dt,_t,pt,ct,xt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,l,f,v,w,C,A,k,O,$,G,X,K,Q,ee,ye,me,De,$e,Me,Oe,Je,Ze,At,Dt,_t,pt,ct,xt)}emplace(l,f,v,w,C,A,k,O,$,G,X,K,Q,ee,ye,me,De,$e,Me,Oe,Je,Ze,At,Dt,_t,pt,ct,xt,gt){const ot=34*l,Ht=17*l;return this.int16[ot+0]=f,this.int16[ot+1]=v,this.int16[ot+2]=w,this.int16[ot+3]=C,this.int16[ot+4]=A,this.int16[ot+5]=k,this.int16[ot+6]=O,this.int16[ot+7]=$,this.uint16[ot+8]=G,this.uint16[ot+9]=X,this.uint16[ot+10]=K,this.uint16[ot+11]=Q,this.uint16[ot+12]=ee,this.uint16[ot+13]=ye,this.uint16[ot+14]=me,this.uint16[ot+15]=De,this.uint16[ot+16]=$e,this.uint16[ot+17]=Me,this.uint16[ot+18]=Oe,this.uint16[ot+19]=Je,this.uint16[ot+20]=Ze,this.uint16[ot+21]=At,this.uint16[ot+22]=Dt,this.uint32[Ht+12]=_t,this.float32[Ht+13]=pt,this.float32[Ht+14]=ct,this.float32[Ht+15]=xt,this.float32[Ht+16]=gt,l}}se.prototype.bytesPerElement=68,Mt("StructArrayLayout8i15ui1ul4f68",se);class he extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.float32[1*l+0]=f,l}}he.prototype.bytesPerElement=4,Mt("StructArrayLayout1f4",he);class we extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,l,f,v)}emplace(l,f,v,w){const C=3*l;return this.int16[C+0]=f,this.int16[C+1]=v,this.int16[C+2]=w,l}}we.prototype.bytesPerElement=6,Mt("StructArrayLayout3i6",we);class Ae extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,l,f,v)}emplace(l,f,v,w){const C=4*l;return this.uint32[2*l+0]=f,this.uint16[C+2]=v,this.uint16[C+3]=w,l}}Ae.prototype.bytesPerElement=8,Mt("StructArrayLayout1ul2ui8",Ae);class Le extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f){const v=this.length;return this.resize(v+1),this.emplace(v,l,f)}emplace(l,f,v){const w=2*l;return this.uint16[w+0]=f,this.uint16[w+1]=v,l}}Le.prototype.bytesPerElement=4,Mt("StructArrayLayout2ui4",Le);class pe extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint16[1*l+0]=f,l}}pe.prototype.bytesPerElement=2,Mt("StructArrayLayout1ui2",pe);class Fe extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,v,w){const C=this.length;return this.resize(C+1),this.emplace(C,l,f,v,w)}emplace(l,f,v,w,C){const A=4*l;return this.float32[A+0]=f,this.float32[A+1]=v,this.float32[A+2]=w,this.float32[A+3]=C,l}}Fe.prototype.bytesPerElement=16,Mt("StructArrayLayout4f16",Fe);class Re extends Ko{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ve(this.anchorPointX,this.anchorPointY)}}Re.prototype.size=20;class Ge extends F{get(l){return new Re(this,l)}}Mt("CollisionBoxArray",Ge);class We extends Ko{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}We.prototype.size=48;class nt extends fe{get(l){return new We(this,l)}}Mt("PlacedSymbolArray",nt);class He extends Ko{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}He.prototype.size=68;class wt extends se{get(l){return new He(this,l)}}Mt("SymbolInstanceArray",wt);class dt extends he{getoffsetX(l){return this.float32[1*l+0]}}Mt("GlyphOffsetArray",dt);class Et extends we{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}Mt("SymbolLineVertexArray",Et);class ir extends Ko{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ir.prototype.size=8;class lr extends Ae{get(l){return new ir(this,l)}}Mt("FeatureIndexArray",lr);class Ut extends Ps{}class $r extends Ps{}class Nr extends Ps{}class gr extends u{}class Cr extends p{}class jr extends _{}class Xn extends S{}class qa extends E{}class Aa extends L{}class Wa extends z{}class Jo extends N{}class ha extends Y{}class ki extends J{}class _o extends Le{}const Eh=Dn([{name:"a_pos",components:2,type:"Int16"}],4),{members:$n}=Eh;class hr{constructor(l=[]){this.segments=l}prepareSegment(l,f,v,w){let C=this.segments[this.segments.length-1];return l>hr.MAX_VERTEX_ARRAY_LENGTH&&H(`Max vertices per segment is ${hr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!C||C.vertexLength+l>hr.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==w)&&(C={vertexOffset:f.length,primitiveOffset:v.length,vertexLength:0,primitiveLength:0},w!==void 0&&(C.sortKey=w),this.segments.push(C)),C}get(){return this.segments}destroy(){for(const l of this.segments)for(const f in l.vaos)l.vaos[f].destroy()}static simpleSegment(l,f,v,w){return new hr([{vertexOffset:l,primitiveOffset:f,vertexLength:v,primitiveLength:w,vaos:{},sortKey:0}])}}function Rr(c,l){return 256*(c=y(Math.floor(c),0,255))+y(Math.floor(l),0,255)}hr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Mt("SegmentVector",hr);const Zn=Dn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Yn={exports:{}},fn={exports:{}};fn.exports=function(c,l){var f,v,w,C,A,k,O,$;for(v=c.length-(f=3&c.length),w=l,A=3432918353,k=461845907,$=0;$<v;)O=255&c.charCodeAt($)|(255&c.charCodeAt(++$))<<8|(255&c.charCodeAt(++$))<<16|(255&c.charCodeAt(++$))<<24,++$,w=27492+(65535&(C=5*(65535&(w=(w^=O=(65535&(O=(O=(65535&O)*A+(((O>>>16)*A&65535)<<16)&4294967295)<<15|O>>>17))*k+(((O>>>16)*k&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(O=0,f){case 3:O^=(255&c.charCodeAt($+2))<<16;case 2:O^=(255&c.charCodeAt($+1))<<8;case 1:w^=O=(65535&(O=(O=(65535&(O^=255&c.charCodeAt($)))*A+(((O>>>16)*A&65535)<<16)&4294967295)<<15|O>>>17))*k+(((O>>>16)*k&65535)<<16)&4294967295}return w^=c.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0};var fa={exports:{}};fa.exports=function(c,l){for(var f,v=c.length,w=l^v,C=0;v>=4;)f=1540483477*(65535&(f=255&c.charCodeAt(C)|(255&c.charCodeAt(++C))<<8|(255&c.charCodeAt(++C))<<16|(255&c.charCodeAt(++C))<<24))+((1540483477*(f>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),v-=4,++C;switch(v){case 3:w^=(255&c.charCodeAt(C+2))<<16;case 2:w^=(255&c.charCodeAt(C+1))<<8;case 1:w=1540483477*(65535&(w^=255&c.charCodeAt(C)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0};var Ds=fn.exports,Nd=fa.exports;Yn.exports=Ds,Yn.exports.murmur3=Ds,Yn.exports.murmur2=Nd;class kl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,f,v,w){this.ids.push(cg(l)),this.positions.push(f,v,w)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=cg(l);let v=0,w=this.ids.length-1;for(;v<w;){const A=v+w>>1;this.ids[A]>=f?w=A:v=A+1}const C=[];for(;this.ids[v]===f;)C.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return C}static serialize(l,f){const v=new Float64Array(l.ids),w=new Uint32Array(l.positions);return Vd(v,w,0,v.length-1),f&&f.push(v.buffer,w.buffer),{ids:v,positions:w}}static deserialize(l){const f=new kl;return f.ids=l.ids,f.positions=l.positions,f.indexed=!0,f}}function cg(c){const l=+c;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Yn.exports(String(c))}function Vd(c,l,f,v){for(;f<v;){const w=c[f+v>>1];let C=f-1,A=v+1;for(;;){do C++;while(c[C]<w);do A--;while(c[A]>w);if(C>=A)break;Qo(c,C,A),Qo(l,3*C,3*A),Qo(l,3*C+1,3*A+1),Qo(l,3*C+2,3*A+2)}A-f<v-A?(Vd(c,l,f,A),f=A+1):(Vd(c,l,A+1,v),v=A)}}function Qo(c,l,f){const v=c[l];c[l]=c[f],c[f]=v}Mt("FeaturePositionMap",kl);class Ls{constructor(l,f){this.gl=l.gl,this.location=f}}class ks extends Ls{constructor(l,f){super(l,f),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Ah extends Ls{constructor(l,f){super(l,f),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class AE extends Ls{constructor(l,f){super(l,f),this.current=ie.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const R8=new Float32Array(16);function O1(c){return[Rr(255*c.r,255*c.g),Rr(255*c.b,255*c.a)]}class Ud{constructor(l,f,v){this.value=l,this.uniformNames=f.map(w=>`u_${w}`),this.type=v}setUniform(l,f,v){l.set(v.constantOr(this.value))}getBinding(l,f,v){return this.type==="color"?new AE(l,f):new ks(l,f)}}class Mh{constructor(l,f){this.uniformNames=f.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=l.tlbr}setUniform(l,f,v,w){const C=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&l.set(C)}getBinding(l,f,v){return v.substr(0,9)==="u_pattern"?new Ah(l,f):new ks(l,f)}}class Rs{constructor(l,f,v,w){this.expression=l,this.type=v,this.maxValue=0,this.paintVertexAttributes=f.map(C=>({name:`a_${C}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(l,f,v,w,C){const A=this.paintVertexArray.length,k=this.expression.evaluate(new hn(0),f,{},w,[],C);this.paintVertexArray.resize(l),this._setPaintValue(A,l,k)}updatePaintArray(l,f,v,w){const C=this.expression.evaluate({zoom:0},v,w);this._setPaintValue(l,f,C)}_setPaintValue(l,f,v){if(this.type==="color"){const w=O1(v);for(let C=l;C<f;C++)this.paintVertexArray.emplace(C,w[0],w[1])}else{for(let w=l;w<f;w++)this.paintVertexArray.emplace(w,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xo{constructor(l,f,v,w,C,A){this.expression=l,this.uniformNames=f.map(k=>`u_${k}_t`),this.type=v,this.useIntegerZoom=w,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=f.map(k=>({name:`a_${k}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new A}populatePaintArray(l,f,v,w,C){const A=this.expression.evaluate(new hn(this.zoom),f,{},w,[],C),k=this.expression.evaluate(new hn(this.zoom+1),f,{},w,[],C),O=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(O,l,A,k)}updatePaintArray(l,f,v,w){const C=this.expression.evaluate({zoom:this.zoom},v,w),A=this.expression.evaluate({zoom:this.zoom+1},v,w);this._setPaintValue(l,f,C,A)}_setPaintValue(l,f,v,w){if(this.type==="color"){const C=O1(v),A=O1(w);for(let k=l;k<f;k++)this.paintVertexArray.emplace(k,C[0],C[1],A[0],A[1])}else{for(let C=l;C<f;C++)this.paintVertexArray.emplace(C,v,w);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(w))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,f){const v=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,w=y(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);l.set(w)}getBinding(l,f,v){return new ks(l,f)}}class Rl{constructor(l,f,v,w,C,A){this.expression=l,this.type=f,this.useIntegerZoom=v,this.zoom=w,this.layerId=A,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(l,f,v){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(w,l,f.patterns&&f.patterns[this.layerId],v)}updatePaintArray(l,f,v,w,C){this._setPaintValues(l,f,v.patterns&&v.patterns[this.layerId],C)}_setPaintValues(l,f,v,w){if(!w||!v)return;const{min:C,mid:A,max:k}=v,O=w[C],$=w[A],G=w[k];if(O&&$&&G)for(let X=l;X<f;X++)this.zoomInPaintVertexArray.emplace(X,$.tl[0],$.tl[1],$.br[0],$.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],$.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(X,$.tl[0],$.tl[1],$.br[0],$.br[1],G.tl[0],G.tl[1],G.br[0],G.br[1],$.pixelRatio,G.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Zn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Zn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ME{constructor(l,f,v){this.binders={},this._buffers=[];const w=[];for(const C in l.paint._values){if(!v(C))continue;const A=l.paint.get(C);if(!(A instanceof ja&&tn(A.property.specification)))continue;const k=O8(C,l.type),O=A.value,$=A.property.specification.type,G=A.property.useIntegerZoom,X=A.property.specification["property-type"],K=X==="cross-faded"||X==="cross-faded-data-driven";if(O.kind==="constant")this.binders[C]=K?new Mh(O.value,k):new Ud(O.value,k,$),w.push(`/u_${C}`);else if(O.kind==="source"||K){const Q=IE(C,$,"source");this.binders[C]=K?new Rl(O,$,G,f,Q,l.id):new Rs(O,k,$,Q),w.push(`/a_${C}`)}else{const Q=IE(C,$,"composite");this.binders[C]=new xo(O,k,$,G,f,Q),w.push(`/z_${C}`)}}this.cacheKey=w.sort().join("")}getMaxValue(l){const f=this.binders[l];return f instanceof Rs||f instanceof xo?f.maxValue:0}populatePaintArrays(l,f,v,w,C){for(const A in this.binders){const k=this.binders[A];(k instanceof Rs||k instanceof xo||k instanceof Rl)&&k.populatePaintArray(l,f,v,w,C)}}setConstantPatternPositions(l,f){for(const v in this.binders){const w=this.binders[v];w instanceof Mh&&w.setConstantPatternPositions(l,f)}}updatePaintArrays(l,f,v,w,C){let A=!1;for(const k in l){const O=f.getPositions(k);for(const $ of O){const G=v.feature($.index);for(const X in this.binders){const K=this.binders[X];if((K instanceof Rs||K instanceof xo||K instanceof Rl)&&K.expression.isStateDependent===!0){const Q=w.paint.get(X);K.expression=Q.value,K.updatePaintArray($.start,$.end,G,l[k],C),A=!0}}}}return A}defines(){const l=[];for(const f in this.binders){const v=this.binders[f];(v instanceof Ud||v instanceof Mh)&&l.push(...v.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return l}getBinderAttributes(){const l=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof Rs||v instanceof xo)for(let w=0;w<v.paintVertexAttributes.length;w++)l.push(v.paintVertexAttributes[w].name);else if(v instanceof Rl)for(let w=0;w<Zn.members.length;w++)l.push(Zn.members[w].name)}return l}getBinderUniforms(){const l=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof Ud||v instanceof Mh||v instanceof xo)for(const w of v.uniformNames)l.push(w)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,f){const v=[];for(const w in this.binders){const C=this.binders[w];if(C instanceof Ud||C instanceof Mh||C instanceof xo){for(const A of C.uniformNames)if(f[A]){const k=C.getBinding(l,f[A],A);v.push({name:A,property:w,binding:k})}}}return v}setUniforms(l,f,v,w){for(const{name:C,property:A,binding:k}of f)this.binders[A].setUniform(k,w,v.get(A),C)}updatePaintBuffers(l){this._buffers=[];for(const f in this.binders){const v=this.binders[f];if(l&&v instanceof Rl){const w=l.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(v instanceof Rs||v instanceof xo)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(l){for(const f in this.binders){const v=this.binders[f];(v instanceof Rs||v instanceof xo||v instanceof Rl)&&v.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const f=this.binders[l];(f instanceof Rs||f instanceof xo||f instanceof Rl)&&f.destroy()}}}class Hu{constructor(l,f,v=()=>!0){this.programConfigurations={};for(const w of l)this.programConfigurations[w.id]=new ME(w,f,v);this.needsUpload=!1,this._featureMap=new kl,this._bufferOffset=0}populatePaintArrays(l,f,v,w,C,A){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(l,f,w,C,A);f.id!==void 0&&this._featureMap.add(f.id,v,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,f,v,w){for(const C of v)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(l,this._featureMap,f,C,w)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function O8(c,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${l}-`,"").replace(/-/g,"_")]}function IE(c,l,f){const v={color:{source:_,composite:Fe},number:{source:he,composite:_}},w=function(C){return{"line-pattern":{source:Xn,composite:Xn},"fill-pattern":{source:Xn,composite:Xn},"fill-extrusion-pattern":{source:Xn,composite:Xn}}[C]}(c);return w&&w[f]||v[l][f]}Mt("ConstantBinder",Ud),Mt("CrossFadedConstantBinder",Mh),Mt("SourceExpressionBinder",Rs),Mt("CrossFadedCompositeBinder",Rl),Mt("CompositeExpressionBinder",xo),Mt("ProgramConfiguration",ME,{omit:["_buffers"]}),Mt("ProgramConfigurationSet",Hu);var Nn=8192;const z1=Math.pow(2,14)-1,PE=-z1-1;function ju(c){const l=Nn/c.extent,f=c.loadGeometry();for(let v=0;v<f.length;v++){const w=f[v];for(let C=0;C<w.length;C++){const A=w[C],k=Math.round(A.x*l),O=Math.round(A.y*l);A.x=y(k,PE,z1),A.y=y(O,PE,z1),(k<A.x||k>A.x+1||O<A.y||O>A.y+1)&&H("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function Gu(c,l){return{type:c.type,id:c.id,properties:c.properties,geometry:l?ju(c):[]}}function hg(c,l,f,v,w){c.emplaceBack(2*l+(v+1)/2,2*f+(w+1)/2)}class B1{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new $r,this.indexArray=new ki,this.segments=new hr,this.programConfigurations=new Hu(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,v){const w=this.layers[0],C=[];let A=null,k=!1;w.type==="circle"&&(A=w.layout.get("circle-sort-key"),k=!A.isConstant());for(const{feature:O,id:$,index:G,sourceLayerIndex:X}of l){const K=this.layers[0]._featureFilter.needGeometry,Q=Gu(O,K);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),Q,v))continue;const ee=k?A.evaluate(Q,{},v):void 0,ye={id:$,properties:O.properties,type:O.type,sourceLayerIndex:X,index:G,geometry:K?Q.geometry:ju(O),patterns:{},sortKey:ee};C.push(ye)}k&&C.sort((O,$)=>O.sortKey-$.sortKey);for(const O of C){const{geometry:$,index:G,sourceLayerIndex:X}=O,K=l[G].feature;this.addFeature(O,$,G,v),f.featureIndex.insert(K,$,G,X,this.index)}}update(l,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,$n),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,f,v,w){for(const C of f)for(const A of C){const k=A.x,O=A.y;if(k<0||k>=Nn||O<0||O>=Nn)continue;const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),G=$.vertexLength;hg(this.layoutVertexArray,k,O,-1,-1),hg(this.layoutVertexArray,k,O,1,-1),hg(this.layoutVertexArray,k,O,1,1),hg(this.layoutVertexArray,k,O,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+3,G+2),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,{},w)}}function DE(c,l){for(let f=0;f<c.length;f++)if(Ih(l,c[f]))return!0;for(let f=0;f<l.length;f++)if(Ih(c,l[f]))return!0;return!!F1(c,l)}function z8(c,l,f){return!!Ih(c,l)||!!$1(l,c,f)}function LE(c,l){if(c.length===1)return RE(l,c[0]);for(let f=0;f<l.length;f++){const v=l[f];for(let w=0;w<v.length;w++)if(Ih(c,v[w]))return!0}for(let f=0;f<c.length;f++)if(RE(l,c[f]))return!0;for(let f=0;f<l.length;f++)if(F1(c,l[f]))return!0;return!1}function B8(c,l,f){if(c.length>1){if(F1(c,l))return!0;for(let v=0;v<l.length;v++)if($1(l[v],c,f))return!0}for(let v=0;v<c.length;v++)if($1(c[v],l,f))return!0;return!1}function F1(c,l){if(c.length===0||l.length===0)return!1;for(let f=0;f<c.length-1;f++){const v=c[f],w=c[f+1];for(let C=0;C<l.length-1;C++)if(F8(v,w,l[C],l[C+1]))return!0}return!1}function F8(c,l,f,v){return V(c,f,v)!==V(l,f,v)&&V(c,l,f)!==V(c,l,v)}function $1(c,l,f){const v=f*f;if(l.length===1)return c.distSqr(l[0])<v;for(let w=1;w<l.length;w++)if(kE(c,l[w-1],l[w])<v)return!0;return!1}function kE(c,l,f){const v=l.distSqr(f);if(v===0)return c.distSqr(l);const w=((c.x-l.x)*(f.x-l.x)+(c.y-l.y)*(f.y-l.y))/v;return c.distSqr(w<0?l:w>1?f:f.sub(l)._mult(w)._add(l))}function RE(c,l){let f,v,w,C=!1;for(let A=0;A<c.length;A++){f=c[A];for(let k=0,O=f.length-1;k<f.length;O=k++)v=f[k],w=f[O],v.y>l.y!=w.y>l.y&&l.x<(w.x-v.x)*(l.y-v.y)/(w.y-v.y)+v.x&&(C=!C)}return C}function Ih(c,l){let f=!1;for(let v=0,w=c.length-1;v<c.length;w=v++){const C=c[v],A=c[w];C.y>l.y!=A.y>l.y&&l.x<(A.x-C.x)*(l.y-C.y)/(A.y-C.y)+C.x&&(f=!f)}return f}function $8(c,l,f){const v=f[0],w=f[2];if(c.x<v.x&&l.x<v.x||c.x>w.x&&l.x>w.x||c.y<v.y&&l.y<v.y||c.y>w.y&&l.y>w.y)return!1;const C=V(c,l,f[0]);return C!==V(c,l,f[1])||C!==V(c,l,f[2])||C!==V(c,l,f[3])}function Hd(c,l,f){const v=l.paint.get(c).value;return v.kind==="constant"?v.value:f.programConfigurations.get(l.id).getMaxValue(c)}function fg(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function dg(c,l,f,v,w){if(!l[0]&&!l[1])return c;const C=ve.convert(l)._mult(w);f==="viewport"&&C._rotate(-v);const A=[];for(let k=0;k<c.length;k++)A.push(c[k].sub(C));return A}Mt("CircleBucket",B1,{omit:["layers"]});const N8=new ni({"circle-sort-key":new qt(Be.layout_circle["circle-sort-key"])});var V8={paint:new ni({"circle-radius":new qt(Be.paint_circle["circle-radius"]),"circle-color":new qt(Be.paint_circle["circle-color"]),"circle-blur":new qt(Be.paint_circle["circle-blur"]),"circle-opacity":new qt(Be.paint_circle["circle-opacity"]),"circle-translate":new Ot(Be.paint_circle["circle-translate"]),"circle-translate-anchor":new Ot(Be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ot(Be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ot(Be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new qt(Be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new qt(Be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new qt(Be.paint_circle["circle-stroke-opacity"])}),layout:N8},Ri=1e-6,Oi=typeof Float32Array<"u"?Float32Array:Array;function OE(){var c=new Oi(9);return Oi!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function N1(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function zE(c,l,f){var v=l[0],w=l[1],C=l[2],A=l[3],k=l[4],O=l[5],$=l[6],G=l[7],X=l[8],K=l[9],Q=l[10],ee=l[11],ye=l[12],me=l[13],De=l[14],$e=l[15],Me=f[0],Oe=f[1],Je=f[2],Ze=f[3];return c[0]=Me*v+Oe*k+Je*X+Ze*ye,c[1]=Me*w+Oe*O+Je*K+Ze*me,c[2]=Me*C+Oe*$+Je*Q+Ze*De,c[3]=Me*A+Oe*G+Je*ee+Ze*$e,c[4]=(Me=f[4])*v+(Oe=f[5])*k+(Je=f[6])*X+(Ze=f[7])*ye,c[5]=Me*w+Oe*O+Je*K+Ze*me,c[6]=Me*C+Oe*$+Je*Q+Ze*De,c[7]=Me*A+Oe*G+Je*ee+Ze*$e,c[8]=(Me=f[8])*v+(Oe=f[9])*k+(Je=f[10])*X+(Ze=f[11])*ye,c[9]=Me*w+Oe*O+Je*K+Ze*me,c[10]=Me*C+Oe*$+Je*Q+Ze*De,c[11]=Me*A+Oe*G+Je*ee+Ze*$e,c[12]=(Me=f[12])*v+(Oe=f[13])*k+(Je=f[14])*X+(Ze=f[15])*ye,c[13]=Me*w+Oe*O+Je*K+Ze*me,c[14]=Me*C+Oe*$+Je*Q+Ze*De,c[15]=Me*A+Oe*G+Je*ee+Ze*$e,c}Math.hypot||(Math.hypot=function(){for(var c=0,l=arguments.length;l--;)c+=arguments[l]*arguments[l];return Math.sqrt(c)});var jd,U8=zE;function BE(){var c=new Oi(3);return Oi!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function FE(c,l,f){var v=new Oi(3);return v[0]=c,v[1]=l,v[2]=f,v}function pg(c,l,f){var v=l[0],w=l[1],C=l[2],A=l[3];return c[0]=f[0]*v+f[4]*w+f[8]*C+f[12]*A,c[1]=f[1]*v+f[5]*w+f[9]*C+f[13]*A,c[2]=f[2]*v+f[6]*w+f[10]*C+f[14]*A,c[3]=f[3]*v+f[7]*w+f[11]*C+f[15]*A,c}function $E(){var c=new Oi(4);return Oi!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function NE(c,l){const f=pg([],[c.x,c.y,0,1],l);return new ve(f[0]/f[3],f[1]/f[3])}BE(),jd=new Oi(4),Oi!=Float32Array&&(jd[0]=0,jd[1]=0,jd[2]=0,jd[3]=0),BE(),FE(1,0,0),FE(0,1,0),$E(),$E(),OE(),function(){var c;c=new Oi(2),Oi!=Float32Array&&(c[0]=0,c[1]=0)}();class VE extends B1{}Mt("HeatmapBucket",VE,{omit:["layers"]});var H8={paint:new ni({"heatmap-radius":new qt(Be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new qt(Be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ot(Be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Zo(Be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ot(Be.paint_heatmap["heatmap-opacity"])})};function V1(c,{width:l,height:f},v,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==l*f*v)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${l*f*v}`)}else w=new Uint8Array(l*f*v);return c.width=l,c.height=f,c.data=w,c}function UE(c,{width:l,height:f},v){if(l===c.width&&f===c.height)return;const w=V1({},{width:l,height:f},v);U1(c,w,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,l),height:Math.min(c.height,f)},v),c.width=l,c.height=f,c.data=w.data}function U1(c,l,f,v,w,C){if(w.width===0||w.height===0)return l;if(w.width>c.width||w.height>c.height||f.x>c.width-w.width||f.y>c.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>l.width||w.height>l.height||v.x>l.width-w.width||v.y>l.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const A=c.data,k=l.data;if(A===k)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<w.height;O++){const $=((f.y+O)*c.width+f.x)*C,G=((v.y+O)*l.width+v.x)*C;for(let X=0;X<w.width*C;X++)k[G+X]=A[$+X]}return l}class Gd{constructor(l,f){V1(this,l,1,f)}resize(l){UE(this,l,1)}clone(){return new Gd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,v,w,C){U1(l,f,v,w,C,1)}}class Ma{constructor(l,f){V1(this,l,4,f)}resize(l){UE(this,l,4)}replace(l,f){f?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Ma({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,v,w,C){U1(l,f,v,w,C,4)}}function HE(c){const l={},f=c.resolution||256,v=c.clips?c.clips.length:1,w=c.image||new Ma({width:f,height:v});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const C=(A,k,O)=>{l[c.evaluationKey]=O;const $=c.expression.evaluate(l);w.data[A+k+0]=Math.floor(255*$.r/$.a),w.data[A+k+1]=Math.floor(255*$.g/$.a),w.data[A+k+2]=Math.floor(255*$.b/$.a),w.data[A+k+3]=Math.floor(255*$.a)};if(c.clips)for(let A=0,k=0;A<v;++A,k+=4*f)for(let O=0,$=0;O<f;O++,$+=4){const G=O/(f-1),{start:X,end:K}=c.clips[A];C(k,$,X*(1-G)+K*G)}else for(let A=0,k=0;A<f;A++,k+=4)C(0,k,A/(f-1));return w}Mt("AlphaImage",Gd),Mt("RGBAImage",Ma);var j8={paint:new ni({"hillshade-illumination-direction":new Ot(Be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ot(Be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ot(Be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ot(Be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ot(Be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ot(Be.paint_hillshade["hillshade-accent-color"])})};const G8=Dn([{name:"a_pos",components:2,type:"Int16"}],4),{members:q8}=G8;var mg={exports:{}};function vg(c,l,f){f=f||2;var v,w,C,A,k,O,$,G=l&&l.length,X=G?l[0]*f:c.length,K=jE(c,0,X,f,!0),Q=[];if(!K||K.next===K.prev)return Q;if(G&&(K=function(ye,me,De,$e){var Me,Oe,Je,Ze=[];for(Me=0,Oe=me.length;Me<Oe;Me++)(Je=jE(ye,me[Me]*$e,Me<Oe-1?me[Me+1]*$e:ye.length,$e,!1))===Je.next&&(Je.steiner=!0),Ze.push(eF(Je));for(Ze.sort(K8),Me=0;Me<Ze.length;Me++)De=J8(Ze[Me],De);return De}(c,l,K,f)),c.length>80*f){v=C=c[0],w=A=c[1];for(var ee=f;ee<X;ee+=f)(k=c[ee])<v&&(v=k),(O=c[ee+1])<w&&(w=O),k>C&&(C=k),O>A&&(A=O);$=($=Math.max(C-v,A-w))!==0?32767/$:0}return qd(K,Q,f,v,w,$,0),Q}function jE(c,l,f,v,w){var C,A;if(w===G1(c,l,f,v)>0)for(C=l;C<f;C+=v)A=WE(C,c[C],c[C+1],A);else for(C=f-v;C>=l;C-=v)A=WE(C,c[C],c[C+1],A);return A&&gg(A,A.next)&&(Xd(A),A=A.next),A}function qu(c,l){if(!c)return c;l||(l=c);var f,v=c;do if(f=!1,v.steiner||!gg(v,v.next)&&Mn(v.prev,v,v.next)!==0)v=v.next;else{if(Xd(v),(v=l=v.prev)===v.next)break;f=!0}while(f||v!==l);return l}function qd(c,l,f,v,w,C,A){if(c){!A&&C&&function(G,X,K,Q){var ee=G;do ee.z===0&&(ee.z=H1(ee.x,ee.y,X,K,Q)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==G);ee.prevZ.nextZ=null,ee.prevZ=null,function(ye){var me,De,$e,Me,Oe,Je,Ze,At,Dt=1;do{for(De=ye,ye=null,Oe=null,Je=0;De;){for(Je++,$e=De,Ze=0,me=0;me<Dt&&(Ze++,$e=$e.nextZ);me++);for(At=Dt;Ze>0||At>0&&$e;)Ze!==0&&(At===0||!$e||De.z<=$e.z)?(Me=De,De=De.nextZ,Ze--):(Me=$e,$e=$e.nextZ,At--),Oe?Oe.nextZ=Me:ye=Me,Me.prevZ=Oe,Oe=Me;De=$e}Oe.nextZ=null,Dt*=2}while(Je>1)}(ee)}(c,v,w,C);for(var k,O,$=c;c.prev!==c.next;)if(k=c.prev,O=c.next,C?X8(c,v,w,C):W8(c))l.push(k.i/f|0),l.push(c.i/f|0),l.push(O.i/f|0),Xd(c),c=O.next,$=O.next;else if((c=O)===$){A?A===1?qd(c=Z8(qu(c),l,f),l,f,v,w,C,2):A===2&&Y8(c,l,f,v,w,C):qd(qu(c),l,f,v,w,C,1);break}}}function W8(c){var l=c.prev,f=c,v=c.next;if(Mn(l,f,v)>=0)return!1;for(var w=l.x,C=f.x,A=v.x,k=l.y,O=f.y,$=v.y,G=w<C?w<A?w:A:C<A?C:A,X=k<O?k<$?k:$:O<$?O:$,K=w>C?w>A?w:A:C>A?C:A,Q=k>O?k>$?k:$:O>$?O:$,ee=v.next;ee!==l;){if(ee.x>=G&&ee.x<=K&&ee.y>=X&&ee.y<=Q&&Ph(w,k,C,O,A,$,ee.x,ee.y)&&Mn(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function X8(c,l,f,v){var w=c.prev,C=c,A=c.next;if(Mn(w,C,A)>=0)return!1;for(var k=w.x,O=C.x,$=A.x,G=w.y,X=C.y,K=A.y,Q=k<O?k<$?k:$:O<$?O:$,ee=G<X?G<K?G:K:X<K?X:K,ye=k>O?k>$?k:$:O>$?O:$,me=G>X?G>K?G:K:X>K?X:K,De=H1(Q,ee,l,f,v),$e=H1(ye,me,l,f,v),Me=c.prevZ,Oe=c.nextZ;Me&&Me.z>=De&&Oe&&Oe.z<=$e;){if(Me.x>=Q&&Me.x<=ye&&Me.y>=ee&&Me.y<=me&&Me!==w&&Me!==A&&Ph(k,G,O,X,$,K,Me.x,Me.y)&&Mn(Me.prev,Me,Me.next)>=0||(Me=Me.prevZ,Oe.x>=Q&&Oe.x<=ye&&Oe.y>=ee&&Oe.y<=me&&Oe!==w&&Oe!==A&&Ph(k,G,O,X,$,K,Oe.x,Oe.y)&&Mn(Oe.prev,Oe,Oe.next)>=0))return!1;Oe=Oe.nextZ}for(;Me&&Me.z>=De;){if(Me.x>=Q&&Me.x<=ye&&Me.y>=ee&&Me.y<=me&&Me!==w&&Me!==A&&Ph(k,G,O,X,$,K,Me.x,Me.y)&&Mn(Me.prev,Me,Me.next)>=0)return!1;Me=Me.prevZ}for(;Oe&&Oe.z<=$e;){if(Oe.x>=Q&&Oe.x<=ye&&Oe.y>=ee&&Oe.y<=me&&Oe!==w&&Oe!==A&&Ph(k,G,O,X,$,K,Oe.x,Oe.y)&&Mn(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.nextZ}return!0}function Z8(c,l,f){var v=c;do{var w=v.prev,C=v.next.next;!gg(w,C)&&GE(w,v,v.next,C)&&Wd(w,C)&&Wd(C,w)&&(l.push(w.i/f|0),l.push(v.i/f|0),l.push(C.i/f|0),Xd(v),Xd(v.next),v=c=C),v=v.next}while(v!==c);return qu(v)}function Y8(c,l,f,v,w,C){var A=c;do{for(var k=A.next.next;k!==A.prev;){if(A.i!==k.i&&tF(A,k)){var O=qE(A,k);return A=qu(A,A.next),O=qu(O,O.next),qd(A,l,f,v,w,C,0),void qd(O,l,f,v,w,C,0)}k=k.next}A=A.next}while(A!==c)}function K8(c,l){return c.x-l.x}function J8(c,l){var f=function(w,C){var A,k=C,O=w.x,$=w.y,G=-1/0;do{if($<=k.y&&$>=k.next.y&&k.next.y!==k.y){var X=k.x+($-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(X<=O&&X>G&&(G=X,A=k.x<k.next.x?k:k.next,X===O))return A}k=k.next}while(k!==C);if(!A)return null;var K,Q=A,ee=A.x,ye=A.y,me=1/0;k=A;do O>=k.x&&k.x>=ee&&O!==k.x&&Ph($<ye?O:G,$,ee,ye,$<ye?G:O,$,k.x,k.y)&&(K=Math.abs($-k.y)/(O-k.x),Wd(k,w)&&(K<me||K===me&&(k.x>A.x||k.x===A.x&&Q8(A,k)))&&(A=k,me=K)),k=k.next;while(k!==Q);return A}(c,l);if(!f)return l;var v=qE(f,c);return qu(v,v.next),qu(f,f.next)}function Q8(c,l){return Mn(c.prev,c,l.prev)<0&&Mn(l.next,c,c.next)<0}function H1(c,l,f,v,w){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-f)*w|0)|c<<8))|c<<4))|c<<2))|c<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-v)*w|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function eF(c){var l=c,f=c;do(l.x<f.x||l.x===f.x&&l.y<f.y)&&(f=l),l=l.next;while(l!==c);return f}function Ph(c,l,f,v,w,C,A,k){return(w-A)*(l-k)>=(c-A)*(C-k)&&(c-A)*(v-k)>=(f-A)*(l-k)&&(f-A)*(C-k)>=(w-A)*(v-k)}function tF(c,l){return c.next.i!==l.i&&c.prev.i!==l.i&&!function(f,v){var w=f;do{if(w.i!==f.i&&w.next.i!==f.i&&w.i!==v.i&&w.next.i!==v.i&&GE(w,w.next,f,v))return!0;w=w.next}while(w!==f);return!1}(c,l)&&(Wd(c,l)&&Wd(l,c)&&function(f,v){var w=f,C=!1,A=(f.x+v.x)/2,k=(f.y+v.y)/2;do w.y>k!=w.next.y>k&&w.next.y!==w.y&&A<(w.next.x-w.x)*(k-w.y)/(w.next.y-w.y)+w.x&&(C=!C),w=w.next;while(w!==f);return C}(c,l)&&(Mn(c.prev,c,l.prev)||Mn(c,l.prev,l))||gg(c,l)&&Mn(c.prev,c,c.next)>0&&Mn(l.prev,l,l.next)>0)}function Mn(c,l,f){return(l.y-c.y)*(f.x-l.x)-(l.x-c.x)*(f.y-l.y)}function gg(c,l){return c.x===l.x&&c.y===l.y}function GE(c,l,f,v){var w=_g(Mn(c,l,f)),C=_g(Mn(c,l,v)),A=_g(Mn(f,v,c)),k=_g(Mn(f,v,l));return w!==C&&A!==k||!(w!==0||!yg(c,f,l))||!(C!==0||!yg(c,v,l))||!(A!==0||!yg(f,c,v))||!(k!==0||!yg(f,l,v))}function yg(c,l,f){return l.x<=Math.max(c.x,f.x)&&l.x>=Math.min(c.x,f.x)&&l.y<=Math.max(c.y,f.y)&&l.y>=Math.min(c.y,f.y)}function _g(c){return c>0?1:c<0?-1:0}function Wd(c,l){return Mn(c.prev,c,c.next)<0?Mn(c,l,c.next)>=0&&Mn(c,c.prev,l)>=0:Mn(c,l,c.prev)<0||Mn(c,c.next,l)<0}function qE(c,l){var f=new j1(c.i,c.x,c.y),v=new j1(l.i,l.x,l.y),w=c.next,C=l.prev;return c.next=l,l.prev=c,f.next=w,w.prev=f,v.next=f,f.prev=v,C.next=v,v.prev=C,v}function WE(c,l,f,v){var w=new j1(c,l,f);return v?(w.next=v.next,w.prev=v,v.next.prev=w,v.next=w):(w.prev=w,w.next=w),w}function Xd(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function j1(c,l,f){this.i=c,this.x=l,this.y=f,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function G1(c,l,f,v){for(var w=0,C=l,A=f-v;C<f;C+=v)w+=(c[A]-c[C])*(c[C+1]+c[A+1]),A=C;return w}function rF(c,l,f,v,w){XE(c,l,f||0,v||c.length-1,w||nF)}function XE(c,l,f,v,w){for(;v>f;){if(v-f>600){var C=v-f+1,A=l-f+1,k=Math.log(C),O=.5*Math.exp(2*k/3),$=.5*Math.sqrt(k*O*(C-O)/C)*(A-C/2<0?-1:1);XE(c,l,Math.max(f,Math.floor(l-A*O/C+$)),Math.min(v,Math.floor(l+(C-A)*O/C+$)),w)}var G=c[l],X=f,K=v;for(Zd(c,f,l),w(c[v],G)>0&&Zd(c,f,v);X<K;){for(Zd(c,X,K),X++,K--;w(c[X],G)<0;)X++;for(;w(c[K],G)>0;)K--}w(c[f],G)===0?Zd(c,f,K):Zd(c,++K,v),K<=l&&(f=K+1),l<=K&&(v=K-1)}}function Zd(c,l,f){var v=c[l];c[l]=c[f],c[f]=v}function nF(c,l){return c<l?-1:c>l?1:0}function q1(c,l){const f=c.length;if(f<=1)return[c];const v=[];let w,C;for(let A=0;A<f;A++){const k=q(c[A]);k!==0&&(c[A].area=Math.abs(k),C===void 0&&(C=k<0),C===k<0?(w&&v.push(w),w=[c[A]]):w.push(c[A]))}if(w&&v.push(w),l>1)for(let A=0;A<v.length;A++)v[A].length<=l||(rF(v[A],l,1,v[A].length-1,iF),v[A]=v[A].slice(0,l));return v}function iF(c,l){return l.area-c.area}function W1(c,l,f){const v=f.patternDependencies;let w=!1;for(const C of l){const A=C.paint.get(`${c}-pattern`);A.isConstant()||(w=!0);const k=A.constantOr(null);k&&(w=!0,v[k.to]=!0,v[k.from]=!0)}return w}function X1(c,l,f,v,w){const C=w.patternDependencies;for(const A of l){const k=A.paint.get(`${c}-pattern`).value;if(k.kind!=="constant"){let O=k.evaluate({zoom:v-1},f,{},w.availableImages),$=k.evaluate({zoom:v},f,{},w.availableImages),G=k.evaluate({zoom:v+1},f,{},w.availableImages);O=O&&O.name?O.name:O,$=$&&$.name?$.name:$,G=G&&G.name?G.name:G,C[O]=!0,C[$]=!0,C[G]=!0,f.patterns[A.id]={min:O,mid:$,max:G}}}return f}mg.exports=vg,mg.exports.default=vg,vg.deviation=function(c,l,f,v){var w=l&&l.length,C=Math.abs(G1(c,0,w?l[0]*f:c.length,f));if(w)for(var A=0,k=l.length;A<k;A++)C-=Math.abs(G1(c,l[A]*f,A<k-1?l[A+1]*f:c.length,f));var O=0;for(A=0;A<v.length;A+=3){var $=v[A]*f,G=v[A+1]*f,X=v[A+2]*f;O+=Math.abs((c[$]-c[X])*(c[G+1]-c[$+1])-(c[$]-c[G])*(c[X+1]-c[$+1]))}return C===0&&O===0?0:Math.abs((O-C)/C)},vg.flatten=function(c){for(var l=c[0][0].length,f={vertices:[],holes:[],dimensions:l},v=0,w=0;w<c.length;w++){for(var C=0;C<c[w].length;C++)for(var A=0;A<l;A++)f.vertices.push(c[w][C][A]);w>0&&f.holes.push(v+=c[w-1].length)}return f};class Z1{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Nr,this.indexArray=new ki,this.indexArray2=new _o,this.programConfigurations=new Hu(l.layers,l.zoom),this.segments=new hr,this.segments2=new hr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,v){this.hasPattern=W1("fill",this.layers,f);const w=this.layers[0].layout.get("fill-sort-key"),C=!w.isConstant(),A=[];for(const{feature:k,id:O,index:$,sourceLayerIndex:G}of l){const X=this.layers[0]._featureFilter.needGeometry,K=Gu(k,X);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),K,v))continue;const Q=C?w.evaluate(K,{},v,f.availableImages):void 0,ee={id:O,properties:k.properties,type:k.type,sourceLayerIndex:G,index:$,geometry:X?K.geometry:ju(k),patterns:{},sortKey:Q};A.push(ee)}C&&A.sort((k,O)=>k.sortKey-O.sortKey);for(const k of A){const{geometry:O,index:$,sourceLayerIndex:G}=k;if(this.hasPattern){const X=X1("fill",this.layers,k,this.zoom,f);this.patternFeatures.push(X)}else this.addFeature(k,O,$,v,{});f.featureIndex.insert(l[$].feature,O,$,G,this.index)}}update(l,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,v)}addFeatures(l,f,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,f,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,q8),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,f,v,w,C){for(const A of q1(f,500)){let k=0;for(const Q of A)k+=Q.length;const O=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),$=O.vertexLength,G=[],X=[];for(const Q of A){if(Q.length===0)continue;Q!==A[0]&&X.push(G.length/2);const ee=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ye=ee.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ye+Q.length-1,ye),G.push(Q[0].x),G.push(Q[0].y);for(let me=1;me<Q.length;me++)this.layoutVertexArray.emplaceBack(Q[me].x,Q[me].y),this.indexArray2.emplaceBack(ye+me-1,ye+me),G.push(Q[me].x),G.push(Q[me].y);ee.vertexLength+=Q.length,ee.primitiveLength+=Q.length}const K=mg.exports(G,X);for(let Q=0;Q<K.length;Q+=3)this.indexArray.emplaceBack($+K[Q],$+K[Q+1],$+K[Q+2]);O.vertexLength+=k,O.primitiveLength+=K.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,C,w)}}Mt("FillBucket",Z1,{omit:["layers","patternFeatures"]});const aF=new ni({"fill-sort-key":new qt(Be.layout_fill["fill-sort-key"])});var oF={paint:new ni({"fill-antialias":new Ot(Be.paint_fill["fill-antialias"]),"fill-opacity":new qt(Be.paint_fill["fill-opacity"]),"fill-color":new qt(Be.paint_fill["fill-color"]),"fill-outline-color":new qt(Be.paint_fill["fill-outline-color"]),"fill-translate":new Ot(Be.paint_fill["fill-translate"]),"fill-translate-anchor":new Ot(Be.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ll(Be.paint_fill["fill-pattern"])}),layout:aF};const sF=Dn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),lF=Dn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:uF}=sF;var Ol={},cF=ve,ZE=Dh;function Dh(c,l,f,v,w){this.properties={},this.extent=f,this.type=0,this._pbf=c,this._geometry=-1,this._keys=v,this._values=w,c.readFields(hF,this,l)}function hF(c,l,f){c==1?l.id=f.readVarint():c==2?function(v,w){for(var C=v.readVarint()+v.pos;v.pos<C;){var A=w._keys[v.readVarint()],k=w._values[v.readVarint()];w.properties[A]=k}}(f,l):c==3?l.type=f.readVarint():c==4&&(l._geometry=f.pos)}function fF(c){for(var l,f,v=0,w=0,C=c.length,A=C-1;w<C;A=w++)v+=((f=c[A]).x-(l=c[w]).x)*(l.y+f.y);return v}Dh.types=["Unknown","Point","LineString","Polygon"],Dh.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var l,f=c.readVarint()+c.pos,v=1,w=0,C=0,A=0,k=[];c.pos<f;){if(w<=0){var O=c.readVarint();v=7&O,w=O>>3}if(w--,v===1||v===2)C+=c.readSVarint(),A+=c.readSVarint(),v===1&&(l&&k.push(l),l=[]),l.push(new cF(C,A));else{if(v!==7)throw new Error("unknown command "+v);l&&l.push(l[0].clone())}}return l&&k.push(l),k},Dh.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var l=c.readVarint()+c.pos,f=1,v=0,w=0,C=0,A=1/0,k=-1/0,O=1/0,$=-1/0;c.pos<l;){if(v<=0){var G=c.readVarint();f=7&G,v=G>>3}if(v--,f===1||f===2)(w+=c.readSVarint())<A&&(A=w),w>k&&(k=w),(C+=c.readSVarint())<O&&(O=C),C>$&&($=C);else if(f!==7)throw new Error("unknown command "+f)}return[A,O,k,$]},Dh.prototype.toGeoJSON=function(c,l,f){var v,w,C=this.extent*Math.pow(2,f),A=this.extent*c,k=this.extent*l,O=this.loadGeometry(),$=Dh.types[this.type];function G(Q){for(var ee=0;ee<Q.length;ee++){var ye=Q[ee];Q[ee]=[360*(ye.x+A)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(ye.y+k)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var X=[];for(v=0;v<O.length;v++)X[v]=O[v][0];G(O=X);break;case 2:for(v=0;v<O.length;v++)G(O[v]);break;case 3:for(O=function(Q){var ee=Q.length;if(ee<=1)return[Q];for(var ye,me,De=[],$e=0;$e<ee;$e++){var Me=fF(Q[$e]);Me!==0&&(me===void 0&&(me=Me<0),me===Me<0?(ye&&De.push(ye),ye=[Q[$e]]):ye.push(Q[$e]))}return ye&&De.push(ye),De}(O),v=0;v<O.length;v++)for(w=0;w<O[v].length;w++)G(O[v][w])}O.length===1?O=O[0]:$="Multi"+$;var K={type:"Feature",geometry:{type:$,coordinates:O},properties:this.properties};return"id"in this&&(K.id=this.id),K};var dF=ZE,YE=KE;function KE(c,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(pF,this,l),this.length=this._features.length}function pF(c,l,f){c===15?l.version=f.readVarint():c===1?l.name=f.readString():c===5?l.extent=f.readVarint():c===2?l._features.push(f.pos):c===3?l._keys.push(f.readString()):c===4&&l._values.push(function(v){for(var w=null,C=v.readVarint()+v.pos;v.pos<C;){var A=v.readVarint()>>3;w=A===1?v.readString():A===2?v.readFloat():A===3?v.readDouble():A===4?v.readVarint64():A===5?v.readVarint():A===6?v.readSVarint():A===7?v.readBoolean():null}return w}(f))}KE.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var l=this._pbf.readVarint()+this._pbf.pos;return new dF(this._pbf,l,this.extent,this._keys,this._values)};var mF=YE;function vF(c,l,f){if(c===3){var v=new mF(f,f.readVarint()+f.pos);v.length&&(l[v.name]=v)}}Ol.VectorTile=function(c,l){this.layers=c.readFields(vF,{},l)},Ol.VectorTileFeature=ZE,Ol.VectorTileLayer=YE;const gF=Ol.VectorTileFeature.types,Y1=Math.pow(2,13);function Yd(c,l,f,v,w,C,A,k){c.emplaceBack(l,f,2*Math.floor(v*Y1)+A,w*Y1*2,C*Y1*2,Math.round(k))}class K1{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new gr,this.centroidVertexArray=new Ut,this.indexArray=new ki,this.programConfigurations=new Hu(l.layers,l.zoom),this.segments=new hr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,v){this.features=[],this.hasPattern=W1("fill-extrusion",this.layers,f);for(const{feature:w,id:C,index:A,sourceLayerIndex:k}of l){const O=this.layers[0]._featureFilter.needGeometry,$=Gu(w,O);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),$,v))continue;const G={id:C,sourceLayerIndex:k,index:A,geometry:O?$.geometry:ju(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(X1("fill-extrusion",this.layers,G,this.zoom,f)):this.addFeature(G,G.geometry,A,v,{}),f.featureIndex.insert(w,G.geometry,A,k,this.index,!0)}}addFeatures(l,f,v){for(const w of this.features){const{geometry:C}=w;this.addFeature(w,C,w.index,f,v)}}update(l,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,uF),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,lF.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,f,v,w,C){const A={x:0,y:0,vertexCount:0};for(const k of q1(f,500)){let O=0;for(const ee of k)O+=ee.length;let $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of k){if(ee.length===0||_F(ee))continue;let ye=0;for(let me=0;me<ee.length;me++){const De=ee[me];if(me>=1){const $e=ee[me-1];if(!yF(De,$e)){$.vertexLength+4>hr.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Me=De.sub($e)._perp()._unit(),Oe=$e.dist(De);ye+Oe>32768&&(ye=0),Yd(this.layoutVertexArray,De.x,De.y,Me.x,Me.y,0,0,ye),Yd(this.layoutVertexArray,De.x,De.y,Me.x,Me.y,0,1,ye),A.x+=2*De.x,A.y+=2*De.y,A.vertexCount+=2,ye+=Oe,Yd(this.layoutVertexArray,$e.x,$e.y,Me.x,Me.y,0,0,ye),Yd(this.layoutVertexArray,$e.x,$e.y,Me.x,Me.y,0,1,ye),A.x+=2*$e.x,A.y+=2*$e.y,A.vertexCount+=2;const Je=$.vertexLength;this.indexArray.emplaceBack(Je,Je+2,Je+1),this.indexArray.emplaceBack(Je+1,Je+2,Je+3),$.vertexLength+=4,$.primitiveLength+=2}}}}if($.vertexLength+O>hr.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray)),gF[l.type]!=="Polygon")continue;const G=[],X=[],K=$.vertexLength;for(const ee of k)if(ee.length!==0){ee!==k[0]&&X.push(G.length/2);for(let ye=0;ye<ee.length;ye++){const me=ee[ye];Yd(this.layoutVertexArray,me.x,me.y,0,0,1,1,0),A.x+=me.x,A.y+=me.y,A.vertexCount+=1,G.push(me.x),G.push(me.y)}}const Q=mg.exports(G,X);for(let ee=0;ee<Q.length;ee+=3)this.indexArray.emplaceBack(K+Q[ee],K+Q[ee+2],K+Q[ee+1]);$.primitiveLength+=Q.length/3,$.vertexLength+=O}for(let k=0;k<A.vertexCount;k++)this.centroidVertexArray.emplaceBack(Math.floor(A.x/A.vertexCount),Math.floor(A.y/A.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,C,w)}}function yF(c,l){return c.x===l.x&&(c.x<0||c.x>Nn)||c.y===l.y&&(c.y<0||c.y>Nn)}function _F(c){return c.every(l=>l.x<0)||c.every(l=>l.x>Nn)||c.every(l=>l.y<0)||c.every(l=>l.y>Nn)}Mt("FillExtrusionBucket",K1,{omit:["layers","features"]});var xF={paint:new ni({"fill-extrusion-opacity":new Ot(Be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new qt(Be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ot(Be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ot(Be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ll(Be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new qt(Be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new qt(Be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ot(Be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Kd(c,l){return c.x*l.x+c.y*l.y}function JE(c,l){if(c.length===1){let f=0;const v=l[f++];let w;for(;!w||v.equals(w);)if(w=l[f++],!w)return 1/0;for(;f<l.length;f++){const C=l[f],A=c[0],k=w.sub(v),O=C.sub(v),$=A.sub(v),G=Kd(k,k),X=Kd(k,O),K=Kd(O,O),Q=Kd($,k),ee=Kd($,O),ye=G*K-X*X,me=(K*Q-X*ee)/ye,De=(G*ee-X*Q)/ye,$e=v.z*(1-me-De)+w.z*me+C.z*De;if(isFinite($e))return $e}return 1/0}{let f=1/0;for(const v of l)f=Math.min(f,v.z);return f}}const bF=Dn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:wF}=bF,SF=Dn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:TF}=SF,CF=Ol.VectorTileFeature.types,EF=Math.cos(Math.PI/180*37.5),QE=Math.pow(2,14)/.5;class J1{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new Cr,this.layoutVertexArray2=new jr,this.indexArray=new ki,this.programConfigurations=new Hu(l.layers,l.zoom),this.segments=new hr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,v){this.hasPattern=W1("line",this.layers,f);const w=this.layers[0].layout.get("line-sort-key"),C=!w.isConstant(),A=[];for(const{feature:k,id:O,index:$,sourceLayerIndex:G}of l){const X=this.layers[0]._featureFilter.needGeometry,K=Gu(k,X);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),K,v))continue;const Q=C?w.evaluate(K,{},v):void 0,ee={id:O,properties:k.properties,type:k.type,sourceLayerIndex:G,index:$,geometry:X?K.geometry:ju(k),patterns:{},sortKey:Q};A.push(ee)}C&&A.sort((k,O)=>k.sortKey-O.sortKey);for(const k of A){const{geometry:O,index:$,sourceLayerIndex:G}=k;if(this.hasPattern){const X=X1("line",this.layers,k,this.zoom,f);this.patternFeatures.push(X)}else this.addFeature(k,O,$,v,{});f.featureIndex.insert(l[$].feature,O,$,G,this.index)}}update(l,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,v)}addFeatures(l,f,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,f,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,TF)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,wF),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,f,v,w,C){const A=this.layers[0].layout,k=A.get("line-join").evaluate(l,{}),O=A.get("line-cap"),$=A.get("line-miter-limit"),G=A.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const X of f)this.addLine(X,l,k,O,$,G);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,C,w)}addLine(l,f,v,w,C,A){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let De=0;De<l.length-1;De++)this.totalDistance+=l[De].dist(l[De+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=CF[f.type]==="Polygon";let O=l.length;for(;O>=2&&l[O-1].equals(l[O-2]);)O--;let $=0;for(;$<O-1&&l[$].equals(l[$+1]);)$++;if(O<(k?3:2))return;v==="bevel"&&(C=1.05);const G=this.overscaling<=16?122880/(512*this.overscaling):0,X=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let K,Q,ee,ye,me;this.e1=this.e2=-1,k&&(K=l[O-2],me=l[$].sub(K)._unit()._perp());for(let De=$;De<O;De++){if(ee=De===O-1?k?l[$+1]:void 0:l[De+1],ee&&l[De].equals(ee))continue;me&&(ye=me),K&&(Q=K),K=l[De],me=ee?ee.sub(K)._unit()._perp():ye,ye=ye||me;let $e=ye.add(me);$e.x===0&&$e.y===0||$e._unit();const Me=ye.x*me.x+ye.y*me.y,Oe=$e.x*me.x+$e.y*me.y,Je=Oe!==0?1/Oe:1/0,Ze=2*Math.sqrt(2-2*Oe),At=Oe<EF&&Q&&ee,Dt=ye.x*me.y-ye.y*me.x>0;if(At&&De>$){const ct=K.dist(Q);if(ct>2*G){const xt=K.sub(K.sub(Q)._mult(G/ct)._round());this.updateDistance(Q,xt),this.addCurrentVertex(xt,ye,0,0,X),Q=xt}}const _t=Q&&ee;let pt=_t?v:k?"butt":w;if(_t&&pt==="round"&&(Je<A?pt="miter":Je<=2&&(pt="fakeround")),pt==="miter"&&Je>C&&(pt="bevel"),pt==="bevel"&&(Je>2&&(pt="flipbevel"),Je<C&&(pt="miter")),Q&&this.updateDistance(Q,K),pt==="miter")$e._mult(Je),this.addCurrentVertex(K,$e,0,0,X);else if(pt==="flipbevel"){if(Je>100)$e=me.mult(-1);else{const ct=Je*ye.add(me).mag()/ye.sub(me).mag();$e._perp()._mult(ct*(Dt?-1:1))}this.addCurrentVertex(K,$e,0,0,X),this.addCurrentVertex(K,$e.mult(-1),0,0,X)}else if(pt==="bevel"||pt==="fakeround"){const ct=-Math.sqrt(Je*Je-1),xt=Dt?ct:0,gt=Dt?0:ct;if(Q&&this.addCurrentVertex(K,ye,xt,gt,X),pt==="fakeround"){const ot=Math.round(180*Ze/Math.PI/20);for(let Ht=1;Ht<ot;Ht++){let Bt=Ht/ot;if(Bt!==.5){const rn=Bt-.5;Bt+=Bt*rn*(Bt-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*rn*rn+(.848013+Me*(.215638*Me-1.06021)))}const ur=me.sub(ye)._mult(Bt)._add(ye)._unit()._mult(Dt?-1:1);this.addHalfVertex(K,ur.x,ur.y,!1,Dt,0,X)}}ee&&this.addCurrentVertex(K,me,-xt,-gt,X)}else if(pt==="butt")this.addCurrentVertex(K,$e,0,0,X);else if(pt==="square"){const ct=Q?1:-1;this.addCurrentVertex(K,$e,ct,ct,X)}else pt==="round"&&(Q&&(this.addCurrentVertex(K,ye,0,0,X),this.addCurrentVertex(K,ye,1,1,X,!0)),ee&&(this.addCurrentVertex(K,me,-1,-1,X,!0),this.addCurrentVertex(K,me,0,0,X)));if(At&&De<O-1){const ct=K.dist(ee);if(ct>2*G){const xt=K.add(ee.sub(K)._mult(G/ct)._round());this.updateDistance(K,xt),this.addCurrentVertex(xt,me,0,0,X),K=xt}}}}addCurrentVertex(l,f,v,w,C,A=!1){const k=f.y*w-f.x,O=-f.y-f.x*w;this.addHalfVertex(l,f.x+f.y*v,f.y-f.x*v,A,!1,v,C),this.addHalfVertex(l,k,O,A,!0,-w,C),this.distance>QE/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(l,f,v,w,C,A))}addHalfVertex({x:l,y:f},v,w,C,A,k,O){const $=.5*(this.lineClips?this.scaledDistance*(QE-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(C?1:0),(f<<1)+(A?1:0),Math.round(63*v)+128,Math.round(63*w)+128,1+(k===0?0:k<0?-1:1)|(63&$)<<2,$>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const G=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,G),O.primitiveLength++),A?this.e2=G:this.e1=G}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,f){this.distance+=l.dist(f),this.updateScaledDistance()}}Mt("LineBucket",J1,{omit:["layers","patternFeatures"]});const AF=new ni({"line-cap":new Ot(Be.layout_line["line-cap"]),"line-join":new qt(Be.layout_line["line-join"]),"line-miter-limit":new Ot(Be.layout_line["line-miter-limit"]),"line-round-limit":new Ot(Be.layout_line["line-round-limit"]),"line-sort-key":new qt(Be.layout_line["line-sort-key"])});var eA={paint:new ni({"line-opacity":new qt(Be.paint_line["line-opacity"]),"line-color":new qt(Be.paint_line["line-color"]),"line-translate":new Ot(Be.paint_line["line-translate"]),"line-translate-anchor":new Ot(Be.paint_line["line-translate-anchor"]),"line-width":new qt(Be.paint_line["line-width"]),"line-gap-width":new qt(Be.paint_line["line-gap-width"]),"line-offset":new qt(Be.paint_line["line-offset"]),"line-blur":new qt(Be.paint_line["line-blur"]),"line-dasharray":new Fd(Be.paint_line["line-dasharray"]),"line-pattern":new Ll(Be.paint_line["line-pattern"]),"line-gradient":new Zo(Be.paint_line["line-gradient"])}),layout:AF};const tA=new class extends qt{possiblyEvaluate(c,l){return l=new hn(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(c,l)}evaluate(c,l,f,v){return l=T({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(c,l,f,v)}}(eA.paint.properties["line-width"].specification);function rA(c,l){return l>0?l+2*c:c}tA.useIntegerZoom=!0;const MF=Dn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),IF=Dn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Dn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const PF=Dn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Dn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const nA=Dn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),DF=Dn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function LF(c,l,f){return c.sections.forEach(v=>{v.text=function(w,C,A){const k=C.layout.get("text-transform").evaluate(A,{});return k==="uppercase"?w=w.toLocaleUpperCase():k==="lowercase"&&(w=w.toLocaleLowerCase()),ca.applyArabicShaping&&(w=ca.applyArabicShaping(w)),w}(v.text,l,f)}),c}Dn([{name:"triangle",components:3,type:"Uint16"}]),Dn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Dn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Dn([{type:"Float32",name:"offsetX"}]),Dn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Jd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ii=24,Q1=Xr,iA=function(c,l,f,v,w){var C,A,k=8*w-v-1,O=(1<<k)-1,$=O>>1,G=-7,X=f?w-1:0,K=f?-1:1,Q=c[l+X];for(X+=K,C=Q&(1<<-G)-1,Q>>=-G,G+=k;G>0;C=256*C+c[l+X],X+=K,G-=8);for(A=C&(1<<-G)-1,C>>=-G,G+=v;G>0;A=256*A+c[l+X],X+=K,G-=8);if(C===0)C=1-$;else{if(C===O)return A?NaN:1/0*(Q?-1:1);A+=Math.pow(2,v),C-=$}return(Q?-1:1)*A*Math.pow(2,C-v)},aA=function(c,l,f,v,w,C){var A,k,O,$=8*C-w-1,G=(1<<$)-1,X=G>>1,K=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=v?0:C-1,ee=v?1:-1,ye=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(k=isNaN(l)?1:0,A=G):(A=Math.floor(Math.log(l)/Math.LN2),l*(O=Math.pow(2,-A))<1&&(A--,O*=2),(l+=A+X>=1?K/O:K*Math.pow(2,1-X))*O>=2&&(A++,O/=2),A+X>=G?(k=0,A=G):A+X>=1?(k=(l*O-1)*Math.pow(2,w),A+=X):(k=l*Math.pow(2,X-1)*Math.pow(2,w),A=0));w>=8;c[f+Q]=255&k,Q+=ee,k/=256,w-=8);for(A=A<<w|k,$+=w;$>0;c[f+Q]=255&A,Q+=ee,A/=256,$-=8);c[f+Q-ee]|=128*ye};function Xr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Xr.Varint=0,Xr.Fixed64=1,Xr.Bytes=2,Xr.Fixed32=5;var zl,ex=4294967296,oA=1/ex,sA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Os(c){return c.type===Xr.Bytes?c.readVarint()+c.pos:c.pos+1}function Lh(c,l,f){return f?4294967296*l+(c>>>0):4294967296*(l>>>0)+(c>>>0)}function lA(c,l,f){var v=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));f.realloc(v);for(var w=f.pos-1;w>=c;w--)f.buf[w+v]=f.buf[w]}function kF(c,l){for(var f=0;f<c.length;f++)l.writeVarint(c[f])}function RF(c,l){for(var f=0;f<c.length;f++)l.writeSVarint(c[f])}function OF(c,l){for(var f=0;f<c.length;f++)l.writeFloat(c[f])}function zF(c,l){for(var f=0;f<c.length;f++)l.writeDouble(c[f])}function BF(c,l){for(var f=0;f<c.length;f++)l.writeBoolean(c[f])}function FF(c,l){for(var f=0;f<c.length;f++)l.writeFixed32(c[f])}function $F(c,l){for(var f=0;f<c.length;f++)l.writeSFixed32(c[f])}function NF(c,l){for(var f=0;f<c.length;f++)l.writeFixed64(c[f])}function VF(c,l){for(var f=0;f<c.length;f++)l.writeSFixed64(c[f])}function xg(c,l){return(c[l]|c[l+1]<<8|c[l+2]<<16)+16777216*c[l+3]}function kh(c,l,f){c[f]=l,c[f+1]=l>>>8,c[f+2]=l>>>16,c[f+3]=l>>>24}function uA(c,l){return(c[l]|c[l+1]<<8|c[l+2]<<16)+(c[l+3]<<24)}function UF(c,l,f){c===1&&f.readMessage(HF,l)}function HF(c,l,f){if(c===3){const{id:v,bitmap:w,width:C,height:A,left:k,top:O,advance:$}=f.readMessage(jF,{});l.push({id:v,bitmap:new Gd({width:C+6,height:A+6},w),metrics:{width:C,height:A,left:k,top:O,advance:$}})}}function jF(c,l,f){c===1?l.id=f.readVarint():c===2?l.bitmap=f.readBytes():c===3?l.width=f.readVarint():c===4?l.height=f.readVarint():c===5?l.left=f.readSVarint():c===6?l.top=f.readSVarint():c===7&&(l.advance=f.readVarint())}function cA(c){let l=0,f=0;for(const A of c)l+=A.w*A.h,f=Math.max(f,A.w);c.sort((A,k)=>k.h-A.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),f),h:1/0}];let w=0,C=0;for(const A of c)for(let k=v.length-1;k>=0;k--){const O=v[k];if(!(A.w>O.w||A.h>O.h)){if(A.x=O.x,A.y=O.y,C=Math.max(C,A.y+A.h),w=Math.max(w,A.x+A.w),A.w===O.w&&A.h===O.h){const $=v.pop();k<v.length&&(v[k]=$)}else A.h===O.h?(O.x+=A.w,O.w-=A.w):A.w===O.w?(O.y+=A.h,O.h-=A.h):(v.push({x:O.x+A.w,y:O.y,w:O.w-A.w,h:A.h}),O.y+=A.h,O.h-=A.h);break}}return{w,h:C,fill:l/(w*C)||0}}Xr.prototype={destroy:function(){this.buf=null},readFields:function(c,l,f){for(f=f||this.length;this.pos<f;){var v=this.readVarint(),w=v>>3,C=this.pos;this.type=7&v,c(w,l,this),this.pos===C&&this.skip(v)}return l},readMessage:function(c,l){return this.readFields(c,l,this.readVarint()+this.pos)},readFixed32:function(){var c=xg(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=uA(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=xg(this.buf,this.pos)+xg(this.buf,this.pos+4)*ex;return this.pos+=8,c},readSFixed64:function(){var c=xg(this.buf,this.pos)+uA(this.buf,this.pos+4)*ex;return this.pos+=8,c},readFloat:function(){var c=iA(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=iA(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var l,f,v=this.buf;return l=127&(f=v[this.pos++]),f<128?l:(l|=(127&(f=v[this.pos++]))<<7,f<128?l:(l|=(127&(f=v[this.pos++]))<<14,f<128?l:(l|=(127&(f=v[this.pos++]))<<21,f<128?l:function(w,C,A){var k,O,$=A.buf;if(k=(112&(O=$[A.pos++]))>>4,O<128||(k|=(127&(O=$[A.pos++]))<<3,O<128)||(k|=(127&(O=$[A.pos++]))<<10,O<128)||(k|=(127&(O=$[A.pos++]))<<17,O<128)||(k|=(127&(O=$[A.pos++]))<<24,O<128)||(k|=(1&(O=$[A.pos++]))<<31,O<128))return Lh(w,k,C);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(f=v[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,l=this.pos;return this.pos=c,c-l>=12&&sA?function(f,v,w){return sA.decode(f.subarray(v,w))}(this.buf,l,c):function(f,v,w){for(var C="",A=v;A<w;){var k,O,$,G=f[A],X=null,K=G>239?4:G>223?3:G>191?2:1;if(A+K>w)break;K===1?G<128&&(X=G):K===2?(192&(k=f[A+1]))==128&&(X=(31&G)<<6|63&k)<=127&&(X=null):K===3?(O=f[A+2],(192&(k=f[A+1]))==128&&(192&O)==128&&((X=(15&G)<<12|(63&k)<<6|63&O)<=2047||X>=55296&&X<=57343)&&(X=null)):K===4&&(O=f[A+2],$=f[A+3],(192&(k=f[A+1]))==128&&(192&O)==128&&(192&$)==128&&((X=(15&G)<<18|(63&k)<<12|(63&O)<<6|63&$)<=65535||X>=1114112)&&(X=null)),X===null?(X=65533,K=1):X>65535&&(X-=65536,C+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),C+=String.fromCharCode(X),A+=K}return C}(this.buf,l,c)},readBytes:function(){var c=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,c);return this.pos=c,l},readPackedVarint:function(c,l){if(this.type!==Xr.Bytes)return c.push(this.readVarint(l));var f=Os(this);for(c=c||[];this.pos<f;)c.push(this.readVarint(l));return c},readPackedSVarint:function(c){if(this.type!==Xr.Bytes)return c.push(this.readSVarint());var l=Os(this);for(c=c||[];this.pos<l;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Xr.Bytes)return c.push(this.readBoolean());var l=Os(this);for(c=c||[];this.pos<l;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Xr.Bytes)return c.push(this.readFloat());var l=Os(this);for(c=c||[];this.pos<l;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Xr.Bytes)return c.push(this.readDouble());var l=Os(this);for(c=c||[];this.pos<l;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Xr.Bytes)return c.push(this.readFixed32());var l=Os(this);for(c=c||[];this.pos<l;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Xr.Bytes)return c.push(this.readSFixed32());var l=Os(this);for(c=c||[];this.pos<l;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Xr.Bytes)return c.push(this.readFixed64());var l=Os(this);for(c=c||[];this.pos<l;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Xr.Bytes)return c.push(this.readSFixed64());var l=Os(this);for(c=c||[];this.pos<l;)c.push(this.readSFixed64());return c},skip:function(c){var l=7&c;if(l===Xr.Varint)for(;this.buf[this.pos++]>127;);else if(l===Xr.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Xr.Fixed32)this.pos+=4;else{if(l!==Xr.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(c,l){this.writeVarint(c<<3|l)},realloc:function(c){for(var l=this.length||16;l<this.pos+c;)l*=2;if(l!==this.length){var f=new Uint8Array(l);f.set(this.buf),this.buf=f,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),kh(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),kh(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),kh(this.buf,-1&c,this.pos),kh(this.buf,Math.floor(c*oA),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),kh(this.buf,-1&c,this.pos),kh(this.buf,Math.floor(c*oA),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(l,f){var v,w;if(l>=0?(v=l%4294967296|0,w=l/4294967296|0):(w=~(-l/4294967296),4294967295^(v=~(-l%4294967296))?v=v+1|0:(v=0,w=w+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(C,A,k){k.buf[k.pos++]=127&C|128,C>>>=7,k.buf[k.pos++]=127&C|128,C>>>=7,k.buf[k.pos++]=127&C|128,C>>>=7,k.buf[k.pos++]=127&C|128,k.buf[k.pos]=127&(C>>>=7)}(v,0,f),function(C,A){var k=(7&C)<<4;A.buf[A.pos++]|=k|((C>>>=3)?128:0),C&&(A.buf[A.pos++]=127&C|((C>>>=7)?128:0),C&&(A.buf[A.pos++]=127&C|((C>>>=7)?128:0),C&&(A.buf[A.pos++]=127&C|((C>>>=7)?128:0),C&&(A.buf[A.pos++]=127&C|((C>>>=7)?128:0),C&&(A.buf[A.pos++]=127&C)))))}(w,f)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var l=this.pos;this.pos=function(v,w,C){for(var A,k,O=0;O<w.length;O++){if((A=w.charCodeAt(O))>55295&&A<57344){if(!k){A>56319||O+1===w.length?(v[C++]=239,v[C++]=191,v[C++]=189):k=A;continue}if(A<56320){v[C++]=239,v[C++]=191,v[C++]=189,k=A;continue}A=k-55296<<10|A-56320|65536,k=null}else k&&(v[C++]=239,v[C++]=191,v[C++]=189,k=null);A<128?v[C++]=A:(A<2048?v[C++]=A>>6|192:(A<65536?v[C++]=A>>12|224:(v[C++]=A>>18|240,v[C++]=A>>12&63|128),v[C++]=A>>6&63|128),v[C++]=63&A|128)}return C}(this.buf,c,this.pos);var f=this.pos-l;f>=128&&lA(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeFloat:function(c){this.realloc(4),aA(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),aA(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var l=c.length;this.writeVarint(l),this.realloc(l);for(var f=0;f<l;f++)this.buf[this.pos++]=c[f]},writeRawMessage:function(c,l){this.pos++;var f=this.pos;c(l,this);var v=this.pos-f;v>=128&&lA(f,v,this),this.pos=f-1,this.writeVarint(v),this.pos+=v},writeMessage:function(c,l,f){this.writeTag(c,Xr.Bytes),this.writeRawMessage(l,f)},writePackedVarint:function(c,l){l.length&&this.writeMessage(c,kF,l)},writePackedSVarint:function(c,l){l.length&&this.writeMessage(c,RF,l)},writePackedBoolean:function(c,l){l.length&&this.writeMessage(c,BF,l)},writePackedFloat:function(c,l){l.length&&this.writeMessage(c,OF,l)},writePackedDouble:function(c,l){l.length&&this.writeMessage(c,zF,l)},writePackedFixed32:function(c,l){l.length&&this.writeMessage(c,FF,l)},writePackedSFixed32:function(c,l){l.length&&this.writeMessage(c,$F,l)},writePackedFixed64:function(c,l){l.length&&this.writeMessage(c,NF,l)},writePackedSFixed64:function(c,l){l.length&&this.writeMessage(c,VF,l)},writeBytesField:function(c,l){this.writeTag(c,Xr.Bytes),this.writeBytes(l)},writeFixed32Field:function(c,l){this.writeTag(c,Xr.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(c,l){this.writeTag(c,Xr.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(c,l){this.writeTag(c,Xr.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(c,l){this.writeTag(c,Xr.Fixed64),this.writeSFixed64(l)},writeVarintField:function(c,l){this.writeTag(c,Xr.Varint),this.writeVarint(l)},writeSVarintField:function(c,l){this.writeTag(c,Xr.Varint),this.writeSVarint(l)},writeStringField:function(c,l){this.writeTag(c,Xr.Bytes),this.writeString(l)},writeFloatField:function(c,l){this.writeTag(c,Xr.Fixed32),this.writeFloat(l)},writeDoubleField:function(c,l){this.writeTag(c,Xr.Fixed64),this.writeDouble(l)},writeBooleanField:function(c,l){this.writeVarintField(c,!!l)}};class tx{constructor(l,{pixelRatio:f,version:v,stretchX:w,stretchY:C,content:A}){this.paddedRect=l,this.pixelRatio=f,this.stretchX=w,this.stretchY=C,this.content=A,this.version=v}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class hA{constructor(l,f){const v={},w={};this.haveRenderCallbacks=[];const C=[];this.addImages(l,v,C),this.addImages(f,w,C);const{w:A,h:k}=cA(C),O=new Ma({width:A||1,height:k||1});for(const $ in l){const G=l[$],X=v[$].paddedRect;Ma.copy(G.data,O,{x:0,y:0},{x:X.x+1,y:X.y+1},G.data)}for(const $ in f){const G=f[$],X=w[$].paddedRect,K=X.x+1,Q=X.y+1,ee=G.data.width,ye=G.data.height;Ma.copy(G.data,O,{x:0,y:0},{x:K,y:Q},G.data),Ma.copy(G.data,O,{x:0,y:ye-1},{x:K,y:Q-1},{width:ee,height:1}),Ma.copy(G.data,O,{x:0,y:0},{x:K,y:Q+ye},{width:ee,height:1}),Ma.copy(G.data,O,{x:ee-1,y:0},{x:K-1,y:Q},{width:1,height:ye}),Ma.copy(G.data,O,{x:0,y:0},{x:K+ee,y:Q},{width:1,height:ye})}this.image=O,this.iconPositions=v,this.patternPositions=w}addImages(l,f,v){for(const w in l){const C=l[w],A={x:0,y:0,w:C.data.width+2,h:C.data.height+2};v.push(A),f[w]=new tx(A,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(l,f){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in l.updatedImages)this.patchUpdatedImage(this.iconPositions[v],l.getImage(v),f),this.patchUpdatedImage(this.patternPositions[v],l.getImage(v),f)}patchUpdatedImage(l,f,v){if(!l||!f||l.version===f.version)return;l.version=f.version;const[w,C]=l.tl;v.update(f.data,void 0,{x:w,y:C})}}Mt("ImagePosition",tx),Mt("ImageAtlas",hA),o.WritingMode=void 0,(zl=o.WritingMode||(o.WritingMode={}))[zl.none=0]="none",zl[zl.horizontal=1]="horizontal",zl[zl.vertical=2]="vertical",zl[zl.horizontalOnly=3]="horizontalOnly";const bg=-17;class Qd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,f){const v=new Qd;return v.scale=l||1,v.fontStack=f,v}static forImage(l){const f=new Qd;return f.imageName=l,f}}class Rh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,f){const v=new Rh;for(let w=0;w<l.sections.length;w++){const C=l.sections[w];C.image?v.addImageSection(C):v.addTextSection(C,f)}return v}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let f="";for(let v=0;v<l.length;v++){const w=l.charCodeAt(v+1)||null,C=l.charCodeAt(v-1)||null;f+=w&&tg(w)&&!Jd[l[v+1]]||C&&tg(C)&&!Jd[l[v-1]]||!Jd[l[v]]?l[v]:Jd[l[v]]}return f}(this.text)}trim(){let l=0;for(let v=0;v<this.text.length&&Sg[this.text.charCodeAt(v)];v++)l++;let f=this.text.length;for(let v=this.text.length-1;v>=0&&v>=l&&Sg[this.text.charCodeAt(v)];v--)f--;this.text=this.text.substring(l,f),this.sectionIndex=this.sectionIndex.slice(l,f)}substring(l,f){const v=new Rh;return v.text=this.text.substring(l,f),v.sectionIndex=this.sectionIndex.slice(l,f),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,f)=>Math.max(l,this.sections[f].scale),0)}addTextSection(l,f){this.text+=l.text,this.sections.push(Qd.forText(l.scale,l.fontStack||f));const v=this.sections.length-1;for(let w=0;w<l.text.length;++w)this.sectionIndex.push(v)}addImageSection(l){const f=l.image?l.image.name:"";if(f.length===0)return void H("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(Qd.forImage(f)),this.sectionIndex.push(this.sections.length-1)):H("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wg(c,l,f,v,w,C,A,k,O,$,G,X,K,Q,ee,ye){const me=Rh.fromFeature(c,w);let De;X===o.WritingMode.vertical&&me.verticalizePunctuation();const{processBidirectionalText:$e,processStyledBidirectionalText:Me}=ca;if($e&&me.sections.length===1){De=[];const Ze=$e(me.toString(),rx(me,$,C,l,v,Q,ee));for(const At of Ze){const Dt=new Rh;Dt.text=At,Dt.sections=me.sections;for(let _t=0;_t<At.length;_t++)Dt.sectionIndex.push(0);De.push(Dt)}}else if(Me){De=[];const Ze=Me(me.text,me.sectionIndex,rx(me,$,C,l,v,Q,ee));for(const At of Ze){const Dt=new Rh;Dt.text=At[0],Dt.sectionIndex=At[1],Dt.sections=me.sections,De.push(Dt)}}else De=function(Ze,At){const Dt=[],_t=Ze.text;let pt=0;for(const ct of At)Dt.push(Ze.substring(pt,ct)),pt=ct;return pt<_t.length&&Dt.push(Ze.substring(pt,_t.length)),Dt}(me,rx(me,$,C,l,v,Q,ee));const Oe=[],Je={positionedLines:Oe,text:me.toString(),top:G[1],bottom:G[1],left:G[0],right:G[0],writingMode:X,iconsInText:!1,verticalizable:!1};return function(Ze,At,Dt,_t,pt,ct,xt,gt,ot,Ht,Bt,ur){let rn=0,dn=bg,Vn=0,Pa=0;const fi=gt==="right"?1:gt==="left"?0:.5;let Ln=0;for(const kn of pt){kn.trim();const pi=kn.getMaxScale(),xi=(pi-1)*ii,zi={positionedGlyphs:[],lineOffset:0};Ze.positionedLines[Ln]=zi;const Ki=zi.positionedGlyphs;let Ji=0;if(!kn.length()){dn+=ct,++Ln;continue}for(let Jn=0;Jn<kn.length();Jn++){const dr=kn.getSection(Jn),da=kn.getSectionIndex(Jn),mi=kn.getCharCode(Jn);let bi=0,Xa=null,bo=null,wo=null,Bs=ii;const Za=!(ot===o.WritingMode.horizontal||!Bt&&!Ld(mi)||Bt&&(Sg[mi]||(Kn=mi,yt.Arabic(Kn)||yt["Arabic Supplement"](Kn)||yt["Arabic Extended-A"](Kn)||yt["Arabic Presentation Forms-A"](Kn)||yt["Arabic Presentation Forms-B"](Kn))));if(dr.imageName){const Da=_t[dr.imageName];if(!Da)continue;wo=dr.imageName,Ze.iconsInText=Ze.iconsInText||!0,bo=Da.paddedRect;const Qi=Da.displaySize;dr.scale=dr.scale*ii/ur,Xa={width:Qi[0],height:Qi[1],left:1,top:-3,advance:Za?Qi[1]:Qi[0]},bi=xi+(ii-Qi[1]*dr.scale),Bs=Xa.advance;const Fs=Za?Qi[0]*dr.scale-ii*pi:Qi[1]*dr.scale-ii*pi;Fs>0&&Fs>Ji&&(Ji=Fs)}else{const Da=Dt[dr.fontStack],Qi=Da&&Da[mi];if(Qi&&Qi.rect)bo=Qi.rect,Xa=Qi.metrics;else{const Fs=At[dr.fontStack],rp=Fs&&Fs[mi];if(!rp)continue;Xa=rp.metrics}bi=(pi-dr.scale)*ii}Za?(Ze.verticalizable=!0,Ki.push({glyph:mi,imageName:wo,x:rn,y:dn+bi,vertical:Za,scale:dr.scale,fontStack:dr.fontStack,sectionIndex:da,metrics:Xa,rect:bo}),rn+=Bs*dr.scale+Ht):(Ki.push({glyph:mi,imageName:wo,x:rn,y:dn+bi,vertical:Za,scale:dr.scale,fontStack:dr.fontStack,sectionIndex:da,metrics:Xa,rect:bo}),rn+=Xa.advance*dr.scale+Ht)}Ki.length!==0&&(Vn=Math.max(rn-Ht,Vn),WF(Ki,0,Ki.length-1,fi,Ji)),rn=0;const gn=ct*pi+Ji;zi.lineOffset=Math.max(Ji,xi),dn+=gn,Pa=Math.max(gn,Pa),++Ln}var Kn;const di=dn-bg,{horizontalAlign:_i,verticalAlign:Yi}=nx(xt);(function(kn,pi,xi,zi,Ki,Ji,gn,Jn,dr){const da=(pi-xi)*Ki;let mi=0;mi=Ji!==gn?-Jn*zi-bg:(-zi*dr+.5)*gn;for(const bi of kn)for(const Xa of bi.positionedGlyphs)Xa.x+=da,Xa.y+=mi})(Ze.positionedLines,fi,_i,Yi,Vn,Pa,ct,di,pt.length),Ze.top+=-Yi*di,Ze.bottom=Ze.top+di,Ze.left+=-_i*Vn,Ze.right=Ze.left+Vn}(Je,l,f,v,De,A,k,O,X,$,K,ye),!function(Ze){for(const At of Ze)if(At.positionedGlyphs.length!==0)return!1;return!0}(Oe)&&Je}const Sg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},GF={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function fA(c,l,f,v,w,C){if(l.imageName){const A=v[l.imageName];return A?A.displaySize[0]*l.scale*ii/C+w:0}{const A=f[l.fontStack],k=A&&A[c];return k?k.metrics.advance*l.scale+w:0}}function dA(c,l,f,v){const w=Math.pow(c-l,2);return v?c<l?w/2:2*w:w+Math.abs(f)*f}function qF(c,l,f){let v=0;return c===10&&(v-=1e4),f&&(v+=150),c!==40&&c!==65288||(v+=50),l!==41&&l!==65289||(v+=50),v}function pA(c,l,f,v,w,C){let A=null,k=dA(l,f,w,C);for(const O of v){const $=dA(l-O.x,f,w,C)+O.badness;$<=k&&(A=O,k=$)}return{index:c,x:l,priorBreak:A,badness:k}}function mA(c){return c?mA(c.priorBreak).concat(c.index):[]}function rx(c,l,f,v,w,C,A){if(C!=="point")return[];if(!c)return[];const k=[],O=function(K,Q,ee,ye,me,De){let $e=0;for(let Me=0;Me<K.length();Me++){const Oe=K.getSection(Me);$e+=fA(K.getCharCode(Me),Oe,ye,me,Q,De)}return $e/Math.max(1,Math.ceil($e/ee))}(c,l,f,v,w,A),$=c.text.indexOf("")>=0;let G=0;for(let K=0;K<c.length();K++){const Q=c.getSection(K),ee=c.getCharCode(K);if(Sg[ee]||(G+=fA(ee,Q,v,w,l,A)),K<c.length()-1){const ye=!((X=ee)<11904||!(yt["Bopomofo Extended"](X)||yt.Bopomofo(X)||yt["CJK Compatibility Forms"](X)||yt["CJK Compatibility Ideographs"](X)||yt["CJK Compatibility"](X)||yt["CJK Radicals Supplement"](X)||yt["CJK Strokes"](X)||yt["CJK Symbols and Punctuation"](X)||yt["CJK Unified Ideographs Extension A"](X)||yt["CJK Unified Ideographs"](X)||yt["Enclosed CJK Letters and Months"](X)||yt["Halfwidth and Fullwidth Forms"](X)||yt.Hiragana(X)||yt["Ideographic Description Characters"](X)||yt["Kangxi Radicals"](X)||yt["Katakana Phonetic Extensions"](X)||yt.Katakana(X)||yt["Vertical Forms"](X)||yt["Yi Radicals"](X)||yt["Yi Syllables"](X)));(GF[ee]||ye||Q.imageName)&&k.push(pA(K+1,G,O,k,qF(ee,c.getCharCode(K+1),ye&&$),!1))}}var X;return mA(pA(c.length(),G,O,k,0,!0))}function nx(c){let l=.5,f=.5;switch(c){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:l,verticalAlign:f}}function WF(c,l,f,v,w){if(!v&&!w)return;const C=c[f],A=(c[f].x+C.metrics.advance*C.scale)*v;for(let k=l;k<=f;k++)c[k].x-=A,c[k].y+=w}function XF(c,l,f){const{horizontalAlign:v,verticalAlign:w}=nx(f),C=l[0]-c.displaySize[0]*v,A=l[1]-c.displaySize[1]*w;return{image:c,top:A,bottom:A+c.displaySize[1],left:C,right:C+c.displaySize[0]}}function vA(c,l,f,v,w,C){const A=c.image;let k;if(A.content){const me=A.content,De=A.pixelRatio||1;k=[me[0]/De,me[1]/De,A.displaySize[0]-me[2]/De,A.displaySize[1]-me[3]/De]}const O=l.left*C,$=l.right*C;let G,X,K,Q;f==="width"||f==="both"?(Q=w[0]+O-v[3],X=w[0]+$+v[1]):(Q=w[0]+(O+$-A.displaySize[0])/2,X=Q+A.displaySize[0]);const ee=l.top*C,ye=l.bottom*C;return f==="height"||f==="both"?(G=w[1]+ee-v[0],K=w[1]+ye+v[2]):(G=w[1]+(ee+ye-A.displaySize[1])/2,K=G+A.displaySize[1]),{image:A,top:G,right:X,bottom:K,left:Q,collisionPadding:k}}const zs=128;function gA(c,l){const{expression:f}=l;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new hn(c+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:w}=f;let C=0;for(;C<v.length&&v[C]<=c;)C++;C=Math.max(0,C-1);let A=C;for(;A<v.length&&v[A]<c+1;)A++;A=Math.min(v.length-1,A);const k=v[C],O=v[A];return f.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:O,interpolationType:w}:{kind:"camera",minZoom:k,maxZoom:O,minSize:f.evaluate(new hn(k)),maxSize:f.evaluate(new hn(O)),interpolationType:w}}}class Bl extends ve{constructor(l,f,v,w){super(l,f),this.angle=v,w!==void 0&&(this.segment=w)}clone(){return new Bl(this.x,this.y,this.angle,this.segment)}}function yA(c,l,f,v,w){if(l.segment===void 0)return!0;let C=l,A=l.segment+1,k=0;for(;k>-f/2;){if(A--,A<0)return!1;k-=c[A].dist(C),C=c[A]}k+=c[A].dist(c[A+1]),A++;const O=[];let $=0;for(;k<f/2;){const G=c[A],X=c[A+1];if(!X)return!1;let K=c[A-1].angleTo(G)-G.angleTo(X);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:k,angleDelta:K}),$+=K;k-O[0].distance>v;)$-=O.shift().angleDelta;if($>w)return!1;A++,k+=G.dist(X)}return!0}function _A(c){let l=0;for(let f=0;f<c.length-1;f++)l+=c[f].dist(c[f+1]);return l}function xA(c,l,f){return c?.6*l*f:0}function bA(c,l){return Math.max(c?c.right-c.left:0,l?l.right-l.left:0)}function ZF(c,l,f,v,w,C){const A=xA(f,w,C),k=bA(f,v)*C;let O=0;const $=_A(c)/2;for(let G=0;G<c.length-1;G++){const X=c[G],K=c[G+1],Q=X.dist(K);if(O+Q>$){const ee=($-O)/Q,ye=un(X.x,K.x,ee),me=un(X.y,K.y,ee),De=new Bl(ye,me,K.angleTo(X),G);return De._round(),!A||yA(c,De,k,A,l)?De:void 0}O+=Q}}function YF(c,l,f,v,w,C,A,k,O){const $=xA(v,C,A),G=bA(v,w),X=G*A,K=c[0].x===0||c[0].x===O||c[0].y===0||c[0].y===O;return l-X<l/4&&(l=X+l/4),wA(c,K?l/2*k%l:(G/2+2*C)*A*k%l,l,$,f,X,K,!1,O)}function wA(c,l,f,v,w,C,A,k,O){const $=C/2,G=_A(c);let X=0,K=l-f,Q=[];for(let ee=0;ee<c.length-1;ee++){const ye=c[ee],me=c[ee+1],De=ye.dist(me),$e=me.angleTo(ye);for(;K+f<X+De;){K+=f;const Me=(K-X)/De,Oe=un(ye.x,me.x,Me),Je=un(ye.y,me.y,Me);if(Oe>=0&&Oe<O&&Je>=0&&Je<O&&K-$>=0&&K+$<=G){const Ze=new Bl(Oe,Je,$e,ee);Ze._round(),v&&!yA(c,Ze,C,v,w)||Q.push(Ze)}}X+=De}return k||Q.length||A||(Q=wA(c,X/2,f,v,w,C,A,!0,O)),Q}function SA(c,l,f,v,w){const C=[];for(let A=0;A<c.length;A++){const k=c[A];let O;for(let $=0;$<k.length-1;$++){let G=k[$],X=k[$+1];G.x<l&&X.x<l||(G.x<l?G=new ve(l,G.y+(l-G.x)/(X.x-G.x)*(X.y-G.y))._round():X.x<l&&(X=new ve(l,G.y+(l-G.x)/(X.x-G.x)*(X.y-G.y))._round()),G.y<f&&X.y<f||(G.y<f?G=new ve(G.x+(f-G.y)/(X.y-G.y)*(X.x-G.x),f)._round():X.y<f&&(X=new ve(G.x+(f-G.y)/(X.y-G.y)*(X.x-G.x),f)._round()),G.x>=v&&X.x>=v||(G.x>=v?G=new ve(v,G.y+(v-G.x)/(X.x-G.x)*(X.y-G.y))._round():X.x>=v&&(X=new ve(v,G.y+(v-G.x)/(X.x-G.x)*(X.y-G.y))._round()),G.y>=w&&X.y>=w||(G.y>=w?G=new ve(G.x+(w-G.y)/(X.y-G.y)*(X.x-G.x),w)._round():X.y>=w&&(X=new ve(G.x+(w-G.y)/(X.y-G.y)*(X.x-G.x),w)._round()),O&&G.equals(O[O.length-1])||(O=[G],C.push(O)),O.push(X)))))}}return C}function TA(c,l,f,v){const w=[],C=c.image,A=C.pixelRatio,k=C.paddedRect.w-2,O=C.paddedRect.h-2,$=c.right-c.left,G=c.bottom-c.top,X=C.stretchX||[[0,k]],K=C.stretchY||[[0,O]],Q=(ct,xt)=>ct+xt[1]-xt[0],ee=X.reduce(Q,0),ye=K.reduce(Q,0),me=k-ee,De=O-ye;let $e=0,Me=ee,Oe=0,Je=ye,Ze=0,At=me,Dt=0,_t=De;if(C.content&&v){const ct=C.content;$e=Tg(X,0,ct[0]),Oe=Tg(K,0,ct[1]),Me=Tg(X,ct[0],ct[2]),Je=Tg(K,ct[1],ct[3]),Ze=ct[0]-$e,Dt=ct[1]-Oe,At=ct[2]-ct[0]-Me,_t=ct[3]-ct[1]-Je}const pt=(ct,xt,gt,ot)=>{const Ht=Cg(ct.stretch-$e,Me,$,c.left),Bt=Eg(ct.fixed-Ze,At,ct.stretch,ee),ur=Cg(xt.stretch-Oe,Je,G,c.top),rn=Eg(xt.fixed-Dt,_t,xt.stretch,ye),dn=Cg(gt.stretch-$e,Me,$,c.left),Vn=Eg(gt.fixed-Ze,At,gt.stretch,ee),Pa=Cg(ot.stretch-Oe,Je,G,c.top),fi=Eg(ot.fixed-Dt,_t,ot.stretch,ye),Ln=new ve(Ht,ur),Kn=new ve(dn,ur),di=new ve(dn,Pa),_i=new ve(Ht,Pa),Yi=new ve(Bt/A,rn/A),kn=new ve(Vn/A,fi/A),pi=l*Math.PI/180;if(pi){const Ki=Math.sin(pi),Ji=Math.cos(pi),gn=[Ji,-Ki,Ki,Ji];Ln._matMult(gn),Kn._matMult(gn),_i._matMult(gn),di._matMult(gn)}const xi=ct.stretch+ct.fixed,zi=xt.stretch+xt.fixed;return{tl:Ln,tr:Kn,bl:_i,br:di,tex:{x:C.paddedRect.x+1+xi,y:C.paddedRect.y+1+zi,w:gt.stretch+gt.fixed-xi,h:ot.stretch+ot.fixed-zi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yi,pixelOffsetBR:kn,minFontScaleX:At/A/$,minFontScaleY:_t/A/G,isSDF:f}};if(v&&(C.stretchX||C.stretchY)){const ct=CA(X,me,ee),xt=CA(K,De,ye);for(let gt=0;gt<ct.length-1;gt++){const ot=ct[gt],Ht=ct[gt+1];for(let Bt=0;Bt<xt.length-1;Bt++)w.push(pt(ot,xt[Bt],Ht,xt[Bt+1]))}}else w.push(pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:O+1}));return w}function Tg(c,l,f){let v=0;for(const w of c)v+=Math.max(l,Math.min(f,w[1]))-Math.max(l,Math.min(f,w[0]));return v}function CA(c,l,f){const v=[{fixed:-1,stretch:0}];for(const[w,C]of c){const A=v[v.length-1];v.push({fixed:w-A.stretch,stretch:A.stretch}),v.push({fixed:w-A.stretch,stretch:A.stretch+(C-w)})}return v.push({fixed:l+1,stretch:f}),v}function Cg(c,l,f,v){return c/l*f+v}function Eg(c,l,f,v){return c-l*f/v}Mt("Anchor",Bl);class Ag{constructor(l,f,v,w,C,A,k,O,$,G){if(this.boxStartIndex=l.length,$){let X=A.top,K=A.bottom;const Q=A.collisionPadding;Q&&(X-=Q[1],K+=Q[3]);let ee=K-X;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let X=A.top*k-O[0],K=A.bottom*k+O[2],Q=A.left*k-O[3],ee=A.right*k+O[1];const ye=A.collisionPadding;if(ye&&(Q-=ye[0]*k,X-=ye[1]*k,ee+=ye[2]*k,K+=ye[3]*k),G){const me=new ve(Q,X),De=new ve(ee,X),$e=new ve(Q,K),Me=new ve(ee,K),Oe=G*Math.PI/180;me._rotate(Oe),De._rotate(Oe),$e._rotate(Oe),Me._rotate(Oe),Q=Math.min(me.x,De.x,$e.x,Me.x),ee=Math.max(me.x,De.x,$e.x,Me.x),X=Math.min(me.y,De.y,$e.y,Me.y),K=Math.max(me.y,De.y,$e.y,Me.y)}l.emplaceBack(f.x,f.y,Q,X,ee,K,v,w,C)}this.boxEndIndex=l.length}}class KF{constructor(l=[],f=JF){if(this.data=l,this.length=this.data.length,this.compare=f,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(l){this.data.push(l),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const l=this.data[0],f=this.data.pop();return this.length--,this.length>0&&(this.data[0]=f,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:f,compare:v}=this,w=f[l];for(;l>0;){const C=l-1>>1,A=f[C];if(v(w,A)>=0)break;f[l]=A,l=C}f[l]=w}_down(l){const{data:f,compare:v}=this,w=this.length>>1,C=f[l];for(;l<w;){let A=1+(l<<1),k=f[A];const O=A+1;if(O<this.length&&v(f[O],k)<0&&(A=O,k=f[O]),v(k,C)>=0)break;f[l]=k,l=A}f[l]=C}}function JF(c,l){return c<l?-1:c>l?1:0}function QF(c,l=1,f=!1){let v=1/0,w=1/0,C=-1/0,A=-1/0;const k=c[0];for(let Q=0;Q<k.length;Q++){const ee=k[Q];(!Q||ee.x<v)&&(v=ee.x),(!Q||ee.y<w)&&(w=ee.y),(!Q||ee.x>C)&&(C=ee.x),(!Q||ee.y>A)&&(A=ee.y)}const O=Math.min(C-v,A-w);let $=O/2;const G=new KF([],e$);if(O===0)return new ve(v,w);for(let Q=v;Q<C;Q+=O)for(let ee=w;ee<A;ee+=O)G.push(new Oh(Q+$,ee+$,$,c));let X=function(Q){let ee=0,ye=0,me=0;const De=Q[0];for(let $e=0,Me=De.length,Oe=Me-1;$e<Me;Oe=$e++){const Je=De[$e],Ze=De[Oe],At=Je.x*Ze.y-Ze.x*Je.y;ye+=(Je.x+Ze.x)*At,me+=(Je.y+Ze.y)*At,ee+=3*At}return new Oh(ye/ee,me/ee,0,Q)}(c),K=G.length;for(;G.length;){const Q=G.pop();(Q.d>X.d||!X.d)&&(X=Q,f&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,K)),Q.max-X.d<=l||($=Q.h/2,G.push(new Oh(Q.p.x-$,Q.p.y-$,$,c)),G.push(new Oh(Q.p.x+$,Q.p.y-$,$,c)),G.push(new Oh(Q.p.x-$,Q.p.y+$,$,c)),G.push(new Oh(Q.p.x+$,Q.p.y+$,$,c)),K+=4)}return f&&(console.log(`num probes: ${K}`),console.log(`best distance: ${X.d}`)),X.p}function e$(c,l){return l.max-c.max}function Oh(c,l,f,v){this.p=new ve(c,l),this.h=f,this.d=function(w,C){let A=!1,k=1/0;for(let O=0;O<C.length;O++){const $=C[O];for(let G=0,X=$.length,K=X-1;G<X;K=G++){const Q=$[G],ee=$[K];Q.y>w.y!=ee.y>w.y&&w.x<(ee.x-Q.x)*(w.y-Q.y)/(ee.y-Q.y)+Q.x&&(A=!A),k=Math.min(k,kE(w,Q,ee))}}return(A?1:-1)*Math.sqrt(k)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}const ix=Number.POSITIVE_INFINITY;function EA(c,l){return l[1]!==ix?function(f,v,w){let C=0,A=0;switch(v=Math.abs(v),w=Math.abs(w),f){case"top-right":case"top-left":case"top":A=w-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-w}switch(f){case"top-right":case"bottom-right":case"right":C=-v;break;case"top-left":case"bottom-left":case"left":C=v}return[C,A]}(c,l[0],l[1]):function(f,v){let w=0,C=0;v<0&&(v=0);const A=v/Math.sqrt(2);switch(f){case"top-right":case"top-left":C=A-7;break;case"bottom-right":case"bottom-left":C=7-A;break;case"bottom":C=7-v;break;case"top":C=v-7}switch(f){case"top-right":case"bottom-right":w=-A;break;case"top-left":case"bottom-left":w=A;break;case"left":w=v;break;case"right":w=-v}return[w,C]}(c,l[0])}function ax(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function t$(c,l,f,v,w,C,A,k,O,$,G){let X=C.textMaxSize.evaluate(l,{});X===void 0&&(X=A);const K=c.layers[0].layout,Q=K.get("icon-offset").evaluate(l,{},G),ee=MA(f.horizontal),ye=A/24,me=c.tilePixelRatio*ye,De=c.tilePixelRatio*X/24,$e=c.tilePixelRatio*k,Me=c.tilePixelRatio*K.get("symbol-spacing"),Oe=K.get("text-padding")*c.tilePixelRatio,Je=function(ot,Ht,Bt,ur=1){const rn=ot.get("icon-padding").evaluate(Ht,{},Bt),dn=rn&&rn.values;return[dn[0]*ur,dn[1]*ur,dn[2]*ur,dn[3]*ur]}(K,l,G,c.tilePixelRatio),Ze=K.get("text-max-angle")/180*Math.PI,At=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",Dt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",_t=K.get("symbol-placement"),pt=Me/2,ct=K.get("icon-text-fit");let xt;v&&ct!=="none"&&(c.allowVerticalPlacement&&f.vertical&&(xt=vA(v,f.vertical,ct,K.get("icon-text-fit-padding"),Q,ye)),ee&&(v=vA(v,ee,ct,K.get("icon-text-fit-padding"),Q,ye)));const gt=(ot,Ht)=>{Ht.x<0||Ht.x>=Nn||Ht.y<0||Ht.y>=Nn||function(Bt,ur,rn,dn,Vn,Pa,fi,Ln,Kn,di,_i,Yi,kn,pi,xi,zi,Ki,Ji,gn,Jn,dr,da,mi,bi,Xa){const bo=Bt.addToLineVertexArray(ur,rn);let wo,Bs,Za,Da,Qi=0,Fs=0,rp=0,jA=0,mx=-1,vx=-1;const $s={};let GA=Yn.exports(""),gx=0,yx=0;if(Ln._unevaluatedLayout.getValue("text-radial-offset")===void 0?[gx,yx]=Ln.layout.get("text-offset").evaluate(dr,{},bi).map(ea=>ea*ii):(gx=Ln.layout.get("text-radial-offset").evaluate(dr,{},bi)*ii,yx=ix),Bt.allowVerticalPlacement&&dn.vertical){const ea=Ln.layout.get("text-rotate").evaluate(dr,{},bi)+90;Za=new Ag(Kn,ur,di,_i,Yi,dn.vertical,kn,pi,xi,ea),fi&&(Da=new Ag(Kn,ur,di,_i,Yi,fi,Ki,Ji,xi,ea))}if(Vn){const ea=Ln.layout.get("icon-rotate").evaluate(dr,{}),es=Ln.layout.get("icon-text-fit")!=="none",np=TA(Vn,ea,mi,es),ip=fi?TA(fi,ea,mi,es):void 0;Bs=new Ag(Kn,ur,di,_i,Yi,Vn,Ki,Ji,!1,ea),Qi=4*np.length;const XA=Bt.iconSizeData;let Xu=null;XA.kind==="source"?(Xu=[zs*Ln.layout.get("icon-size").evaluate(dr,{})],Xu[0]>Fl&&H(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):XA.kind==="composite"&&(Xu=[zs*da.compositeIconSizes[0].evaluate(dr,{},bi),zs*da.compositeIconSizes[1].evaluate(dr,{},bi)],(Xu[0]>Fl||Xu[1]>Fl)&&H(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,np,Xu,Jn,gn,dr,o.WritingMode.none,ur,bo.lineStartIndex,bo.lineLength,-1,bi),mx=Bt.icon.placedSymbolArray.length-1,ip&&(Fs=4*ip.length,Bt.addSymbols(Bt.icon,ip,Xu,Jn,gn,dr,o.WritingMode.vertical,ur,bo.lineStartIndex,bo.lineLength,-1,bi),vx=Bt.icon.placedSymbolArray.length-1)}const qA=Object.keys(dn.horizontal);for(const ea of qA){const es=dn.horizontal[ea];if(!wo){GA=Yn.exports(es.text);const ip=Ln.layout.get("text-rotate").evaluate(dr,{},bi);wo=new Ag(Kn,ur,di,_i,Yi,es,kn,pi,xi,ip)}const np=es.positionedLines.length===1;if(rp+=AA(Bt,ur,es,Pa,Ln,xi,dr,zi,bo,dn.vertical?o.WritingMode.horizontal:o.WritingMode.horizontalOnly,np?qA:[ea],$s,mx,da,bi),np)break}dn.vertical&&(jA+=AA(Bt,ur,dn.vertical,Pa,Ln,xi,dr,zi,bo,o.WritingMode.vertical,["vertical"],$s,vx,da,bi));const p$=wo?wo.boxStartIndex:Bt.collisionBoxArray.length,m$=wo?wo.boxEndIndex:Bt.collisionBoxArray.length,v$=Za?Za.boxStartIndex:Bt.collisionBoxArray.length,g$=Za?Za.boxEndIndex:Bt.collisionBoxArray.length,y$=Bs?Bs.boxStartIndex:Bt.collisionBoxArray.length,_$=Bs?Bs.boxEndIndex:Bt.collisionBoxArray.length,x$=Da?Da.boxStartIndex:Bt.collisionBoxArray.length,b$=Da?Da.boxEndIndex:Bt.collisionBoxArray.length;let So=-1;const Lg=(ea,es)=>ea&&ea.circleDiameter?Math.max(ea.circleDiameter,es):es;So=Lg(wo,So),So=Lg(Za,So),So=Lg(Bs,So),So=Lg(Da,So);const WA=So>-1?1:0;WA&&(So*=Xa/ii),Bt.glyphOffsetArray.length>=zh.MAX_GLYPHS&&H("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),dr.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,dr.sortKey),Bt.symbolInstances.emplaceBack(ur.x,ur.y,$s.right>=0?$s.right:-1,$s.center>=0?$s.center:-1,$s.left>=0?$s.left:-1,$s.vertical||-1,mx,vx,GA,p$,m$,v$,g$,y$,_$,x$,b$,di,rp,jA,Qi,Fs,WA,0,kn,gx,yx,So)}(c,Ht,ot,f,v,w,xt,c.layers[0],c.collisionBoxArray,l.index,l.sourceLayerIndex,c.index,me,[Oe,Oe,Oe,Oe],At,O,$e,Je,Dt,Q,l,C,$,G,A)};if(_t==="line")for(const ot of SA(l.geometry,0,0,Nn,Nn)){const Ht=YF(ot,Me,Ze,f.vertical||ee,v,24,De,c.overscaling,Nn);for(const Bt of Ht){const ur=ee;ur&&r$(c,ur.text,pt,Bt)||gt(ot,Bt)}}else if(_t==="line-center"){for(const ot of l.geometry)if(ot.length>1){const Ht=ZF(ot,Ze,f.vertical||ee,v,24,De);Ht&&gt(ot,Ht)}}else if(l.type==="Polygon")for(const ot of q1(l.geometry,0)){const Ht=QF(ot,16);gt(ot[0],new Bl(Ht.x,Ht.y,0))}else if(l.type==="LineString")for(const ot of l.geometry)gt(ot,new Bl(ot[0].x,ot[0].y,0));else if(l.type==="Point")for(const ot of l.geometry)for(const Ht of ot)gt([Ht],new Bl(Ht.x,Ht.y,0))}const Fl=32640;function AA(c,l,f,v,w,C,A,k,O,$,G,X,K,Q,ee){const ye=function($e,Me,Oe,Je,Ze,At,Dt,_t){const pt=Je.layout.get("text-rotate").evaluate(At,{})*Math.PI/180,ct=[];for(const xt of Me.positionedLines)for(const gt of xt.positionedGlyphs){if(!gt.rect)continue;const ot=gt.rect||{};let Ht=4,Bt=!0,ur=1,rn=0;const dn=(Ze||_t)&&gt.vertical,Vn=gt.metrics.advance*gt.scale/2;if(_t&&Me.verticalizable){const gn=(gt.scale-1)*ii,Jn=(ii-gt.metrics.width*gt.scale)/2;rn=xt.lineOffset/2-(gt.imageName?-Jn:gn)}if(gt.imageName){const gn=Dt[gt.imageName];Bt=gn.sdf,ur=gn.pixelRatio,Ht=1/ur}const Pa=Ze?[gt.x+Vn,gt.y]:[0,0];let fi=Ze?[0,0]:[gt.x+Vn+Oe[0],gt.y+Oe[1]-rn],Ln=[0,0];dn&&(Ln=fi,fi=[0,0]);const Kn=(gt.metrics.left-Ht)*gt.scale-Vn+fi[0],di=(-gt.metrics.top-Ht)*gt.scale+fi[1],_i=Kn+ot.w*gt.scale/ur,Yi=di+ot.h*gt.scale/ur,kn=new ve(Kn,di),pi=new ve(_i,di),xi=new ve(Kn,Yi),zi=new ve(_i,Yi);if(dn){const gn=new ve(-Vn,Vn-bg),Jn=-Math.PI/2,dr=12-Vn,da=new ve(22-dr,-(gt.imageName?dr:0)),mi=new ve(...Ln);kn._rotateAround(Jn,gn)._add(da)._add(mi),pi._rotateAround(Jn,gn)._add(da)._add(mi),xi._rotateAround(Jn,gn)._add(da)._add(mi),zi._rotateAround(Jn,gn)._add(da)._add(mi)}if(pt){const gn=Math.sin(pt),Jn=Math.cos(pt),dr=[Jn,-gn,gn,Jn];kn._matMult(dr),pi._matMult(dr),xi._matMult(dr),zi._matMult(dr)}const Ki=new ve(0,0),Ji=new ve(0,0);ct.push({tl:kn,tr:pi,bl:xi,br:zi,tex:ot,writingMode:Me.writingMode,glyphOffset:Pa,sectionIndex:gt.sectionIndex,isSDF:Bt,pixelOffsetTL:Ki,pixelOffsetBR:Ji,minFontScaleX:0,minFontScaleY:0})}return ct}(0,f,k,w,C,A,v,c.allowVerticalPlacement),me=c.textSizeData;let De=null;me.kind==="source"?(De=[zs*w.layout.get("text-size").evaluate(A,{})],De[0]>Fl&&H(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):me.kind==="composite"&&(De=[zs*Q.compositeTextSizes[0].evaluate(A,{},ee),zs*Q.compositeTextSizes[1].evaluate(A,{},ee)],(De[0]>Fl||De[1]>Fl)&&H(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,ye,De,k,C,A,$,l,O.lineStartIndex,O.lineLength,K,ee);for(const $e of G)X[$e]=c.text.placedSymbolArray.length-1;return 4*ye.length}function MA(c){for(const l in c)return c[l];return null}function r$(c,l,f,v){const w=c.compareText;if(l in w){const C=w[l];for(let A=C.length-1;A>=0;A--)if(v.dist(C[A])<f)return!0}else w[l]=[];return w[l].push(v),!1}const n$=Ol.VectorTileFeature.types,i$=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mg(c,l,f,v,w,C,A,k,O,$,G,X,K){const Q=k?Math.min(Fl,Math.round(k[0])):0,ee=k?Math.min(Fl,Math.round(k[1])):0;c.emplaceBack(l,f,Math.round(32*v),Math.round(32*w),C,A,(Q<<1)+(O?1:0),ee,16*$,16*G,256*X,256*K)}function ox(c,l,f){c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f)}function a$(c){for(const l of c.sections)if(ng(l.text))return!0;return!1}class sx{constructor(l){this.layoutVertexArray=new qa,this.indexArray=new ki,this.programConfigurations=l,this.segments=new hr,this.dynamicLayoutVertexArray=new Aa,this.opacityVertexArray=new Wa,this.placedSymbolArray=new nt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,f,v,w){this.isEmpty()||(v&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,MF.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,IF.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,i$,!0),this.opacityVertexBuffer.itemSize=1),(v||w)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Mt("SymbolBuffers",sx);class lx{constructor(l,f,v){this.layoutVertexArray=new l,this.layoutAttributes=f,this.indexArray=new v,this.segments=new hr,this.collisionVertexArray=new ha}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,PF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Mt("CollisionBuffers",lx);class zh{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(A=>A.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=N1([]),this.placementViewportMatrix=N1([]);const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gA(this.zoom,f["text-size"]),this.iconSizeData=gA(this.zoom,f["icon-size"]);const v=this.layers[0].layout,w=v.get("symbol-sort-key"),C=v.get("symbol-z-order");this.canOverlap=cx(v,"text-overlap","text-allow-overlap")!=="never"||cx(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(A=>o.WritingMode[A])),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id),this.sourceID=l.sourceID}createArrays(){this.text=new sx(new Hu(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new sx(new Hu(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new dt,this.lineVertexArray=new Et,this.symbolInstances=new wt}calculateGlyphDependencies(l,f,v,w,C){for(let A=0;A<l.length;A++)if(f[l.charCodeAt(A)]=!0,(v||w)&&C){const k=Jd[l.charAt(A)];k&&(f[k.charCodeAt(0)]=!0)}}populate(l,f,v){const w=this.layers[0],C=w.layout,A=C.get("text-font"),k=C.get("text-field"),O=C.get("icon-image"),$=(k.value.kind!=="constant"||k.value.value instanceof be&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),G=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,X=C.get("symbol-sort-key");if(this.features=[],!$&&!G)return;const K=f.iconDependencies,Q=f.glyphDependencies,ee=f.availableImages,ye=new hn(this.zoom);for(const{feature:me,id:De,index:$e,sourceLayerIndex:Me}of l){const Oe=w._featureFilter.needGeometry,Je=Gu(me,Oe);if(!w._featureFilter.filter(ye,Je,v))continue;let Ze,At;if(Oe||(Je.geometry=ju(me)),$){const _t=w.getValueAndResolveTokens("text-field",Je,v,ee),pt=be.factory(_t);a$(pt)&&(this.hasRTLText=!0),(!this.hasRTLText||Nu()==="unavailable"||this.hasRTLText&&ca.isParsed())&&(Ze=LF(pt,w,Je))}if(G){const _t=w.getValueAndResolveTokens("icon-image",Je,v,ee);At=_t instanceof Ce?_t:Ce.fromString(_t)}if(!Ze&&!At)continue;const Dt=this.sortFeaturesByKey?X.evaluate(Je,{},v):void 0;if(this.features.push({id:De,text:Ze,icon:At,index:$e,sourceLayerIndex:Me,geometry:Je.geometry,properties:me.properties,type:n$[me.type],sortKey:Dt}),At&&(K[At.name]=!0),Ze){const _t=A.evaluate(Je,{},v).join(","),pt=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.WritingMode.vertical)>=0;for(const ct of Ze.sections)if(ct.image)K[ct.image.name]=!0;else{const xt=Th(Ze.toString()),gt=ct.fontStack||_t,ot=Q[gt]=Q[gt]||{};this.calculateGlyphDependencies(ct.text,ot,pt,this.allowVerticalPlacement,xt)}}}C.get("symbol-placement")==="line"&&(this.features=function(me){const De={},$e={},Me=[];let Oe=0;function Je(_t){Me.push(me[_t]),Oe++}function Ze(_t,pt,ct){const xt=$e[_t];return delete $e[_t],$e[pt]=xt,Me[xt].geometry[0].pop(),Me[xt].geometry[0]=Me[xt].geometry[0].concat(ct[0]),xt}function At(_t,pt,ct){const xt=De[pt];return delete De[pt],De[_t]=xt,Me[xt].geometry[0].shift(),Me[xt].geometry[0]=ct[0].concat(Me[xt].geometry[0]),xt}function Dt(_t,pt,ct){const xt=ct?pt[0][pt[0].length-1]:pt[0][0];return`${_t}:${xt.x}:${xt.y}`}for(let _t=0;_t<me.length;_t++){const pt=me[_t],ct=pt.geometry,xt=pt.text?pt.text.toString():null;if(!xt){Je(_t);continue}const gt=Dt(xt,ct),ot=Dt(xt,ct,!0);if(gt in $e&&ot in De&&$e[gt]!==De[ot]){const Ht=At(gt,ot,ct),Bt=Ze(gt,ot,Me[Ht].geometry);delete De[gt],delete $e[ot],$e[Dt(xt,Me[Bt].geometry,!0)]=Bt,Me[Ht].geometry=null}else gt in $e?Ze(gt,ot,ct):ot in De?At(gt,ot,ct):(Je(_t),De[gt]=Oe-1,$e[ot]=Oe-1)}return Me.filter(_t=>_t.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,De)=>me.sortKey-De.sortKey)}update(l,f,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,f,this.layers,v),this.icon.programConfigurations.updatePaintArrays(l,f,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,f){const v=this.lineVertexArray.length;if(l.segment!==void 0){let w=l.dist(f[l.segment+1]),C=l.dist(f[l.segment]);const A={};for(let k=l.segment+1;k<f.length;k++)A[k]={x:f[k].x,y:f[k].y,tileUnitDistanceFromAnchor:w},k<f.length-1&&(w+=f[k+1].dist(f[k]));for(let k=l.segment||0;k>=0;k--)A[k]={x:f[k].x,y:f[k].y,tileUnitDistanceFromAnchor:C},k>0&&(C+=f[k-1].dist(f[k]));for(let k=0;k<f.length;k++){const O=A[k];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(l,f,v,w,C,A,k,O,$,G,X,K){const Q=l.indexArray,ee=l.layoutVertexArray,ye=l.segments.prepareSegment(4*f.length,ee,Q,this.canOverlap?A.sortKey:void 0),me=this.glyphOffsetArray.length,De=ye.vertexLength,$e=this.allowVerticalPlacement&&k===o.WritingMode.vertical?Math.PI/2:0,Me=A.text&&A.text.sections;for(let Oe=0;Oe<f.length;Oe++){const{tl:Je,tr:Ze,bl:At,br:Dt,tex:_t,pixelOffsetTL:pt,pixelOffsetBR:ct,minFontScaleX:xt,minFontScaleY:gt,glyphOffset:ot,isSDF:Ht,sectionIndex:Bt}=f[Oe],ur=ye.vertexLength,rn=ot[1];Mg(ee,O.x,O.y,Je.x,rn+Je.y,_t.x,_t.y,v,Ht,pt.x,pt.y,xt,gt),Mg(ee,O.x,O.y,Ze.x,rn+Ze.y,_t.x+_t.w,_t.y,v,Ht,ct.x,pt.y,xt,gt),Mg(ee,O.x,O.y,At.x,rn+At.y,_t.x,_t.y+_t.h,v,Ht,pt.x,ct.y,xt,gt),Mg(ee,O.x,O.y,Dt.x,rn+Dt.y,_t.x+_t.w,_t.y+_t.h,v,Ht,ct.x,ct.y,xt,gt),ox(l.dynamicLayoutVertexArray,O,$e),Q.emplaceBack(ur,ur+1,ur+2),Q.emplaceBack(ur+1,ur+2,ur+3),ye.vertexLength+=4,ye.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ot[0]),Oe!==f.length-1&&Bt===f[Oe+1].sectionIndex||l.programConfigurations.populatePaintArrays(ee.length,A,A.index,{},K,Me&&Me[Bt])}l.placedSymbolArray.emplaceBack(O.x,O.y,me,this.glyphOffsetArray.length-me,De,$,G,O.segment,v?v[0]:0,v?v[1]:0,w[0],w[1],k,0,!1,0,X)}_addCollisionDebugVertex(l,f,v,w,C,A){return f.emplaceBack(0,0),l.emplaceBack(v.x,v.y,w,C,Math.round(A.x),Math.round(A.y))}addCollisionDebugVertices(l,f,v,w,C,A,k){const O=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),$=O.vertexLength,G=C.layoutVertexArray,X=C.collisionVertexArray,K=k.anchorX,Q=k.anchorY;this._addCollisionDebugVertex(G,X,A,K,Q,new ve(l,f)),this._addCollisionDebugVertex(G,X,A,K,Q,new ve(v,f)),this._addCollisionDebugVertex(G,X,A,K,Q,new ve(v,w)),this._addCollisionDebugVertex(G,X,A,K,Q,new ve(l,w)),O.vertexLength+=4;const ee=C.indexArray;ee.emplaceBack($,$+1),ee.emplaceBack($+1,$+2),ee.emplaceBack($+2,$+3),ee.emplaceBack($+3,$),O.primitiveLength+=4}addDebugCollisionBoxes(l,f,v,w){for(let C=l;C<f;C++){const A=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(A.x1,A.y1,A.x2,A.y2,w?this.textCollisionBox:this.iconCollisionBox,A.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lx(Jo,nA.members,_o),this.iconCollisionBox=new lx(Jo,nA.members,_o);for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(l,f,v,w,C,A,k,O,$){const G={};for(let X=f;X<v;X++){const K=l.get(X);G.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.textFeatureIndex=K.featureIndex;break}for(let X=w;X<C;X++){const K=l.get(X);G.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.verticalTextFeatureIndex=K.featureIndex;break}for(let X=A;X<k;X++){const K=l.get(X);G.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.iconFeatureIndex=K.featureIndex;break}for(let X=O;X<$;X++){const K=l.get(X);G.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.verticalIconFeatureIndex=K.featureIndex;break}return G}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const v=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,f){const v=l.placedSymbolArray.get(f),w=v.vertexStartIndex+4*v.numGlyphs;for(let C=v.vertexStartIndex;C<w;C+=4)l.indexArray.emplaceBack(C,C+1,C+2),l.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(l),v=Math.cos(l),w=[],C=[],A=[];for(let k=0;k<this.symbolInstances.length;++k){A.push(k);const O=this.symbolInstances.get(k);w.push(0|Math.round(f*O.anchorX+v*O.anchorY)),C.push(O.featureIndex)}return A.sort((k,O)=>w[k]-w[O]||C[O]-C[k]),A}addToSortKeyRanges(l,f){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===f?v.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const v=this.symbolInstances.get(f);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((w,C,A)=>{w>=0&&A.indexOf(w)===C&&this.addIndicesForPlacedSymbol(this.text,w)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Mt("SymbolBucket",zh,{omit:["layers","collisionBoxArray","features","compareText"]}),zh.MAX_GLYPHS=65535,zh.addDynamicAttributes=ox;const o$=new ni({"symbol-placement":new Ot(Be.layout_symbol["symbol-placement"]),"symbol-spacing":new Ot(Be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ot(Be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new qt(Be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ot(Be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ot(Be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ot(Be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ot(Be.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ot(Be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ot(Be.layout_symbol["icon-rotation-alignment"]),"icon-size":new qt(Be.layout_symbol["icon-size"]),"icon-text-fit":new Ot(Be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ot(Be.layout_symbol["icon-text-fit-padding"]),"icon-image":new qt(Be.layout_symbol["icon-image"]),"icon-rotate":new qt(Be.layout_symbol["icon-rotate"]),"icon-padding":new qt(Be.layout_symbol["icon-padding"]),"icon-keep-upright":new Ot(Be.layout_symbol["icon-keep-upright"]),"icon-offset":new qt(Be.layout_symbol["icon-offset"]),"icon-anchor":new qt(Be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ot(Be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ot(Be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ot(Be.layout_symbol["text-rotation-alignment"]),"text-field":new qt(Be.layout_symbol["text-field"]),"text-font":new qt(Be.layout_symbol["text-font"]),"text-size":new qt(Be.layout_symbol["text-size"]),"text-max-width":new qt(Be.layout_symbol["text-max-width"]),"text-line-height":new Ot(Be.layout_symbol["text-line-height"]),"text-letter-spacing":new qt(Be.layout_symbol["text-letter-spacing"]),"text-justify":new qt(Be.layout_symbol["text-justify"]),"text-radial-offset":new qt(Be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ot(Be.layout_symbol["text-variable-anchor"]),"text-anchor":new qt(Be.layout_symbol["text-anchor"]),"text-max-angle":new Ot(Be.layout_symbol["text-max-angle"]),"text-writing-mode":new Ot(Be.layout_symbol["text-writing-mode"]),"text-rotate":new qt(Be.layout_symbol["text-rotate"]),"text-padding":new Ot(Be.layout_symbol["text-padding"]),"text-keep-upright":new Ot(Be.layout_symbol["text-keep-upright"]),"text-transform":new qt(Be.layout_symbol["text-transform"]),"text-offset":new qt(Be.layout_symbol["text-offset"]),"text-allow-overlap":new Ot(Be.layout_symbol["text-allow-overlap"]),"text-overlap":new Ot(Be.layout_symbol["text-overlap"]),"text-ignore-placement":new Ot(Be.layout_symbol["text-ignore-placement"]),"text-optional":new Ot(Be.layout_symbol["text-optional"])});var ux={paint:new ni({"icon-opacity":new qt(Be.paint_symbol["icon-opacity"]),"icon-color":new qt(Be.paint_symbol["icon-color"]),"icon-halo-color":new qt(Be.paint_symbol["icon-halo-color"]),"icon-halo-width":new qt(Be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new qt(Be.paint_symbol["icon-halo-blur"]),"icon-translate":new Ot(Be.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ot(Be.paint_symbol["icon-translate-anchor"]),"text-opacity":new qt(Be.paint_symbol["text-opacity"]),"text-color":new qt(Be.paint_symbol["text-color"],{runtimeType:ri,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new qt(Be.paint_symbol["text-halo-color"]),"text-halo-width":new qt(Be.paint_symbol["text-halo-width"]),"text-halo-blur":new qt(Be.paint_symbol["text-halo-blur"]),"text-translate":new Ot(Be.paint_symbol["text-translate"]),"text-translate-anchor":new Ot(Be.paint_symbol["text-translate-anchor"])}),layout:o$};class IA{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:Fn,this.defaultValue=l}evaluate(l){if(l.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(l.formattedSection))return f.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Mt("FormatSectionOverride",IA,{omit:["defaultValue"]});class Ig extends Ga{constructor(l){super(l,ux)}recalculate(l,f){if(super.recalculate(l,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const w=[];for(const C of v)w.indexOf(C)<0&&w.push(C);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,f,v,w){const C=this.layout.get(l).evaluate(f,{},v,w),A=this._unevaluatedLayout._values[l];return A.isDataDriven()||Au(A.value)||!C?C:function(k,O){return O.replace(/{([^{}]+)}/g,($,G)=>G in k?String(k[G]):"")}(f.properties,C)}createBucket(l){return new zh(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of ux.paint.overridableProperties){if(!Ig.hasPaintOverride(this.layout,l))continue;const f=this.paint.get(l),v=new IA(f),w=new yh(v,f.property.specification);let C=null;C=f.value.kind==="constant"||f.value.kind==="source"?new Iu("source",w):new Ed("composite",w,f.value.zoomStops),this.paint._values[l]=new ja(f.property,C,f.parameters)}}_handleOverridablePaintPropertyUpdate(l,f,v){return!(!this.layout||f.isDataDriven()||v.isDataDriven())&&Ig.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,f){const v=l.get("text-field"),w=ux.paint.properties[f];let C=!1;const A=k=>{for(const O of k)if(w.overrides&&w.overrides.hasOverride(O))return void(C=!0)};if(v.value.kind==="constant"&&v.value.value instanceof be)A(v.value.value.sections);else if(v.value.kind==="source"){const k=$=>{C||($ instanceof kt&&Ve($.value)===qn?A($.value.sections):$ instanceof vh?A($.sections):$.eachChild(k))},O=v.value;O._styleExpression&&k(O._styleExpression.expression)}return C}}function cx(c,l,f){let v="never";const w=c.get(l);return w?v=w:c.get(f)&&(v="always"),v}var s$={paint:new ni({"background-color":new Ot(Be.paint_background["background-color"]),"background-pattern":new Fd(Be.paint_background["background-pattern"]),"background-opacity":new Ot(Be.paint_background["background-opacity"])})},l$={paint:new ni({"raster-opacity":new Ot(Be.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ot(Be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ot(Be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ot(Be.paint_raster["raster-brightness-max"]),"raster-saturation":new Ot(Be.paint_raster["raster-saturation"]),"raster-contrast":new Ot(Be.paint_raster["raster-contrast"]),"raster-resampling":new Ot(Be.paint_raster["raster-resampling"]),"raster-fade-duration":new Ot(Be.paint_raster["raster-fade-duration"])})};class u$ extends Ga{constructor(l){super(l,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const c$={circle:class extends Ga{constructor(c){super(c,V8)}createBucket(c){return new B1(c)}queryRadius(c){const l=c;return Hd("circle-radius",this,l)+Hd("circle-stroke-width",this,l)+fg(this.paint.get("circle-translate"))}queryIntersectsFeature(c,l,f,v,w,C,A,k){const O=dg(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,A),$=this.paint.get("circle-radius").evaluate(l,f)+this.paint.get("circle-stroke-width").evaluate(l,f),G=this.paint.get("circle-pitch-alignment")==="map",X=G?O:function(Q,ee){return Q.map(ye=>NE(ye,ee))}(O,k),K=G?$*A:$;for(const Q of v)for(const ee of Q){const ye=G?ee:NE(ee,k);let me=K;const De=pg([],[ee.x,ee.y,0,1],k);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?me*=De[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(me*=C.cameraToCenterDistance/De[3]),z8(X,ye,me))return!0}return!1}},heatmap:class extends Ga{constructor(c){super(c,H8),this._updateColorRamp()}createBucket(c){return new VE(c)}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=HE({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Ga{constructor(c){super(c,j8)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Ga{constructor(c){super(c,oF)}recalculate(c,l){super.recalculate(c,l);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Z1(c)}queryRadius(){return fg(this.paint.get("fill-translate"))}queryIntersectsFeature(c,l,f,v,w,C,A){return LE(dg(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,A),v)}isTileClipped(){return!0}},"fill-extrusion":class extends Ga{constructor(c){super(c,xF)}createBucket(c){return new K1(c)}queryRadius(){return fg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,l,f,v,w,C,A,k){const O=dg(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,A),$=this.paint.get("fill-extrusion-height").evaluate(l,f),G=this.paint.get("fill-extrusion-base").evaluate(l,f),X=function(Q,ee,ye,me){const De=[];for(const $e of Q){const Me=[$e.x,$e.y,0,1];pg(Me,Me,ee),De.push(new ve(Me[0]/Me[3],Me[1]/Me[3]))}return De}(O,k),K=function(Q,ee,ye,me){const De=[],$e=[],Me=me[8]*ee,Oe=me[9]*ee,Je=me[10]*ee,Ze=me[11]*ee,At=me[8]*ye,Dt=me[9]*ye,_t=me[10]*ye,pt=me[11]*ye;for(const ct of Q){const xt=[],gt=[];for(const ot of ct){const Ht=ot.x,Bt=ot.y,ur=me[0]*Ht+me[4]*Bt+me[12],rn=me[1]*Ht+me[5]*Bt+me[13],dn=me[2]*Ht+me[6]*Bt+me[14],Vn=me[3]*Ht+me[7]*Bt+me[15],Pa=dn+Je,fi=Vn+Ze,Ln=ur+At,Kn=rn+Dt,di=dn+_t,_i=Vn+pt,Yi=new ve((ur+Me)/fi,(rn+Oe)/fi);Yi.z=Pa/fi,xt.push(Yi);const kn=new ve(Ln/_i,Kn/_i);kn.z=di/_i,gt.push(kn)}De.push(xt),$e.push(gt)}return[De,$e]}(v,G,$,k);return function(Q,ee,ye){let me=1/0;LE(ye,ee)&&(me=JE(ye,ee[0]));for(let De=0;De<ee.length;De++){const $e=ee[De],Me=Q[De];for(let Oe=0;Oe<$e.length-1;Oe++){const Je=$e[Oe],Ze=[Je,$e[Oe+1],Me[Oe+1],Me[Oe],Je];DE(ye,Ze)&&(me=Math.min(me,JE(ye,Ze)))}}return me!==1/0&&me}(K[0],K[1],X)}},line:class extends Ga{constructor(c){super(c,eA),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof wu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,l){super.recalculate(c,l),this.paint._values["line-floorwidth"]=tA.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new J1(c)}queryRadius(c){const l=c,f=rA(Hd("line-width",this,l),Hd("line-gap-width",this,l)),v=Hd("line-offset",this,l);return f/2+Math.abs(v)+fg(this.paint.get("line-translate"))}queryIntersectsFeature(c,l,f,v,w,C,A){const k=dg(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,A),O=A/2*rA(this.paint.get("line-width").evaluate(l,f),this.paint.get("line-gap-width").evaluate(l,f)),$=this.paint.get("line-offset").evaluate(l,f);return $&&(v=function(G,X){const K=[];for(let Q=0;Q<G.length;Q++){const ee=G[Q],ye=[];for(let me=0;me<ee.length;me++){const De=ee[me-1],$e=ee[me],Me=ee[me+1],Oe=me===0?new ve(0,0):$e.sub(De)._unit()._perp(),Je=me===ee.length-1?new ve(0,0):Me.sub($e)._unit()._perp(),Ze=Oe._add(Je)._unit(),At=Ze.x*Je.x+Ze.y*Je.y;At!==0&&Ze._mult(1/At),ye.push(Ze._mult(X)._add($e))}K.push(ye)}return K}(v,$*A)),function(G,X,K){for(let Q=0;Q<X.length;Q++){const ee=X[Q];if(G.length>=3){for(let ye=0;ye<ee.length;ye++)if(Ih(G,ee[ye]))return!0}if(B8(G,ee,K))return!0}return!1}(k,v,O)}isTileClipped(){return!0}},symbol:Ig,background:class extends Ga{constructor(c){super(c,s$)}},raster:class extends Ga{constructor(c){super(c,l$)}}};class h${constructor(l){this._callback=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const PA=63710088e-1;class Sn{constructor(l,f){if(isNaN(l)||isNaN(f))throw new Error(`Invalid LngLat object: (${l}, ${f})`);if(this.lng=+l,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Sn(x(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const f=Math.PI/180,v=this.lat*f,w=l.lat*f,C=Math.sin(v)*Math.sin(w)+Math.cos(v)*Math.cos(w)*Math.cos((l.lng-this.lng)*f);return PA*Math.acos(Math.min(C,1))}toBounds(l=0){const f=360*l/40075017,v=f/Math.cos(Math.PI/180*this.lat);return new Wu(new Sn(this.lng-v,this.lat-f),new Sn(this.lng+v,this.lat+f))}static convert(l){if(l instanceof Sn)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Sn(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Sn(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Wu{constructor(l,f){l&&(f?this.setSouthWest(l).setNorthEast(f):l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1]))}setNorthEast(l){return this._ne=l instanceof Sn?new Sn(l.lng,l.lat):Sn.convert(l),this}setSouthWest(l){return this._sw=l instanceof Sn?new Sn(l.lng,l.lat):Sn.convert(l),this}extend(l){const f=this._sw,v=this._ne;let w,C;if(l instanceof Sn)w=l,C=l;else{if(!(l instanceof Wu))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Wu.convert(l)):this.extend(Sn.convert(l)):this;if(w=l._sw,C=l._ne,!w||!C)return this}return f||v?(f.lng=Math.min(w.lng,f.lng),f.lat=Math.min(w.lat,f.lat),v.lng=Math.max(C.lng,v.lng),v.lat=Math.max(C.lat,v.lat)):(this._sw=new Sn(w.lng,w.lat),this._ne=new Sn(C.lng,C.lat)),this}getCenter(){return new Sn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Sn(this.getWest(),this.getNorth())}getSouthEast(){return new Sn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:f,lat:v}=Sn.convert(l);let w=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&w}static convert(l){return l instanceof Wu?l:l&&new Wu(l)}}const DA=2*Math.PI*PA;function LA(c){return DA*Math.cos(c*Math.PI/180)}function kA(c){return(180+c)/360}function RA(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function OA(c,l){return c/LA(l)}function hx(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Pg{constructor(l,f,v=0){this.x=+l,this.y=+f,this.z=+v}static fromLngLat(l,f=0){const v=Sn.convert(l);return new Pg(kA(v.lng),RA(v.lat),OA(f,v.lat))}toLngLat(){return new Sn(360*this.x-180,hx(this.y))}toAltitude(){return this.z*LA(hx(this.y))}meterInMercatorCoordinateUnits(){return 1/DA*(l=hx(this.y),1/Math.cos(l*Math.PI/180));var l}}function zA(c,l,f){var v=2*Math.PI*6378137/256/Math.pow(2,f);return[c*v-2*Math.PI*6378137/2,l*v-2*Math.PI*6378137/2]}class fx{constructor(l,f,v){if(l<0||l>25||v<0||v>=Math.pow(2,l)||f<0||f>=Math.pow(2,l))throw new Error(`x=${f}, y=${v}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=f,this.y=v,this.key=ep(0,l,l,f,v)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,f,v){const w=(A=this.y,k=this.z,O=zA(256*(C=this.x),256*(A=Math.pow(2,k)-A-1),k),$=zA(256*(C+1),256*(A+1),k),O[0]+","+O[1]+","+$[0]+","+$[1]);var C,A,k,O,$;const G=function(X,K,Q){let ee,ye="";for(let me=X;me>0;me--)ee=1<<me-1,ye+=(K&ee?1:0)+(Q&ee?2:0);return ye}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,G).replace(/{bbox-epsg-3857}/g,w)}isChildOf(l){const f=this.z-l.z;return f>0&&l.x===this.x>>f&&l.y===this.y>>f}getTilePoint(l){const f=Math.pow(2,this.z);return new ve((l.x*f-this.x)*Nn,(l.y*f-this.y)*Nn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class BA{constructor(l,f){this.wrap=l,this.canonical=f,this.key=ep(l,f.z,f.z,f.x,f.y)}}class Ia{constructor(l,f,v,w,C){if(l<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${v}`);this.overscaledZ=l,this.wrap=f,this.canonical=new fx(v,+w,+C),this.key=ep(f,l,v,w,C)}clone(){return new Ia(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-l;return l>this.canonical.z?new Ia(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ia(l,this.wrap,l,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(l,f){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-l;return l>this.canonical.z?ep(this.wrap*+f,l,this.canonical.z,this.canonical.x,this.canonical.y):ep(this.wrap*+f,l,l,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(l){if(l.wrap!==this.wrap)return!1;const f=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>f&&l.canonical.y===this.canonical.y>>f}children(l){if(this.overscaledZ>=l)return[new Ia(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,v=2*this.canonical.x,w=2*this.canonical.y;return[new Ia(f,this.wrap,f,v,w),new Ia(f,this.wrap,f,v+1,w),new Ia(f,this.wrap,f,v,w+1),new Ia(f,this.wrap,f,v+1,w+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Ia(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Ia(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new BA(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new Pg(l.x-this.wrap,l.y))}}function ep(c,l,f,v,w){(c*=2)<0&&(c=-1*c-1);const C=1<<f;return(C*C*c+C*w+v).toString(36)+f.toString(36)+l.toString(36)}Mt("CanonicalTileID",fx),Mt("OverscaledTileID",Ia,{omit:["posMatrix"]});class FA{constructor(l,f,v){if(this.uid=l,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(v&&v!=="mapbox"&&v!=="terrarium")return void H(`"${v}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=f.height;const w=this.dim=f.height-2;this.data=new Uint32Array(f.data.buffer),this.encoding=v||"mapbox";for(let C=0;C<w;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(w,C)]=this.data[this._idx(w-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,w)]=this.data[this._idx(C,w-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(w,-1)]=this.data[this._idx(w-1,0)],this.data[this._idx(-1,w)]=this.data[this._idx(0,w-1)],this.data[this._idx(w,w)]=this.data[this._idx(w-1,w-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let C=0;C<w;C++)for(let A=0;A<w;A++){const k=this.get(C,A);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(l,f){const v=new Uint8Array(this.data.buffer),w=4*this._idx(l,f);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(v[w],v[w+1],v[w+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(l,f){if(l<-1||l>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(l+1)}_unpackMapbox(l,f,v){return(256*l*256+256*f+v)/10-1e4}_unpackTerrarium(l,f,v){return 256*l+f+v/256-32768}getPixels(){return new Ma({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,f,v){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let w=f*this.dim,C=f*this.dim+this.dim,A=v*this.dim,k=v*this.dim+this.dim;switch(f){case-1:w=C-1;break;case 1:C=w+1}switch(v){case-1:A=k-1;break;case 1:k=A+1}const O=-f*this.dim,$=-v*this.dim;for(let G=A;G<k;G++)for(let X=w;X<C;X++)this.data[this._idx(X,G)]=l.data[this._idx(X+O,G+$)]}}Mt("DEMData",FA);class $A{constructor(l){this._stringToNumber={},this._numberToString=[];for(let f=0;f<l.length;f++){const v=l[f];this._stringToNumber[v]=f,this._numberToString[f]=v}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class NA{constructor(l,f,v,w,C){this.type="Feature",this._vectorTileFeature=l,l._z=f,l._x=v,l._y=w,this.properties=l.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(l[f]=this[f]);return l}}class VA{constructor(l,f){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new $u(Nn,16,0),this.grid3D=new $u(Nn,16,0),this.featureIndexArray=new lr,this.promoteId=f}insert(l,f,v,w,C,A){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,w,C);const O=A?this.grid3D:this.grid;for(let $=0;$<f.length;$++){const G=f[$],X=[1/0,1/0,-1/0,-1/0];for(let K=0;K<G.length;K++){const Q=G[K];X[0]=Math.min(X[0],Q.x),X[1]=Math.min(X[1],Q.y),X[2]=Math.max(X[2],Q.x),X[3]=Math.max(X[3],Q.y)}X[0]<Nn&&X[1]<Nn&&X[2]>=0&&X[3]>=0&&O.insert(k,X[0],X[1],X[2],X[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ol.VectorTile(new Q1(this.rawTileData)).layers,this.sourceLayerCoder=new $A(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,f,v,w){this.loadVTLayers();const C=l.params||{},A=Nn/l.tileSize/l.scale,k=bh(C.filter),O=l.queryGeometry,$=l.queryPadding*A,G=HA(O),X=this.grid.query(G.minX-$,G.minY-$,G.maxX+$,G.maxY+$),K=HA(l.cameraQueryGeometry),Q=this.grid3D.query(K.minX-$,K.minY-$,K.maxX+$,K.maxY+$,(me,De,$e,Me)=>function(Oe,Je,Ze,At,Dt){for(const pt of Oe)if(Je<=pt.x&&Ze<=pt.y&&At>=pt.x&&Dt>=pt.y)return!0;const _t=[new ve(Je,Ze),new ve(Je,Dt),new ve(At,Dt),new ve(At,Ze)];if(Oe.length>2){for(const pt of _t)if(Ih(Oe,pt))return!0}for(let pt=0;pt<Oe.length-1;pt++)if($8(Oe[pt],Oe[pt+1],_t))return!0;return!1}(l.cameraQueryGeometry,me-$,De-$,$e+$,Me+$));for(const me of Q)X.push(me);X.sort(f$);const ee={};let ye;for(let me=0;me<X.length;me++){const De=X[me];if(De===ye)continue;ye=De;const $e=this.featureIndexArray.get(De);let Me=null;this.loadMatchingFeature(ee,$e.bucketIndex,$e.sourceLayerIndex,$e.featureIndex,k,C.layers,C.availableImages,f,v,w,(Oe,Je,Ze)=>(Me||(Me=ju(Oe)),Je.queryIntersectsFeature(O,Oe,Ze,Me,this.z,l.transform,A,l.pixelPosMatrix)))}return ee}loadMatchingFeature(l,f,v,w,C,A,k,O,$,G,X){const K=this.bucketLayerIDs[f];if(A&&!function(me,De){for(let $e=0;$e<me.length;$e++)if(De.indexOf(me[$e])>=0)return!0;return!1}(A,K))return;const Q=this.sourceLayerCoder.decode(v),ee=this.vtLayers[Q].feature(w);if(C.needGeometry){const me=Gu(ee,!0);if(!C.filter(new hn(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!C.filter(new hn(this.tileID.overscaledZ),ee))return;const ye=this.getId(ee,Q);for(let me=0;me<K.length;me++){const De=K[me];if(A&&A.indexOf(De)<0)continue;const $e=O[De];if(!$e)continue;let Me={};ye&&G&&(Me=G.getState($e.sourceLayer||"_geojsonTileLayer",ye));const Oe=T({},$[De]);Oe.paint=UA(Oe.paint,$e.paint,ee,Me,k),Oe.layout=UA(Oe.layout,$e.layout,ee,Me,k);const Je=!X||X(ee,$e,Me);if(!Je)continue;const Ze=new NA(ee,this.z,this.x,this.y,ye);Ze.layer=Oe;let At=l[De];At===void 0&&(At=l[De]=[]),At.push({featureIndex:w,feature:Ze,intersectionZ:Je})}}lookupSymbolFeatures(l,f,v,w,C,A,k,O){const $={};this.loadVTLayers();const G=bh(C);for(const X of l)this.loadMatchingFeature($,v,w,X,G,A,k,O,f);return $}hasLayer(l){for(const f of this.bucketLayerIDs)for(const v of f)if(l===v)return!0;return!1}getId(l,f){let v=l.id;return this.promoteId&&(v=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof v=="boolean"&&(v=Number(v))),v}}function UA(c,l,f,v,w){return I(c,(C,A)=>{const k=l instanceof Uu?l.get(A):null;return k&&k.evaluate?k.evaluate(f,v,w):k})}function HA(c){let l=1/0,f=1/0,v=-1/0,w=-1/0;for(const C of c)l=Math.min(l,C.x),f=Math.min(f,C.y),v=Math.max(v,C.x),w=Math.max(w,C.y);return{minX:l,minY:f,maxX:v,maxY:w}}function f$(c,l){return l-c}var dx;Mt("FeatureIndex",VA,{omit:["rawTileData","sourceLayerCoder"]}),o.PerformanceMarkers=void 0,(dx=o.PerformanceMarkers||(o.PerformanceMarkers={})).create="create",dx.load="load",dx.fullLoad="fullLoad";let Dg=null,tp=[];const px=1e3/30,d$={mark(c){performance.mark(c)},frame(c){const l=c;Dg!=null&&tp.push(l-Dg),Dg=l},clearMetrics(){Dg=null,tp=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const c in o.PerformanceMarkers)performance.clearMarks(o.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure("loadTime",o.PerformanceMarkers.create,o.PerformanceMarkers.load),performance.measure("fullLoadTime",o.PerformanceMarkers.create,o.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName("loadTime")[0].duration,l=performance.getEntriesByName("fullLoadTime")[0].duration,f=tp.length,v=1/(tp.reduce((C,A)=>C+A,0)/f/1e3),w=tp.filter(C=>C>px).reduce((C,A)=>C+(A-px)/px,0);return{loadTime:c,fullLoadTime:l,fps:v,percentDroppedFrames:w/(f+w)*100}}};o.AJAXError=ge,o.ARRAY_TYPE=Oi,o.Actor=class{constructor(c,l,f){this.target=c,this.parent=l,this.mapId=f,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},P(["receive","process"],this),this.invoker=new h$(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=j()?c:window}send(c,l,f,v,w=!1){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(this.callbacks[C]=f);const A=de(this.globalScope)?void 0:[];return this.target.postMessage({id:C,type:c,hasCallback:!!f,targetMapId:v,mustQueue:w,sourceMapId:this.mapId,data:Is(l,A)},A),{cancel:()=>{f&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:v,sourceMapId:this.mapId})}}}receive(c){const l=c.data,f=l.id;if(f&&(!l.targetMapId||this.mapId===l.targetMapId))if(l.type==="<cancel>"){delete this.tasks[f];const v=this.cancelCallbacks[f];delete this.cancelCallbacks[f],v&&v()}else j()||l.mustQueue?(this.tasks[f]=l,this.taskQueue.push(f),this.invoker.trigger()):this.processTask(f,l)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),l=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),l&&this.processTask(c,l)}processTask(c,l){if(l.type==="<response>"){const f=this.callbacks[c];delete this.callbacks[c],f&&(l.error?f(Wo(l.error)):f(null,Wo(l.data)))}else{let f=!1;const v=de(this.globalScope)?void 0:[],w=l.hasCallback?(k,O)=>{f=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:k?Is(k):null,data:Is(O,v)},v)}:k=>{f=!0};let C=null;const A=Wo(l.data);if(this.parent[l.type])C=this.parent[l.type](l.sourceMapId,A,w);else if(this.parent.getWorkerSource){const k=l.type.split(".");C=this.parent.getWorkerSource(l.sourceMapId,k[0],A.source)[k[1]](A,w)}else w(new Error(`Could not find function ${l.type}`));!f&&C&&C.cancel&&(this.cancelCallbacks[c]=C.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.AlphaImage=Gd,o.CanonicalTileID=fx,o.CollisionBoxArray=Ge,o.CollisionCircleLayoutArray=class extends W{},o.Color=ie,o.DEMData=FA,o.DataConstantProperty=Ot,o.DictionaryCoder=$A,o.EXTENT=Nn,o.ErrorEvent=ar,o.EvaluationParameters=hn,o.Event=Wt,o.Evented=wr,o.FeatureIndex=VA,o.FillBucket=Z1,o.FillExtrusionBucket=K1,o.GeoJSONFeature=NA,o.ImageAtlas=hA,o.ImagePosition=tx,o.LineBucket=J1,o.LineStripIndexArray=class extends pe{},o.LngLat=Sn,o.LngLatBounds=Wu,o.MercatorCoordinate=Pg,o.ONE_EM=ii,o.OverscaledTileID=Ia,o.PerformanceUtils=d$,o.PosArray=Ut,o.Properties=ni,o.QuadTriangleArray=class extends J{},o.RGBAImage=Ma,o.RasterBoundsArray=class extends b{},o.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},o.ResourceType=ue,o.SegmentVector=hr,o.SymbolBucket=zh,o.Transitionable=og,o.TriangleIndexArray=ki,o.Uniform1f=ks,o.Uniform1i=class extends Ls{constructor(c,l){super(c,l),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},o.Uniform2f=class extends Ls{constructor(c,l){super(c,l),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},o.Uniform3f=class extends Ls{constructor(c,l){super(c,l),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},o.Uniform4f=Ah,o.UniformColor=AE,o.UniformMatrix4f=class extends Ls{constructor(c,l){super(c,l),this.current=R8}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let l=1;l<16;l++)if(c[l]!==this.current[l]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},o.UnwrappedTileID=BA,o.ValidationError=at,o.ZoomHistory=Pd,o.add=function(c,l,f){return c[0]=l[0]+f[0],c[1]=l[1]+f[1],c[2]=l[2]+f[2],c},o.addDynamicAttributes=ox,o.asyncAll=function(c,l,f){if(!c.length)return f(null,[]);let v=c.length;const w=new Array(c.length);let C=null;c.forEach((A,k)=>{l(A,(O,$)=>{O&&(C=O),w[k]=$,--v==0&&f(C,w)})})},o.bezier=m,o.bindAll=P,o.cacheEntryPossiblyAdded=function(c){vr++,vr>br&&(c.getActor().send("enforceCacheSizeLimit",Ft),vr=0)},o.clamp=y,o.clearTileCache=function(c){const l=caches.delete(Ct);c&&l.catch(c).then(()=>c())},o.clipLine=SA,o.clone=function(c){var l=new Oi(16);return l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=c[6],l[7]=c[7],l[8]=c[8],l[9]=c[9],l[10]=c[10],l[11]=c[11],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15],l},o.clone$1=R,o.clone$2=function(c){var l=new Oi(3);return l[0]=c[0],l[1]=c[1],l[2]=c[2],l},o.collisionCircleLayout=DF,o.config=Qe,o.copy=function(c,l){return c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=l[6],c[7]=l[7],c[8]=l[8],c[9]=l[9],c[10]=l[10],c[11]=l[11],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15],c},o.create=function(){var c=new Oi(16);return Oi!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},o.create$1=OE,o.createExpression=Mu,o.createFilter=bh,o.createLayout=Dn,o.createStyleLayer=function(c){return c.type==="custom"?new u$(c):new c$[c.type](c)},o.cross=function(c,l,f){var v=l[0],w=l[1],C=l[2],A=f[0],k=f[1],O=f[2];return c[0]=w*O-C*k,c[1]=C*A-v*O,c[2]=v*k-w*A,c},o.dot=function(c,l){return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]},o.dot$1=function(c,l){return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3]},o.ease=g,o.emitValidationErrors=Sh,o.enforceCacheSizeLimit=function(c){Ir(),St&&St.then(l=>{l.keys().then(f=>{for(let v=0;v<f.length-c;v++)l.delete(f[v])})})},o.equals=function(c,l){var f=c[0],v=c[1],w=c[2],C=c[3],A=c[4],k=c[5],O=c[6],$=c[7],G=c[8],X=c[9],K=c[10],Q=c[11],ee=c[12],ye=c[13],me=c[14],De=c[15],$e=l[0],Me=l[1],Oe=l[2],Je=l[3],Ze=l[4],At=l[5],Dt=l[6],_t=l[7],pt=l[8],ct=l[9],xt=l[10],gt=l[11],ot=l[12],Ht=l[13],Bt=l[14],ur=l[15];return Math.abs(f-$e)<=Ri*Math.max(1,Math.abs(f),Math.abs($e))&&Math.abs(v-Me)<=Ri*Math.max(1,Math.abs(v),Math.abs(Me))&&Math.abs(w-Oe)<=Ri*Math.max(1,Math.abs(w),Math.abs(Oe))&&Math.abs(C-Je)<=Ri*Math.max(1,Math.abs(C),Math.abs(Je))&&Math.abs(A-Ze)<=Ri*Math.max(1,Math.abs(A),Math.abs(Ze))&&Math.abs(k-At)<=Ri*Math.max(1,Math.abs(k),Math.abs(At))&&Math.abs(O-Dt)<=Ri*Math.max(1,Math.abs(O),Math.abs(Dt))&&Math.abs($-_t)<=Ri*Math.max(1,Math.abs($),Math.abs(_t))&&Math.abs(G-pt)<=Ri*Math.max(1,Math.abs(G),Math.abs(pt))&&Math.abs(X-ct)<=Ri*Math.max(1,Math.abs(X),Math.abs(ct))&&Math.abs(K-xt)<=Ri*Math.max(1,Math.abs(K),Math.abs(xt))&&Math.abs(Q-gt)<=Ri*Math.max(1,Math.abs(Q),Math.abs(gt))&&Math.abs(ee-ot)<=Ri*Math.max(1,Math.abs(ee),Math.abs(ot))&&Math.abs(ye-Ht)<=Ri*Math.max(1,Math.abs(ye),Math.abs(Ht))&&Math.abs(me-Bt)<=Ri*Math.max(1,Math.abs(me),Math.abs(Bt))&&Math.abs(De-ur)<=Ri*Math.max(1,Math.abs(De),Math.abs(ur))},o.evaluateSizeForFeature=function(c,{uSize:l,uSizeT:f},{lowerSize:v,upperSize:w}){return c.kind==="source"?v/zs:c.kind==="composite"?un(v/zs,w/zs,f):l},o.evaluateSizeForZoom=function(c,l){let f=0,v=0;if(c.kind==="constant")v=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:w,minZoom:C,maxZoom:A}=c,k=w?y(Wi.interpolationFactor(w,l,C,A),0,1):0;c.kind==="camera"?v=un(c.minSize,c.maxSize,k):f=k}return{uSizeT:f,uSize:v}},o.evaluateVariableOffset=EA,o.evented=Bd,o.exported=Se,o.exported$1=fr,o.extend=T,o.filterObject=D,o.fromRotation=function(c,l){var f=Math.sin(l),v=Math.cos(l);return c[0]=v,c[1]=f,c[2]=0,c[3]=-f,c[4]=v,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},o.fromScaling=function(c,l){return c[0]=l[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=l[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=l[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},o.getAnchorAlignment=nx,o.getAnchorJustification=ax,o.getArrayBuffer=rt,o.getImage=Nt,o.getJSON=function(c,l){return Ke(T(c,{type:"json"}),l)},o.getOverlapMode=cx,o.getRTLTextPluginStatus=Nu,o.getReferrer=Ie,o.getVideo=function(c,l){const f=window.document.createElement("video");f.muted=!0,f.onloadstart=function(){l(null,f)};for(let v=0;v<c.length;v++){const w=window.document.createElement("source");vt(c[v])||(f.crossOrigin="Anonymous"),w.src=c[v],f.appendChild(w)}return{cancel:()=>{}}},o.identity=N1,o.invert=function(c,l){var f=l[0],v=l[1],w=l[2],C=l[3],A=l[4],k=l[5],O=l[6],$=l[7],G=l[8],X=l[9],K=l[10],Q=l[11],ee=l[12],ye=l[13],me=l[14],De=l[15],$e=f*k-v*A,Me=f*O-w*A,Oe=f*$-C*A,Je=v*O-w*k,Ze=v*$-C*k,At=w*$-C*O,Dt=G*ye-X*ee,_t=G*me-K*ee,pt=G*De-Q*ee,ct=X*me-K*ye,xt=X*De-Q*ye,gt=K*De-Q*me,ot=$e*gt-Me*xt+Oe*ct+Je*pt-Ze*_t+At*Dt;return ot?(c[0]=(k*gt-O*xt+$*ct)*(ot=1/ot),c[1]=(w*xt-v*gt-C*ct)*ot,c[2]=(ye*At-me*Ze+De*Je)*ot,c[3]=(K*Ze-X*At-Q*Je)*ot,c[4]=(O*pt-A*gt-$*_t)*ot,c[5]=(f*gt-w*pt+C*_t)*ot,c[6]=(me*Oe-ee*At-De*Me)*ot,c[7]=(G*At-K*Oe+Q*Me)*ot,c[8]=(A*xt-k*pt+$*Dt)*ot,c[9]=(v*pt-f*xt-C*Dt)*ot,c[10]=(ee*Ze-ye*Oe+De*$e)*ot,c[11]=(X*Oe-G*Ze-Q*$e)*ot,c[12]=(k*_t-A*ct-O*Dt)*ot,c[13]=(f*ct-v*_t+w*Dt)*ot,c[14]=(ye*Me-ee*Je-me*$e)*ot,c[15]=(G*Je-X*Me+K*$e)*ot,c):null},o.isImageBitmap=ae,o.isSafari=de,o.isWorker=j,o.keysDifference=function(c,l){const f=[];for(const v in c)v in l||f.push(v);return f},o.lazyLoadRTLTextPlugin=function(){ca.isLoading()||ca.isLoaded()||Nu()!=="deferred"||ag()},o.makeRequest=Ke,o.mapObject=I,o.mercatorXfromLng=kA,o.mercatorYfromLat=RA,o.mercatorZfromAltitude=OA,o.mul=U8,o.mul$1=function(c,l,f){return c[0]=l[0]*f[0],c[1]=l[1]*f[1],c[2]=l[2]*f[2],c[3]=l[3]*f[3],c},o.multiply=zE,o.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},o.normalize=function(c,l){var f=l[0],v=l[1],w=l[2],C=f*f+v*v+w*w;return C>0&&(C=1/Math.sqrt(C)),c[0]=l[0]*C,c[1]=l[1]*C,c[2]=l[2]*C,c},o.number=un,o.ortho=function(c,l,f,v,w,C,A){var k=1/(l-f),O=1/(v-w),$=1/(C-A);return c[0]=-2*k,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*O,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*$,c[11]=0,c[12]=(l+f)*k,c[13]=(w+v)*O,c[14]=(A+C)*$,c[15]=1,c},o.parseCacheControl=te,o.parseGlyphPbf=function(c){return new Q1(c).readFields(UF,[])},o.pbf=Q1,o.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Nn/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const l=c.bucket.layers[0].layout,f=c.bucket.layers[0]._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new hn(c.bucket.zoom+1),c.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new hn(c.bucket.zoom+1),c.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new hn(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:$}=c.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new hn(O),c.canonical),f["text-size"].possiblyEvaluate(new hn($),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:$}=c.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new hn(O),c.canonical),f["icon-size"].possiblyEvaluate(new hn($),c.canonical)]}const w=l.get("text-line-height")*ii,C=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",A=l.get("text-keep-upright"),k=l.get("text-size");for(const O of c.bucket.features){const $=l.get("text-font").evaluate(O,{},c.canonical).join(","),G=k.evaluate(O,{},c.canonical),X=v.layoutTextSize.evaluate(O,{},c.canonical),K=v.layoutIconSize.evaluate(O,{},c.canonical),Q={horizontal:{},vertical:void 0},ee=O.text;let ye,me=[0,0];if(ee){const Me=ee.toString(),Oe=l.get("text-letter-spacing").evaluate(O,{},c.canonical)*ii,Je=L1(Me)?Oe:0,Ze=l.get("text-anchor").evaluate(O,{},c.canonical),At=l.get("text-variable-anchor");if(!At){const xt=l.get("text-radial-offset").evaluate(O,{},c.canonical);me=xt?EA(Ze,[xt*ii,ix]):l.get("text-offset").evaluate(O,{},c.canonical).map(gt=>gt*ii)}let Dt=C?"center":l.get("text-justify").evaluate(O,{},c.canonical);const _t=l.get("symbol-placement"),pt=_t==="point"?l.get("text-max-width").evaluate(O,{},c.canonical)*ii:0,ct=()=>{c.bucket.allowVerticalPlacement&&Th(Me)&&(Q.vertical=wg(ee,c.glyphMap,c.glyphPositions,c.imagePositions,$,pt,w,Ze,"left",Je,me,o.WritingMode.vertical,!0,_t,X,G))};if(!C&&At){const xt=Dt==="auto"?At.map(ot=>ax(ot)):[Dt];let gt=!1;for(let ot=0;ot<xt.length;ot++){const Ht=xt[ot];if(!Q.horizontal[Ht])if(gt)Q.horizontal[Ht]=Q.horizontal[0];else{const Bt=wg(ee,c.glyphMap,c.glyphPositions,c.imagePositions,$,pt,w,"center",Ht,Je,me,o.WritingMode.horizontal,!1,_t,X,G);Bt&&(Q.horizontal[Ht]=Bt,gt=Bt.positionedLines.length===1)}}ct()}else{Dt==="auto"&&(Dt=ax(Ze));const xt=wg(ee,c.glyphMap,c.glyphPositions,c.imagePositions,$,pt,w,Ze,Dt,Je,me,o.WritingMode.horizontal,!1,_t,X,G);xt&&(Q.horizontal[Dt]=xt),ct(),Th(Me)&&C&&A&&(Q.vertical=wg(ee,c.glyphMap,c.glyphPositions,c.imagePositions,$,pt,w,Ze,Dt,Je,me,o.WritingMode.vertical,!1,_t,X,G))}}let De=!1;if(O.icon&&O.icon.name){const Me=c.imageMap[O.icon.name];Me&&(ye=XF(c.imagePositions[O.icon.name],l.get("icon-offset").evaluate(O,{},c.canonical),l.get("icon-anchor").evaluate(O,{},c.canonical)),De=!!Me.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=De:c.bucket.sdfIcons!==De&&H("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Me.pixelRatio!==c.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const $e=MA(Q.horizontal)||Q.vertical;c.bucket.iconsInText=!!$e&&$e.iconsInText,($e||ye)&&t$(c.bucket,O,Q,ye,c.imageMap,v,X,K,me,De,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},o.perspective=function(c,l,f,v,w){var C,A=1/Math.tan(l/2);return c[0]=A/f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=A,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,w!=null&&w!==1/0?(c[10]=(w+v)*(C=1/(v-w)),c[14]=2*w*v*C):(c[10]=-1,c[14]=-2*v),c},o.pick=function(c,l){const f={};for(let v=0;v<l.length;v++){const w=l[v];w in c&&(f[w]=c[w])}return f},o.plugin=ca,o.pointGeometry=ve,o.polygonIntersectsPolygon=DE,o.potpack=cA,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=Mt,o.registerForPluginStateChange=function(c){return c({pluginStatus:Li,pluginURL:Xo}),Bd.on("pluginStateChange",c),c},o.renderColorRamp=HE,o.rotateX=function(c,l,f){var v=Math.sin(f),w=Math.cos(f),C=l[4],A=l[5],k=l[6],O=l[7],$=l[8],G=l[9],X=l[10],K=l[11];return l!==c&&(c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15]),c[4]=C*w+$*v,c[5]=A*w+G*v,c[6]=k*w+X*v,c[7]=O*w+K*v,c[8]=$*w-C*v,c[9]=G*w-A*v,c[10]=X*w-k*v,c[11]=K*w-O*v,c},o.rotateZ=function(c,l,f){var v=Math.sin(f),w=Math.cos(f),C=l[0],A=l[1],k=l[2],O=l[3],$=l[4],G=l[5],X=l[6],K=l[7];return l!==c&&(c[8]=l[8],c[9]=l[9],c[10]=l[10],c[11]=l[11],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15]),c[0]=C*w+$*v,c[1]=A*w+G*v,c[2]=k*w+X*v,c[3]=O*w+K*v,c[4]=$*w-C*v,c[5]=G*w-A*v,c[6]=X*w-k*v,c[7]=K*w-O*v,c},o.scale=function(c,l,f){var v=f[0],w=f[1],C=f[2];return c[0]=l[0]*v,c[1]=l[1]*v,c[2]=l[2]*v,c[3]=l[3]*v,c[4]=l[4]*w,c[5]=l[5]*w,c[6]=l[6]*w,c[7]=l[7]*w,c[8]=l[8]*C,c[9]=l[9]*C,c[10]=l[10]*C,c[11]=l[11]*C,c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15],c},o.scale$1=function(c,l,f){return c[0]=l[0]*f,c[1]=l[1]*f,c[2]=l[2]*f,c},o.setCacheLimits=function(c,l){Ft=c,br=l},o.setRTLTextPlugin=function(c,l,f=!1){if(Li===kd||Li===Rd||Li===Od)throw new Error("setRTLTextPlugin cannot be called multiple times.");Xo=Se.resolveURL(c),Li=kd,zd=l,Dl(),f||ag()},o.spec=Be,o.sphericalToCartesian=function([c,l,f]){return l+=90,l*=Math.PI/180,f*=Math.PI/180,{x:c*Math.cos(l)*Math.sin(f),y:c*Math.sin(l)*Math.sin(f),z:c*Math.cos(f)}},o.sqrLen=function(c){var l=c[0],f=c[1];return l*l+f*f},o.sub=function(c,l,f){return c[0]=l[0]-f[0],c[1]=l[1]-f[1],c[2]=l[2]-f[2],c},o.toEvaluationFeature=Gu,o.transformMat3=function(c,l,f){var v=l[0],w=l[1],C=l[2];return c[0]=v*f[0]+w*f[3]+C*f[6],c[1]=v*f[1]+w*f[4]+C*f[7],c[2]=v*f[2]+w*f[5]+C*f[8],c},o.transformMat4=pg,o.transformMat4$1=function(c,l,f){var v=l[0],w=l[1];return c[0]=f[0]*v+f[4]*w+f[12],c[1]=f[1]*v+f[5]*w+f[13],c},o.translate=function(c,l,f){var v,w,C,A,k,O,$,G,X,K,Q,ee,ye=f[0],me=f[1],De=f[2];return l===c?(c[12]=l[0]*ye+l[4]*me+l[8]*De+l[12],c[13]=l[1]*ye+l[5]*me+l[9]*De+l[13],c[14]=l[2]*ye+l[6]*me+l[10]*De+l[14],c[15]=l[3]*ye+l[7]*me+l[11]*De+l[15]):(w=l[1],C=l[2],A=l[3],k=l[4],O=l[5],$=l[6],G=l[7],X=l[8],K=l[9],Q=l[10],ee=l[11],c[0]=v=l[0],c[1]=w,c[2]=C,c[3]=A,c[4]=k,c[5]=O,c[6]=$,c[7]=G,c[8]=X,c[9]=K,c[10]=Q,c[11]=ee,c[12]=v*ye+k*me+X*De+l[12],c[13]=w*ye+O*me+K*De+l[13],c[14]=C*ye+$*me+Q*De+l[14],c[15]=A*ye+G*me+ee*De+l[15]),c},o.triggerPluginCompletionEvent=ig,o.unicodeBlockLookup=yt,o.uniqueId=function(){return M++},o.validateCustomStyleLayer=function(c){const l=[],f=c.id;return f===void 0&&l.push({message:`layers.${f}: missing required property "id"`}),c.render===void 0&&l.push({message:`layers.${f}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&l.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),l},o.validateLight=Id,o.validateStyle=Fu,o.vectorTile=Ol,o.warnOnce=H,o.wrap=x}),a(["./shared"],function(o){function h(oe){const U=typeof oe;if(U==="number"||U==="boolean"||U==="string"||oe==null)return JSON.stringify(oe);if(Array.isArray(oe)){let ie="[";for(const _e of oe)ie+=`${h(_e)},`;return`${ie}]`}const Z=Object.keys(oe).sort();let re="{";for(let ie=0;ie<Z.length;ie++)re+=`${JSON.stringify(Z[ie])}:${h(oe[Z[ie]])},`;return`${re}}`}function d(oe){let U="";for(const Z of o.refProperties)U+=`/${h(oe[Z])}`;return U}class m{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,Z){for(const ie of U){this._layerConfigs[ie.id]=ie;const _e=this._layers[ie.id]=o.createStyleLayer(ie);_e._featureFilter=o.createFilter(_e.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(const ie of Z)delete this.keyCache[ie],delete this._layerConfigs[ie],delete this._layers[ie];this.familiesBySource={};const re=function(ie,_e){const Te={};for(let xe=0;xe<ie.length;xe++){const Ce=_e&&_e[ie[xe].id]||d(ie[xe]);_e&&(_e[ie[xe].id]=Ce);let Ue=Te[Ce];Ue||(Ue=Te[Ce]=[]),Ue.push(ie[xe])}const be=[];for(const xe in Te)be.push(Te[xe]);return be}(Object.values(this._layerConfigs),this.keyCache);for(const ie of re){const _e=ie.map(tt=>this._layers[tt.id]),Te=_e[0];if(Te.visibility==="none")continue;const be=Te.source||"";let xe=this.familiesBySource[be];xe||(xe=this.familiesBySource[be]={});const Ce=Te.sourceLayer||"_geojsonTileLayer";let Ue=xe[Ce];Ue||(Ue=xe[Ce]=[]),Ue.push(_e)}}}class g{constructor(U){const Z={},re=[];for(const be in U){const xe=U[be],Ce=Z[be]={};for(const Ue in xe){const tt=xe[+Ue];if(!tt||tt.bitmap.width===0||tt.bitmap.height===0)continue;const Ve={x:0,y:0,w:tt.bitmap.width+2,h:tt.bitmap.height+2};re.push(Ve),Ce[Ue]={rect:Ve,metrics:tt.metrics}}}const{w:ie,h:_e}=o.potpack(re),Te=new o.AlphaImage({width:ie||1,height:_e||1});for(const be in U){const xe=U[be];for(const Ce in xe){const Ue=xe[+Ce];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const tt=Z[be][Ce].rect;o.AlphaImage.copy(Ue.bitmap,Te,{x:0,y:0},{x:tt.x+1,y:tt.y+1},Ue.bitmap)}}this.image=Te,this.positions=Z}}o.register("GlyphAtlas",g);class y{constructor(U){this.tileID=new o.OverscaledTileID(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId}parse(U,Z,re,ie,_e){this.status="parsing",this.data=U,this.collisionBoxArray=new o.CollisionBoxArray;const Te=new o.DictionaryCoder(Object.keys(U.layers).sort()),be=new o.FeatureIndex(this.tileID,this.promoteId);be.bucketLayerIDs=[];const xe={},Ce={featureIndex:be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:re},Ue=Z.familiesBySource[this.source];for(const Qt in Ue){const sr=U.layers[Qt];if(!sr)continue;sr.version===1&&o.warnOnce(`Vector tile source "${this.source}" layer "${Qt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Tr=Te.encode(Qt),qr=[];for(let Wn=0;Wn<sr.length;Wn++){const ln=sr.feature(Wn),hi=be.getId(ln,Qt);qr.push({feature:ln,id:hi,index:Wn,sourceLayerIndex:Tr})}for(const Wn of Ue[Qt]){const ln=Wn[0];ln.source!==this.source&&o.warnOnce(`layer.source = ${ln.source} does not equal this.source = ${this.source}`),ln.minzoom&&this.zoom<Math.floor(ln.minzoom)||ln.maxzoom&&this.zoom>=ln.maxzoom||ln.visibility!=="none"&&(x(Wn,this.zoom,re),(xe[ln.id]=ln.createBucket({index:be.bucketLayerIDs.length,layers:Wn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Tr,sourceID:this.source})).populate(qr,Ce,this.tileID.canonical),be.bucketLayerIDs.push(Wn.map(hi=>hi.id)))}}let tt,Ve,Pt,kt;const bt=o.mapObject(Ce.glyphDependencies,Qt=>Object.keys(Qt).map(Number));Object.keys(bt).length?ie.send("getGlyphs",{uid:this.uid,stacks:bt},(Qt,sr)=>{tt||(tt=Qt,Ve=sr,Sr.call(this))}):Ve={};const Gt=Object.keys(Ce.iconDependencies);Gt.length?ie.send("getImages",{icons:Gt,source:this.source,tileID:this.tileID,type:"icons"},(Qt,sr)=>{tt||(tt=Qt,Pt=sr,Sr.call(this))}):Pt={};const Zt=Object.keys(Ce.patternDependencies);function Sr(){if(tt)return _e(tt);if(Ve&&Pt&&kt){const Qt=new g(Ve),sr=new o.ImageAtlas(Pt,kt);for(const Tr in xe){const qr=xe[Tr];qr instanceof o.SymbolBucket?(x(qr.layers,this.zoom,re),o.performSymbolLayout({bucket:qr,glyphMap:Ve,glyphPositions:Qt.positions,imageMap:Pt,imagePositions:sr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):qr.hasPattern&&(qr instanceof o.LineBucket||qr instanceof o.FillBucket||qr instanceof o.FillExtrusionBucket)&&(x(qr.layers,this.zoom,re),qr.addFeatures(Ce,this.tileID.canonical,sr.patternPositions))}this.status="done",_e(null,{buckets:Object.values(xe).filter(Tr=>!Tr.isEmpty()),featureIndex:be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qt.image,imageAtlas:sr,glyphMap:this.returnDependencies?Ve:null,iconMap:this.returnDependencies?Pt:null,glyphPositions:this.returnDependencies?Qt.positions:null})}}Zt.length?ie.send("getImages",{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"},(Qt,sr)=>{tt||(tt=Qt,kt=sr,Sr.call(this))}):kt={},Sr.call(this)}}function x(oe,U,Z){const re=new o.EvaluationParameters(U);for(const ie of oe)ie.recalculate(re,Z)}function T(oe,U){const Z=o.getArrayBuffer(oe.request,(re,ie,_e,Te)=>{re?U(re):ie&&U(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(ie)),rawData:ie,cacheControl:_e,expires:Te})});return()=>{Z.cancel(),U()}}class M{constructor(U,Z,re,ie){this.actor=U,this.layerIndex=Z,this.availableImages=re,this.loadVectorData=ie||T,this.loading={},this.loaded={}}loadTile(U,Z){const re=U.uid;this.loading||(this.loading={});const ie=!!(U&&U.request&&U.request.collectResourceTiming)&&new o.RequestPerformance(U.request),_e=this.loading[re]=new y(U);_e.abort=this.loadVectorData(U,(Te,be)=>{if(delete this.loading[re],Te||!be)return _e.status="done",this.loaded[re]=_e,Z(Te);const xe=be.rawData,Ce={};be.expires&&(Ce.expires=be.expires),be.cacheControl&&(Ce.cacheControl=be.cacheControl);const Ue={};if(ie){const tt=ie.finish();tt&&(Ue.resourceTiming=JSON.parse(JSON.stringify(tt)))}_e.vectorTile=be.vectorTile,_e.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,(tt,Ve)=>{if(tt||!Ve)return Z(tt);Z(null,o.extend({rawTileData:xe.slice(0)},Ve,Ce,Ue))}),this.loaded=this.loaded||{},this.loaded[re]=_e})}reloadTile(U,Z){const re=this.loaded,ie=U.uid,_e=this;if(re&&re[ie]){const Te=re[ie];Te.showCollisionBoxes=U.showCollisionBoxes;const be=(xe,Ce)=>{const Ue=Te.reloadCallback;Ue&&(delete Te.reloadCallback,Te.parse(Te.vectorTile,_e.layerIndex,this.availableImages,_e.actor,Ue)),Z(xe,Ce)};Te.status==="parsing"?Te.reloadCallback=be:Te.status==="done"&&(Te.vectorTile?Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,be):be())}}abortTile(U,Z){const re=this.loading,ie=U.uid;re&&re[ie]&&re[ie].abort&&(re[ie].abort(),delete re[ie]),Z()}removeTile(U,Z){const re=this.loaded,ie=U.uid;re&&re[ie]&&delete re[ie],Z()}}class P{constructor(){this.loaded={}}loadTile(U,Z){const{uid:re,encoding:ie,rawImageData:_e}=U,Te=o.isImageBitmap(_e)?this.getImageData(_e):_e,be=new o.DEMData(re,Te,ie);this.loaded=this.loaded||{},this.loaded[re]=be,Z(null,be)}getImageData(U){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);const Z=this.offscreenCanvasContext.getImageData(-1,-1,U.width+2,U.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:Z.width,height:Z.height},Z.data)}removeTile(U){const Z=this.loaded,re=U.uid;Z&&Z[re]&&delete Z[re]}}var I=function oe(U,Z){var re,ie=U&&U.type;if(ie==="FeatureCollection")for(re=0;re<U.features.length;re++)oe(U.features[re],Z);else if(ie==="GeometryCollection")for(re=0;re<U.geometries.length;re++)oe(U.geometries[re],Z);else if(ie==="Feature")oe(U.geometry,Z);else if(ie==="Polygon")D(U.coordinates,Z);else if(ie==="MultiPolygon")for(re=0;re<U.coordinates.length;re++)D(U.coordinates[re],Z);return U};function D(oe,U){if(oe.length!==0){R(oe[0],U);for(var Z=1;Z<oe.length;Z++)R(oe[Z],!U)}}function R(oe,U){for(var Z=0,re=0,ie=0,_e=oe.length,Te=_e-1;ie<_e;Te=ie++){var be=(oe[ie][0]-oe[Te][0])*(oe[Te][1]+oe[ie][1]),xe=Z+be;re+=Math.abs(Z)>=Math.abs(be)?Z-xe+be:be-xe+Z,Z=xe}Z+re>=0!=!!U&&oe.reverse()}const B=o.vectorTile.VectorTileFeature.prototype.toGeoJSON;class H{constructor(U){this._feature=U,this.extent=o.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))}loadGeometry(){if(this._feature.type===1){const U=[];for(const Z of this._feature.geometry)U.push([new o.pointGeometry(Z[0],Z[1])]);return U}{const U=[];for(const Z of this._feature.geometry){const re=[];for(const ie of Z)re.push(new o.pointGeometry(ie[0],ie[1]));U.push(re)}return U}}toGeoJSON(U,Z,re){return B.call(this,U,Z,re)}}class V{constructor(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=U.length,this._features=U}feature(U){return new H(this._features[U])}}var q={exports:{}},j=o.pointGeometry,te=o.vectorTile.VectorTileFeature,ne=ce;function ce(oe,U){this.options=U||{},this.features=oe,this.length=oe.length}function le(oe,U){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=U||4096}ce.prototype.feature=function(oe){return new le(this.features[oe],this.options.extent)},le.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var U=0;U<oe.length;U++){for(var Z=oe[U],re=[],ie=0;ie<Z.length;ie++)re.push(new j(Z[ie][0],Z[ie][1]));this.geometry.push(re)}return this.geometry},le.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,U=1/0,Z=-1/0,re=1/0,ie=-1/0,_e=0;_e<oe.length;_e++)for(var Te=oe[_e],be=0;be<Te.length;be++){var xe=Te[be];U=Math.min(U,xe.x),Z=Math.max(Z,xe.x),re=Math.min(re,xe.y),ie=Math.max(ie,xe.y)}return[U,re,Z,ie]},le.prototype.toGeoJSON=te.prototype.toGeoJSON;var de=o.pbf,ae=ne;function Se(oe){var U=new de;return function(Z,re){for(var ie in Z.layers)re.writeMessage(3,ve,Z.layers[ie])}(oe,U),U.finish()}function ve(oe,U){var Z;U.writeVarintField(15,oe.version||1),U.writeStringField(1,oe.name||""),U.writeVarintField(5,oe.extent||4096);var re={keys:[],values:[],keycache:{},valuecache:{}};for(Z=0;Z<oe.length;Z++)re.feature=oe.feature(Z),U.writeMessage(2,Ye,re);var ie=re.keys;for(Z=0;Z<ie.length;Z++)U.writeStringField(3,ie[Z]);var _e=re.values;for(Z=0;Z<_e.length;Z++)U.writeMessage(4,Ft,_e[Z])}function Ye(oe,U){var Z=oe.feature;Z.id!==void 0&&U.writeVarintField(1,Z.id),U.writeMessage(2,Qe,oe),U.writeVarintField(3,Z.type),U.writeMessage(4,Kt,Z)}function Qe(oe,U){var Z=oe.feature,re=oe.keys,ie=oe.values,_e=oe.keycache,Te=oe.valuecache;for(var be in Z.properties){var xe=Z.properties[be],Ce=_e[be];if(xe!==null){Ce===void 0&&(re.push(be),_e[be]=Ce=re.length-1),U.writeVarint(Ce);var Ue=typeof xe;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(xe=JSON.stringify(xe));var tt=Ue+":"+xe,Ve=Te[tt];Ve===void 0&&(ie.push(xe),Te[tt]=Ve=ie.length-1),U.writeVarint(Ve)}}}function Ct(oe,U){return(U<<3)+(7&oe)}function St(oe){return oe<<1^oe>>31}function Kt(oe,U){for(var Z=oe.loadGeometry(),re=oe.type,ie=0,_e=0,Te=Z.length,be=0;be<Te;be++){var xe=Z[be],Ce=1;re===1&&(Ce=xe.length),U.writeVarint(Ct(1,Ce));for(var Ue=re===3?xe.length-1:xe.length,tt=0;tt<Ue;tt++){tt===1&&re!==1&&U.writeVarint(Ct(2,Ue-1));var Ve=xe[tt].x-ie,Pt=xe[tt].y-_e;U.writeVarint(St(Ve)),U.writeVarint(St(Pt)),ie+=Ve,_e+=Pt}re===3&&U.writeVarint(Ct(7,1))}}function Ft(oe,U){var Z=typeof oe;Z==="string"?U.writeStringField(1,oe):Z==="boolean"?U.writeBooleanField(7,oe):Z==="number"&&(oe%1!=0?U.writeDoubleField(3,oe):oe<0?U.writeSVarintField(6,oe):U.writeVarintField(5,oe))}function br(oe,U,Z,re,ie,_e){if(ie-re<=Z)return;const Te=re+ie>>1;Ir(oe,U,Te,re,ie,_e%2),br(oe,U,Z,re,Te-1,_e+1),br(oe,U,Z,Te+1,ie,_e+1)}function Ir(oe,U,Z,re,ie,_e){for(;ie>re;){if(ie-re>600){const Ce=ie-re+1,Ue=Z-re+1,tt=Math.log(Ce),Ve=.5*Math.exp(2*tt/3),Pt=.5*Math.sqrt(tt*Ve*(Ce-Ve)/Ce)*(Ue-Ce/2<0?-1:1);Ir(oe,U,Z,Math.max(re,Math.floor(Z-Ue*Ve/Ce+Pt)),Math.min(ie,Math.floor(Z+(Ce-Ue)*Ve/Ce+Pt)),_e)}const Te=U[2*Z+_e];let be=re,xe=ie;for(vr(oe,U,re,Z),U[2*ie+_e]>Te&&vr(oe,U,re,ie);be<xe;){for(vr(oe,U,be,xe),be++,xe--;U[2*be+_e]<Te;)be++;for(;U[2*xe+_e]>Te;)xe--}U[2*re+_e]===Te?vr(oe,U,re,xe):(xe++,vr(oe,U,xe,ie)),xe<=Z&&(re=xe+1),Z<=xe&&(ie=xe-1)}}function vr(oe,U,Z,re){fr(oe,Z,re),fr(U,2*Z,2*re),fr(U,2*Z+1,2*re+1)}function fr(oe,U,Z){const re=oe[U];oe[U]=oe[Z],oe[Z]=re}function qe(oe,U,Z,re){const ie=oe-Z,_e=U-re;return ie*ie+_e*_e}q.exports=Se,q.exports.fromVectorTileJs=Se,q.exports.fromGeojsonVt=function(oe,U){U=U||{};var Z={};for(var re in oe)Z[re]=new ae(oe[re].features,U),Z[re].name=re,Z[re].version=U.version,Z[re].extent=U.extent;return Se({layers:Z})},q.exports.GeoJSONWrapper=ae;const st=oe=>oe[0],et=oe=>oe[1];class mt{constructor(U,Z=st,re=et,ie=64,_e=Float64Array){this.nodeSize=ie,this.points=U;const Te=U.length<65536?Uint16Array:Uint32Array,be=this.ids=new Te(U.length),xe=this.coords=new _e(2*U.length);for(let Ce=0;Ce<U.length;Ce++)be[Ce]=Ce,xe[2*Ce]=Z(U[Ce]),xe[2*Ce+1]=re(U[Ce]);br(be,xe,ie,0,be.length-1,0)}range(U,Z,re,ie){return function(_e,Te,be,xe,Ce,Ue,tt){const Ve=[0,_e.length-1,0],Pt=[];let kt,bt;for(;Ve.length;){const Gt=Ve.pop(),Zt=Ve.pop(),Sr=Ve.pop();if(Zt-Sr<=tt){for(let Tr=Sr;Tr<=Zt;Tr++)kt=Te[2*Tr],bt=Te[2*Tr+1],kt>=be&&kt<=Ce&&bt>=xe&&bt<=Ue&&Pt.push(_e[Tr]);continue}const Qt=Math.floor((Sr+Zt)/2);kt=Te[2*Qt],bt=Te[2*Qt+1],kt>=be&&kt<=Ce&&bt>=xe&&bt<=Ue&&Pt.push(_e[Qt]);const sr=(Gt+1)%2;(Gt===0?be<=kt:xe<=bt)&&(Ve.push(Sr),Ve.push(Qt-1),Ve.push(sr)),(Gt===0?Ce>=kt:Ue>=bt)&&(Ve.push(Qt+1),Ve.push(Zt),Ve.push(sr))}return Pt}(this.ids,this.coords,U,Z,re,ie,this.nodeSize)}within(U,Z,re){return function(ie,_e,Te,be,xe,Ce){const Ue=[0,ie.length-1,0],tt=[],Ve=xe*xe;for(;Ue.length;){const Pt=Ue.pop(),kt=Ue.pop(),bt=Ue.pop();if(kt-bt<=Ce){for(let sr=bt;sr<=kt;sr++)qe(_e[2*sr],_e[2*sr+1],Te,be)<=Ve&&tt.push(ie[sr]);continue}const Gt=Math.floor((bt+kt)/2),Zt=_e[2*Gt],Sr=_e[2*Gt+1];qe(Zt,Sr,Te,be)<=Ve&&tt.push(ie[Gt]);const Qt=(Pt+1)%2;(Pt===0?Te-xe<=Zt:be-xe<=Sr)&&(Ue.push(bt),Ue.push(Gt-1),Ue.push(Qt)),(Pt===0?Te+xe>=Zt:be+xe>=Sr)&&(Ue.push(Gt+1),Ue.push(kt),Ue.push(Qt))}return tt}(this.ids,this.coords,U,Z,re,this.nodeSize)}}const ft={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},ue=Math.fround||(ge=new Float32Array(1),oe=>(ge[0]=+oe,ge[0]));var ge;class Ie{constructor(U){this.options=Nt(Object.create(ft),U),this.trees=new Array(this.options.maxZoom+1)}load(U){const{log:Z,minZoom:re,maxZoom:ie,nodeSize:_e}=this.options;Z&&console.time("total time");const Te=`prepare ${U.length} points`;Z&&console.time(Te),this.points=U;let be=[];for(let xe=0;xe<U.length;xe++)U[xe].geometry&&be.push(Ke(U[xe],xe));this.trees[ie+1]=new mt(be,zt,$t,_e,Float32Array),Z&&console.timeEnd(Te);for(let xe=ie;xe>=re;xe--){const Ce=+Date.now();be=this._cluster(be,xe),this.trees[xe]=new mt(be,zt,$t,_e,Float32Array),Z&&console.log("z%d: %d clusters in %dms",xe,be.length,+Date.now()-Ce)}return Z&&console.timeEnd("total time"),this}getClusters(U,Z){let re=((U[0]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,U[1]));let _e=U[2]===180?180:((U[2]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)re=-180,_e=180;else if(re>_e){const Ue=this.getClusters([re,ie,180,Te],Z),tt=this.getClusters([-180,ie,_e,Te],Z);return Ue.concat(tt)}const be=this.trees[this._limitZoom(Z)],xe=be.range(Xe(re),ut(Te),Xe(_e),ut(ie)),Ce=[];for(const Ue of xe){const tt=be.points[Ue];Ce.push(tt.numPoints?rt(tt):this.points[tt.index])}return Ce}getChildren(U){const Z=this._getOriginId(U),re=this._getOriginZoom(U),ie="No cluster with the specified id.",_e=this.trees[re];if(!_e)throw new Error(ie);const Te=_e.points[Z];if(!Te)throw new Error(ie);const be=this.options.radius/(this.options.extent*Math.pow(2,re-1)),xe=_e.within(Te.x,Te.y,be),Ce=[];for(const Ue of xe){const tt=_e.points[Ue];tt.parentId===U&&Ce.push(tt.numPoints?rt(tt):this.points[tt.index])}if(Ce.length===0)throw new Error(ie);return Ce}getLeaves(U,Z,re){const ie=[];return this._appendLeaves(ie,U,Z=Z||10,re=re||0,0),ie}getTile(U,Z,re){const ie=this.trees[this._limitZoom(U)],_e=Math.pow(2,U),{extent:Te,radius:be}=this.options,xe=be/Te,Ce=(re-xe)/_e,Ue=(re+1+xe)/_e,tt={features:[]};return this._addTileFeatures(ie.range((Z-xe)/_e,Ce,(Z+1+xe)/_e,Ue),ie.points,Z,re,_e,tt),Z===0&&this._addTileFeatures(ie.range(1-xe/_e,Ce,1,Ue),ie.points,_e,re,_e,tt),Z===_e-1&&this._addTileFeatures(ie.range(0,Ce,xe/_e,Ue),ie.points,-1,re,_e,tt),tt.features.length?tt:null}getClusterExpansionZoom(U){let Z=this._getOriginZoom(U)-1;for(;Z<=this.options.maxZoom;){const re=this.getChildren(U);if(Z++,re.length!==1)break;U=re[0].properties.cluster_id}return Z}_appendLeaves(U,Z,re,ie,_e){const Te=this.getChildren(Z);for(const be of Te){const xe=be.properties;if(xe&&xe.cluster?_e+xe.point_count<=ie?_e+=xe.point_count:_e=this._appendLeaves(U,xe.cluster_id,re,ie,_e):_e<ie?_e++:U.push(be),U.length===re)break}return _e}_addTileFeatures(U,Z,re,ie,_e,Te){for(const be of U){const xe=Z[be],Ce=xe.numPoints;let Ue,tt,Ve;if(Ce)Ue=vt(xe),tt=xe.x,Ve=xe.y;else{const bt=this.points[xe.index];Ue=bt.properties,tt=Xe(bt.geometry.coordinates[0]),Ve=ut(bt.geometry.coordinates[1])}const Pt={type:1,geometry:[[Math.round(this.options.extent*(tt*_e-re)),Math.round(this.options.extent*(Ve*_e-ie))]],tags:Ue};let kt;Ce?kt=xe.id:this.options.generateId?kt=xe.index:this.points[xe.index].id&&(kt=this.points[xe.index].id),kt!==void 0&&(Pt.id=kt),Te.features.push(Pt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,Z){const re=[],{radius:ie,extent:_e,reduce:Te,minPoints:be}=this.options,xe=ie/(_e*Math.pow(2,Z));for(let Ce=0;Ce<U.length;Ce++){const Ue=U[Ce];if(Ue.zoom<=Z)continue;Ue.zoom=Z;const tt=this.trees[Z+1],Ve=tt.within(Ue.x,Ue.y,xe),Pt=Ue.numPoints||1;let kt=Pt;for(const bt of Ve){const Gt=tt.points[bt];Gt.zoom>Z&&(kt+=Gt.numPoints||1)}if(kt>Pt&&kt>=be){let bt=Ue.x*Pt,Gt=Ue.y*Pt,Zt=Te&&Pt>1?this._map(Ue,!0):null;const Sr=(Ce<<5)+(Z+1)+this.points.length;for(const Qt of Ve){const sr=tt.points[Qt];if(sr.zoom<=Z)continue;sr.zoom=Z;const Tr=sr.numPoints||1;bt+=sr.x*Tr,Gt+=sr.y*Tr,sr.parentId=Sr,Te&&(Zt||(Zt=this._map(Ue,!0)),Te(Zt,this._map(sr)))}Ue.parentId=Sr,re.push(je(bt/kt,Gt/kt,Sr,kt,Zt))}else if(re.push(Ue),kt>1)for(const bt of Ve){const Gt=tt.points[bt];Gt.zoom<=Z||(Gt.zoom=Z,re.push(Gt))}}return re}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,Z){if(U.numPoints)return Z?Nt({},U.properties):U.properties;const re=this.points[U.index].properties,ie=this.options.map(re);return Z&&ie===re?Nt({},ie):ie}}function je(oe,U,Z,re,ie){return{x:ue(oe),y:ue(U),zoom:1/0,id:Z,parentId:-1,numPoints:re,properties:ie}}function Ke(oe,U){const[Z,re]=oe.geometry.coordinates;return{x:ue(Xe(Z)),y:ue(ut(re)),zoom:1/0,index:U,parentId:-1}}function rt(oe){return{type:"Feature",id:oe.id,properties:vt(oe),geometry:{type:"Point",coordinates:[(U=oe.x,360*(U-.5)),it(oe.y)]}};var U}function vt(oe){const U=oe.numPoints,Z=U>=1e4?`${Math.round(U/1e3)}k`:U>=1e3?Math.round(U/100)/10+"k":U;return Nt(Nt({},oe.properties),{cluster:!0,cluster_id:oe.id,point_count:U,point_count_abbreviated:Z})}function Xe(oe){return oe/360+.5}function ut(oe){const U=Math.sin(oe*Math.PI/180),Z=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return Z<0?0:Z>1?1:Z}function it(oe){const U=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function Nt(oe,U){for(const Z in U)oe[Z]=U[Z];return oe}function zt(oe){return oe.x}function $t(oe){return oe.y}function Wt(oe,U,Z,re){for(var ie,_e=re,Te=Z-U>>1,be=Z-U,xe=oe[U],Ce=oe[U+1],Ue=oe[Z],tt=oe[Z+1],Ve=U+3;Ve<Z;Ve+=3){var Pt=ar(oe[Ve],oe[Ve+1],xe,Ce,Ue,tt);if(Pt>_e)ie=Ve,_e=Pt;else if(Pt===_e){var kt=Math.abs(Ve-Te);kt<be&&(ie=Ve,be=kt)}}_e>re&&(ie-U>3&&Wt(oe,U,ie,re),oe[ie+2]=_e,Z-ie>3&&Wt(oe,ie,Z,re))}function ar(oe,U,Z,re,ie,_e){var Te=ie-Z,be=_e-re;if(Te!==0||be!==0){var xe=((oe-Z)*Te+(U-re)*be)/(Te*Te+be*be);xe>1?(Z=ie,re=_e):xe>0&&(Z+=Te*xe,re+=be*xe)}return(Te=oe-Z)*Te+(be=U-re)*be}function wr(oe,U,Z,re){var ie={id:oe===void 0?null:oe,type:U,geometry:Z,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(_e){var Te=_e.geometry,be=_e.type;if(be==="Point"||be==="MultiPoint"||be==="LineString")Be(_e,Te);else if(be==="Polygon"||be==="MultiLineString")for(var xe=0;xe<Te.length;xe++)Be(_e,Te[xe]);else if(be==="MultiPolygon")for(xe=0;xe<Te.length;xe++)for(var Ce=0;Ce<Te[xe].length;Ce++)Be(_e,Te[xe][Ce])}(ie),ie}function Be(oe,U){for(var Z=0;Z<U.length;Z+=3)oe.minX=Math.min(oe.minX,U[Z]),oe.minY=Math.min(oe.minY,U[Z+1]),oe.maxX=Math.max(oe.maxX,U[Z]),oe.maxY=Math.max(oe.maxY,U[Z+1])}function at(oe,U,Z,re){if(U.geometry){var ie=U.geometry.coordinates,_e=U.geometry.type,Te=Math.pow(Z.tolerance/((1<<Z.maxZoom)*Z.extent),2),be=[],xe=U.id;if(Z.promoteId?xe=U.properties[Z.promoteId]:Z.generateId&&(xe=re||0),_e==="Point")Bn(ie,be);else if(_e==="MultiPoint")for(var Ce=0;Ce<ie.length;Ce++)Bn(ie[Ce],be);else if(_e==="LineString")jn(ie,be,Te,!1);else if(_e==="MultiLineString"){if(Z.lineMetrics){for(Ce=0;Ce<ie.length;Ce++)jn(ie[Ce],be=[],Te,!1),oe.push(wr(xe,"LineString",be,U.properties));return}pr(ie,be,Te,!1)}else if(_e==="Polygon")pr(ie,be,Te,!0);else{if(_e!=="MultiPolygon"){if(_e==="GeometryCollection"){for(Ce=0;Ce<U.geometry.geometries.length;Ce++)at(oe,{id:xe,geometry:U.geometry.geometries[Ce],properties:U.properties},Z,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ce=0;Ce<ie.length;Ce++){var Ue=[];pr(ie[Ce],Ue,Te,!0),be.push(Ue)}}oe.push(wr(xe,_e,be,U.properties))}}function Bn(oe,U){U.push(Gn(oe[0])),U.push(ci(oe[1])),U.push(0)}function jn(oe,U,Z,re){for(var ie,_e,Te=0,be=0;be<oe.length;be++){var xe=Gn(oe[be][0]),Ce=ci(oe[be][1]);U.push(xe),U.push(Ce),U.push(0),be>0&&(Te+=re?(ie*Ce-xe*_e)/2:Math.sqrt(Math.pow(xe-ie,2)+Math.pow(Ce-_e,2))),ie=xe,_e=Ce}var Ue=U.length-3;U[2]=1,Wt(U,0,Ue,Z),U[Ue+2]=1,U.size=Math.abs(Te),U.start=0,U.end=U.size}function pr(oe,U,Z,re){for(var ie=0;ie<oe.length;ie++){var _e=[];jn(oe[ie],_e,Z,re),U.push(_e)}}function Gn(oe){return oe/360+.5}function ci(oe){var U=Math.sin(oe*Math.PI/180),Z=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return Z<0?0:Z>1?1:Z}function Yr(oe,U,Z,re,ie,_e,Te,be){if(re/=U,_e>=(Z/=U)&&Te<re)return oe;if(Te<Z||_e>=re)return null;for(var xe=[],Ce=0;Ce<oe.length;Ce++){var Ue=oe[Ce],tt=Ue.geometry,Ve=Ue.type,Pt=ie===0?Ue.minX:Ue.minY,kt=ie===0?Ue.maxX:Ue.maxY;if(Pt>=Z&&kt<re)xe.push(Ue);else if(!(kt<Z||Pt>=re)){var bt=[];if(Ve==="Point"||Ve==="MultiPoint")Fn(tt,bt,Z,re,ie);else if(Ve==="LineString")ht(tt,bt,Z,re,ie,!1,be.lineMetrics);else if(Ve==="MultiLineString")nr(tt,bt,Z,re,ie,!1);else if(Ve==="Polygon")nr(tt,bt,Z,re,ie,!0);else if(Ve==="MultiPolygon")for(var Gt=0;Gt<tt.length;Gt++){var Zt=[];nr(tt[Gt],Zt,Z,re,ie,!0),Zt.length&&bt.push(Zt)}if(bt.length){if(be.lineMetrics&&Ve==="LineString"){for(Gt=0;Gt<bt.length;Gt++)xe.push(wr(Ue.id,Ve,bt[Gt],Ue.tags));continue}Ve!=="LineString"&&Ve!=="MultiLineString"||(bt.length===1?(Ve="LineString",bt=bt[0]):Ve="MultiLineString"),Ve!=="Point"&&Ve!=="MultiPoint"||(Ve=bt.length===3?"Point":"MultiPoint"),xe.push(wr(Ue.id,Ve,bt,Ue.tags))}}}return xe.length?xe:null}function Fn(oe,U,Z,re,ie){for(var _e=0;_e<oe.length;_e+=3){var Te=oe[_e+ie];Te>=Z&&Te<=re&&(U.push(oe[_e]),U.push(oe[_e+1]),U.push(oe[_e+2]))}}function ht(oe,U,Z,re,ie,_e,Te){for(var be,xe,Ce=or(oe),Ue=ie===0?Go:tr,tt=oe.start,Ve=0;Ve<oe.length-3;Ve+=3){var Pt=oe[Ve],kt=oe[Ve+1],bt=oe[Ve+2],Gt=oe[Ve+3],Zt=oe[Ve+4],Sr=ie===0?Pt:kt,Qt=ie===0?Gt:Zt,sr=!1;Te&&(be=Math.sqrt(Math.pow(Pt-Gt,2)+Math.pow(kt-Zt,2))),Sr<Z?Qt>Z&&(xe=Ue(Ce,Pt,kt,Gt,Zt,Z),Te&&(Ce.start=tt+be*xe)):Sr>re?Qt<re&&(xe=Ue(Ce,Pt,kt,Gt,Zt,re),Te&&(Ce.start=tt+be*xe)):ri(Ce,Pt,kt,bt),Qt<Z&&Sr>=Z&&(xe=Ue(Ce,Pt,kt,Gt,Zt,Z),sr=!0),Qt>re&&Sr<=re&&(xe=Ue(Ce,Pt,kt,Gt,Zt,re),sr=!0),!_e&&sr&&(Te&&(Ce.end=tt+be*xe),U.push(Ce),Ce=or(oe)),Te&&(tt+=be)}var Tr=oe.length-3;Pt=oe[Tr],kt=oe[Tr+1],bt=oe[Tr+2],(Sr=ie===0?Pt:kt)>=Z&&Sr<=re&&ri(Ce,Pt,kt,bt),Tr=Ce.length-3,_e&&Tr>=3&&(Ce[Tr]!==Ce[0]||Ce[Tr+1]!==Ce[1])&&ri(Ce,Ce[0],Ce[1],Ce[2]),Ce.length&&U.push(Ce)}function or(oe){var U=[];return U.size=oe.size,U.start=oe.start,U.end=oe.end,U}function nr(oe,U,Z,re,ie,_e){for(var Te=0;Te<oe.length;Te++)ht(oe[Te],U,Z,re,ie,_e,!1)}function ri(oe,U,Z,re){oe.push(U),oe.push(Z),oe.push(re)}function Go(oe,U,Z,re,ie,_e){var Te=(_e-U)/(re-U);return oe.push(_e),oe.push(Z+(ie-Z)*Te),oe.push(1),Te}function tr(oe,U,Z,re,ie,_e){var Te=(_e-Z)/(ie-Z);return oe.push(U+(re-U)*Te),oe.push(_e),oe.push(1),Te}function vo(oe,U){for(var Z=[],re=0;re<oe.length;re++){var ie,_e=oe[re],Te=_e.type;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")ie=qn(_e.geometry,U);else if(Te==="MultiLineString"||Te==="Polygon"){ie=[];for(var be=0;be<_e.geometry.length;be++)ie.push(qn(_e.geometry[be],U))}else if(Te==="MultiPolygon")for(ie=[],be=0;be<_e.geometry.length;be++){for(var xe=[],Ce=0;Ce<_e.geometry[be].length;Ce++)xe.push(qn(_e.geometry[be][Ce],U));ie.push(xe)}Z.push(wr(_e.id,Te,ie,_e.tags))}return Z}function qn(oe,U){var Z=[];Z.size=oe.size,oe.start!==void 0&&(Z.start=oe.start,Z.end=oe.end);for(var re=0;re<oe.length;re+=3)Z.push(oe[re]+U,oe[re+1],oe[re+2]);return Z}function yl(oe,U){if(oe.transformed)return oe;var Z,re,ie,_e=1<<oe.z,Te=oe.x,be=oe.y;for(Z=0;Z<oe.features.length;Z++){var xe=oe.features[Z],Ce=xe.geometry,Ue=xe.type;if(xe.geometry=[],Ue===1)for(re=0;re<Ce.length;re+=2)xe.geometry.push(Pn(Ce[re],Ce[re+1],U,_e,Te,be));else for(re=0;re<Ce.length;re++){var tt=[];for(ie=0;ie<Ce[re].length;ie+=2)tt.push(Pn(Ce[re][ie],Ce[re][ie+1],U,_e,Te,be));xe.geometry.push(tt)}}return oe.transformed=!0,oe}function Pn(oe,U,Z,re,ie,_e){return[Math.round(Z*(oe*re-ie)),Math.round(Z*(U*re-_e))]}function yi(oe,U,Z,re,ie){for(var _e=U===ie.maxZoom?0:ie.tolerance/((1<<U)*ie.extent),Te={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Z,y:re,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},be=0;be<oe.length;be++){Te.numFeatures++,Hr(Te,oe[be],_e,ie);var xe=oe[be].minX,Ce=oe[be].minY,Ue=oe[be].maxX,tt=oe[be].maxY;xe<Te.minX&&(Te.minX=xe),Ce<Te.minY&&(Te.minY=Ce),Ue>Te.maxX&&(Te.maxX=Ue),tt>Te.maxY&&(Te.maxY=tt)}return Te}function Hr(oe,U,Z,re){var ie=U.geometry,_e=U.type,Te=[];if(_e==="Point"||_e==="MultiPoint")for(var be=0;be<ie.length;be+=3)Te.push(ie[be]),Te.push(ie[be+1]),oe.numPoints++,oe.numSimplified++;else if(_e==="LineString")_l(Te,ie,oe,Z,!1,!1);else if(_e==="MultiLineString"||_e==="Polygon")for(be=0;be<ie.length;be++)_l(Te,ie[be],oe,Z,_e==="Polygon",be===0);else if(_e==="MultiPolygon")for(var xe=0;xe<ie.length;xe++){var Ce=ie[xe];for(be=0;be<Ce.length;be++)_l(Te,Ce[be],oe,Z,!0,be===0)}if(Te.length){var Ue=U.tags||null;if(_e==="LineString"&&re.lineMetrics){for(var tt in Ue={},U.tags)Ue[tt]=U.tags[tt];Ue.mapbox_clip_start=ie.start/ie.size,Ue.mapbox_clip_end=ie.end/ie.size}var Ve={geometry:Te,type:_e==="Polygon"||_e==="MultiPolygon"?3:_e==="LineString"||_e==="MultiLineString"?2:1,tags:Ue};U.id!==null&&(Ve.id=U.id),oe.features.push(Ve)}}function _l(oe,U,Z,re,ie,_e){var Te=re*re;if(re>0&&U.size<(ie?Te:re))Z.numPoints+=U.length/3;else{for(var be=[],xe=0;xe<U.length;xe+=3)(re===0||U[xe+2]>Te)&&(Z.numSimplified++,be.push(U[xe]),be.push(U[xe+1])),Z.numPoints++;ie&&function(Ce,Ue){for(var tt=0,Ve=0,Pt=Ce.length,kt=Pt-2;Ve<Pt;kt=Ve,Ve+=2)tt+=(Ce[Ve]-Ce[kt])*(Ce[Ve+1]+Ce[kt+1]);if(tt>0===Ue)for(Ve=0,Pt=Ce.length;Ve<Pt/2;Ve+=2){var bt=Ce[Ve],Gt=Ce[Ve+1];Ce[Ve]=Ce[Pt-2-Ve],Ce[Ve+1]=Ce[Pt-1-Ve],Ce[Pt-2-Ve]=bt,Ce[Pt-1-Ve]=Gt}}(be,_e),oe.push(be)}}function Ha(oe,U){var Z=(U=this.options=function(ie,_e){for(var Te in _e)ie[Te]=_e[Te];return ie}(Object.create(this.options),U)).debug;if(Z&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");var re=function(ie,_e){var Te=[];if(ie.type==="FeatureCollection")for(var be=0;be<ie.features.length;be++)at(Te,ie.features[be],_e,be);else at(Te,ie.type==="Feature"?ie:{geometry:ie},_e);return Te}(oe,U);this.tiles={},this.tileCoords=[],Z&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),re=function(ie,_e){var Te=_e.buffer/_e.extent,be=ie,xe=Yr(ie,1,-1-Te,Te,0,-1,2,_e),Ce=Yr(ie,1,1-Te,2+Te,0,-1,2,_e);return(xe||Ce)&&(be=Yr(ie,1,-Te,1+Te,0,-1,2,_e)||[],xe&&(be=vo(xe,1).concat(be)),Ce&&(be=be.concat(vo(Ce,-1)))),be}(re,U),re.length&&this.splitTile(re,0,0,0),Z&&(re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ss(oe,U,Z){return 32*((1<<oe)*Z+U)+oe}function Ts(oe,U){const Z=oe.tileID.canonical;if(!this._geoJSONIndex)return U(null,null);const re=this._geoJSONIndex.getTile(Z.z,Z.x,Z.y);if(!re)return U(null,null);const ie=new V(re.features);let _e=q.exports(ie);_e.byteOffset===0&&_e.byteLength===_e.buffer.byteLength||(_e=new Uint8Array(_e)),U(null,{vectorTile:ie,rawData:_e.buffer})}Ha.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ha.prototype.splitTile=function(oe,U,Z,re,ie,_e,Te){for(var be=[oe,U,Z,re],xe=this.options,Ce=xe.debug;be.length;){re=be.pop(),Z=be.pop(),U=be.pop(),oe=be.pop();var Ue=1<<U,tt=Ss(U,Z,re),Ve=this.tiles[tt];if(!Ve&&(Ce>1&&console.time("creation"),Ve=this.tiles[tt]=yi(oe,U,Z,re,xe),this.tileCoords.push({z:U,x:Z,y:re}),Ce)){Ce>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,Z,re,Ve.numFeatures,Ve.numPoints,Ve.numSimplified),console.timeEnd("creation"));var Pt="z"+U;this.stats[Pt]=(this.stats[Pt]||0)+1,this.total++}if(Ve.source=oe,ie){if(U===xe.maxZoom||U===ie)continue;var kt=1<<ie-U;if(Z!==Math.floor(_e/kt)||re!==Math.floor(Te/kt))continue}else if(U===xe.indexMaxZoom||Ve.numPoints<=xe.indexMaxPoints)continue;if(Ve.source=null,oe.length!==0){Ce>1&&console.time("clipping");var bt,Gt,Zt,Sr,Qt,sr,Tr=.5*xe.buffer/xe.extent,qr=.5-Tr,Wn=.5+Tr,ln=1+Tr;bt=Gt=Zt=Sr=null,Qt=Yr(oe,Ue,Z-Tr,Z+Wn,0,Ve.minX,Ve.maxX,xe),sr=Yr(oe,Ue,Z+qr,Z+ln,0,Ve.minX,Ve.maxX,xe),oe=null,Qt&&(bt=Yr(Qt,Ue,re-Tr,re+Wn,1,Ve.minY,Ve.maxY,xe),Gt=Yr(Qt,Ue,re+qr,re+ln,1,Ve.minY,Ve.maxY,xe),Qt=null),sr&&(Zt=Yr(sr,Ue,re-Tr,re+Wn,1,Ve.minY,Ve.maxY,xe),Sr=Yr(sr,Ue,re+qr,re+ln,1,Ve.minY,Ve.maxY,xe),sr=null),Ce>1&&console.timeEnd("clipping"),be.push(bt||[],U+1,2*Z,2*re),be.push(Gt||[],U+1,2*Z,2*re+1),be.push(Zt||[],U+1,2*Z+1,2*re),be.push(Sr||[],U+1,2*Z+1,2*re+1)}}},Ha.prototype.getTile=function(oe,U,Z){var re=this.options,ie=re.extent,_e=re.debug;if(oe<0||oe>24)return null;var Te=1<<oe,be=Ss(oe,U=(U%Te+Te)%Te,Z);if(this.tiles[be])return yl(this.tiles[be],ie);_e>1&&console.log("drilling down to z%d-%d-%d",oe,U,Z);for(var xe,Ce=oe,Ue=U,tt=Z;!xe&&Ce>0;)Ce--,Ue=Math.floor(Ue/2),tt=Math.floor(tt/2),xe=this.tiles[Ss(Ce,Ue,tt)];return xe&&xe.source?(_e>1&&console.log("found parent tile z%d-%d-%d",Ce,Ue,tt),_e>1&&console.time("drilling down"),this.splitTile(xe.source,Ce,Ue,tt,oe,U,Z),_e>1&&console.timeEnd("drilling down"),this.tiles[be]?yl(this.tiles[be],ie):null):null};class xl extends M{constructor(U,Z,re,ie){super(U,Z,re,Ts),ie&&(this.loadGeoJSON=ie)}loadData(U,Z){var re;(re=this._pendingRequest)===null||re===void 0||re.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ie=!!(U&&U.request&&U.request.collectResourceTiming)&&new o.RequestPerformance(U.request);this._pendingCallback=Z,this._pendingRequest=this.loadGeoJSON(U,(_e,Te)=>{if(delete this._pendingCallback,delete this._pendingRequest,_e||!Te)return Z(_e);if(typeof Te!="object")return Z(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));{I(Te,!0);try{if(U.filter){const xe=o.createExpression(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(xe.result==="error")throw new Error(xe.value.map(Ue=>`${Ue.key}: ${Ue.message}`).join(", "));Te={type:"FeatureCollection",features:Te.features.filter(Ue=>xe.value.evaluate({zoom:0},Ue))}}this._geoJSONIndex=U.cluster?new Ie(function({superclusterOptions:xe,clusterProperties:Ce}){if(!Ce||!xe)return xe;const Ue={},tt={},Ve={accumulated:null,zoom:0},Pt={properties:null},kt=Object.keys(Ce);for(const bt of kt){const[Gt,Zt]=Ce[bt],Sr=o.createExpression(Zt),Qt=o.createExpression(typeof Gt=="string"?[Gt,["accumulated"],["get",bt]]:Gt);Ue[bt]=Sr.value,tt[bt]=Qt.value}return xe.map=bt=>{Pt.properties=bt;const Gt={};for(const Zt of kt)Gt[Zt]=Ue[Zt].evaluate(Ve,Pt);return Gt},xe.reduce=(bt,Gt)=>{Pt.properties=Gt;for(const Zt of kt)Ve.accumulated=bt[Zt],bt[Zt]=tt[Zt].evaluate(Ve,Pt)},xe}(U)).load(Te.features):function(xe,Ce){return new Ha(xe,Ce)}(Te,U.geojsonVtOptions)}catch(xe){return Z(xe)}this.loaded={};const be={};if(ie){const xe=ie.finish();xe&&(be.resourceTiming={},be.resourceTiming[U.source]=JSON.parse(JSON.stringify(xe)))}Z(null,be)}})}reloadTile(U,Z){const re=this.loaded;return re&&re[U.uid]?super.reloadTile(U,Z):this.loadTile(U,Z)}loadGeoJSON(U,Z){if(U.request)return o.getJSON(U.request,Z);if(typeof U.data=="string")try{Z(null,JSON.parse(U.data))}catch{Z(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`))}else Z(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(U,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Z()}getClusterExpansionZoom(U,Z){try{Z(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(re){Z(re)}}getClusterChildren(U,Z){try{Z(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(re){Z(re)}}getClusterLeaves(U,Z){try{Z(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(re){Z(re)}}}class Cs{constructor(U){this.self=U,this.actor=new o.Actor(U,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:M,geojson:xl},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Z,re)=>{if(this.workerSourceTypes[Z])throw new Error(`Worker source with name "${Z}" already registered.`);this.workerSourceTypes[Z]=re},this.self.registerRTLTextPlugin=Z=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Z.applyArabicShaping,o.plugin.processBidirectionalText=Z.processBidirectionalText,o.plugin.processStyledBidirectionalText=Z.processStyledBidirectionalText}}setReferrer(U,Z){this.referrer=Z}setImages(U,Z,re){this.availableImages[U]=Z;for(const ie in this.workerSources[U]){const _e=this.workerSources[U][ie];for(const Te in _e)_e[Te].availableImages=Z}re()}setLayers(U,Z,re){this.getLayerIndex(U).replace(Z),re()}updateLayers(U,Z,re){this.getLayerIndex(U).update(Z.layers,Z.removedIds),re()}loadTile(U,Z,re){this.getWorkerSource(U,Z.type,Z.source).loadTile(Z,re)}loadDEMTile(U,Z,re){this.getDEMWorkerSource(U,Z.source).loadTile(Z,re)}reloadTile(U,Z,re){this.getWorkerSource(U,Z.type,Z.source).reloadTile(Z,re)}abortTile(U,Z,re){this.getWorkerSource(U,Z.type,Z.source).abortTile(Z,re)}removeTile(U,Z,re){this.getWorkerSource(U,Z.type,Z.source).removeTile(Z,re)}removeDEMTile(U,Z){this.getDEMWorkerSource(U,Z.source).removeTile(Z)}removeSource(U,Z,re){if(!this.workerSources[U]||!this.workerSources[U][Z.type]||!this.workerSources[U][Z.type][Z.source])return;const ie=this.workerSources[U][Z.type][Z.source];delete this.workerSources[U][Z.type][Z.source],ie.removeSource!==void 0?ie.removeSource(Z,re):re()}loadWorkerSource(U,Z,re){try{this.self.importScripts(Z.url),re()}catch(ie){re(ie.toString())}}syncRTLPluginState(U,Z,re){try{o.plugin.setState(Z);const ie=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&ie!=null){this.self.importScripts(ie);const _e=o.plugin.isParsed();re(_e?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ie}`),_e)}}catch(ie){re(ie.toString())}}getAvailableImages(U){let Z=this.availableImages[U];return Z||(Z=[]),Z}getLayerIndex(U){let Z=this.layerIndexes[U];return Z||(Z=this.layerIndexes[U]=new m),Z}getWorkerSource(U,Z,re){if(this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][Z]||(this.workerSources[U][Z]={}),!this.workerSources[U][Z][re]){const ie={send:(_e,Te,be)=>{this.actor.send(_e,Te,be,U)}};this.workerSources[U][Z][re]=new this.workerSourceTypes[Z](ie,this.getLayerIndex(U),this.getAvailableImages(U))}return this.workerSources[U][Z][re]}getDEMWorkerSource(U,Z){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][Z]||(this.demWorkerSources[U][Z]=new P),this.demWorkerSources[U][Z]}enforceCacheSizeLimit(U,Z){o.enforceCacheSizeLimit(Z)}}return o.isWorker()&&(self.worker=new Cs(self)),Cs}),a(["./shared"],function(o){var h=d;function d(b){return!function(u){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,S,E=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(E);try{S=new Worker(L),_=!0}catch{_=!1}return S&&S.terminate(),URL.revokeObjectURL(L),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var S=_.getContext("2d");if(!S)return!1;var E=S.getImageData(0,0,1,1);return E&&E.width===_.width}()?(m[p=u&&u.failIfMajorPerformanceCaveat]===void 0&&(m[p]=function(_){var S,E=function(L){var z=document.createElement("canvas"),F=Object.create(d.webGLContextAttributes);return F.failIfMajorPerformanceCaveat=L,z.getContext("webgl",F)||z.getContext("experimental-webgl",F)}(_);if(!E)return!1;try{S=E.createShader(E.VERTEX_SHADER)}catch{return!1}return!(!S||E.isContextLost())&&(E.shaderSource(S,"void main() {}"),E.compileShader(S),E.getShaderParameter(S,E.COMPILE_STATUS)===!0)}(p)),m[p]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var p}(b)}var m={};function g(b,u){if(Array.isArray(b)){if(!Array.isArray(u)||b.length!==u.length)return!1;for(let p=0;p<b.length;p++)if(!g(b[p],u[p]))return!1;return!0}if(typeof b=="object"&&b!==null&&u!==null){if(typeof u!="object"||Object.keys(b).length!==Object.keys(u).length)return!1;for(const p in b)if(!g(b[p],u[p]))return!1;return!0}return b===u}d.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class y{static testProp(u){if(!y.docStyle)return u[0];for(let p=0;p<u.length;p++)if(u[p]in y.docStyle)return u[p];return u[0]}static create(u,p,_){const S=window.document.createElement(u);return p!==void 0&&(S.className=p),_&&_.appendChild(S),S}static createNS(u,p){return window.document.createElementNS(u,p)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(u,p){u.style[y.transformProp]=p}static addEventListener(u,p,_,S={}){u.addEventListener(p,_,"passive"in S?S:S.capture)}static removeEventListener(u,p,_,S={}){u.removeEventListener(p,_,"passive"in S?S:S.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(u,p){const _=u.getBoundingClientRect();return new o.pointGeometry(p.clientX-_.left-u.clientLeft,p.clientY-_.top-u.clientTop)}static touchPos(u,p){const _=u.getBoundingClientRect(),S=[];for(let E=0;E<p.length;E++)S.push(new o.pointGeometry(p[E].clientX-_.left-u.clientLeft,p[E].clientY-_.top-u.clientTop));return S}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);class x{constructor(u){this._transformRequestFn=u}transformRequest(u,p){return this._transformRequestFn&&this._transformRequestFn(u,p)||{url:u}}normalizeSpriteURL(u,p,_){const S=function(E){const L=E.match(T);if(!L)throw new Error(`Unable to parse URL "${E}"`);return{protocol:L[1],authority:L[2],path:L[3]||"/",params:L[4]?L[4].split("&"):[]}}(u);return S.path+=`${p}${_}`,function(E){const L=E.params.length?`?${E.params.join("&")}`:"";return`${E.protocol}://${E.authority}${E.path}${L}`}(S)}setTransformRequest(u){this._transformRequestFn=u}}const T=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class M{constructor(u,p,_,S){this.context=u,this.format=_,this.texture=u.gl.createTexture(),this.update(p,S)}update(u,p,_){const{width:S,height:E}=u,L=!(this.size&&this.size[0]===S&&this.size[1]===E||_),{context:z}=this,{gl:F}=z;if(this.useMipmap=!!(p&&p.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!p||p.premultiply!==!1)),L)this.size=[S,E],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||o.isImageBitmap(u)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,u):F.texImage2D(F.TEXTURE_2D,0,this.format,S,E,0,this.format,F.UNSIGNED_BYTE,u.data);else{const{x:N,y:W}=_||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||o.isImageBitmap(u)?F.texSubImage2D(F.TEXTURE_2D,0,N,W,F.RGBA,F.UNSIGNED_BYTE,u):F.texSubImage2D(F.TEXTURE_2D,0,N,W,S,E,F.RGBA,F.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D)}bind(u,p,_){const{context:S}=this,{gl:E}=S;E.bindTexture(E.TEXTURE_2D,this.texture),_!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=E.LINEAR),u!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,u),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,_||u),this.filter=u),p!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,p),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function P(b){const{userImage:u}=b;return!!(u&&u.render&&u.render())&&(b.data.replace(new Uint8Array(u.data.buffer)),!0)}class I extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:p,callback:_}of this.requestors)this._notify(p,_);this.requestors=[]}}getImage(u){return this.images[u]}addImage(u,p){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,p)&&(this.images[u]=p)}_validate(u,p){let _=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),_=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),_=!1),this._validateContent(p.content,p)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),_=!1),_}_validateStretch(u,p){if(!u)return!0;let _=0;for(const S of u){if(S[0]<_||S[1]<S[0]||p<S[1])return!1;_=S[1]}return!0}_validateContent(u,p){return!(u&&(u.length!==4||u[0]<0||p.data.width<u[0]||u[1]<0||p.data.height<u[1]||u[2]<0||p.data.width<u[2]||u[3]<0||p.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,p){const _=this.images[u];if(_.data.width!==p.data.width||_.data.height!==p.data.height)throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=_.version+1,this.images[u]=p,this.updatedImages[u]=!0}removeImage(u){const p=this.images[u];delete this.images[u],delete this.patterns[u],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,p){let _=!0;if(!this.isLoaded())for(const S of u)this.images[S]||(_=!1);this.isLoaded()||_?this._notify(u,p):this.requestors.push({ids:u,callback:p})}_notify(u,p){const _={};for(const S of u){this.images[S]||this.fire(new o.Event("styleimagemissing",{id:S}));const E=this.images[S];E?_[S]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:o.warnOnce(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,_)}getPixelSize(){const{width:u,height:p}=this.atlasImage;return{width:u,height:p}}getPattern(u){const p=this.patterns[u],_=this.getImage(u);if(!_)return null;if(p&&p.position.version===_.version)return p.position;if(p)p.position.version=_.version;else{const S={w:_.data.width+2,h:_.data.height+2,x:0,y:0},E=new o.ImagePosition(S,_);this.patterns[u]={bin:S,position:E}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const p=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new M(u,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const E in this.patterns)u.push(this.patterns[E].bin);const{w:p,h:_}=o.potpack(u),S=this.atlasImage;S.resize({width:p||1,height:_||1});for(const E in this.patterns){const{bin:L}=this.patterns[E],z=L.x+1,F=L.y+1,N=this.images[E].data,W=N.width,Y=N.height;o.RGBAImage.copy(N,S,{x:0,y:0},{x:z,y:F},{width:W,height:Y}),o.RGBAImage.copy(N,S,{x:0,y:Y-1},{x:z,y:F-1},{width:W,height:1}),o.RGBAImage.copy(N,S,{x:0,y:0},{x:z,y:F+Y},{width:W,height:1}),o.RGBAImage.copy(N,S,{x:W-1,y:0},{x:z-1,y:F},{width:1,height:Y}),o.RGBAImage.copy(N,S,{x:0,y:0},{x:z+W,y:F},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const p of u){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const _=this.images[p];_||o.warnOnce(`Image with ID: "${p}" was not found`),P(_)&&this.updateImage(p,_)}}}const D=1e20;function R(b,u,p,_,S,E,L,z,F){for(let N=u;N<u+_;N++)B(b,p*E+N,E,S,L,z,F);for(let N=p;N<p+S;N++)B(b,N*E+u,1,_,L,z,F)}function B(b,u,p,_,S,E,L){E[0]=0,L[0]=-D,L[1]=D,S[0]=b[u];for(let z=1,F=0,N=0;z<_;z++){S[z]=b[u+z*p];const W=z*z;do{const Y=E[F];N=(S[z]-S[Y]+W-Y*Y)/(z-Y)/2}while(N<=L[F]&&--F>-1);F++,E[F]=z,L[F]=N,L[F+1]=D}for(let z=0,F=0;z<_;z++){for(;L[F+1]<z;)F++;const N=E[F],W=z-N;b[u+z*p]=S[N]+W*W}}class H{constructor(u,p){this.requestManager=u,this.localIdeographFontFamily=p,this.entries={}}setURL(u){this.url=u}getGlyphs(u,p){const _=[];for(const S in u)for(const E of u[S])_.push({stack:S,id:E});o.asyncAll(_,({stack:S,id:E},L)=>{let z=this.entries[S];z||(z=this.entries[S]={glyphs:{},requests:{},ranges:{}});let F=z.glyphs[E];if(F!==void 0)return void L(null,{stack:S,id:E,glyph:F});if(F=this._tinySDF(z,S,E),F)return z.glyphs[E]=F,void L(null,{stack:S,id:E,glyph:F});const N=Math.floor(E/256);if(256*N>65535)return void L(new Error("glyphs > 65535 not supported"));if(z.ranges[N])return void L(null,{stack:S,id:E,glyph:F});let W=z.requests[N];W||(W=z.requests[N]=[],H.loadGlyphRange(S,N,this.url,this.requestManager,(Y,J)=>{if(J){for(const fe in J)this._doesCharSupportLocalGlyph(+fe)||(z.glyphs[+fe]=J[+fe]);z.ranges[N]=!0}for(const fe of W)fe(Y,J);delete z.requests[N]})),W.push((Y,J)=>{Y?L(Y):J&&L(null,{stack:S,id:E,glyph:J[E]||null})})},(S,E)=>{if(S)p(S);else if(E){const L={};for(const{stack:z,id:F,glyph:N}of E)(L[z]||(L[z]={}))[F]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};p(null,L)}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(o.unicodeBlockLookup["CJK Unified Ideographs"](u)||o.unicodeBlockLookup["Hangul Syllables"](u)||o.unicodeBlockLookup.Hiragana(u)||o.unicodeBlockLookup.Katakana(u))}_tinySDF(u,p,_){const S=this.localIdeographFontFamily;if(!S||!this._doesCharSupportLocalGlyph(_))return;let E=u.tinySDF;if(!E){let z="400";/bold/i.test(p)?z="900":/medium/i.test(p)?z="500":/light/i.test(p)&&(z="200"),E=u.tinySDF=new H.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:S,fontWeight:z})}const L=E.draw(String.fromCharCode(_));return{id:_,bitmap:new o.AlphaImage({width:L.width||30,height:L.height||30},L.data),metrics:{width:L.glyphWidth||24,height:L.glyphHeight||24,left:L.glyphLeft||0,top:L.glyphTop-27||-8,advance:L.glyphAdvance||24}}}}H.loadGlyphRange=function(b,u,p,_,S){const E=256*u,L=E+255,z=_.transformRequest(p.replace("{fontstack}",b).replace("{range}",`${E}-${L}`),o.ResourceType.Glyphs);o.getArrayBuffer(z,(F,N)=>{if(F)S(F);else if(N){const W={};for(const Y of o.parseGlyphPbf(N))W[Y.id]=Y;S(null,W)}})},H.TinySDF=class{constructor({fontSize:b=24,buffer:u=3,radius:p=8,cutoff:_=.25,fontFamily:S="sans-serif",fontWeight:E="normal",fontStyle:L="normal"}={}){this.buffer=u,this.cutoff=_,this.radius=p;const z=this.size=b+4*u,F=this._createCanvas(z),N=this.ctx=F.getContext("2d",{willReadFrequently:!0});N.font=`${L} ${E} ${b}px ${S}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(b){const u=document.createElement("canvas");return u.width=u.height=b,u}draw(b){const{width:u,actualBoundingBoxAscent:p,actualBoundingBoxDescent:_,actualBoundingBoxLeft:S,actualBoundingBoxRight:E}=this.ctx.measureText(b),L=Math.ceil(p),z=Math.min(this.size-this.buffer,Math.ceil(E-S)),F=Math.min(this.size-this.buffer,L+Math.ceil(_)),N=z+2*this.buffer,W=F+2*this.buffer,Y=Math.max(N*W,0),J=new Uint8ClampedArray(Y),fe={data:J,width:N,height:W,glyphWidth:z,glyphHeight:F,glyphTop:L,glyphLeft:0,glyphAdvance:u};if(z===0||F===0)return fe;const{ctx:se,buffer:he,gridInner:we,gridOuter:Ae}=this;se.clearRect(he,he,z,F),se.fillText(b,he,he+L);const Le=se.getImageData(he,he,z,F);Ae.fill(D,0,Y),we.fill(0,0,Y);for(let pe=0;pe<F;pe++)for(let Fe=0;Fe<z;Fe++){const Re=Le.data[4*(pe*z+Fe)+3]/255;if(Re===0)continue;const Ge=(pe+he)*N+Fe+he;if(Re===1)Ae[Ge]=0,we[Ge]=D;else{const We=.5-Re;Ae[Ge]=We>0?We*We:0,we[Ge]=We<0?We*We:0}}R(Ae,0,0,N,W,N,this.f,this.v,this.z),R(we,he,he,z,F,N,this.f,this.v,this.z);for(let pe=0;pe<Y;pe++){const Fe=Math.sqrt(Ae[pe])-Math.sqrt(we[pe]);J[pe]=Math.round(255-255*(Fe/this.radius+this.cutoff))}return fe}};const V=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(b,u){return o.sphericalToCartesian(b.expression.evaluate(u))}interpolate(b,u,p){return{x:o.number(b.x,u.x,p),y:o.number(b.y,u.y,p),z:o.number(b.z,u.z,p)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),q="-transition";class j extends o.Evented{constructor(u){super(),this._transitionable=new o.Transitionable(V),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,p={}){if(!this._validate(o.validateLight,u,p))for(const _ in u){const S=u[_];_.endsWith(q)?this._transitionable.setTransition(_.slice(0,-q.length),S):this._transitionable.setValue(_,S)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class te{constructor(u,p){this.width=u,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,p){const _=u.join(",")+String(p);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(u,p)),this.dashEntry[_]}getDashRanges(u,p,_){const S=[];let E=u.length%2==1?-u[u.length-1]*_:0,L=u[0]*_,z=!0;S.push({left:E,right:L,isDash:z,zeroLength:u[0]===0});let F=u[0];for(let N=1;N<u.length;N++){z=!z;const W=u[N];E=F*_,F+=W,L=F*_,S.push({left:E,right:L,isDash:z,zeroLength:W===0})}return S}addRoundDash(u,p,_){const S=p/2;for(let E=-_;E<=_;E++){const L=this.width*(this.nextRow+_+E);let z=0,F=u[z];for(let N=0;N<this.width;N++){N/F.right>1&&(F=u[++z]);const W=Math.abs(N-F.left),Y=Math.abs(N-F.right),J=Math.min(W,Y);let fe;const se=E/_*(S+1);if(F.isDash){const he=S-Math.abs(se);fe=Math.sqrt(J*J+he*he)}else fe=S-Math.sqrt(J*J+se*se);this.data[L+N]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(u){for(let z=u.length-1;z>=0;--z){const F=u[z],N=u[z+1];F.zeroLength?u.splice(z,1):N&&N.isDash===F.isDash&&(N.left=F.left,u.splice(z,1))}const p=u[0],_=u[u.length-1];p.isDash===_.isDash&&(p.left=_.left-this.width,_.right=p.right+this.width);const S=this.width*this.nextRow;let E=0,L=u[E];for(let z=0;z<this.width;z++){z/L.right>1&&(L=u[++E]);const F=Math.abs(z-L.left),N=Math.abs(z-L.right),W=Math.min(F,N);this.data[S+z]=Math.max(0,Math.min(255,(L.isDash?W:-W)+128))}}addDash(u,p){const _=p?7:0,S=2*_+1;if(this.nextRow+S>this.height)return o.warnOnce("LineAtlas out of space"),null;let E=0;for(let z=0;z<u.length;z++)E+=u[z];if(E!==0){const z=this.width/E,F=this.getDashRanges(u,this.width,z);p?this.addRoundDash(F,z,_):this.addRegularDash(F)}const L={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:E};return this.nextRow+=S,this.dirty=!0,L}bind(u){const p=u.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}class ne{constructor(u,p){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const _=this.workerPool.acquire(this.id);for(let S=0;S<_.length;S++){const E=new ne.Actor(_[S],p,this.id);E.name=`Worker ${S}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,p,_){o.asyncAll(this.actors,(S,E)=>{S.send(u,p,E)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(u=>{u.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ce(b,u,p){const _=function(S,E){if(S)return p(S);if(E){const L=o.pick(o.extend(E,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(L.vectorLayers=E.vector_layers,L.vectorLayerIds=L.vectorLayers.map(z=>z.id)),p(null,L)}};return b.url?o.getJSON(u.transformRequest(b.url,o.ResourceType.Source),_):o.exported.frame(()=>_(null,b))}ne.Actor=o.Actor;class le{constructor(u,p,_){this.bounds=o.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=p||0,this.maxzoom=_||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const p=Math.pow(2,u.z),_=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*p),S=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*p),E=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*p),L=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*p);return u.x>=_&&u.x<E&&u.y>=S&&u.y<L}}class de extends o.Evented{constructor(u,p,_,S){if(super(),this.id=u,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(p,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ce(this._options,this.map._requestManager,(u,p)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u?this.fire(new o.ErrorEvent(u)):p&&(o.extend(this,p),p.bounds&&(this.tileBounds=new le(p.bounds,this.minzoom,this.maxzoom)),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}loadTile(u,p){const _=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),S={request:this.map._requestManager.transformRequest(_,o.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(L,z){return delete u.request,u.aborted?p(null):L&&L.status!==404?p(L):(z&&z.resourceTiming&&(u.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&u.setExpiryData(z),u.loadVectorData(z,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}S.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=p:u.request=u.actor.send("reloadTile",S,E.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",S,E.bind(this)))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ae extends o.Evented{constructor(u,p,_,S){super(),this.id=u,this.dispatcher=_,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},p),o.extend(this,o.pick(p,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ce(this._options,this.map._requestManager,(u,p)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new o.ErrorEvent(u)):p&&(o.extend(this,p),p.bounds&&(this.tileBounds=new le(p.bounds,this.minzoom,this.maxzoom)),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,p){const _=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.request=o.getImage(this.map._requestManager.transformRequest(_,o.ResourceType.Tile),(S,E,L)=>{if(delete u.request,u.aborted)u.state="unloaded",p(null);else if(S)u.state="errored",p(S);else if(E){this.map._refreshExpiredTiles&&u.setExpiryData(L);const z=this.map.painter.context,F=z.gl;u.texture=this.map.painter.getTileTexture(E.width),u.texture?u.texture.update(E,{useMipmap:!0}):(u.texture=new M(z,E,F.RGBA,{useMipmap:!0}),u.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),z.extTextureFilterAnisotropic&&F.texParameterf(F.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax)),u.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),p(null)}})}abortTile(u,p){u.request&&(u.request.cancel(),delete u.request),p()}unloadTile(u,p){u.texture&&this.map.painter.saveTileTexture(u.texture),p()}hasTransition(){return!1}}let Se;class ve extends ae{constructor(u,p,_,S){super(u,p,_,S),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(u,p){const _=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function S(E,L){E&&(u.state="errored",p(E)),L&&(u.dem=L,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded",p(null))}u.request=o.getImage(this.map._requestManager.transformRequest(_,o.ResourceType.Tile),(function(E,L){if(delete u.request,u.aborted)u.state="unloaded",p(null);else if(E)u.state="errored",p(E);else if(L){this.map._refreshExpiredTiles&&u.setExpiryData(L),delete L.cacheControl,delete L.expires;const z=o.isImageBitmap(L)&&(Se==null&&(Se=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Se)?L:o.exported.getImageData(L,1),F={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:z,encoding:this.encoding};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",F,S.bind(this)))}}).bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)}_getNeighboringTiles(u){const p=u.canonical,_=Math.pow(2,p.z),S=(p.x-1+_)%_,E=p.x===0?u.wrap-1:u.wrap,L=(p.x+1+_)%_,z=p.x+1===_?u.wrap+1:u.wrap,F={};return F[new o.OverscaledTileID(u.overscaledZ,E,p.z,S,p.y).key]={backfilled:!1},F[new o.OverscaledTileID(u.overscaledZ,z,p.z,L,p.y).key]={backfilled:!1},p.y>0&&(F[new o.OverscaledTileID(u.overscaledZ,E,p.z,S,p.y-1).key]={backfilled:!1},F[new o.OverscaledTileID(u.overscaledZ,u.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},F[new o.OverscaledTileID(u.overscaledZ,z,p.z,L,p.y-1).key]={backfilled:!1}),p.y+1<_&&(F[new o.OverscaledTileID(u.overscaledZ,E,p.z,S,p.y+1).key]={backfilled:!1},F[new o.OverscaledTileID(u.overscaledZ,u.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},F[new o.OverscaledTileID(u.overscaledZ,z,p.z,L,p.y+1).key]={backfilled:!1}),F}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})}}class Ye extends o.Evented{constructor(u,p,_,S){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(S),this._data=p.data,this._options=o.extend({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const E=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*E,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*E,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:o.EXTENT,radius:(p.clusterRadius||50)*E,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData("content"),this}getClusterExpansionZoom(u,p){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},p),this}getClusterChildren(u,p){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},p),this}getClusterLeaves(u,p,_,S){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:p,offset:_},S),this}_updateWorkerData(u){const p=o.extend({},this.workerOptions),_=this._data;typeof _=="string"?(p.request=this.map._requestManager.transformRequest(o.exported.resolveURL(_),o.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(_),this._pendingLoads++,this.fire(new o.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,p,(S,E)=>{if(this._pendingLoads--,this._removed||E&&E.abandoned)return void this.fire(new o.Event("dataabort",{dataType:"source",sourceDataType:u}));let L=null;if(E&&E.resourceTiming&&E.resourceTiming[this.id]&&(L=E.resourceTiming[this.id].slice(0)),S)return void this.fire(new o.ErrorEvent(S));const z={dataType:"source",sourceDataType:u};this._collectResourceTiming&&L&&L.length>0&&o.extend(z,{resourceTiming:L}),this.fire(new o.Event("data",z))})}loaded(){return this._pendingLoads===0}loadTile(u,p){const _=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const S={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request=this.actor.send(_,S,(E,L)=>(delete u.request,u.unloadVectorData(),u.aborted?p(null):E?p(E):(u.loadVectorData(L,this.map.painter,_==="reloadTile"),p(null))))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Qe=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ct extends o.Evented{constructor(u,p,_,S){super(),this.id=u,this.dispatcher=_,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=p}load(u,p){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(_,S)=>{this._loaded=!0,_?this.fire(new o.ErrorEvent(_)):S&&(this.image=S,u&&(this.coordinates=u),p&&p(),this._finishLoading())})}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}setCoordinates(u){this.coordinates=u;const p=u.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(S){let E=1/0,L=1/0,z=-1/0,F=-1/0;for(const J of S)E=Math.min(E,J.x),L=Math.min(L,J.y),z=Math.max(z,J.x),F=Math.max(F,J.y);const N=Math.max(z-E,F-L),W=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),Y=Math.pow(2,W);return new o.CanonicalTileID(W,Math.floor((E+z)/2*Y),Math.floor((L+F)/2*Y))}(p),this.minzoom=this.maxzoom=this.tileID.z;const _=p.map(S=>this.tileID.getTilePoint(S)._round());return this._boundsArray=new o.RasterBoundsArray,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(_[2].x,_[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Qe.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new M(u,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}loadTile(u,p){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},p(null)):(u.state="errored",p(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class St extends Ct{constructor(u,p,_,S){super(u,p,_,S),this.roundZoom=!0,this.type="video",this.options=p}load(){this._loaded=!1;const u=this.options;this.urls=[];for(const p of u.urls)this.urls.push(this.map._requestManager.transformRequest(p,o.ResourceType.Source).url);o.getVideo(this.urls,(p,_)=>{this._loaded=!0,p?this.fire(new o.ErrorEvent(p)):_&&(this.video=_,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const p=this.video.seekable;u<p.start(0)||u>p.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Qe.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new M(u,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Kt extends Ct{constructor(u,p,_,S){super(u,p,_,S),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(L=>typeof L!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,_=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,Qe.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new M(p,this.canvas,_.RGBA,{premultiply:!0});for(const S in this.tiles){const E=this.tiles[S];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const Ft={vector:de,raster:ae,"raster-dem":ve,geojson:Ye,video:St,image:Ct,canvas:Kt};function br(b,u){const p=o.create();return o.translate(p,p,[1,1,0]),o.scale(p,p,[.5*b.width,.5*b.height,1]),o.multiply(p,p,b.calculatePosMatrix(u.toUnwrapped()))}function Ir(b,u,p,_,S,E){const L=function(Y,J,fe){if(Y)for(const se of Y){const he=J[se];if(he&&he.source===fe&&he.type==="fill-extrusion")return!0}else for(const se in J){const he=J[se];if(he.source===fe&&he.type==="fill-extrusion")return!0}return!1}(S&&S.layers,u,b.id),z=E.maxPitchScaleFactor(),F=b.tilesIn(_,z,L);F.sort(vr);const N=[];for(const Y of F)N.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(u,p,b._state,Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,S,E,z,br(b.transform,Y.tileID))});const W=function(Y){const J={},fe={};for(const se of Y){const he=se.queryResults,we=se.wrappedTileID,Ae=fe[we]=fe[we]||{};for(const Le in he){const pe=he[Le],Fe=Ae[Le]=Ae[Le]||{},Re=J[Le]=J[Le]||[];for(const Ge of pe)Fe[Ge.featureIndex]||(Fe[Ge.featureIndex]=!0,Re.push(Ge))}}return J}(N);for(const Y in W)W[Y].forEach(J=>{const fe=J.feature,se=b.getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=se});return W}function vr(b,u){const p=b.tileID,_=u.tileID;return p.overscaledZ-_.overscaledZ||p.canonical.y-_.canonical.y||p.wrap-_.wrap||p.canonical.x-_.canonical.x}class fr{constructor(u,p){this.tileID=u,this.uid=o.uniqueId(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const p=u+this.timeAdded;p<o.exported.now()||this.fadeEndTime&&p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.textures.forEach(p=>u.saveTileTexture(p)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(u,p,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(S,E){const L={};if(!E)return L;for(const z of S){const F=z.layerIds.map(N=>E.getLayer(N)).filter(Boolean);if(F.length!==0){z.layers=F,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(N=>F.filter(W=>W.id===N)[0]));for(const N of F)L[N.id]=z}}return L}(u.buckets,p.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const E=this.buckets[S];if(E instanceof o.SymbolBucket){if(this.hasSymbolBuckets=!0,!_)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const E=this.buckets[S];if(E instanceof o.SymbolBucket&&E.hasRTLText){this.hasRTLText=!0,o.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const S in this.buckets){const E=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(S).queryRadius(E))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new o.CollisionBoxArray}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const _ in this.buckets){const S=this.buckets[_];S.uploadPending()&&S.upload(u)}const p=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new M(u,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new M(u,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,p,_,S,E,L,z,F,N,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:E,scale:L,tileSize:this.tileSize,pixelPosMatrix:W,transform:F,params:z,queryPadding:this.queryPadding*N},u,p,_):{}}querySourceFeatures(u,p){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const S=_.loadVTLayers(),E=p?p.sourceLayer:"",L=S._geojsonTileLayer||S[E];if(!L)return;const z=o.createFilter(p&&p.filter),{z:F,x:N,y:W}=this.tileID.canonical,Y={z:F,x:N,y:W};for(let J=0;J<L.length;J++){const fe=L.feature(J);if(z.needGeometry){const we=o.toEvaluationFeature(fe,!0);if(!z.filter(new o.EvaluationParameters(this.tileID.overscaledZ),we,this.tileID.canonical))continue}else if(!z.filter(new o.EvaluationParameters(this.tileID.overscaledZ),fe))continue;const se=_.getId(fe,E),he=new o.GeoJSONFeature(fe,F,N,W,se);he.tile=Y,u.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const p=this.expirationTime;if(u.cacheControl){const _=o.parseCacheControl(u.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const _=Date.now();let S=!1;if(this.expirationTime>_)S=!1;else if(p)if(this.expirationTime<p)S=!0;else{const E=this.expirationTime-p;E?this.expirationTime=_+Math.max(E,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!p.style.hasLayer(S))continue;const E=this.buckets[S],L=E.layers[0].sourceLayer||"_geojsonTileLayer",z=_[L],F=u[L];if(!z||!F||Object.keys(F).length===0)continue;E.update(F,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const N=p&&p.style&&p.style.getLayer(S);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=o.exported.now()+u}setDependencies(u,p){const _={};for(const S of p)_[S]=!0;this.dependencies[u]=_}hasDependency(u,p){for(const _ of u){const S=this.dependencies[_];if(S){for(const E of p)if(S[E])return!0}}return!1}}class qe{constructor(u,p){this.max=u,this.onRemove=p,this.reset()}reset(){for(const u in this.data)for(const p of this.data[u])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(u,p,_){const S=u.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const E={value:p,timeout:void 0};if(_!==void 0&&(E.timeout=setTimeout(()=>{this.remove(u,E)},_)),this.data[S].push(E),this.order.push(S),this.order.length>this.max){const L=this._getAndRemoveByKey(this.order[0]);L&&this.onRemove(L)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const p=this.data[u].shift();return p.timeout&&clearTimeout(p.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),p.value}getByKey(u){const p=this.data[u];return p?p[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,p){if(!this.has(u))return this;const _=u.wrapped().key,S=p===void 0?0:this.data[_].indexOf(p),E=this.data[_][S];return this.data[_].splice(S,1),E.timeout&&clearTimeout(E.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(E.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(u){const p=[];for(const _ in this.data)for(const S of this.data[_])u(S.value)||p.push(S);for(const _ of p)this.remove(_.value.tileID,_)}}class st{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,p,_){const S=String(p);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][S]=this.stateChanges[u][S]||{},o.extend(this.stateChanges[u][S],_),this.deletedStates[u]===null){this.deletedStates[u]={};for(const E in this.state[u])E!==S&&(this.deletedStates[u][E]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][S]===null){this.deletedStates[u][S]={};for(const E in this.state[u][S])_[E]||(this.deletedStates[u][S][E]=null)}else for(const E in _)this.deletedStates[u]&&this.deletedStates[u][S]&&this.deletedStates[u][S][E]===null&&delete this.deletedStates[u][S][E]}removeFeatureState(u,p,_){if(this.deletedStates[u]===null)return;const S=String(p);if(this.deletedStates[u]=this.deletedStates[u]||{},_&&p!==void 0)this.deletedStates[u][S]!==null&&(this.deletedStates[u][S]=this.deletedStates[u][S]||{},this.deletedStates[u][S][_]=null);else if(p!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][S])for(_ in this.deletedStates[u][S]={},this.stateChanges[u][S])this.deletedStates[u][S][_]=null;else this.deletedStates[u][S]=null;else this.deletedStates[u]=null}getState(u,p){const _=String(p),S=o.extend({},(this.state[u]||{})[_],(this.stateChanges[u]||{})[_]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const E=this.deletedStates[u][p];if(E===null)return{};for(const L in E)delete S[L]}return S}initializeTileState(u,p){u.setFeatureState(this.state,p)}coalesceChanges(u,p){const _={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const E={};for(const L in this.stateChanges[S])this.state[S][L]||(this.state[S][L]={}),o.extend(this.state[S][L],this.stateChanges[S][L]),E[L]=this.state[S][L];_[S]=E}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const E={};if(this.deletedStates[S]===null)for(const L in this.state[S])E[L]={},this.state[S][L]={};else for(const L in this.deletedStates[S]){if(this.deletedStates[S][L]===null)this.state[S][L]={};else for(const z of Object.keys(this.deletedStates[S][L]))delete this.state[S][L][z];E[L]=this.state[S][L]}_[S]=_[S]||{},o.extend(_[S],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const S in u)u[S].setFeatureState(_,p)}}class et extends o.Evented{constructor(u,p,_){super(),this.id=u,this.dispatcher=_,this.on("data",S=>{S.dataType==="source"&&S.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(S,E,L,z){const F=new Ft[E.type](S,E,L,z);if(F.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${F.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],F),F}(u,p,_,this),this._tiles={},this._cache=new qe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new st}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const u in this._tiles){const p=this._tiles[u];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,p){return this._source.loadTile(u,p)}_unloadTile(u){if(this._source.unloadTile)return this._source.unloadTile(u,()=>{})}_abortTile(u){this._source.abortTile&&this._source.abortTile(u,()=>{}),this._source.fire(new o.Event("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const _=this._tiles[p];_.upload(u),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(mt).map(u=>u.key)}getRenderableIds(u){const p=[];for(const _ in this._tiles)this._isIdRenderable(_,u)&&p.push(this._tiles[_]);return u?p.sort((_,S)=>{const E=_.tileID,L=S.tileID,z=new o.pointGeometry(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),F=new o.pointGeometry(L.canonical.x,L.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-L.overscaledZ||F.y-z.y||F.x-z.x}).map(_=>_.tileID.key):p.map(_=>_.tileID).sort(mt).map(_=>_.key)}hasRenderableParent(u){const p=this.findLoadedParent(u,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(u,p){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(p||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,p){const _=this._tiles[u];_&&(_.state!=="loading"&&(_.state=p),this._loadTile(_,this._tileLoaded.bind(this,_,u,p)))}_tileLoaded(u,p,_,S){if(S)return u.state="errored",void(S.status!==404?this._source.fire(new o.ErrorEvent(S,{tile:u})):this.update(this.transform,this.terrain));u.timeAdded=o.exported.now(),_==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(p,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new o.Event("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const p=this.getRenderableIds();for(let S=0;S<p.length;S++){const E=p[S];if(u.neighboringTiles&&u.neighboringTiles[E]){const L=this.getTileByID(E);_(u,L),_(L,u)}}function _(S,E){S.needsHillshadePrepare=!0,S.needsTerrainPrepare=!0;let L=E.tileID.canonical.x-S.tileID.canonical.x;const z=E.tileID.canonical.y-S.tileID.canonical.y,F=Math.pow(2,S.tileID.canonical.z),N=E.tileID.key;L===0&&z===0||Math.abs(z)>1||(Math.abs(L)>1&&(Math.abs(L+F)===1?L+=F:Math.abs(L-F)===1&&(L-=F)),E.dem&&S.dem&&(S.dem.backfillBorder(E.dem,L,z),S.neighboringTiles&&S.neighboringTiles[N]&&(S.neighboringTiles[N].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,p,_,S){for(const E in this._tiles){let L=this._tiles[E];if(S[E]||!L.hasData()||L.tileID.overscaledZ<=p||L.tileID.overscaledZ>_)continue;let z=L.tileID;for(;L&&L.tileID.overscaledZ>p+1;){const N=L.tileID.scaledTo(L.tileID.overscaledZ-1);L=this._tiles[N.key],L&&L.hasData()&&(z=N)}let F=z;for(;F.overscaledZ>p;)if(F=F.scaledTo(F.overscaledZ-1),u[F.key]){S[z.key]=z;break}}}findLoadedParent(u,p){if(u.key in this._loadedParentTiles){const _=this._loadedParentTiles[u.key];return _&&_.tileID.overscaledZ>=p?_:null}for(let _=u.overscaledZ-1;_>=p;_--){const S=u.scaledTo(_),E=this._getLoadedTile(S);if(E)return E}}_getLoadedTile(u){const p=this._tiles[u.key];return p&&p.hasData()?p:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const p=Math.ceil(u.width/this._source.tileSize)+1,_=Math.ceil(u.height/this._source.tileSize)+1,S=Math.floor(p*_*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(E)}handleWrapJump(u){const p=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,p){const _={};for(const S in this._tiles){const E=this._tiles[S];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+p),_[E.tileID.key]=E}this._tiles=_;for(const S in this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(const S in this._tiles)this._setTileReloadTimer(S,this._tiles[S])}}update(u,p){if(this.transform=u,this.terrain=p,!this._sourceLoaded||this._paused)return;let _;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new o.OverscaledTileID(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y)):(_=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(_=_.filter(N=>this._source.hasTile(N)))):_=[];const S=u.coveringZoomLevel(this._source),E=Math.max(S-et.maxOverzooming,this._source.minzoom),L=Math.max(S+et.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const N={};for(const W of _)if(W.canonical.z>this._source.minzoom){const Y=W.scaledTo(W.canonical.z-1);N[Y.key]=Y;const J=W.scaledTo(Math.max(this._source.minzoom,Math.min(W.canonical.z,5)));N[J.key]=J}_=_.concat(Object.values(N))}const z=this._updateRetainedTiles(_,S);if(ft(this._source.type)){const N={},W={},Y=Object.keys(z);for(const J of Y){const fe=z[J],se=this._tiles[J];if(!se||se.fadeEndTime&&se.fadeEndTime<=o.exported.now())continue;const he=this.findLoadedParent(fe,E);he&&(this._addTile(he.tileID),N[he.tileID.key]=he.tileID),W[J]=fe}this._retainLoadedChildren(W,S,L,z);for(const J in N)z[J]||(this._coveredTiles[J]=!0,z[J]=N[J]);if(p){const J={},fe={};for(const se of _)this._tiles[se.key].hasData()?J[se.key]=se:fe[se.key]=se;for(const se in fe){const he=fe[se].children(this._source.maxzoom);this._tiles[he[0].key]&&this._tiles[he[1].key]&&this._tiles[he[2].key]&&this._tiles[he[3].key]&&(J[he[0].key]=z[he[0].key]=he[0],J[he[1].key]=z[he[1].key]=he[1],J[he[2].key]=z[he[2].key]=he[2],J[he[3].key]=z[he[3].key]=he[3],delete fe[se])}for(const se in fe){const he=this.findLoadedParent(fe[se],this._source.minzoom);if(he){J[he.tileID.key]=z[he.tileID.key]=he.tileID;for(const we in J)J[we].isChildOf(he.tileID)&&delete J[we]}}for(const se in this._tiles)J[se]||(this._coveredTiles[se]=!0)}}for(const N in z)this._tiles[N].clearFadeHold();const F=o.keysDifference(this._tiles,z);for(const N of F){const W=this._tiles[N];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile(N)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,p){const _={},S={},E=Math.max(p-et.maxOverzooming,this._source.minzoom),L=Math.max(p+et.maxUnderzooming,this._source.minzoom),z={};for(const F of u){const N=this._addTile(F);_[F.key]=F,N.hasData()||p<this._source.maxzoom&&(z[F.key]=F)}this._retainLoadedChildren(z,p,L,_);for(const F of u){let N=this._tiles[F.key];if(N.hasData())continue;if(p+1>this._source.maxzoom){const Y=F.children(this._source.maxzoom)[0],J=this.getTile(Y);if(J&&J.hasData()){_[Y.key]=Y;continue}}else{const Y=F.children(this._source.maxzoom);if(_[Y[0].key]&&_[Y[1].key]&&_[Y[2].key]&&_[Y[3].key])continue}let W=N.wasRequested();for(let Y=F.overscaledZ-1;Y>=E;--Y){const J=F.scaledTo(Y);if(S[J.key]||(S[J.key]=!0,N=this.getTile(J),!N&&W&&(N=this._addTile(J)),N&&(_[J.key]=J,W=N.wasRequested(),N.hasData())))break}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const p=[];let _,S=this._tiles[u].tileID;for(;S.overscaledZ>0;){if(S.key in this._loadedParentTiles){_=this._loadedParentTiles[S.key];break}p.push(S.key);const E=S.scaledTo(S.overscaledZ-1);if(_=this._getLoadedTile(E),_)break;S=E}for(const E of p)this._loadedParentTiles[E]=_}}_addTile(u){let p=this._tiles[u.key];if(p)return p;p=this._cache.getAndRemove(u),p&&(this._setTileReloadTimer(u.key,p),p.tileID=u,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,p)));const _=p;return p||(p=new fr(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(p,this._tileLoaded.bind(this,p,u.key,p.state))),p.uses++,this._tiles[u.key]=p,_||this._source.fire(new o.Event("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(u,p){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const _=p.getExpiryTimeout();_&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},_))}_removeTile(u){const p=this._tiles[u];p&&(p.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,p,_){const S=[],E=this.transform;if(!E)return S;const L=_?E.getCameraQueryGeometry(u):u,z=u.map(se=>E.pointCoordinate(se,this.terrain)),F=L.map(se=>E.pointCoordinate(se,this.terrain)),N=this.getIds();let W=1/0,Y=1/0,J=-1/0,fe=-1/0;for(const se of F)W=Math.min(W,se.x),Y=Math.min(Y,se.y),J=Math.max(J,se.x),fe=Math.max(fe,se.y);for(let se=0;se<N.length;se++){const he=this._tiles[N[se]];if(he.holdingForFade())continue;const we=he.tileID,Ae=Math.pow(2,E.zoom-he.tileID.overscaledZ),Le=p*he.queryPadding*o.EXTENT/he.tileSize/Ae,pe=[we.getTilePoint(new o.MercatorCoordinate(W,Y)),we.getTilePoint(new o.MercatorCoordinate(J,fe))];if(pe[0].x-Le<o.EXTENT&&pe[0].y-Le<o.EXTENT&&pe[1].x+Le>=0&&pe[1].y+Le>=0){const Fe=z.map(Ge=>we.getTilePoint(Ge)),Re=F.map(Ge=>we.getTilePoint(Ge));S.push({tile:he,tileID:we,queryGeometry:Fe,cameraQueryGeometry:Re,scale:Ae})}}return S}getVisibleCoordinates(u){const p=this.getRenderableIds(u).map(_=>this._tiles[_].tileID);for(const _ of p)_.posMatrix=this.transform.calculatePosMatrix(_.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(ft(this._source.type))for(const u in this._tiles){const p=this._tiles[u];if(p.fadeEndTime!==void 0&&p.fadeEndTime>=o.exported.now())return!0}return!1}setFeatureState(u,p,_){this._state.updateState(u=u||"_geojsonTileLayer",p,_)}removeFeatureState(u,p,_){this._state.removeFeatureState(u=u||"_geojsonTileLayer",p,_)}getFeatureState(u,p){return this._state.getState(u=u||"_geojsonTileLayer",p)}setDependencies(u,p,_){const S=this._tiles[u];S&&S.setDependencies(p,_)}reloadTilesForDependencies(u,p){for(const _ in this._tiles)this._tiles[_].hasDependency(u,p)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(u,p))}}function mt(b,u){const p=Math.abs(2*b.wrap)-+(b.wrap<0),_=Math.abs(2*u.wrap)-+(u.wrap<0);return b.overscaledZ-u.overscaledZ||_-p||u.canonical.y-b.canonical.y||u.canonical.x-b.canonical.x}function ft(b){return b==="raster"||b==="image"||b==="video"}et.maxOverzooming=10,et.maxUnderzooming=3;const ue="mapboxgl_preloaded_worker_pool";class ge{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<ge.workerCount;)this.workers.push(new Worker(Ps.workerUrl));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ue]}numActive(){return Object.keys(this.active).length}}const Ie=Math.floor(o.exported.hardwareConcurrency/2);let je;function Ke(){return je||(je=new ge),je}function rt(b,u){const p={};for(const _ in b)_!=="ref"&&(p[_]=b[_]);return o.refProperties.forEach(_=>{_ in u&&(p[_]=u[_])}),p}function vt(b){b=b.slice();const u=Object.create(null);for(let p=0;p<b.length;p++)u[b[p].id]=b[p];for(let p=0;p<b.length;p++)"ref"in b[p]&&(b[p]=rt(b[p],u[b[p].ref]));return b}ge.workerCount=Math.max(Math.min(Ie,6),1);const Xe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ut(b,u,p){p.push({command:Xe.addSource,args:[b,u[b]]})}function it(b,u,p){u.push({command:Xe.removeSource,args:[b]}),p[b]=!0}function Nt(b,u,p,_){it(b,p,_),ut(b,u,p)}function zt(b,u,p){let _;for(_ in b[p])if(Object.prototype.hasOwnProperty.call(b[p],_)&&_!=="data"&&!g(b[p][_],u[p][_]))return!1;for(_ in u[p])if(Object.prototype.hasOwnProperty.call(u[p],_)&&_!=="data"&&!g(b[p][_],u[p][_]))return!1;return!0}function $t(b,u,p,_,S,E){let L;for(L in u=u||{},b=b||{})Object.prototype.hasOwnProperty.call(b,L)&&(g(b[L],u[L])||p.push({command:E,args:[_,L,u[L],S]}));for(L in u)Object.prototype.hasOwnProperty.call(u,L)&&!Object.prototype.hasOwnProperty.call(b,L)&&(g(b[L],u[L])||p.push({command:E,args:[_,L,u[L],S]}))}function Wt(b){return b.id}function ar(b,u){return b[u.id]=u,b}class wr{constructor(u,p){this.reset(u,p)}reset(u,p){this.points=u||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=o.clamp(u,0,1);let p=1,_=this._distances[p];const S=u*this.paddedLength+this.padding;for(;_<S&&p<this._distances.length;)_=this._distances[++p];const E=p-1,L=this._distances[E],z=_-L,F=z>0?(S-L)/z:0;return this.points[E].mult(1-F).add(this.points[p].mult(F))}}function Be(b,u){let p=!0;return b==="always"||b!=="never"&&u!=="never"||(p=!1),p}class at{constructor(u,p,_){const S=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(u/_),this.yCellCount=Math.ceil(p/_);for(let L=0;L<this.xCellCount*this.yCellCount;L++)S.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=p,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,p,_,S,E){this._forEachCell(p,_,S,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(S),this.bboxes.push(E)}insertCircle(u,p,_,S){this._forEachCell(p-S,_-S,p+S,_+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(p),this.circles.push(_),this.circles.push(S)}_insertBoxCell(u,p,_,S,E,L){this.boxCells[E].push(L)}_insertCircleCell(u,p,_,S,E,L){this.circleCells[E].push(L)}_query(u,p,_,S,E,L,z){if(_<0||u>this.width||S<0||p>this.height)return[];const F=[];if(u<=0&&p<=0&&this.width<=_&&this.height<=S){if(E)return[{key:null,x1:u,y1:p,x2:_,y2:S}];for(let N=0;N<this.boxKeys.length;N++)F.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const W=this.circles[3*N],Y=this.circles[3*N+1],J=this.circles[3*N+2];F.push({key:this.circleKeys[N],x1:W-J,y1:Y-J,x2:W+J,y2:Y+J})}}else this._forEachCell(u,p,_,S,this._queryCell,F,{hitTest:E,overlapMode:L,seenUids:{box:{},circle:{}}},z);return F}query(u,p,_,S){return this._query(u,p,_,S,!1,null)}hitTest(u,p,_,S,E,L){return this._query(u,p,_,S,!0,E,L).length>0}hitTestCircle(u,p,_,S,E){const L=u-_,z=u+_,F=p-_,N=p+_;if(z<0||L>this.width||N<0||F>this.height)return!1;const W=[];return this._forEachCell(L,F,z,N,this._queryCellCircle,W,{hitTest:!0,overlapMode:S,circle:{x:u,y:p,radius:_},seenUids:{box:{},circle:{}}},E),W.length>0}_queryCell(u,p,_,S,E,L,z,F){const{seenUids:N,hitTest:W,overlapMode:Y}=z,J=this.boxCells[E];if(J!==null){const se=this.bboxes;for(const he of J)if(!N.box[he]){N.box[he]=!0;const we=4*he,Ae=this.boxKeys[he];if(u<=se[we+2]&&p<=se[we+3]&&_>=se[we+0]&&S>=se[we+1]&&(!F||F(Ae))&&(!W||!Be(Y,Ae.overlapMode))&&(L.push({key:Ae,x1:se[we],y1:se[we+1],x2:se[we+2],y2:se[we+3]}),W))return!0}}const fe=this.circleCells[E];if(fe!==null){const se=this.circles;for(const he of fe)if(!N.circle[he]){N.circle[he]=!0;const we=3*he,Ae=this.circleKeys[he];if(this._circleAndRectCollide(se[we],se[we+1],se[we+2],u,p,_,S)&&(!F||F(Ae))&&(!W||!Be(Y,Ae.overlapMode))){const Le=se[we],pe=se[we+1],Fe=se[we+2];if(L.push({key:Ae,x1:Le-Fe,y1:pe-Fe,x2:Le+Fe,y2:pe+Fe}),W)return!0}}}return!1}_queryCellCircle(u,p,_,S,E,L,z,F){const{circle:N,seenUids:W,overlapMode:Y}=z,J=this.boxCells[E];if(J!==null){const se=this.bboxes;for(const he of J)if(!W.box[he]){W.box[he]=!0;const we=4*he,Ae=this.boxKeys[he];if(this._circleAndRectCollide(N.x,N.y,N.radius,se[we+0],se[we+1],se[we+2],se[we+3])&&(!F||F(Ae))&&!Be(Y,Ae.overlapMode))return L.push(!0),!0}}const fe=this.circleCells[E];if(fe!==null){const se=this.circles;for(const he of fe)if(!W.circle[he]){W.circle[he]=!0;const we=3*he,Ae=this.circleKeys[he];if(this._circlesCollide(se[we],se[we+1],se[we+2],N.x,N.y,N.radius)&&(!F||F(Ae))&&!Be(Y,Ae.overlapMode))return L.push(!0),!0}}}_forEachCell(u,p,_,S,E,L,z,F){const N=this._convertToXCellCoord(u),W=this._convertToYCellCoord(p),Y=this._convertToXCellCoord(_),J=this._convertToYCellCoord(S);for(let fe=N;fe<=Y;fe++)for(let se=W;se<=J;se++)if(E.call(this,u,p,_,S,this.xCellCount*se+fe,L,z,F))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,p,_,S,E,L){const z=S-u,F=E-p,N=_+L;return N*N>z*z+F*F}_circleAndRectCollide(u,p,_,S,E,L,z){const F=(L-S)/2,N=Math.abs(u-(S+F));if(N>F+_)return!1;const W=(z-E)/2,Y=Math.abs(p-(E+W));if(Y>W+_)return!1;if(N<=F||Y<=W)return!0;const J=N-F,fe=Y-W;return J*J+fe*fe<=_*_}}function Bn(b,u,p,_,S){const E=o.create();return u?(o.scale(E,E,[1/S,1/S,1]),p||o.rotateZ(E,E,_.angle)):o.multiply(E,_.labelPlaneMatrix,b),E}function jn(b,u,p,_,S){if(u){const E=o.clone(b);return o.scale(E,E,[S,S,1]),p||o.rotateZ(E,E,-_.angle),E}return _.glCoordMatrix}function pr(b,u,p){let _;p?(_=[b.x,b.y,p(b.x,b.y),1],o.transformMat4(_,_,u)):(_=[b.x,b.y,0,1],vo(_,_,u));const S=_[3];return{point:new o.pointGeometry(_[0]/S,_[1]/S),signedDistanceFromCamera:S}}function Gn(b,u){return .5+b/u*.5}function ci(b,u){const p=b[0]/b[3],_=b[1]/b[3];return p>=-u[0]&&p<=u[0]&&_>=-u[1]&&_<=u[1]}function Yr(b,u,p,_,S,E,L,z,F,N){const W=_?b.textSizeData:b.iconSizeData,Y=o.evaluateSizeForZoom(W,p.transform.zoom),J=[256/p.width*2+1,256/p.height*2+1],fe=_?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;fe.clear();const se=b.lineVertexArray,he=_?b.text.placedSymbolArray:b.icon.placedSymbolArray,we=p.transform.width/p.transform.height;let Ae=!1;for(let Le=0;Le<he.length;Le++){const pe=he.get(Le);if(pe.hidden||pe.writingMode===o.WritingMode.vertical&&!Ae){tr(pe.numGlyphs,fe);continue}let Fe;if(Ae=!1,N?(Fe=[pe.anchorX,pe.anchorY,N(pe.anchorX,pe.anchorY),1],o.transformMat4(Fe,Fe,u)):(Fe=[pe.anchorX,pe.anchorY,0,1],vo(Fe,Fe,u)),!ci(Fe,J)){tr(pe.numGlyphs,fe);continue}const Re=Gn(p.transform.cameraToCenterDistance,Fe[3]),Ge=o.evaluateSizeForFeature(W,Y,pe),We=L?Ge/Re:Ge*Re,nt=new o.pointGeometry(pe.anchorX,pe.anchorY),He=pr(nt,S,N).point,wt={},dt=or(pe,We,!1,z,u,S,E,b.glyphOffsetArray,se,fe,He,nt,wt,we,F,N);Ae=dt.useVertical,(dt.notEnoughRoom||Ae||dt.needsFlipping&&or(pe,We,!0,z,u,S,E,b.glyphOffsetArray,se,fe,He,nt,wt,we,F,N).notEnoughRoom)&&tr(pe.numGlyphs,fe)}_?b.text.dynamicLayoutVertexBuffer.updateData(fe):b.icon.dynamicLayoutVertexBuffer.updateData(fe)}function Fn(b,u,p,_,S,E,L,z,F,N,W,Y,J){const fe=z.glyphStartIndex+z.numGlyphs,se=z.lineStartIndex,he=z.lineStartIndex+z.lineLength,we=u.getoffsetX(z.glyphStartIndex),Ae=u.getoffsetX(fe-1),Le=ri(b*we,p,_,S,E,L,z.segment,se,he,F,N,W,Y,J);if(!Le)return null;const pe=ri(b*Ae,p,_,S,E,L,z.segment,se,he,F,N,W,Y,J);return pe?{first:Le,last:pe}:null}function ht(b,u,p,_){return b===o.WritingMode.horizontal&&Math.abs(p.y-u.y)>Math.abs(p.x-u.x)*_?{useVertical:!0}:(b===o.WritingMode.vertical?u.y<p.y:u.x>p.x)?{needsFlipping:!0}:null}function or(b,u,p,_,S,E,L,z,F,N,W,Y,J,fe,se,he){const we=u/24,Ae=b.lineOffsetX*we,Le=b.lineOffsetY*we;let pe;if(b.numGlyphs>1){const Fe=b.glyphStartIndex+b.numGlyphs,Re=b.lineStartIndex,Ge=b.lineStartIndex+b.lineLength,We=Fn(we,z,Ae,Le,p,W,Y,b,F,E,J,se,he);if(!We)return{notEnoughRoom:!0};const nt=pr(We.first.point,L,he).point,He=pr(We.last.point,L,he).point;if(_&&!p){const wt=ht(b.writingMode,nt,He,fe);if(wt)return wt}pe=[We.first];for(let wt=b.glyphStartIndex+1;wt<Fe-1;wt++)pe.push(ri(we*z.getoffsetX(wt),Ae,Le,p,W,Y,b.segment,Re,Ge,F,E,J,se,he));pe.push(We.last)}else{if(_&&!p){const Re=pr(Y,S,he).point,Ge=b.lineStartIndex+b.segment+1,We=new o.pointGeometry(F.getx(Ge),F.gety(Ge)),nt=pr(We,S,he),He=nt.signedDistanceFromCamera>0?nt.point:nr(Y,We,Re,1,S,he),wt=ht(b.writingMode,Re,He,fe);if(wt)return wt}const Fe=ri(we*z.getoffsetX(b.glyphStartIndex),Ae,Le,p,W,Y,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,F,E,J,se,he);if(!Fe)return{notEnoughRoom:!0};pe=[Fe]}for(const Fe of pe)o.addDynamicAttributes(N,Fe.point,Fe.angle);return{}}function nr(b,u,p,_,S,E){const L=pr(b.add(b.sub(u)._unit()),S,E).point,z=p.sub(L);return p.add(z._mult(_/z.mag()))}function ri(b,u,p,_,S,E,L,z,F,N,W,Y,J,fe){const se=_?b-u:b+u;let he=se>0?1:-1,we=0;_&&(he*=-1,we=Math.PI),he<0&&(we+=Math.PI);let Ae=he>0?z+L:z+L+1,Le=S,pe=S,Fe=0,Re=0;const Ge=Math.abs(se),We=[];for(;Fe+Re<=Ge;){if(Ae+=he,Ae<z||Ae>=F)return null;if(pe=Le,We.push(Le),Le=Y[Ae],Le===void 0){const Et=new o.pointGeometry(N.getx(Ae),N.gety(Ae)),ir=pr(Et,W,fe);if(ir.signedDistanceFromCamera>0)Le=Y[Ae]=ir.point;else{const lr=Ae-he;Le=nr(Fe===0?E:new o.pointGeometry(N.getx(lr),N.gety(lr)),Et,pe,Ge-Fe+1,W,fe)}}Fe+=Re,Re=pe.dist(Le)}const nt=(Ge-Fe)/Re,He=Le.sub(pe),wt=He.mult(nt)._add(pe);wt._add(He._unit()._perp()._mult(p*he));const dt=we+Math.atan2(Le.y-pe.y,Le.x-pe.x);return We.push(wt),{point:wt,angle:J?dt:0,path:We}}const Go=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function tr(b,u){for(let p=0;p<b;p++){const _=u.length;u.resize(_+4),u.float32.set(Go,3*_)}}function vo(b,u,p){const _=u[0],S=u[1];return b[0]=p[0]*_+p[4]*S+p[12],b[1]=p[1]*_+p[5]*S+p[13],b[3]=p[3]*_+p[7]*S+p[15],b}const qn=100;class yl{constructor(u,p=new at(u.width+200,u.height+200,25),_=new at(u.width+200,u.height+200,25)){this.transform=u,this.grid=p,this.ignoredGrid=_,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+qn,this.screenBottomBoundary=u.height+qn,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,p,_,S,E,L){const z=this.projectAndGetPerspectiveRatio(S,u.anchorPointX,u.anchorPointY,L),F=_*z.perspectiveRatio,N=u.x1*F+z.point.x,W=u.y1*F+z.point.y,Y=u.x2*F+z.point.x,J=u.y2*F+z.point.y;return!this.isInsideGrid(N,W,Y,J)||p!=="always"&&this.grid.hitTest(N,W,Y,J,p,E)||z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[N,W,Y,J],offscreen:this.isOffscreen(N,W,Y,J)}}placeCollisionCircles(u,p,_,S,E,L,z,F,N,W,Y,J,fe,se){const he=[],we=new o.pointGeometry(p.anchorX,p.anchorY),Ae=pr(we,L,se),Le=Gn(this.transform.cameraToCenterDistance,Ae.signedDistanceFromCamera),pe=(W?E/Le:E*Le)/o.ONE_EM,Fe=pr(we,z,se).point,Re=Fn(pe,S,p.lineOffsetX*pe,p.lineOffsetY*pe,!1,Fe,we,p,_,z,{},!1,se);let Ge=!1,We=!1,nt=!0;if(Re){const He=.5*J*Le+fe,wt=new o.pointGeometry(-100,-100),dt=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Et=new wr,ir=Re.first,lr=Re.last;let Ut=[];for(let gr=ir.path.length-1;gr>=1;gr--)Ut.push(ir.path[gr]);for(let gr=1;gr<lr.path.length;gr++)Ut.push(lr.path[gr]);const $r=2.5*He;if(F){const gr=Ut.map(Cr=>pr(Cr,F,se));Ut=gr.some(Cr=>Cr.signedDistanceFromCamera<=0)?[]:gr.map(Cr=>Cr.point)}let Nr=[];if(Ut.length>0){const gr=Ut[0].clone(),Cr=Ut[0].clone();for(let jr=1;jr<Ut.length;jr++)gr.x=Math.min(gr.x,Ut[jr].x),gr.y=Math.min(gr.y,Ut[jr].y),Cr.x=Math.max(Cr.x,Ut[jr].x),Cr.y=Math.max(Cr.y,Ut[jr].y);Nr=gr.x>=wt.x&&Cr.x<=dt.x&&gr.y>=wt.y&&Cr.y<=dt.y?[Ut]:Cr.x<wt.x||gr.x>dt.x||Cr.y<wt.y||gr.y>dt.y?[]:o.clipLine([Ut],wt.x,wt.y,dt.x,dt.y)}for(const gr of Nr){Et.reset(gr,.25*He);let Cr=0;Cr=Et.length<=.5*He?1:Math.ceil(Et.paddedLength/$r)+1;for(let jr=0;jr<Cr;jr++){const Xn=jr/Math.max(Cr-1,1),qa=Et.lerp(Xn),Aa=qa.x+qn,Wa=qa.y+qn;he.push(Aa,Wa,He,0);const Jo=Aa-He,ha=Wa-He,ki=Aa+He,_o=Wa+He;if(nt=nt&&this.isOffscreen(Jo,ha,ki,_o),We=We||this.isInsideGrid(Jo,ha,ki,_o),u!=="always"&&this.grid.hitTestCircle(Aa,Wa,He,u,Y)&&(Ge=!0,!N))return{circles:[],offscreen:!1,collisionDetected:Ge}}}}return{circles:!N&&Ge||!We||Le<this.perspectiveRatioCutoff?[]:he,offscreen:nt,collisionDetected:Ge}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let _=1/0,S=1/0,E=-1/0,L=-1/0;for(const W of u){const Y=new o.pointGeometry(W.x+qn,W.y+qn);_=Math.min(_,Y.x),S=Math.min(S,Y.y),E=Math.max(E,Y.x),L=Math.max(L,Y.y),p.push(Y)}const z=this.grid.query(_,S,E,L).concat(this.ignoredGrid.query(_,S,E,L)),F={},N={};for(const W of z){const Y=W.key;if(F[Y.bucketInstanceId]===void 0&&(F[Y.bucketInstanceId]={}),F[Y.bucketInstanceId][Y.featureIndex])continue;const J=[new o.pointGeometry(W.x1,W.y1),new o.pointGeometry(W.x2,W.y1),new o.pointGeometry(W.x2,W.y2),new o.pointGeometry(W.x1,W.y2)];o.polygonIntersectsPolygon(p,J)&&(F[Y.bucketInstanceId][Y.featureIndex]=!0,N[Y.bucketInstanceId]===void 0&&(N[Y.bucketInstanceId]=[]),N[Y.bucketInstanceId].push(Y.featureIndex))}return N}insertCollisionBox(u,p,_,S,E,L){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:E,collisionGroupID:L,overlapMode:p},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,p,_,S,E,L){const z=_?this.ignoredGrid:this.grid,F={bucketInstanceId:S,featureIndex:E,collisionGroupID:L,overlapMode:p};for(let N=0;N<u.length;N+=4)z.insertCircle(F,u[N],u[N+1],u[N+2])}projectAndGetPerspectiveRatio(u,p,_,S){let E;return S?(E=[p,_,S(p,_),1],o.transformMat4(E,E,u)):(E=[p,_,0,1],vo(E,E,u)),{point:new o.pointGeometry((E[0]/E[3]+1)/2*this.transform.width+qn,(-E[1]/E[3]+1)/2*this.transform.height+qn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E[3]*.5}}isOffscreen(u,p,_,S){return _<qn||u>=this.screenRightBoundary||S<qn||p>this.screenBottomBoundary}isInsideGrid(u,p,_,S){return _>=0&&u<this.gridRightBoundary&&S>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const u=o.identity([]);return o.translate(u,u,[-100,-100,0]),u}}function Pn(b,u,p){return u*(o.EXTENT/(b.tileSize*Math.pow(2,p-b.tileID.overscaledZ)))}class yi{constructor(u,p,_,S){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?p:-p))):S&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Hr{constructor(u,p,_,S,E){this.text=new yi(u?u.text:null,p,_,E),this.icon=new yi(u?u.icon:null,p,S,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _l{constructor(u,p,_){this.text=u,this.icon=p,this.skipFade=_}}class Ha{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Ss{constructor(u,p,_,S,E){this.bucketInstanceId=u,this.featureIndex=p,this.sourceLayerIndex=_,this.bucketIndex=S,this.tileID=E}}class Ts{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const p=++this.maxGroupID;this.collisionGroups[u]={ID:p,predicate:_=>_.collisionGroupID===p}}return this.collisionGroups[u]}}function xl(b,u,p,_,S){const{horizontalAlign:E,verticalAlign:L}=o.getAnchorAlignment(b),z=-(E-.5)*u,F=-(L-.5)*p,N=o.evaluateVariableOffset(b,_);return new o.pointGeometry(z+N[0]*S,F+N[1]*S)}function Cs(b,u,p,_,S,E){const{x1:L,x2:z,y1:F,y2:N,anchorPointX:W,anchorPointY:Y}=b,J=new o.pointGeometry(u,p);return _&&J._rotate(S?E:-E),{x1:L+J.x,y1:F+J.y,x2:z+J.x,y2:N+J.y,anchorPointX:W,anchorPointY:Y}}class oe{constructor(u,p,_,S,E){this.transform=u.clone(),this.terrain=p,this.collisionIndex=new yl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new Ts(S),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,p,_,S){const E=_.getBucket(p),L=_.latestFeatureIndex;if(!E||!L||p.id!==E.layerIds[0])return;const z=_.collisionBoxArray,F=E.layers[0].layout,N=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),W=_.tileSize/o.EXTENT,Y=this.transform.calculatePosMatrix(_.tileID.toUnwrapped()),J=F.get("text-pitch-alignment")==="map",fe=F.get("text-rotation-alignment")==="map",se=Pn(_,1,this.transform.zoom),he=Bn(Y,J,fe,this.transform,se);let we=null;if(J){const Le=jn(Y,J,fe,this.transform,se);we=o.multiply([],this.transform.labelPlaneMatrix,Le)}this.retainedQueryData[E.bucketInstanceId]=new Ss(E.bucketInstanceId,L,E.sourceLayerIndex,E.index,_.tileID);const Ae={bucket:E,layout:F,posMatrix:Y,textLabelPlaneMatrix:he,labelToScreenMatrix:we,scale:N,textPixelRatio:W,holdingForFade:_.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(S)for(const Le of E.sortKeyRanges){const{sortKey:pe,symbolInstanceStart:Fe,symbolInstanceEnd:Re}=Le;u.push({sortKey:pe,symbolInstanceStart:Fe,symbolInstanceEnd:Re,parameters:Ae})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Ae})}attemptAnchorPlacement(u,p,_,S,E,L,z,F,N,W,Y,J,fe,se,he,we){const Ae=[J.textOffset0,J.textOffset1],Le=xl(u,_,S,Ae,E),pe=this.collisionIndex.placeCollisionBox(Cs(p,Le.x,Le.y,L,z,this.transform.angle),Y,F,N,W.predicate,we);if((!he||this.collisionIndex.placeCollisionBox(Cs(he,Le.x,Le.y,L,z,this.transform.angle),Y,F,N,W.predicate,we).box.length!==0)&&pe.box.length>0){let Fe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(Fe=this.prevPlacement.variableOffsets[J.crossTileID].anchor),J.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[J.crossTileID]={textOffset:Ae,width:_,height:S,anchor:u,textBoxScale:E,prevAnchor:Fe},this.markUsedJustification(fe,u,J,se),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,se,J),this.placedOrientations[J.crossTileID]=se),{shift:Le,placedGlyphBoxes:pe}}}placeLayerBucketPart(u,p,_){const{bucket:S,layout:E,posMatrix:L,textLabelPlaneMatrix:z,labelToScreenMatrix:F,textPixelRatio:N,holdingForFade:W,collisionBoxArray:Y,partiallyEvaluatedTextSize:J,collisionGroup:fe}=u.parameters,se=E.get("text-optional"),he=E.get("icon-optional"),we=o.getOverlapMode(E,"text-overlap","text-allow-overlap"),Ae=we==="always",Le=o.getOverlapMode(E,"icon-overlap","icon-allow-overlap"),pe=Le==="always",Fe=E.get("text-rotation-alignment")==="map",Re=E.get("text-pitch-alignment")==="map",Ge=E.get("icon-text-fit")!=="none",We=E.get("symbol-z-order")==="viewport-y",nt=Ae&&(pe||!S.hasIconData()||he),He=pe&&(Ae||!S.hasTextData()||se);!S.collisionArrays&&Y&&S.deserializeCollisionBoxes(Y);const wt=(dt,Et)=>{if(p[dt.crossTileID])return;if(W)return void(this.placements[dt.crossTileID]=new _l(!1,!1,!1));let ir=!1,lr=!1,Ut=!0,$r=null,Nr={box:null,offscreen:null},gr={box:null,offscreen:null},Cr=null,jr=null,Xn=null,qa=0,Aa=0,Wa=0;Et.textFeatureIndex?qa=Et.textFeatureIndex:dt.useRuntimeCollisionCircles&&(qa=dt.featureIndex),Et.verticalTextFeatureIndex&&(Aa=Et.verticalTextFeatureIndex);const Jo=this.retainedQueryData[S.bucketInstanceId].tileID,ha=this.terrain?($n,hr)=>this.terrain.getElevation(Jo,$n,hr):null;for(const $n of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const hr=Et[$n];hr&&(hr.elevation=ha?ha(hr.anchorPointX,hr.anchorPointY):0)}const ki=Et.textBox;if(ki){const $n=Rr=>{let Zn=o.WritingMode.horizontal;if(S.allowVerticalPlacement&&!Rr&&this.prevPlacement){const Yn=this.prevPlacement.placedOrientations[dt.crossTileID];Yn&&(this.placedOrientations[dt.crossTileID]=Yn,Zn=Yn,this.markUsedOrientation(S,Zn,dt))}return Zn},hr=(Rr,Zn)=>{if(S.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Et.verticalTextBox){for(const Yn of S.writingModes)if(Yn===o.WritingMode.vertical?(Nr=Zn(),gr=Nr):Nr=Rr(),Nr&&Nr.box&&Nr.box.length)break}else Nr=Rr()};if(E.get("text-variable-anchor")){let Rr=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[dt.crossTileID]){const fn=this.prevPlacement.variableOffsets[dt.crossTileID];Rr.indexOf(fn.anchor)>0&&(Rr=Rr.filter(fa=>fa!==fn.anchor),Rr.unshift(fn.anchor))}const Zn=(fn,fa,Ds)=>{const Nd=fn.x2-fn.x1,kl=fn.y2-fn.y1,cg=dt.textBoxScale,Vd=Ge&&Le==="never"?fa:null;let Qo={box:[],offscreen:!1};const Ls=we!=="never"?2*Rr.length:Rr.length;for(let ks=0;ks<Ls;++ks){const Ah=this.attemptAnchorPlacement(Rr[ks%Rr.length],fn,Nd,kl,cg,Fe,Re,N,L,fe,ks>=Rr.length?we:"never",dt,S,Ds,Vd,ha);if(Ah&&(Qo=Ah.placedGlyphBoxes,Qo&&Qo.box&&Qo.box.length)){ir=!0,$r=Ah.shift;break}}return Qo};hr(()=>Zn(ki,Et.iconBox,o.WritingMode.horizontal),()=>{const fn=Et.verticalTextBox;return S.allowVerticalPlacement&&!(Nr&&Nr.box&&Nr.box.length)&&dt.numVerticalGlyphVertices>0&&fn?Zn(fn,Et.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Nr&&(ir=Nr.box,Ut=Nr.offscreen);const Yn=$n(Nr&&Nr.box);if(!ir&&this.prevPlacement){const fn=this.prevPlacement.variableOffsets[dt.crossTileID];fn&&(this.variableOffsets[dt.crossTileID]=fn,this.markUsedJustification(S,fn.anchor,dt,Yn))}}else{const Rr=(Zn,Yn)=>{const fn=this.collisionIndex.placeCollisionBox(Zn,we,N,L,fe.predicate,ha);return fn&&fn.box&&fn.box.length&&(this.markUsedOrientation(S,Yn,dt),this.placedOrientations[dt.crossTileID]=Yn),fn};hr(()=>Rr(ki,o.WritingMode.horizontal),()=>{const Zn=Et.verticalTextBox;return S.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Zn?Rr(Zn,o.WritingMode.vertical):{box:null,offscreen:null}}),$n(Nr&&Nr.box&&Nr.box.length)}}if(Cr=Nr,ir=Cr&&Cr.box&&Cr.box.length>0,Ut=Cr&&Cr.offscreen,dt.useRuntimeCollisionCircles){const $n=S.text.placedSymbolArray.get(dt.centerJustifiedTextSymbolIndex),hr=o.evaluateSizeForFeature(S.textSizeData,J,$n),Rr=E.get("text-padding");jr=this.collisionIndex.placeCollisionCircles(we,$n,S.lineVertexArray,S.glyphOffsetArray,hr,L,z,F,_,Re,fe.predicate,dt.collisionCircleDiameter,Rr,ha),jr.circles.length&&jr.collisionDetected&&!_&&o.warnOnce("Collisions detected, but collision boxes are not shown"),ir=Ae||jr.circles.length>0&&!jr.collisionDetected,Ut=Ut&&jr.offscreen}if(Et.iconFeatureIndex&&(Wa=Et.iconFeatureIndex),Et.iconBox){const $n=hr=>{const Rr=Ge&&$r?Cs(hr,$r.x,$r.y,Fe,Re,this.transform.angle):hr;return this.collisionIndex.placeCollisionBox(Rr,Le,N,L,fe.predicate,ha)};gr&&gr.box&&gr.box.length&&Et.verticalIconBox?(Xn=$n(Et.verticalIconBox),lr=Xn.box.length>0):(Xn=$n(Et.iconBox),lr=Xn.box.length>0),Ut=Ut&&Xn.offscreen}const _o=se||dt.numHorizontalGlyphVertices===0&&dt.numVerticalGlyphVertices===0,Eh=he||dt.numIconVertices===0;if(_o||Eh?Eh?_o||(lr=lr&&ir):ir=lr&&ir:lr=ir=lr&&ir,ir&&Cr&&Cr.box&&this.collisionIndex.insertCollisionBox(Cr.box,we,E.get("text-ignore-placement"),S.bucketInstanceId,gr&&gr.box&&Aa?Aa:qa,fe.ID),lr&&Xn&&this.collisionIndex.insertCollisionBox(Xn.box,Le,E.get("icon-ignore-placement"),S.bucketInstanceId,Wa,fe.ID),jr&&(ir&&this.collisionIndex.insertCollisionCircles(jr.circles,we,E.get("text-ignore-placement"),S.bucketInstanceId,qa,fe.ID),_)){const $n=S.bucketInstanceId;let hr=this.collisionCircleArrays[$n];hr===void 0&&(hr=this.collisionCircleArrays[$n]=new Ha);for(let Rr=0;Rr<jr.circles.length;Rr+=4)hr.circles.push(jr.circles[Rr+0]),hr.circles.push(jr.circles[Rr+1]),hr.circles.push(jr.circles[Rr+2]),hr.circles.push(jr.collisionDetected?1:0)}if(dt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[dt.crossTileID]=new _l(ir||nt,lr||He,Ut||S.justReloaded),p[dt.crossTileID]=!0};if(We){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const dt=S.getSortedSymbolIndexes(this.transform.angle);for(let Et=dt.length-1;Et>=0;--Et){const ir=dt[Et];wt(S.symbolInstances.get(ir),S.collisionArrays[ir])}}else for(let dt=u.symbolInstanceStart;dt<u.symbolInstanceEnd;dt++)wt(S.symbolInstances.get(dt),S.collisionArrays[dt]);if(_&&S.bucketInstanceId in this.collisionCircleArrays){const dt=this.collisionCircleArrays[S.bucketInstanceId];o.invert(dt.invProjMatrix,L),dt.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(u,p,_,S){let E;E=S===o.WritingMode.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(p)];const L=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const z of L)z>=0&&(u.text.placedSymbolArray.get(z).crossTileID=E>=0&&z!==E?0:_.crossTileID)}markUsedOrientation(u,p,_){const S=p===o.WritingMode.horizontal||p===o.WritingMode.horizontalOnly?p:0,E=p===o.WritingMode.vertical?p:0,L=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const z of L)u.text.placedSymbolArray.get(z).placedOrientation=S;_.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let _=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const S=p?p.symbolFadeChange(u):1,E=p?p.opacities:{},L=p?p.variableOffsets:{},z=p?p.placedOrientations:{};for(const F in this.placements){const N=this.placements[F],W=E[F];W?(this.opacities[F]=new Hr(W,S,N.text,N.icon),_=_||N.text!==W.text.placed||N.icon!==W.icon.placed):(this.opacities[F]=new Hr(null,S,N.text,N.icon,N.skipFade),_=_||N.text||N.icon)}for(const F in E){const N=E[F];if(!this.opacities[F]){const W=new Hr(N,S,!1,!1);W.isHidden()||(this.opacities[F]=W,_=_||N.text.placed||N.icon.placed)}}for(const F in L)this.variableOffsets[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.variableOffsets[F]=L[F]);for(const F in z)this.placedOrientations[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.placedOrientations[F]=z[F]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:u)}updateLayerOpacities(u,p){const _={};for(const S of p){const E=S.getBucket(u);E&&S.latestFeatureIndex&&u.id===E.layerIds[0]&&this.updateBucketOpacities(E,_,S.collisionBoxArray)}}updateBucketOpacities(u,p,_){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const S=u.layers[0].layout,E=new Hr(null,0,!1,!1,!0),L=S.get("text-allow-overlap"),z=S.get("icon-allow-overlap"),F=S.get("text-variable-anchor"),N=S.get("text-rotation-alignment")==="map",W=S.get("text-pitch-alignment")==="map",Y=S.get("icon-text-fit")!=="none",J=new Hr(null,0,L&&(z||!u.hasIconData()||S.get("icon-optional")),z&&(L||!u.hasTextData()||S.get("text-optional")),!0);!u.collisionArrays&&_&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(_);const fe=(se,he,we)=>{for(let Ae=0;Ae<he/4;Ae++)se.opacityVertexArray.emplaceBack(we)};for(let se=0;se<u.symbolInstances.length;se++){const he=u.symbolInstances.get(se),{numHorizontalGlyphVertices:we,numVerticalGlyphVertices:Ae,crossTileID:Le}=he;let pe=this.opacities[Le];p[Le]?pe=E:pe||(pe=J,this.opacities[Le]=pe),p[Le]=!0;const Fe=he.numIconVertices>0,Re=this.placedOrientations[he.crossTileID],Ge=Re===o.WritingMode.vertical,We=Re===o.WritingMode.horizontal||Re===o.WritingMode.horizontalOnly;if(we>0||Ae>0){const nt=Ce(pe.text);fe(u.text,we,Ge?Ue:nt),fe(u.text,Ae,We?Ue:nt);const He=pe.text.isHidden();[he.rightJustifiedTextSymbolIndex,he.centerJustifiedTextSymbolIndex,he.leftJustifiedTextSymbolIndex].forEach(Et=>{Et>=0&&(u.text.placedSymbolArray.get(Et).hidden=He||Ge?1:0)}),he.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(he.verticalPlacedTextSymbolIndex).hidden=He||We?1:0);const wt=this.variableOffsets[he.crossTileID];wt&&this.markUsedJustification(u,wt.anchor,he,Re);const dt=this.placedOrientations[he.crossTileID];dt&&(this.markUsedJustification(u,"left",he,dt),this.markUsedOrientation(u,dt,he))}if(Fe){const nt=Ce(pe.icon),He=!(Y&&he.verticalPlacedIconSymbolIndex&&Ge);he.placedIconSymbolIndex>=0&&(fe(u.icon,he.numIconVertices,He?nt:Ue),u.icon.placedSymbolArray.get(he.placedIconSymbolIndex).hidden=pe.icon.isHidden()),he.verticalPlacedIconSymbolIndex>=0&&(fe(u.icon,he.numVerticalIconVertices,He?Ue:nt),u.icon.placedSymbolArray.get(he.verticalPlacedIconSymbolIndex).hidden=pe.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const nt=u.collisionArrays[se];if(nt){let He=new o.pointGeometry(0,0);if(nt.textBox||nt.verticalTextBox){let dt=!0;if(F){const Et=this.variableOffsets[Le];Et?(He=xl(Et.anchor,Et.width,Et.height,Et.textOffset,Et.textBoxScale),N&&He._rotate(W?this.transform.angle:-this.transform.angle)):dt=!1}nt.textBox&&U(u.textCollisionBox.collisionVertexArray,pe.text.placed,!dt||Ge,He.x,He.y),nt.verticalTextBox&&U(u.textCollisionBox.collisionVertexArray,pe.text.placed,!dt||We,He.x,He.y)}const wt=!!(!We&&nt.verticalIconBox);nt.iconBox&&U(u.iconCollisionBox.collisionVertexArray,pe.icon.placed,wt,Y?He.x:0,Y?He.y:0),nt.verticalIconBox&&U(u.iconCollisionBox.collisionVertexArray,pe.icon.placed,!wt,Y?He.x:0,Y?He.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=se.invProjMatrix,u.placementViewportMatrix=se.viewportMatrix,u.collisionCircleArray=se.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,p){const _=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*_>u}setStale(){this.stale=!0}}function U(b,u,p,_,S){b.emplaceBack(u?1:0,p?1:0,_||0,S||0),b.emplaceBack(u?1:0,p?1:0,_||0,S||0),b.emplaceBack(u?1:0,p?1:0,_||0,S||0),b.emplaceBack(u?1:0,p?1:0,_||0,S||0)}const Z=Math.pow(2,25),re=Math.pow(2,24),ie=Math.pow(2,17),_e=Math.pow(2,16),Te=Math.pow(2,9),be=Math.pow(2,8),xe=Math.pow(2,1);function Ce(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const u=b.placed?1:0,p=Math.floor(127*b.opacity);return p*Z+u*re+p*ie+u*_e+p*Te+u*be+p*xe+u}const Ue=0;class tt{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,p,_,S,E){const L=this._bucketParts;for(;this._currentTileIndex<u.length;)if(p.getBucketParts(L,S,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((z,F)=>z.sortKey-F.sortKey));this._currentPartIndex<L.length;)if(p.placeLayerBucketPart(L[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,E())return!0;return!1}}class Ve{constructor(u,p,_,S,E,L,z,F){this.placement=new oe(u,p,L,z,F),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(u,p,_){const S=o.exported.now(),E=()=>{const L=o.exported.now()-S;return!this._forceFullPlacement&&L>2};for(;this._currentPlacementIndex>=0;){const L=p[u[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=z)&&(!L.maxzoom||L.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new tt(L)),this._inProgressLayer.continuePlacement(_[L.source],this.placement,this._showCollisionBoxes,L,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const Pt=512/o.EXTENT/2;class kt{constructor(u,p,_){this.tileID=u,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(let S=0;S<p.length;S++){const E=p.get(S),L=E.key;this.indexedSymbolInstances[L]||(this.indexedSymbolInstances[L]=[]),this.indexedSymbolInstances[L].push({crossTileID:E.crossTileID,coord:this.getScaledCoordinates(E,u)})}}getScaledCoordinates(u,p){const _=Pt/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*o.EXTENT+u.anchorX)*_),y:Math.floor((p.canonical.y*o.EXTENT+u.anchorY)*_)}}findMatches(u,p,_){const S=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let E=0;E<u.length;E++){const L=u.get(E);if(L.crossTileID)continue;const z=this.indexedSymbolInstances[L.key];if(!z)continue;const F=this.getScaledCoordinates(L,p);for(const N of z)if(Math.abs(N.coord.x-F.x)<=S&&Math.abs(N.coord.y-F.y)<=S&&!_[N.crossTileID]){_[N.crossTileID]=!0,L.crossTileID=N.crossTileID;break}}}}class bt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const p=Math.round((u-this.lng)/360);if(p!==0)for(const _ in this.indexes){const S=this.indexes[_],E={};for(const L in S){const z=S[L];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+p),E[z.tileID.key]=z}this.indexes[_]=E}this.lng=u}addBucket(u,p,_){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let E=0;E<p.symbolInstances.length;E++)p.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const S=this.usedCrossTileIDs[u.overscaledZ];for(const E in this.indexes){const L=this.indexes[E];if(Number(E)>u.overscaledZ)for(const z in L){const F=L[z];F.tileID.isChildOf(u)&&F.findMatches(p.symbolInstances,u,S)}else{const z=L[u.scaledTo(Number(E)).key];z&&z.findMatches(p.symbolInstances,u,S)}}for(let E=0;E<p.symbolInstances.length;E++){const L=p.symbolInstances.get(E);L.crossTileID||(L.crossTileID=_.generate(),S[L.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new kt(u,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(u,p){for(const _ in p.indexedSymbolInstances)for(const S of p.indexedSymbolInstances[_])delete this.usedCrossTileIDs[u][S.crossTileID]}removeStaleBuckets(u){let p=!1;for(const _ in this.indexes){const S=this.indexes[_];for(const E in S)u[S[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,S[E]),delete S[E],p=!0)}return p}}class Zt{constructor(){this.layerIndexes={},this.crossTileIDs=new bt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,p,_){let S=this.layerIndexes[u.id];S===void 0&&(S=this.layerIndexes[u.id]=new Gt);let E=!1;const L={};S.handleWrapJump(_);for(const z of p){const F=z.getBucket(u);F&&u.id===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(z.tileID,F,this.crossTileIDs)&&(E=!0),L[F.bucketInstanceId]=!0)}return S.removeStaleBuckets(L)&&(E=!0),E}pruneUnusedLayers(u){const p={};u.forEach(_=>{p[_]=!0});for(const _ in this.layerIndexes)p[_]||delete this.layerIndexes[_]}}var Sr=o.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Qt extends o.Evented{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=u._cache.max,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const u in this._tiles){const p=this._tiles[u];p.textures.forEach(_=>_.destroy()),p.textures=[]}}update(u,p){this.sourceCache.update(u,p),this._renderableTilesKeys=[];for(const _ of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.posMatrix=new Float64Array(16),o.ortho(_.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),this._tiles[_.key]=new fr(_,this.tileSize))}removeOutdated(u){const p={};this.renderHistory=this.renderHistory.filter((_,S)=>this.renderHistory.indexOf(_)===S).slice(0,this.renderHistorySize);for(const _ of this._renderableTilesKeys)p[_]=!0;for(const _ of this.renderHistory)p[_]=!0;for(const _ in this._tiles)p[_]||(this._tiles[_].clearTextures(u),delete this._tiles[_])}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const p={};for(const _ of this._renderableTilesKeys){const S=this._tiles[_].tileID;if(S.canonical.equals(u.canonical)){const E=u.clone();E.posMatrix=new Float64Array(16),o.ortho(E.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),p[_]=E}else if(S.canonical.isChildOf(u.canonical)){const E=u.clone();E.posMatrix=new Float64Array(16);const L=S.canonical.z-u.canonical.z,z=S.canonical.x-(S.canonical.x>>L<<L),F=S.canonical.y-(S.canonical.y>>L<<L),N=o.EXTENT>>L;o.ortho(E.posMatrix,0,N,0,N,0,1),o.translate(E.posMatrix,E.posMatrix,[-z*N,-F*N,0]),p[_]=E}else if(u.canonical.isChildOf(S.canonical)){const E=u.clone();E.posMatrix=new Float64Array(16);const L=u.canonical.z-S.canonical.z,z=u.canonical.x-(u.canonical.x>>L<<L),F=u.canonical.y-(u.canonical.y>>L<<L),N=o.EXTENT>>L;o.ortho(E.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),o.translate(E.posMatrix,E.posMatrix,[z*N,F*N,0]),o.scale(E.posMatrix,E.posMatrix,[1/2**L,1/2**L,0]),p[_]=E}}return p}getSourceTile(u,p){const _=this.sourceCache._source;let S=u.overscaledZ-this.deltaZoom;if(S>_.maxzoom&&(S=_.maxzoom),S<_.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(S).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!E||!E.dem)&&p)for(;S>=_.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(u.scaledTo(S--).key);return E}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(p=>p.timeLoaded>=u)}}class sr{constructor(u,p,_){this.style=u,this.sourceCache=new Qt(p),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.elevationOffset=typeof _.elevationOffset=="number"?_.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(u,p,_,S=o.EXTENT){if(!(p>=0&&p<S&&_>=0&&_<S))return this.elevationOffset;let E=0;const L=this.getTerrainData(u);if(L.tile&&L.tile.dem){const z=o.transformMat4$1([],[p/S*o.EXTENT,_/S*o.EXTENT],L.u_terrain_matrix),F=[z[0]*L.tile.dem.dim,z[1]*L.tile.dem.dim],N=[Math.floor(F[0]),Math.floor(F[1])],W=L.tile.dem.get(N[0],N[1]),Y=L.tile.dem.get(N[0],N[1]+1),J=L.tile.dem.get(N[0]+1,N[1]),fe=L.tile.dem.get(N[0]+1,N[1]+1);E=o.number(o.number(W,Y,F[0]-N[0]),o.number(J,fe,F[0]-N[0]),F[1]-N[1])}return E}rememberForRerender(u,p){for(const _ in this.sourceCache._tiles){const S=this.sourceCache._tiles[_];(S.tileID.equals(p)||S.tileID.isChildOf(p))&&(u===this.sourceCache.sourceCache.id&&(S.timeLoaded=Date.now()),this._rerender[u]=this._rerender[u]||{},this._rerender[u][S.tileID.key]=!0)}}needsRerender(u,p){return this._rerender[u]&&this._rerender[u][p.key]}clearRerenderCache(){this._rerender={}}getElevation(u,p,_,S=o.EXTENT){return(this.getDEMElevation(u,p,_,S)+this.elevationOffset)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const S=this.style.map.painter.context,E=new o.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new M(S,E,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new M(S,new o.RGBAImage({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.identity([])}const p=this.sourceCache.getSourceTile(u,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const S=this.style.map.painter.context;p.demTexture=this.style.map.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new M(S,p.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),p.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const _=p&&p+p.tileID.key+u.key;if(_&&!this._demMatrixCache[_]){const S=this.sourceCache.sourceCache._source.maxzoom;let E=u.canonical.z-p.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=S?E=u.canonical.z-S:o.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const L=u.canonical.x-(u.canonical.x>>E<<E),z=u.canonical.y-(u.canonical.y>>E<<E),F=o.fromScaling(new Float64Array(16),[1/(o.EXTENT<<E),1/(o.EXTENT<<E),0]);o.translate(F,F,[L*o.EXTENT,z*o.EXTENT,0]),this._demMatrixCache[u.key]={matrix:F,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getRTTFramebuffer(){const u=this.style.map.painter;if(!this._rttFramebuffer){const p=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=u.context.createFramebuffer(p,p,!0),this._rttFramebuffer.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,p))}return this._rttFramebuffer}getFramebuffer(u){const p=this.style.map.painter,_=p.width/devicePixelRatio,S=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new M(p.context,{width:_,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new M(p.context,{width:_,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(_,S,!0),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,_,S))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,L=0;E<this._coordsTextureSize;E++)for(let z=0;z<this._coordsTextureSize;z++,L+=4)p[L+0]=255&z,p[L+1]=255&E,p[L+2]=z>>8<<4|E>>8,p[L+3]=0;const _=new o.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),S=new M(u,_,u.gl.RGBA,{premultiply:!1});return S.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(u){const p=new Uint8Array(4),_=this.style.map.painter,S=_.context,E=S.gl;S.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),E.readPixels(u.x,_.height/devicePixelRatio-u.y-1,1,1,E.RGBA,E.UNSIGNED_BYTE,p),S.bindFramebuffer.set(null);const L=p[0]+(p[2]>>4<<8),z=p[1]+((15&p[2])<<8),F=this.coordsIndex[255-p[3]],N=F&&this.sourceCache.getTileByID(F);if(!N)return null;const W=this._coordsTextureSize,Y=(1<<N.tileID.canonical.z)*W;return new o.MercatorCoordinate((N.tileID.canonical.x*W+L)/Y,(N.tileID.canonical.y*W+z)/Y,this.getElevation(N.tileID,L,z,W))}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.style.map.painter.context,p=new o.PosArray,_=new o.TriangleIndexArray,S=this.meshSize,E=o.EXTENT/S,L=S*S;for(let z=0;z<=S;z++)for(let F=0;F<=S;F++)p.emplaceBack(F*E,z*E);for(let z=0;z<L;z+=S+1)for(let F=0;F<S;F++)_.emplaceBack(F+z,S+F+z+1,S+F+z+2),_.emplaceBack(F+z,S+F+z+2,F+z+1);return this._mesh={indexBuffer:u.createIndexBuffer(_),vertexBuffer:u.createVertexBuffer(p,Sr.members),segments:o.SegmentVector.simpleSegment(0,0,p.length,_.length)},this._mesh}getMinMaxElevation(u){const p=this.getTerrainData(u).tile,_={minElevation:null,maxElevation:null};return p&&p.dem&&(_.minElevation=(p.dem.min+this.elevationOffset)*this.exaggeration,_.maxElevation=(p.dem.max+this.elevationOffset)*this.exaggeration),_}}const Tr=(b,u)=>o.emitValidationErrors(b,u&&u.filter(p=>p.identifier!=="source.canvas")),qr=o.pick(Xe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Wn=o.pick(Xe,["setCenter","setZoom","setBearing","setPitch"]),ln=function(){const b={},u=o.spec.$version;for(const p in o.spec.$root){const _=o.spec.$root[p];if(_.required){let S=null;S=p==="version"?u:_.type==="array"?[]:{},S!=null&&(b[p]=S)}}return b}();class hi extends o.Evented{constructor(u,p={}){super(),this.map=u,this.dispatcher=new ne(Ke(),this),this.imageManager=new I,this.imageManager.setEventedParent(this),this.glyphManager=new H(u._requestManager,p.localIdeographFontFamily),this.lineAtlas=new te(256,512),this.crossTileSymbolIndex=new Zt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const _=this;this._rtlTextPluginCallback=hi.registerForPluginStateChange(S=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},(E,L)=>{if(o.triggerPluginCompletionEvent(E),L&&L.every(z=>z))for(const z in _.sourceCaches)_.sourceCaches[z].reload()})}),this.on("data",S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const E=this.sourceCaches[S.sourceId];if(!E)return;const L=E.getSource();if(L&&L.vectorLayerIds)for(const z in this._layers){const F=this._layers[z];F.source===L.id&&this._validateLayer(F)}})}loadURL(u,p={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const _=typeof p.validate!="boolean"||p.validate,S=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(S,(E,L)=>{this._request=null,E?this.fire(new o.ErrorEvent(E)):L&&this._load(L,_)})}loadJSON(u,p={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(u,p.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(ln,!1)}_load(u,p){if(p&&Tr(this,o.validateStyle(u)))return;this._loaded=!0,this.stylesheet=u;for(const S in u.sources)this.addSource(S,u.sources[S],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);const _=vt(this.stylesheet.layers);this._order=_.map(S=>S.id),this._layers={},this._serializedLayers={};for(let S of _)S=o.createStyleLayer(S),S.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=S,this._serializedLayers[S.id]=S.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new j(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}_loadSprite(u){this._spriteRequest=function(p,_,S,E){let L,z,F;const N=S>1?"@2x":"";let W=o.getJSON(_.transformRequest(_.normalizeSpriteURL(p,N,".json"),o.ResourceType.SpriteJSON),(fe,se)=>{W=null,F||(F=fe,L=se,J())}),Y=o.getImage(_.transformRequest(_.normalizeSpriteURL(p,N,".png"),o.ResourceType.SpriteImage),(fe,se)=>{Y=null,F||(F=fe,z=se,J())});function J(){if(F)E(F);else if(L&&z){const fe=o.exported.getImageData(z),se={};for(const he in L){const{width:we,height:Ae,x:Le,y:pe,sdf:Fe,pixelRatio:Re,stretchX:Ge,stretchY:We,content:nt}=L[he],He=new o.RGBAImage({width:we,height:Ae});o.RGBAImage.copy(fe,He,{x:Le,y:pe},{x:0,y:0},{width:we,height:Ae}),se[he]={data:He,pixelRatio:Re,sdf:Fe,stretchX:Ge,stretchY:We,content:nt}}E(null,se)}}return{cancel(){W&&(W.cancel(),W=null),Y&&(Y.cancel(),Y=null)}}}(u,this.map._requestManager,this.map.getPixelRatio(),(p,_)=>{if(this._spriteRequest=null,p)this.fire(new o.ErrorEvent(p));else if(_)for(const S in _)this.imageManager.addImage(S,_[S]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(u){const p=this.sourceCaches[u.source];if(!p)return;const _=u.sourceLayer;if(!_)return;const S=p.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${S.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const p=[];for(const _ of u){const S=this._layers[_];S.type!=="custom"&&p.push(S.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const p=this._changed;if(this._changed){const S=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(S.length||E.length)&&this._updateWorkerLayers(S,E);for(const L in this._updatedSources){const z=this._updatedSources[L];if(z==="reload")this._reloadSource(L);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(L)}}this._updateTilesForChangedImages();for(const L in this._updatedPaintProps)this._layers[L].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const _={};for(const S in this.sourceCaches){const E=this.sourceCaches[S];_[S]=E.used,E.used=!1}for(const S of this._order){const E=this._layers[S];E.recalculate(u,this._availableImages),!E.isHidden(u.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const S in _){const E=this.sourceCaches[S];_[S]!==E.used&&E.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(u),this.z=u.zoom,p&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(u){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),u){const p=this.sourceCaches[u.source];if(!p)throw new Error(`cannot load terrain, because there exists no source with ID: ${u.source}`);this.terrain=new sr(this,p,u),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=_=>{_.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=_=>{_.tile&&(_.sourceId===u.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(_.sourceId,_.tile.tileID)):_.source.type==="geojson"&&this.terrain.rememberForRerender(_.sourceId,_.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new o.Event("terrain",{terrain:u}))}setState(u){if(this._checkLoaded(),Tr(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=vt(u.layers);const p=function(S,E){if(!S)return[{command:Xe.setStyle,args:[E]}];let L=[];try{if(!g(S.version,E.version))return[{command:Xe.setStyle,args:[E]}];g(S.center,E.center)||L.push({command:Xe.setCenter,args:[E.center]}),g(S.zoom,E.zoom)||L.push({command:Xe.setZoom,args:[E.zoom]}),g(S.bearing,E.bearing)||L.push({command:Xe.setBearing,args:[E.bearing]}),g(S.pitch,E.pitch)||L.push({command:Xe.setPitch,args:[E.pitch]}),g(S.sprite,E.sprite)||L.push({command:Xe.setSprite,args:[E.sprite]}),g(S.glyphs,E.glyphs)||L.push({command:Xe.setGlyphs,args:[E.glyphs]}),g(S.transition,E.transition)||L.push({command:Xe.setTransition,args:[E.transition]}),g(S.light,E.light)||L.push({command:Xe.setLight,args:[E.light]});const z={},F=[];(function(W,Y,J,fe){let se;for(se in Y=Y||{},W=W||{})Object.prototype.hasOwnProperty.call(W,se)&&(Object.prototype.hasOwnProperty.call(Y,se)||it(se,J,fe));for(se in Y)Object.prototype.hasOwnProperty.call(Y,se)&&(Object.prototype.hasOwnProperty.call(W,se)?g(W[se],Y[se])||(W[se].type==="geojson"&&Y[se].type==="geojson"&&zt(W,Y,se)?J.push({command:Xe.setGeoJSONSourceData,args:[se,Y[se].data]}):Nt(se,Y,J,fe)):ut(se,Y,J))})(S.sources,E.sources,F,z);const N=[];S.layers&&S.layers.forEach(W=>{z[W.source]?L.push({command:Xe.removeLayer,args:[W.id]}):N.push(W)}),L=L.concat(F),function(W,Y,J){Y=Y||[];const fe=(W=W||[]).map(Wt),se=Y.map(Wt),he=W.reduce(ar,{}),we=Y.reduce(ar,{}),Ae=fe.slice(),Le=Object.create(null);let pe,Fe,Re,Ge,We,nt,He;for(pe=0,Fe=0;pe<fe.length;pe++)Re=fe[pe],Object.prototype.hasOwnProperty.call(we,Re)?Fe++:(J.push({command:Xe.removeLayer,args:[Re]}),Ae.splice(Ae.indexOf(Re,Fe),1));for(pe=0,Fe=0;pe<se.length;pe++)Re=se[se.length-1-pe],Ae[Ae.length-1-pe]!==Re&&(Object.prototype.hasOwnProperty.call(he,Re)?(J.push({command:Xe.removeLayer,args:[Re]}),Ae.splice(Ae.lastIndexOf(Re,Ae.length-Fe),1)):Fe++,nt=Ae[Ae.length-pe],J.push({command:Xe.addLayer,args:[we[Re],nt]}),Ae.splice(Ae.length-pe,0,Re),Le[Re]=!0);for(pe=0;pe<se.length;pe++)if(Re=se[pe],Ge=he[Re],We=we[Re],!Le[Re]&&!g(Ge,We))if(g(Ge.source,We.source)&&g(Ge["source-layer"],We["source-layer"])&&g(Ge.type,We.type)){for(He in $t(Ge.layout,We.layout,J,Re,null,Xe.setLayoutProperty),$t(Ge.paint,We.paint,J,Re,null,Xe.setPaintProperty),g(Ge.filter,We.filter)||J.push({command:Xe.setFilter,args:[Re,We.filter]}),g(Ge.minzoom,We.minzoom)&&g(Ge.maxzoom,We.maxzoom)||J.push({command:Xe.setLayerZoomRange,args:[Re,We.minzoom,We.maxzoom]}),Ge)Object.prototype.hasOwnProperty.call(Ge,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?$t(Ge[He],We[He],J,Re,He.slice(6),Xe.setPaintProperty):g(Ge[He],We[He])||J.push({command:Xe.setLayerProperty,args:[Re,He,We[He]]}));for(He in We)Object.prototype.hasOwnProperty.call(We,He)&&!Object.prototype.hasOwnProperty.call(Ge,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?$t(Ge[He],We[He],J,Re,He.slice(6),Xe.setPaintProperty):g(Ge[He],We[He])||J.push({command:Xe.setLayerProperty,args:[Re,He,We[He]]}))}else J.push({command:Xe.removeLayer,args:[Re]}),nt=Ae[Ae.lastIndexOf(Re)+1],J.push({command:Xe.addLayer,args:[We,nt]})}(N,E.layers,L)}catch(z){console.warn("Unable to compute style diff:",z),L=[{command:Xe.setStyle,args:[E]}]}return L}(this.serialize(),u).filter(S=>!(S.command in Wn));if(p.length===0)return!1;const _=p.filter(S=>!(S.command in qr));if(_.length>0)throw new Error(`Unimplemented: ${_.map(S=>S.command).join(", ")}.`);return p.forEach(S=>{S.command!=="setTransition"&&this[S.command].apply(this,S.args)}),this.stylesheet=u,!0}addImage(u,p){if(this.getImage(u))return this.fire(new o.ErrorEvent(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,p),this._afterImageUpdated(u)}updateImage(u,p){this.imageManager.updateImage(u,p)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new o.ErrorEvent(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,p,_={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.validateStyle.source,`sources.${u}`,p,null,_))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const S=this.sourceCaches[u]=new et(u,p,this.dispatcher);S.style=this,S.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:S.serialize(),sourceId:u})),S.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===u)return this.fire(new o.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${_}" is using it.`)));const p=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],p.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,p){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const _=this.sourceCaches[u].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(p),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,p,_={}){this._checkLoaded();const S=u.id;if(this.getLayer(S))return void this.fire(new o.ErrorEvent(new Error(`Layer "${S}" already exists on this map.`)));let E;if(u.type==="custom"){if(Tr(this,o.validateCustomStyleLayer(u)))return;E=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(S,u.source),u=o.clone$1(u),u=o.extend(u,{source:S})),this._validate(o.validateStyle.layer,`layers.${S}`,u,{arrayIndex:-1},_))return;E=o.createStyleLayer(u),this._validateLayer(E),E.setEventedParent(this,{layer:{id:S}}),this._serializedLayers[E.id]=E.serialize()}const L=p?this._order.indexOf(p):this._order.length;if(p&&L===-1)this.fire(new o.ErrorEvent(new Error(`Cannot add layer "${S}" before non-existing layer "${p}".`)));else{if(this._order.splice(L,0,S),this._layerOrderChanged=!0,this._layers[S]=E,this._removedLayers[S]&&E.source&&E.type!=="custom"){const z=this._removedLayers[S];delete this._removedLayers[S],z.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(u,p){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===p)return;const _=this._order.indexOf(u);this._order.splice(_,1);const S=p?this._order.indexOf(p):this._order.length;p&&S===-1?this.fire(new o.ErrorEvent(new Error(`Cannot move layer "${u}" before non-existing layer "${p}".`))):(this._order.splice(S,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const p=this._layers[u];if(!p)return void this.fire(new o.ErrorEvent(new Error(`Cannot remove non-existing layer "${u}".`)));p.setEventedParent(null);const _=this._order.indexOf(u);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=p,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],p.onRemove&&p.onRemove(this.map)}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,p,_){this._checkLoaded();const S=this.getLayer(u);S?S.minzoom===p&&S.maxzoom===_||(p!=null&&(S.minzoom=p),_!=null&&(S.maxzoom=_),this._updateLayer(S)):this.fire(new o.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,p,_={}){this._checkLoaded();const S=this.getLayer(u);if(S){if(!g(S.filter,p))return p==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(o.validateStyle.filter,`layers.${S.id}.filter`,p,null,_)||(S.filter=o.clone$1(p),this._updateLayer(S)))}else this.fire(new o.ErrorEvent(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return o.clone$1(this.getLayer(u).filter)}setLayoutProperty(u,p,_,S={}){this._checkLoaded();const E=this.getLayer(u);E?g(E.getLayoutProperty(p),_)||(E.setLayoutProperty(p,_,S),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,p){const _=this.getLayer(u);if(_)return _.getLayoutProperty(p);this.fire(new o.ErrorEvent(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,p,_,S={}){this._checkLoaded();const E=this.getLayer(u);E?g(E.getPaintProperty(p),_)||(E.setPaintProperty(p,_,S)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,p){return this.getLayer(u).getPaintProperty(p)}setFeatureState(u,p){this._checkLoaded();const _=u.source,S=u.sourceLayer,E=this.sourceCaches[_];if(E===void 0)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const L=E.getSource().type;L==="geojson"&&S?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):L!=="vector"||S?(u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(S,u.id,p)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,p){this._checkLoaded();const _=u.source,S=this.sourceCaches[_];if(S===void 0)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const E=S.getSource().type,L=E==="vector"?u.sourceLayer:void 0;E!=="vector"||L?p&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(L,u.id,p):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const p=u.source,_=u.sourceLayer,S=this.sourceCaches[p];if(S!==void 0)return S.getSource().type!=="vector"||_?(u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),S.getFeatureState(_,u.id)):void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,u=>u.serialize()),layers:this._serializeLayers(this._order)},u=>u!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(u){const p=L=>this._layers[L].type==="fill-extrusion",_={},S=[];for(let L=this._order.length-1;L>=0;L--){const z=this._order[L];if(p(z)){_[z]=L;for(const F of u){const N=F[z];if(N)for(const W of N)S.push(W)}}}S.sort((L,z)=>z.intersectionZ-L.intersectionZ);const E=[];for(let L=this._order.length-1;L>=0;L--){const z=this._order[L];if(p(z))for(let F=S.length-1;F>=0;F--){const N=S[F].feature;if(_[N.layer.id]<L)break;E.push(N),S.pop()}else for(const F of u){const N=F[z];if(N)for(const W of N)E.push(W.feature)}}return E}queryRenderedFeatures(u,p,_){p&&p.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",p.filter,null,p);const S={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const L of p.layers){const z=this._layers[L];if(!z)return this.fire(new o.ErrorEvent(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];S[z.source]=!0}}const E=[];p.availableImages=this._availableImages;for(const L in this.sourceCaches)p.layers&&!S[L]||E.push(Ir(this.sourceCaches[L],this._layers,this._serializedLayers,u,p,_));return this.placement&&E.push(function(L,z,F,N,W,Y,J){const fe={},se=Y.queryRenderedSymbols(N),he=[];for(const we of Object.keys(se).map(Number))he.push(J[we]);he.sort(vr);for(const we of he){const Ae=we.featureIndex.lookupSymbolFeatures(se[we.bucketInstanceId],z,we.bucketIndex,we.sourceLayerIndex,W.filter,W.layers,W.availableImages,L);for(const Le in Ae){const pe=fe[Le]=fe[Le]||[],Fe=Ae[Le];Fe.sort((Re,Ge)=>{const We=we.featureSortOrder;if(We){const nt=We.indexOf(Re.featureIndex);return We.indexOf(Ge.featureIndex)-nt}return Ge.featureIndex-Re.featureIndex});for(const Re of Fe)pe.push(Re)}}for(const we in fe)fe[we].forEach(Ae=>{const Le=Ae.feature,pe=F[L[we].source].getFeatureState(Le.layer["source-layer"],Le.id);Le.source=Le.layer.source,Le.layer["source-layer"]&&(Le.sourceLayer=Le.layer["source-layer"]),Le.state=pe});return fe}(this._layers,this._serializedLayers,this.sourceCaches,u,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(u,p){p&&p.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",p.filter,null,p);const _=this.sourceCaches[u];return _?function(S,E){const L=S.getRenderableIds().map(N=>S.getTileByID(N)),z=[],F={};for(let N=0;N<L.length;N++){const W=L[N],Y=W.tileID.canonical.key;F[Y]||(F[Y]=!0,W.querySourceFeatures(z,E))}return z}(_,p):[]}addSourceType(u,p,_){return hi.getSourceType(u)?_(new Error(`A source type called "${u}" already exists.`)):(hi.setSourceType(u,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:p.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(u,p={}){this._checkLoaded();const _=this.light.getLight();let S=!1;for(const L in u)if(!g(u[L],_[L])){S=!0;break}if(!S)return;const E={now:o.exported.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,p),this.light.updateTransitions(E)}_validate(u,p,_,S,E={}){return(!E||E.validate!==!1)&&Tr(this,u.call(o.validateStyle,o.extend({key:p,style:this.serialize(),value:_,styleSpec:o.spec},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const p in this.sourceCaches)this.sourceCaches[p].update(u,this.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,p,_,S,E=!1){let L=!1,z=!1;const F={};for(const N of this._order){const W=this._layers[N];if(W.type!=="symbol")continue;if(!F[W.source]){const J=this.sourceCaches[W.source];F[W.source]=J.getRenderableIds(!0).map(fe=>J.getTileByID(fe)).sort((fe,se)=>se.tileID.overscaledZ-fe.tileID.overscaledZ||(fe.tileID.isLessThan(se.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(W,F[W.source],u.center.lng);L=L||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),u.zoom))&&(this.pauseablePlacement=new Ve(u,this.terrain,this._order,E,p,_,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,F),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),z=!0),L&&this.pauseablePlacement.placement.setStale()),z||L)for(const N of this._order){const W=this._layers[N];W.type==="symbol"&&this.placement.updateLayerOpacities(W,F[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,p,_){this.imageManager.getImages(p.icons,_),this._updateTilesForChangedImages();const S=this.sourceCaches[p.source];S&&S.setDependencies(p.tileID.key,p.type,p.icons)}getGlyphs(u,p,_){this.glyphManager.getGlyphs(p.stacks,_)}getResource(u,p,_){return o.makeRequest(p,_)}}hi.getSourceType=function(b){return Ft[b]},hi.setSourceType=function(b,u){Ft[b]=u},hi.registerForPluginStateChange=o.registerForPluginStateChange;var bl="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const xu={prelude:Wr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Wr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Wr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Wr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Wr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Wr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Wr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Wr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Wr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Wr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Wr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Wr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Wr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Wr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Wr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",bl),terrainDepth:Wr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",bl),terrainCoords:Wr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",bl)};function Wr(b,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=u.match(/attribute ([\w]+) ([\w]+)/g),S=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),L=E?E.concat(S):S,z={};return{fragmentSource:b=b.replace(p,(F,N,W,Y,J)=>(z[J]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${J}
varying ${W} ${Y} ${J};
#else
uniform ${W} ${Y} u_${J};
#endif
`:`
#ifdef HAS_UNIFORM_u_${J}
    ${W} ${Y} ${J} = u_${J};
#endif
`)),vertexSource:u=u.replace(p,(F,N,W,Y,J)=>{const fe=Y==="float"?"vec2":"vec4",se=J.match(/color/)?"color":fe;return z[J]?N==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${W} ${fe} a_${J};
varying ${W} ${Y} ${J};
#else
uniform ${W} ${Y} u_${J};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = a_${J};
#else
    ${W} ${Y} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = unpack_mix_${se}(a_${J}, u_${J}_t);
#else
    ${W} ${Y} ${J} = u_${J};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${W} ${fe} a_${J};
#else
uniform ${W} ${Y} u_${J};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${W} ${Y} ${J} = a_${J};
#else
    ${W} ${Y} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${W} ${Y} ${J} = unpack_mix_${se}(a_${J}, u_${J}_t);
#else
    ${W} ${Y} ${J} = u_${J};
#endif
`}),staticAttributes:_,staticUniforms:L}}class ld{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,p,_,S,E,L,z,F,N){this.context=u;let W=this.boundPaintVertexBuffers.length!==S.length;for(let Y=0;!W&&Y<S.length;Y++)this.boundPaintVertexBuffers[Y]!==S[Y]&&(W=!0);u.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===_&&!W&&this.boundIndexBuffer===E&&this.boundVertexOffset===L&&this.boundDynamicVertexBuffer===z&&this.boundDynamicVertexBuffer2===F&&this.boundDynamicVertexBuffer3===N?(u.bindVertexArrayOES.set(this.vao),z&&z.bind(),E&&E.dynamicDraw&&E.bind(),F&&F.bind(),N&&N.bind()):this.freshBind(p,_,S,E,L,z,F,N)}freshBind(u,p,_,S,E,L,z,F){let N;const W=u.numAttributes,Y=this.context,J=Y.gl;if(Y.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Y.extVertexArrayObject.createVertexArrayOES(),Y.bindVertexArrayOES.set(this.vao),N=0,this.boundProgram=u,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=S,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=L,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=F;else{N=Y.currentNumAttributes||0;for(let fe=W;fe<N;fe++)J.disableVertexAttribArray(fe)}p.enableAttributes(J,u);for(const fe of _)fe.enableAttributes(J,u);L&&L.enableAttributes(J,u),z&&z.enableAttributes(J,u),F&&F.enableAttributes(J,u),p.bind(),p.setVertexAttribPointers(J,u,E);for(const fe of _)fe.bind(),fe.setVertexAttribPointers(J,u,E);L&&(L.bind(),L.setVertexAttribPointers(J,u,E)),S&&S.bind(),z&&(z.bind(),z.setVertexAttribPointers(J,u,E)),F&&(F.bind(),F.setVertexAttribPointers(J,u,E)),Y.currentNumAttributes=W}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ud(b){const u=[];for(let p=0;p<b.length;p++){if(b[p]===null)continue;const _=b[p].split(" ");u.push(_.pop())}return u}class Ev{constructor(u,p,_,S,E,L,z){const F=u.gl;this.program=F.createProgram();const N=ud(_.staticAttributes),W=S?S.getBinderAttributes():[],Y=N.concat(W),J=xu.prelude.staticUniforms?ud(xu.prelude.staticUniforms):[],fe=_.staticUniforms?ud(_.staticUniforms):[],se=S?S.getBinderUniforms():[],he=J.concat(fe).concat(se),we=[];for(const We of he)we.indexOf(We)<0&&we.push(We);const Ae=S?S.defines():[];L&&Ae.push("#define OVERDRAW_INSPECTOR;"),z&&Ae.push("#define TERRAIN3D;");const Le=Ae.concat(xu.prelude.fragmentSource,_.fragmentSource).join(`
`),pe=Ae.concat(xu.prelude.vertexSource,_.vertexSource).join(`
`),Fe=F.createShader(F.FRAGMENT_SHADER);if(F.isContextLost())return void(this.failedToCreate=!0);F.shaderSource(Fe,Le),F.compileShader(Fe),F.attachShader(this.program,Fe);const Re=F.createShader(F.VERTEX_SHADER);if(F.isContextLost())return void(this.failedToCreate=!0);F.shaderSource(Re,pe),F.compileShader(Re),F.attachShader(this.program,Re),this.attributes={};const Ge={};this.numAttributes=Y.length;for(let We=0;We<this.numAttributes;We++)Y[We]&&(F.bindAttribLocation(this.program,We,Y[We]),this.attributes[Y[We]]=We);F.linkProgram(this.program),F.deleteShader(Re),F.deleteShader(Fe);for(let We=0;We<we.length;We++){const nt=we[We];if(nt&&!Ge[nt]){const He=F.getUniformLocation(this.program,nt);He&&(Ge[nt]=He)}}this.fixedUniforms=E(u,Ge),this.terrainUniforms=((We,nt)=>({u_depth:new o.Uniform1i(We,nt.u_depth),u_terrain:new o.Uniform1i(We,nt.u_terrain),u_terrain_dim:new o.Uniform1f(We,nt.u_terrain_dim),u_terrain_matrix:new o.UniformMatrix4f(We,nt.u_terrain_matrix),u_terrain_unpack:new o.Uniform4f(We,nt.u_terrain_unpack),u_terrain_offset:new o.Uniform1f(We,nt.u_terrain_offset),u_terrain_exaggeration:new o.Uniform1f(We,nt.u_terrain_exaggeration)}))(u,Ge),this.binderUniforms=S?S.getUniforms(u,Ge):[]}draw(u,p,_,S,E,L,z,F,N,W,Y,J,fe,se,he,we,Ae,Le){const pe=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(_),u.setStencilMode(S),u.setColorMode(E),u.setCullFace(L),F){u.activeTexture.set(pe.TEXTURE2),pe.bindTexture(pe.TEXTURE_2D,F.depthTexture),u.activeTexture.set(pe.TEXTURE3),pe.bindTexture(pe.TEXTURE_2D,F.texture);for(const Re in this.terrainUniforms)this.terrainUniforms[Re].set(F[Re])}for(const Re in this.fixedUniforms)this.fixedUniforms[Re].set(z[Re]);he&&he.setUniforms(u,this.binderUniforms,fe,{zoom:se});let Fe=0;switch(p){case pe.LINES:Fe=2;break;case pe.TRIANGLES:Fe=3;break;case pe.LINE_STRIP:Fe=1}for(const Re of J.get()){const Ge=Re.vaos||(Re.vaos={});(Ge[N]||(Ge[N]=new ld)).bind(u,this,W,he?he.getPaintVertexBuffers():[],Y,Re.vertexOffset,we,Ae,Le),pe.drawElements(p,Re.primitiveLength*Fe,pe.UNSIGNED_SHORT,Re.primitiveOffset*Fe*2)}}}function Av(b,u,p){const _=1/Pn(p,1,u.transform.tileZoom),S=Math.pow(2,p.tileID.overscaledZ),E=p.tileSize*Math.pow(2,u.transform.tileZoom)/S,L=E*(p.tileID.canonical.x+p.tileID.wrap*S),z=E*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[_,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[L>>16,z>>16],u_pixel_coord_lower:[65535&L,65535&z]}}const cd=(b,u,p,_)=>{const S=u.style.light,E=S.properties.get("position"),L=[E.x,E.y,E.z],z=o.create$1();S.properties.get("anchor")==="viewport"&&o.fromRotation(z,-u.transform.angle),o.transformMat3(L,L,z);const F=S.properties.get("color");return{u_matrix:b,u_lightpos:L,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+p,u_opacity:_}},m1=(b,u,p,_,S,E,L)=>o.extend(cd(b,u,p,_),Av(E,u,L),{u_height_factor:-Math.pow(2,S.overscaledZ)/L.tileSize/8}),sh=b=>({u_matrix:b}),hd=(b,u,p,_)=>o.extend(sh(b),Av(p,u,_)),Mv=(b,u)=>({u_matrix:b,u_world:u}),Iv=(b,u,p,_,S)=>o.extend(hd(b,u,p,_),{u_world:S}),Pv=(b,u,p,_)=>{const S=b.transform;let E,L;if(_.paint.get("circle-pitch-alignment")==="map"){const z=Pn(p,1,S.zoom);E=!0,L=[z,z]}else E=!1,L=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(_.paint.get("circle-pitch-scale")==="map"),u_matrix:b.translatePosMatrix(u.posMatrix,p,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:L}},Es=(b,u,p)=>{const _=Pn(p,1,u.zoom),S=Math.pow(2,u.zoom-p.tileID.overscaledZ),E=p.tileID.overscaleFactor();return{u_matrix:b,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:_,u_extrude_scale:[u.pixelsToGLUnits[0]/(_*S),u.pixelsToGLUnits[1]/(_*S)],u_overscale_factor:E}},bu=(b,u,p=1)=>({u_matrix:b,u_color:u,u_overlay:0,u_overlay_scale:p}),wl=b=>({u_matrix:b}),lh=(b,u,p,_)=>({u_matrix:b,u_extrude_scale:Pn(u,1,p),u_intensity:_});function uh(b,u){const p=Math.pow(2,u.canonical.z),_=u.canonical.y;return[new o.MercatorCoordinate(0,_/p).toLngLat().lat,new o.MercatorCoordinate(0,(_+1)/p).toLngLat().lat]}const Sl=(b,u,p,_)=>{const S=b.transform;return{u_matrix:Su(b,u,p,_),u_ratio:1/Pn(u,1,S.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},fd=(b,u,p,_,S)=>o.extend(Sl(b,u,p,S),{u_image:0,u_image_height:_}),ch=(b,u,p,_,S)=>{const E=b.transform,L=un(u,E);return{u_matrix:Su(b,u,p,S),u_texsize:u.imageAtlasTexture.size,u_ratio:1/Pn(u,1,E.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[L,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},wu=(b,u,p,_,S,E)=>{const L=b.lineAtlas,z=un(u,b.transform),F=p.layout.get("line-cap")==="round",N=L.getDash(_.from,F),W=L.getDash(_.to,F),Y=N.width*S.fromScale,J=W.width*S.toScale;return o.extend(Sl(b,u,p,E),{u_patternscale_a:[z/Y,-N.height/2],u_patternscale_b:[z/J,-W.height/2],u_sdfgamma:L.width/(256*Math.min(Y,J)*b.pixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:W.y,u_mix:S.t})};function un(b,u){return 1/Pn(b,1,u.tileZoom)}function Su(b,u,p,_){return b.translatePosMatrix(_?_.posMatrix:u.tileID.posMatrix,u,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Dv=(b,u,p,_,S)=>{return{u_matrix:b,u_tl_parent:u,u_scale_parent:p,u_buffer_scale:1,u_fade_t:_.mix,u_opacity:_.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(L=S.paint.get("raster-saturation"),L>0?1-1/(1.001-L):-L),u_contrast_factor:(E=S.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Lv(S.paint.get("raster-hue-rotate"))};var E,L};function Lv(b){b*=Math.PI/180;const u=Math.sin(b),p=Math.cos(b);return[(2*p+1)/3,(-Math.sqrt(3)*u-p+1)/3,(Math.sqrt(3)*u-p+1)/3]}const dd=(b,u,p,_,S,E,L,z,F,N)=>{const W=S.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:W.cameraToCenterDistance,u_pitch:W.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:W.width/W.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:L,u_coord_matrix:z,u_is_text:+F,u_pitch_with_map:+_,u_texsize:N,u_texture:0}},hh=(b,u,p,_,S,E,L,z,F,N,W)=>{const Y=S.transform;return o.extend(dd(b,u,p,_,S,E,L,z,F,N),{u_gamma_scale:_?Math.cos(Y._pitch)*Y.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+W})},kv=(b,u,p,_,S,E,L,z,F,N)=>o.extend(hh(b,u,p,_,S,E,L,z,!0,F,!0),{u_texsize_icon:N,u_texture_icon:1}),v1=(b,u,p)=>({u_matrix:b,u_opacity:u,u_color:p}),g1=(b,u,p,_,S,E)=>o.extend(function(L,z,F,N){const W=F.imageManager.getPattern(L.from.toString()),Y=F.imageManager.getPattern(L.to.toString()),{width:J,height:fe}=F.imageManager.getPixelSize(),se=Math.pow(2,N.tileID.overscaledZ),he=N.tileSize*Math.pow(2,F.transform.tileZoom)/se,we=he*(N.tileID.canonical.x+N.tileID.wrap*se),Ae=he*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[J,fe],u_mix:z.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/Pn(N,1,F.transform.tileZoom),u_pixel_coord_upper:[we>>16,Ae>>16],u_pixel_coord_lower:[65535&we,65535&Ae]}}(_,E,p,S),{u_matrix:b,u_opacity:u}),pd={fillExtrusion:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_lightpos:new o.Uniform3f(b,u.u_lightpos),u_lightintensity:new o.Uniform1f(b,u.u_lightintensity),u_lightcolor:new o.Uniform3f(b,u.u_lightcolor),u_vertical_gradient:new o.Uniform1f(b,u.u_vertical_gradient),u_opacity:new o.Uniform1f(b,u.u_opacity)}),fillExtrusionPattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_lightpos:new o.Uniform3f(b,u.u_lightpos),u_lightintensity:new o.Uniform1f(b,u.u_lightintensity),u_lightcolor:new o.Uniform3f(b,u.u_lightcolor),u_vertical_gradient:new o.Uniform1f(b,u.u_vertical_gradient),u_height_factor:new o.Uniform1f(b,u.u_height_factor),u_image:new o.Uniform1i(b,u.u_image),u_texsize:new o.Uniform2f(b,u.u_texsize),u_pixel_coord_upper:new o.Uniform2f(b,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(b,u.u_pixel_coord_lower),u_scale:new o.Uniform3f(b,u.u_scale),u_fade:new o.Uniform1f(b,u.u_fade),u_opacity:new o.Uniform1f(b,u.u_opacity)}),fill:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),fillPattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_image:new o.Uniform1i(b,u.u_image),u_texsize:new o.Uniform2f(b,u.u_texsize),u_pixel_coord_upper:new o.Uniform2f(b,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(b,u.u_pixel_coord_lower),u_scale:new o.Uniform3f(b,u.u_scale),u_fade:new o.Uniform1f(b,u.u_fade)}),fillOutline:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_world:new o.Uniform2f(b,u.u_world)}),fillOutlinePattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_world:new o.Uniform2f(b,u.u_world),u_image:new o.Uniform1i(b,u.u_image),u_texsize:new o.Uniform2f(b,u.u_texsize),u_pixel_coord_upper:new o.Uniform2f(b,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(b,u.u_pixel_coord_lower),u_scale:new o.Uniform3f(b,u.u_scale),u_fade:new o.Uniform1f(b,u.u_fade)}),circle:(b,u)=>({u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(b,u.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(b,u.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(b,u.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),collisionBox:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(b,u.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(b,u.u_extrude_scale),u_overscale_factor:new o.Uniform1f(b,u.u_overscale_factor)}),collisionCircle:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_inv_matrix:new o.UniformMatrix4f(b,u.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(b,u.u_viewport_size)}),debug:(b,u)=>({u_color:new o.UniformColor(b,u.u_color),u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_overlay:new o.Uniform1i(b,u.u_overlay),u_overlay_scale:new o.Uniform1f(b,u.u_overlay_scale)}),clippingMask:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),heatmap:(b,u)=>({u_extrude_scale:new o.Uniform1f(b,u.u_extrude_scale),u_intensity:new o.Uniform1f(b,u.u_intensity),u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),heatmapTexture:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_world:new o.Uniform2f(b,u.u_world),u_image:new o.Uniform1i(b,u.u_image),u_color_ramp:new o.Uniform1i(b,u.u_color_ramp),u_opacity:new o.Uniform1f(b,u.u_opacity)}),hillshade:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_image:new o.Uniform1i(b,u.u_image),u_latrange:new o.Uniform2f(b,u.u_latrange),u_light:new o.Uniform2f(b,u.u_light),u_shadow:new o.UniformColor(b,u.u_shadow),u_highlight:new o.UniformColor(b,u.u_highlight),u_accent:new o.UniformColor(b,u.u_accent)}),hillshadePrepare:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_image:new o.Uniform1i(b,u.u_image),u_dimension:new o.Uniform2f(b,u.u_dimension),u_zoom:new o.Uniform1f(b,u.u_zoom),u_unpack:new o.Uniform4f(b,u.u_unpack)}),line:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_ratio:new o.Uniform1f(b,u.u_ratio),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(b,u.u_units_to_pixels)}),lineGradient:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_ratio:new o.Uniform1f(b,u.u_ratio),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(b,u.u_units_to_pixels),u_image:new o.Uniform1i(b,u.u_image),u_image_height:new o.Uniform1f(b,u.u_image_height)}),linePattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_texsize:new o.Uniform2f(b,u.u_texsize),u_ratio:new o.Uniform1f(b,u.u_ratio),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_image:new o.Uniform1i(b,u.u_image),u_units_to_pixels:new o.Uniform2f(b,u.u_units_to_pixels),u_scale:new o.Uniform3f(b,u.u_scale),u_fade:new o.Uniform1f(b,u.u_fade)}),lineSDF:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_ratio:new o.Uniform1f(b,u.u_ratio),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(b,u.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(b,u.u_patternscale_a),u_patternscale_b:new o.Uniform2f(b,u.u_patternscale_b),u_sdfgamma:new o.Uniform1f(b,u.u_sdfgamma),u_image:new o.Uniform1i(b,u.u_image),u_tex_y_a:new o.Uniform1f(b,u.u_tex_y_a),u_tex_y_b:new o.Uniform1f(b,u.u_tex_y_b),u_mix:new o.Uniform1f(b,u.u_mix)}),raster:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_tl_parent:new o.Uniform2f(b,u.u_tl_parent),u_scale_parent:new o.Uniform1f(b,u.u_scale_parent),u_buffer_scale:new o.Uniform1f(b,u.u_buffer_scale),u_fade_t:new o.Uniform1f(b,u.u_fade_t),u_opacity:new o.Uniform1f(b,u.u_opacity),u_image0:new o.Uniform1i(b,u.u_image0),u_image1:new o.Uniform1i(b,u.u_image1),u_brightness_low:new o.Uniform1f(b,u.u_brightness_low),u_brightness_high:new o.Uniform1f(b,u.u_brightness_high),u_saturation_factor:new o.Uniform1f(b,u.u_saturation_factor),u_contrast_factor:new o.Uniform1f(b,u.u_contrast_factor),u_spin_weights:new o.Uniform3f(b,u.u_spin_weights)}),symbolIcon:(b,u)=>({u_is_size_zoom_constant:new o.Uniform1i(b,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(b,u.u_is_size_feature_constant),u_size_t:new o.Uniform1f(b,u.u_size_t),u_size:new o.Uniform1f(b,u.u_size),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_pitch:new o.Uniform1f(b,u.u_pitch),u_rotate_symbol:new o.Uniform1i(b,u.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(b,u.u_aspect_ratio),u_fade_change:new o.Uniform1f(b,u.u_fade_change),u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(b,u.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(b,u.u_coord_matrix),u_is_text:new o.Uniform1i(b,u.u_is_text),u_pitch_with_map:new o.Uniform1i(b,u.u_pitch_with_map),u_texsize:new o.Uniform2f(b,u.u_texsize),u_texture:new o.Uniform1i(b,u.u_texture)}),symbolSDF:(b,u)=>({u_is_size_zoom_constant:new o.Uniform1i(b,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(b,u.u_is_size_feature_constant),u_size_t:new o.Uniform1f(b,u.u_size_t),u_size:new o.Uniform1f(b,u.u_size),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_pitch:new o.Uniform1f(b,u.u_pitch),u_rotate_symbol:new o.Uniform1i(b,u.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(b,u.u_aspect_ratio),u_fade_change:new o.Uniform1f(b,u.u_fade_change),u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(b,u.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(b,u.u_coord_matrix),u_is_text:new o.Uniform1i(b,u.u_is_text),u_pitch_with_map:new o.Uniform1i(b,u.u_pitch_with_map),u_texsize:new o.Uniform2f(b,u.u_texsize),u_texture:new o.Uniform1i(b,u.u_texture),u_gamma_scale:new o.Uniform1f(b,u.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(b,u.u_is_halo)}),symbolTextAndIcon:(b,u)=>({u_is_size_zoom_constant:new o.Uniform1i(b,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(b,u.u_is_size_feature_constant),u_size_t:new o.Uniform1f(b,u.u_size_t),u_size:new o.Uniform1f(b,u.u_size),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_pitch:new o.Uniform1f(b,u.u_pitch),u_rotate_symbol:new o.Uniform1i(b,u.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(b,u.u_aspect_ratio),u_fade_change:new o.Uniform1f(b,u.u_fade_change),u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(b,u.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(b,u.u_coord_matrix),u_is_text:new o.Uniform1i(b,u.u_is_text),u_pitch_with_map:new o.Uniform1i(b,u.u_pitch_with_map),u_texsize:new o.Uniform2f(b,u.u_texsize),u_texsize_icon:new o.Uniform2f(b,u.u_texsize_icon),u_texture:new o.Uniform1i(b,u.u_texture),u_texture_icon:new o.Uniform1i(b,u.u_texture_icon),u_gamma_scale:new o.Uniform1f(b,u.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(b,u.u_is_halo)}),background:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_opacity:new o.Uniform1f(b,u.u_opacity),u_color:new o.UniformColor(b,u.u_color)}),backgroundPattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_opacity:new o.Uniform1f(b,u.u_opacity),u_image:new o.Uniform1i(b,u.u_image),u_pattern_tl_a:new o.Uniform2f(b,u.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(b,u.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(b,u.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(b,u.u_pattern_br_b),u_texsize:new o.Uniform2f(b,u.u_texsize),u_mix:new o.Uniform1f(b,u.u_mix),u_pattern_size_a:new o.Uniform2f(b,u.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(b,u.u_pattern_size_b),u_scale_a:new o.Uniform1f(b,u.u_scale_a),u_scale_b:new o.Uniform1f(b,u.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(b,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(b,u.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(b,u.u_tile_units_to_pixels)}),terrain:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_texture:new o.Uniform1i(b,u.u_texture)}),terrainDepth:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),terrainCoords:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_texture:new o.Uniform1i(b,u.u_texture),u_terrain_coords_id:new o.Uniform1f(b,u.u_terrain_coords_id)})};class md{constructor(u,p,_){this.context=u;const S=u.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const vd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class gd{constructor(u,p,_,S){this.length=p.length,this.attributes=_,this.itemSize=p.bytesPerElement,this.dynamicDraw=S,this.context=u;const E=u.gl;this.buffer=E.createBuffer(),u.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,p){for(let _=0;_<this.attributes.length;_++){const S=p.attributes[this.attributes[_].name];S!==void 0&&u.enableVertexAttribArray(S)}}setVertexAttribPointers(u,p,_){for(let S=0;S<this.attributes.length;S++){const E=this.attributes[S],L=p.attributes[E.name];L!==void 0&&u.vertexAttribPointer(L,E.components,u[vd[E.type]],!1,this.itemSize,E.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Lr{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Rv extends Lr{getDefault(){return o.Color.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class y1 extends Lr{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Tu extends Lr{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Cu extends Lr{getDefault(){return[!0,!0,!0,!0]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Ov extends Lr{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Wi extends Lr{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class yd extends Lr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const p=this.current;(u.func!==p.func||u.ref!==p.ref||u.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class fh extends Lr{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class dh extends Lr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=u,this.dirty=!1}}class _d extends Lr{getDefault(){return[0,1]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class xd extends Lr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=u,this.dirty=!1}}class ph extends Lr{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class bd extends Lr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.BLEND):p.disable(p.BLEND),this.current=u,this.dirty=!1}}class wd extends Lr{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class mh extends Lr{getDefault(){return o.Color.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class zv extends Lr{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Bv extends Lr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=u,this.dirty=!1}}class Tl extends Lr{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class _1 extends Lr{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class x1 extends Lr{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class b1 extends Lr{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class w1 extends Lr{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class S1 extends Lr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class T1 extends Lr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Sd extends Lr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class vh extends Lr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Td extends Lr{getDefault(){return null}set(u){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Cd extends Lr{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class Cl extends Lr{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Fv extends Lr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class $v extends Lr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class gh extends Lr{constructor(u,p){super(u),this.context=u,this.parent=p}getDefault(){return null}}class As extends gh{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class Nv extends gh{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class El{constructor(u,p,_,S){this.context=u,this.width=p,this.height=_;const E=u.gl,L=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new As(u,L),S&&(this.depthAttachment=new Nv(u,L)),E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,p=this.colorAttachment.get();if(p&&u.deleteTexture(p),this.depthAttachment){const _=this.depthAttachment.get();_&&u.deleteRenderbuffer(_)}u.deleteFramebuffer(this.framebuffer)}}class tn{constructor(u,p,_){this.blendFunction=u,this.blendColor=p,this.mask=_}}tn.Replace=[1,0],tn.disabled=new tn(tn.Replace,o.Color.transparent,[!1,!1,!1,!1]),tn.unblended=new tn(tn.Replace,o.Color.transparent,[!0,!0,!0,!0]),tn.alphaBlended=new tn([1,771],o.Color.transparent,[!0,!0,!0,!0]);class Vv{constructor(u){this.gl=u,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Rv(this),this.clearDepth=new y1(this),this.clearStencil=new Tu(this),this.colorMask=new Cu(this),this.depthMask=new Ov(this),this.stencilMask=new Wi(this),this.stencilFunc=new yd(this),this.stencilOp=new fh(this),this.stencilTest=new dh(this),this.depthRange=new _d(this),this.depthTest=new xd(this),this.depthFunc=new ph(this),this.blend=new bd(this),this.blendFunc=new wd(this),this.blendColor=new mh(this),this.blendEquation=new zv(this),this.cullFace=new Bv(this),this.cullFaceSide=new Tl(this),this.frontFace=new _1(this),this.program=new x1(this),this.activeTexture=new b1(this),this.viewport=new w1(this),this.bindFramebuffer=new S1(this),this.bindRenderbuffer=new T1(this),this.bindTexture=new Sd(this),this.bindVertexBuffer=new vh(this),this.bindElementBuffer=new Td(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Cd(this),this.pixelStoreUnpack=new Cl(this),this.pixelStoreUnpackPremultiplyAlpha=new Fv(this),this.pixelStoreUnpackFlipY=new $v(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=u.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(u.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,p){return new md(this,u,p)}createVertexBuffer(u,p,_){return new gd(this,u,p,_)}createRenderbuffer(u,p,_){const S=this.gl,E=S.createRenderbuffer();return this.bindRenderbuffer.set(E),S.renderbufferStorage(S.RENDERBUFFER,u,p,_),this.bindRenderbuffer.set(null),E}createFramebuffer(u,p,_){return new El(this,u,p,_)}clear({color:u,depth:p}){const _=this.gl;let S=0;u&&(S|=_.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(S|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),_.clear(S)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){g(u.blendFunction,tn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class mr{constructor(u,p,_){this.func=u,this.mask=p,this.range=_}}mr.ReadOnly=!1,mr.ReadWrite=!0,mr.disabled=new mr(519,mr.ReadOnly,[0,1]);const kr=7680;class Kr{constructor(u,p,_,S,E,L){this.test=u,this.ref=p,this.mask=_,this.fail=S,this.depthFail=E,this.pass=L}}Kr.disabled=new Kr({func:519,mask:0},0,0,kr,kr,kr);class cn{constructor(u,p,_){this.enable=u,this.mode=p,this.frontFace=_}}let Eu;function Al(b,u,p,_,S,E,L){const z=b.context,F=z.gl,N=b.useProgram("collisionBox"),W=[];let Y=0,J=0;for(let pe=0;pe<_.length;pe++){const Fe=_[pe],Re=u.getTile(Fe),Ge=Re.getBucket(p);if(!Ge)continue;let We=Fe.posMatrix;S[0]===0&&S[1]===0||(We=b.translatePosMatrix(Fe.posMatrix,Re,S,E));const nt=L?Ge.textCollisionBox:Ge.iconCollisionBox,He=Ge.collisionCircleArray;if(He.length>0){const wt=o.create(),dt=We;o.mul(wt,Ge.placementInvProjMatrix,b.transform.glCoordMatrix),o.mul(wt,wt,Ge.placementViewportMatrix),W.push({circleArray:He,circleOffset:J,transform:dt,invTransform:wt,coord:Fe}),Y+=He.length/4,J=Y}nt&&N.draw(z,F.LINES,mr.disabled,Kr.disabled,b.colorModeForRenderPass(),cn.disabled,Es(We,b.transform,Re),b.style.terrain&&b.style.terrain.getTerrainData(Fe),p.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,null,b.transform.zoom,null,null,nt.collisionVertexBuffer)}if(!L||!W.length)return;const fe=b.useProgram("collisionCircle"),se=new o.CollisionCircleLayoutArray;se.resize(4*Y),se._trim();let he=0;for(const pe of W)for(let Fe=0;Fe<pe.circleArray.length/4;Fe++){const Re=4*Fe,Ge=pe.circleArray[Re+0],We=pe.circleArray[Re+1],nt=pe.circleArray[Re+2],He=pe.circleArray[Re+3];se.emplace(he++,Ge,We,nt,He,0),se.emplace(he++,Ge,We,nt,He,1),se.emplace(he++,Ge,We,nt,He,2),se.emplace(he++,Ge,We,nt,He,3)}(!Eu||Eu.length<2*Y)&&(Eu=function(pe){const Fe=2*pe,Re=new o.QuadTriangleArray;Re.resize(Fe),Re._trim();for(let Ge=0;Ge<Fe;Ge++){const We=6*Ge;Re.uint16[We+0]=4*Ge+0,Re.uint16[We+1]=4*Ge+1,Re.uint16[We+2]=4*Ge+2,Re.uint16[We+3]=4*Ge+2,Re.uint16[We+4]=4*Ge+3,Re.uint16[We+5]=4*Ge+0}return Re}(Y));const we=z.createIndexBuffer(Eu,!0),Ae=z.createVertexBuffer(se,o.collisionCircleLayout.members,!0);for(const pe of W){const Fe={u_matrix:pe.transform,u_inv_matrix:pe.invTransform,u_camera_to_center_distance:(Le=b.transform).cameraToCenterDistance,u_viewport_size:[Le.width,Le.height]};fe.draw(z,F.TRIANGLES,mr.disabled,Kr.disabled,b.colorModeForRenderPass(),cn.disabled,Fe,b.style.terrain&&b.style.terrain.getTerrainData(pe.coord),p.id,Ae,we,o.SegmentVector.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,b.transform.zoom,null,null,null)}var Le;Ae.destroy(),we.destroy()}cn.disabled=new cn(!1,1029,2305),cn.backCCW=new cn(!0,1029,2305);const C1=o.identity(new Float32Array(16));function E1(b,u,p,_,S,E){const{horizontalAlign:L,verticalAlign:z}=o.getAnchorAlignment(b),F=-(L-.5)*u,N=-(z-.5)*p,W=o.evaluateVariableOffset(b,_);return new o.pointGeometry((F/S+W[0])*E,(N/S+W[1])*E)}function Uv(b,u,p,_,S,E,L,z,F,N,W){const Y=b.text.placedSymbolArray,J=b.text.dynamicLayoutVertexArray,fe=b.icon.dynamicLayoutVertexArray,se={};J.clear();for(let he=0;he<Y.length;he++){const we=Y.get(he),Ae=b.allowVerticalPlacement&&!we.placedOrientation,Le=we.hidden||!we.crossTileID||Ae?null:_[we.crossTileID];if(Le){const pe=new o.pointGeometry(we.anchorX,we.anchorY),Fe=pr(pe,p?L:E,W),Re=Gn(S.cameraToCenterDistance,Fe.signedDistanceFromCamera);let Ge=o.evaluateSizeForFeature(b.textSizeData,F,we)*Re/o.ONE_EM;p&&(Ge*=b.tilePixelRatio/z);const{width:We,height:nt,anchor:He,textOffset:wt,textBoxScale:dt}=Le,Et=E1(He,We,nt,wt,dt,Ge),ir=p?pr(pe.add(Et),E,W).point:Fe.point.add(u?Et.rotate(-S.angle):Et),lr=b.allowVerticalPlacement&&we.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let Ut=0;Ut<we.numGlyphs;Ut++)o.addDynamicAttributes(J,ir,lr);N&&we.associatedIconIndex>=0&&(se[we.associatedIconIndex]={shiftedAnchor:ir,angle:lr})}else tr(we.numGlyphs,J)}if(N){fe.clear();const he=b.icon.placedSymbolArray;for(let we=0;we<he.length;we++){const Ae=he.get(we);if(Ae.hidden)tr(Ae.numGlyphs,fe);else{const Le=se[we];if(Le)for(let pe=0;pe<Ae.numGlyphs;pe++)o.addDynamicAttributes(fe,Le.shiftedAnchor,Le.angle);else tr(Ae.numGlyphs,fe)}}b.icon.dynamicLayoutVertexBuffer.updateData(fe)}b.text.dynamicLayoutVertexBuffer.updateData(J)}function A1(b,u,p){return p.iconsInText&&u?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function yh(b,u,p,_,S,E,L,z,F,N,W,Y){const J=b.context,fe=J.gl,se=b.transform,he=z==="map",we=F==="map",Ae=z!=="viewport"&&p.layout.get("symbol-placement")!=="point",Le=he&&!we&&!Ae,pe=!p.layout.get("symbol-sort-key").isConstant();let Fe=!1;const Re=b.depthModeForSublayer(0,mr.ReadOnly),Ge=p.layout.get("text-variable-anchor"),We=[];for(const nt of _){const He=u.getTile(nt),wt=He.getBucket(p);if(!wt)continue;const dt=S?wt.text:wt.icon;if(!dt||!dt.segments.get().length)continue;const Et=dt.programConfigurations.get(p.id),ir=S||wt.sdfIcons,lr=S?wt.textSizeData:wt.iconSizeData,Ut=we||se.pitch!==0,$r=b.useProgram(A1(ir,S,wt),Et),Nr=o.evaluateSizeForZoom(lr,se.zoom),gr=b.style.terrain&&b.style.terrain.getTerrainData(nt);let Cr,jr,Xn,qa,Aa=[0,0],Wa=null;if(S){if(jr=He.glyphAtlasTexture,Xn=fe.LINEAR,Cr=He.glyphAtlasTexture.size,wt.iconsInText){Aa=He.imageAtlasTexture.size,Wa=He.imageAtlasTexture;const fa=lr.kind==="composite"||lr.kind==="camera";qa=Ut||b.options.rotating||b.options.zooming||fa?fe.LINEAR:fe.NEAREST}}else{const fa=p.layout.get("icon-size").constantOr(0)!==1||wt.iconsNeedLinear;jr=He.imageAtlasTexture,Xn=ir||b.options.rotating||b.options.zooming||fa||Ut?fe.LINEAR:fe.NEAREST,Cr=He.imageAtlasTexture.size}const Jo=Pn(He,1,b.transform.zoom),ha=Bn(nt.posMatrix,we,he,b.transform,Jo),ki=jn(nt.posMatrix,we,he,b.transform,Jo),_o=Ge&&wt.hasTextData(),Eh=p.layout.get("icon-text-fit")!=="none"&&_o&&wt.hasIconData();if(Ae){const fa=b.style.terrain?(Nd,kl)=>b.style.terrain.getElevation(nt,Nd,kl):null,Ds=p.layout.get("text-rotation-alignment")==="map";Yr(wt,nt.posMatrix,b,S,ha,ki,we,N,Ds,fa)}const $n=b.translatePosMatrix(nt.posMatrix,He,E,L),hr=Ae||S&&Ge||Eh?C1:ha,Rr=b.translatePosMatrix(ki,He,E,L,!0),Zn=ir&&p.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Yn;Yn=ir?wt.iconsInText?kv(lr.kind,Nr,Le,we,b,$n,hr,Rr,Cr,Aa):hh(lr.kind,Nr,Le,we,b,$n,hr,Rr,S,Cr,!0):dd(lr.kind,Nr,Le,we,b,$n,hr,Rr,S,Cr);const fn={program:$r,buffers:dt,uniformValues:Yn,atlasTexture:jr,atlasTextureIcon:Wa,atlasInterpolation:Xn,atlasInterpolationIcon:qa,isSDF:ir,hasHalo:Zn};if(pe&&wt.canOverlap){Fe=!0;const fa=dt.segments.get();for(const Ds of fa)We.push({segments:new o.SegmentVector([Ds]),sortKey:Ds.sortKey,state:fn,terrainData:gr})}else We.push({segments:dt.segments,sortKey:0,state:fn,terrainData:gr})}Fe&&We.sort((nt,He)=>nt.sortKey-He.sortKey);for(const nt of We){const He=nt.state;if(J.activeTexture.set(fe.TEXTURE0),He.atlasTexture.bind(He.atlasInterpolation,fe.CLAMP_TO_EDGE),He.atlasTextureIcon&&(J.activeTexture.set(fe.TEXTURE1),He.atlasTextureIcon&&He.atlasTextureIcon.bind(He.atlasInterpolationIcon,fe.CLAMP_TO_EDGE)),He.isSDF){const wt=He.uniformValues;He.hasHalo&&(wt.u_is_halo=1,Au(He.buffers,nt.segments,p,b,He.program,Re,W,Y,wt,nt.terrainData)),wt.u_is_halo=0}Au(He.buffers,nt.segments,p,b,He.program,Re,W,Y,He.uniformValues,nt.terrainData)}}function Au(b,u,p,_,S,E,L,z,F,N){const W=_.context;S.draw(W,W.gl.TRIANGLES,E,L,z,cn.disabled,F,N,p.id,b.layoutVertexBuffer,b.indexBuffer,u,p.paint,_.transform.zoom,b.programConfigurations.get(p.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Mu(b,u,p,_,S,E,L){const z=b.context.gl,F=p.paint.get("fill-pattern"),N=F&&F.constantOr(1),W=p.getCrossfadeParameters();let Y,J,fe,se,he;L?(J=N&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Y=z.LINES):(J=N?"fillPattern":"fill",Y=z.TRIANGLES);for(const we of _){const Ae=u.getTile(we);if(N&&!Ae.patternsLoaded())continue;const Le=Ae.getBucket(p);if(!Le)continue;const pe=Le.programConfigurations.get(p.id),Fe=b.useProgram(J,pe),Re=b.style.terrain&&b.style.terrain.getTerrainData(we);N&&(b.context.activeTexture.set(z.TEXTURE0),Ae.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),pe.updatePaintBuffers(W));const Ge=F.constantOr(null);if(Ge&&Ae.imageAtlas){const He=Ae.imageAtlas,wt=He.patternPositions[Ge.to.toString()],dt=He.patternPositions[Ge.from.toString()];wt&&dt&&pe.setConstantPatternPositions(wt,dt)}const We=Re?we:null,nt=b.translatePosMatrix(We?We.posMatrix:we.posMatrix,Ae,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(L){se=Le.indexBuffer2,he=Le.segments2;const He=[z.drawingBufferWidth,z.drawingBufferHeight];fe=J==="fillOutlinePattern"&&N?Iv(nt,b,W,Ae,He):Mv(nt,He)}else se=Le.indexBuffer,he=Le.segments,fe=N?hd(nt,b,W,Ae):sh(nt);Fe.draw(b.context,Y,S,b.stencilModeForClipping(we),E,cn.disabled,fe,Re,p.id,Le.layoutVertexBuffer,se,he,p.paint,b.transform.zoom,pe)}}function Iu(b,u,p,_,S,E,L){const z=b.context,F=z.gl,N=p.paint.get("fill-extrusion-pattern"),W=N.constantOr(1),Y=p.getCrossfadeParameters(),J=p.paint.get("fill-extrusion-opacity");for(const fe of _){const se=u.getTile(fe),he=se.getBucket(p);if(!he)continue;const we=b.style.terrain&&b.style.terrain.getTerrainData(fe),Ae=he.programConfigurations.get(p.id),Le=b.useProgram(W?"fillExtrusionPattern":"fillExtrusion",Ae);W&&(b.context.activeTexture.set(F.TEXTURE0),se.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Ae.updatePaintBuffers(Y));const pe=N.constantOr(null);if(pe&&se.imageAtlas){const We=se.imageAtlas,nt=We.patternPositions[pe.to.toString()],He=We.patternPositions[pe.from.toString()];nt&&He&&Ae.setConstantPatternPositions(nt,He)}const Fe=b.translatePosMatrix(fe.posMatrix,se,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Re=p.paint.get("fill-extrusion-vertical-gradient"),Ge=W?m1(Fe,b,Re,J,fe,Y,se):cd(Fe,b,Re,J);Le.draw(z,z.gl.TRIANGLES,S,E,L,cn.backCCW,Ge,we,p.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,p.paint,b.transform.zoom,Ae,b.style.terrain&&he.centroidVertexBuffer)}}function Ed(b,u,p,_,S,E,L){const z=b.context,F=z.gl,N=p.fbo;if(!N)return;const W=b.useProgram("hillshade"),Y=b.style.terrain&&b.style.terrain.getTerrainData(u);z.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,N.colorAttachment.get()),W.draw(z,F.TRIANGLES,S,E,L,cn.disabled,((J,fe,se,he)=>{const we=se.paint.get("hillshade-shadow-color"),Ae=se.paint.get("hillshade-highlight-color"),Le=se.paint.get("hillshade-accent-color");let pe=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(pe-=J.transform.angle);const Fe=!J.options.moving;return{u_matrix:he?he.posMatrix:J.transform.calculatePosMatrix(fe.tileID.toUnwrapped(),Fe),u_image:0,u_latrange:uh(0,fe.tileID),u_light:[se.paint.get("hillshade-exaggeration"),pe],u_shadow:we,u_highlight:Ae,u_accent:Le}})(b,p,_,Y?u:null),Y,_.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}function Hv(b,u,p,_,S,E){const L=b.context,z=L.gl,F=u.dem;if(F&&F.data){const N=F.dim,W=F.stride,Y=F.getPixels();if(L.activeTexture.set(z.TEXTURE1),L.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||b.getTileTexture(W),u.demTexture){const fe=u.demTexture;fe.update(Y,{premultiply:!1}),fe.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else u.demTexture=new M(L,Y,z.RGBA,{premultiply:!1}),u.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);L.activeTexture.set(z.TEXTURE0);let J=u.fbo;if(!J){const fe=new M(L,{width:N,height:N,data:null},z.RGBA);fe.bind(z.LINEAR,z.CLAMP_TO_EDGE),J=u.fbo=L.createFramebuffer(N,N,!0),J.colorAttachment.set(fe.texture)}L.bindFramebuffer.set(J.framebuffer),L.viewport.set([0,0,N,N]),b.useProgram("hillshadePrepare").draw(L,z.TRIANGLES,_,S,E,cn.disabled,((fe,se)=>{const he=se.stride,we=o.create();return o.ortho(we,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(we,we,[0,-o.EXTENT,0]),{u_matrix:we,u_image:1,u_dimension:[he,he],u_zoom:fe.overscaledZ,u_unpack:se.getUnpackVector()}})(u.tileID,F),null,p.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function _h(b,u,p,_,S,E){const L=_.paint.get("raster-fade-duration");if(!E&&L>0){const z=o.exported.now(),F=(z-b.timeAdded)/L,N=u?(z-u.timeAdded)/L:-1,W=p.getSource(),Y=S.coveringZoomLevel({tileSize:W.tileSize,roundZoom:W.roundZoom}),J=!u||Math.abs(u.tileID.overscaledZ-Y)>Math.abs(b.tileID.overscaledZ-Y),fe=J&&b.refreshedUponExpiration?1:o.clamp(J?F:1-N,0,1);return b.refreshedUponExpiration&&F>=1&&(b.refreshedUponExpiration=!1),u?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}const xh=new o.Color(1,0,0,1),Ea=new o.Color(0,1,0,1),jv=new o.Color(0,0,1,1),Ad=new o.Color(1,0,1,1),Gv=new o.Color(0,1,1,1);function Ms(b,u,p,_){Ml(b,0,u+p/2,b.transform.width,p,_)}function Pu(b,u,p,_){Ml(b,u-p/2,0,p,b.transform.height,_)}function Ml(b,u,p,_,S,E){const L=b.context,z=L.gl;z.enable(z.SCISSOR_TEST),z.scissor(u*b.pixelRatio,p*b.pixelRatio,_*b.pixelRatio,S*b.pixelRatio),L.clear({color:E}),z.disable(z.SCISSOR_TEST)}function M1(b,u,p){const _=b.context,S=_.gl,E=p.posMatrix,L=b.useProgram("debug"),z=mr.disabled,F=Kr.disabled,N=b.colorModeForRenderPass(),W="$debug",Y=b.style.terrain&&b.style.terrain.getTerrainData(p);_.activeTexture.set(S.TEXTURE0),b.emptyTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE);const J=u.getTileByID(p.key).latestRawTileData,fe=Math.floor((J&&J.byteLength||0)/1024),se=u.getTile(p).tileSize,he=512/Math.min(se,512)*(p.overscaledZ/b.transform.zoom)*.5;let we=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(we+=` => ${p.overscaledZ}`),function(Ae,Le){Ae.initDebugOverlayCanvas();const pe=Ae.debugOverlayCanvas,Fe=Ae.context.gl,Re=Ae.debugOverlayCanvas.getContext("2d");Re.clearRect(0,0,pe.width,pe.height),Re.shadowColor="white",Re.shadowBlur=2,Re.lineWidth=1.5,Re.strokeStyle="white",Re.textBaseline="top",Re.font="bold 36px Open Sans, sans-serif",Re.fillText(Le,5,5),Re.strokeText(Le,5,5),Ae.debugOverlayTexture.update(pe),Ae.debugOverlayTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)}(b,`${we} ${fe}kB`),L.draw(_,S.TRIANGLES,z,F,tn.alphaBlended,cn.disabled,bu(E,o.Color.transparent,he),null,W,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),L.draw(_,S.LINE_STRIP,z,F,N,cn.disabled,bu(E,o.Color.red),Y,W,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function bh(b,u,p){const _=b.context,S=_.gl,E=b.colorModeForRenderPass(),L=new mr(S.LEQUAL,mr.ReadWrite,b.depthRangeFor3D),z=b.useProgram("terrain"),F=u.getTerrainMesh(),N=u.getTerrainData(p.tileID);_.bindFramebuffer.set(null),_.viewport.set([0,0,b.width,b.height]),_.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,u.getRTTFramebuffer().colorAttachment.get());const W=b.transform.calculatePosMatrix(p.tileID.toUnwrapped());z.draw(_,S.TRIANGLES,L,Kr.disabled,E,cn.backCCW,{u_matrix:W,u_texture:0},N,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}function qv(b,u,p,_){const S=b.context,E=p.tileSize*u.qualityFactor;p.textures[_]||(p.textures[_]=b.getTileTexture(E)||new M(S,{width:E,height:E,data:null},S.gl.RGBA),p.textures[_].bind(S.gl.LINEAR,S.gl.CLAMP_TO_EDGE),_===0&&u.sourceCache.renderHistory.unshift(p.tileID.key));const L=u.getRTTFramebuffer();L.colorAttachment.set(p.textures[_].texture),S.bindFramebuffer.set(L.framebuffer),S.viewport.set([0,0,E,E])}class Wv{constructor(u){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=u,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=u.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const u=this.painter.style,p=u.terrain;for(const _ in u.sourceCaches){this._coordsDescendingInv[_]={};const S=u.sourceCaches[_].getVisibleCoordinates();for(const E of S){const L=p.sourceCache.getTerrainCoords(E);for(const z in L)this._coordsDescendingInv[_][z]||(this._coordsDescendingInv[_][z]=[]),this._coordsDescendingInv[_][z].push(L[z])}}for(const _ of u._order){const S=u._layers[_],E=S.source;if(this._renderToTexture[S.type]&&!this._coordsDescendingInvStr[E]){this._coordsDescendingInvStr[E]={};for(const L in this._coordsDescendingInv[E])this._coordsDescendingInvStr[E][L]=this._coordsDescendingInv[E][L].map(z=>z.key).sort().join()}}return this._renderableTiles.forEach(_=>{for(const S in this._coordsDescendingInvStr){const E=this._coordsDescendingInvStr[S][_.tileID.key];E&&E!==_.textureCoords[S]&&_.clearTextures(this.painter),p.needsRerender(S,_.tileID)&&_.clearTextures(this.painter)}this._rerender[_.tileID.key]=!_.textures.length}),p.clearRerenderCache(),p.sourceCache.removeOutdated(this.painter),this}renderLayer(u){const p=u.type,_=this.painter,S=_.style._order,E=_.currentLayer,L=E+1===S.length;if(this._renderToTexture[p]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(S[E]),!L))return!0;if(this._renderToTexture[this._prevType]||p==="hillshade"||this._renderToTexture[p]&&L){this._prevType=p;const z=this._stacks.length-1,F=this._stacks[z]||[];for(const N of this._renderableTiles){if(qv(_,_.style.terrain,N,z),this._rerender[N.tileID.key]){_.context.clear({color:o.Color.transparent});for(let W=0;W<F.length;W++){const Y=_.style._layers[F[W]],J=Y.source?this._coordsDescendingInv[Y.source][N.tileID.key]:[N.tileID];_._renderTileClippingMasks(Y,J),_.renderLayer(_,_.style.sourceCaches[Y.source],Y,J),Y.source&&(N.textureCoords[Y.source]=this._coordsDescendingInvStr[Y.source][N.tileID.key])}}bh(_,_.style.terrain,N)}if(p==="hillshade"){this._stacks.push([S[E]]);for(const N of this._renderableTiles){const W=this._coordsDescendingInv[u.source][N.tileID.key];qv(_,_.style.terrain,N,this._stacks.length-1),_.context.clear({color:o.Color.transparent}),_._renderTileClippingMasks(u,W),_.renderLayer(_,_.style.sourceCaches[u.source],u,W),bh(_,_.style.terrain,N)}return!0}return this._renderToTexture[p]}return!1}}const Du={symbol:function(b,u,p,_,S){if(b.renderPass!=="translucent")return;const E=Kr.disabled,L=b.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(z,F,N,W,Y,J,fe){const se=F.transform,he=Y==="map",we=J==="map";for(const Ae of z){const Le=W.getTile(Ae),pe=Le.getBucket(N);if(!pe||!pe.text||!pe.text.segments.get().length)continue;const Fe=o.evaluateSizeForZoom(pe.textSizeData,se.zoom),Re=Pn(Le,1,F.transform.zoom),Ge=Bn(Ae.posMatrix,we,he,F.transform,Re),We=N.layout.get("icon-text-fit")!=="none"&&pe.hasIconData();if(Fe){const nt=Math.pow(2,se.zoom-Le.tileID.overscaledZ);Uv(pe,he,we,fe,se,Ge,Ae.posMatrix,nt,Fe,We,F.style.terrain?(He,wt)=>F.style.terrain.getElevation(Ae,He,wt):null)}}}(_,b,p,u,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),S),p.paint.get("icon-opacity").constantOr(1)!==0&&yh(b,u,p,_,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),E,L),p.paint.get("text-opacity").constantOr(1)!==0&&yh(b,u,p,_,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),E,L),u.map.showCollisionBoxes&&(Al(b,u,p,_,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),Al(b,u,p,_,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))},circle:function(b,u,p,_){if(b.renderPass!=="translucent")return;const S=p.paint.get("circle-opacity"),E=p.paint.get("circle-stroke-width"),L=p.paint.get("circle-stroke-opacity"),z=!p.layout.get("circle-sort-key").isConstant();if(S.constantOr(1)===0&&(E.constantOr(1)===0||L.constantOr(1)===0))return;const F=b.context,N=F.gl,W=b.depthModeForSublayer(0,mr.ReadOnly),Y=Kr.disabled,J=b.colorModeForRenderPass(),fe=[];for(let se=0;se<_.length;se++){const he=_[se],we=u.getTile(he),Ae=we.getBucket(p);if(!Ae)continue;const Le=Ae.programConfigurations.get(p.id),pe=b.useProgram("circle",Le),Fe=Ae.layoutVertexBuffer,Re=Ae.indexBuffer,Ge=b.style.terrain&&b.style.terrain.getTerrainData(he),We={programConfiguration:Le,program:pe,layoutVertexBuffer:Fe,indexBuffer:Re,uniformValues:Pv(b,he,we,p),terrainData:Ge};if(z){const nt=Ae.segments.get();for(const He of nt)fe.push({segments:new o.SegmentVector([He]),sortKey:He.sortKey,state:We})}else fe.push({segments:Ae.segments,sortKey:0,state:We})}z&&fe.sort((se,he)=>se.sortKey-he.sortKey);for(const se of fe){const{programConfiguration:he,program:we,layoutVertexBuffer:Ae,indexBuffer:Le,uniformValues:pe,terrainData:Fe}=se.state;we.draw(F,N.TRIANGLES,W,Y,J,cn.disabled,pe,Fe,p.id,Ae,Le,se.segments,p.paint,b.transform.zoom,he)}},heatmap:function(b,u,p,_){if(p.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){const S=b.context,E=S.gl,L=Kr.disabled,z=new tn([E.ONE,E.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(F,N,W){const Y=F.gl;F.activeTexture.set(Y.TEXTURE1),F.viewport.set([0,0,N.width/4,N.height/4]);let J=W.heatmapFbo;if(J)Y.bindTexture(Y.TEXTURE_2D,J.colorAttachment.get()),F.bindFramebuffer.set(J.framebuffer);else{const fe=Y.createTexture();Y.bindTexture(Y.TEXTURE_2D,fe),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),J=W.heatmapFbo=F.createFramebuffer(N.width/4,N.height/4,!1),function(se,he,we,Ae){const Le=se.gl;Le.texImage2D(Le.TEXTURE_2D,0,Le.RGBA,he.width/4,he.height/4,0,Le.RGBA,se.extRenderToTextureHalfFloat?se.extTextureHalfFloat.HALF_FLOAT_OES:Le.UNSIGNED_BYTE,null),Ae.colorAttachment.set(we)}(F,N,fe,J)}})(S,b,p),S.clear({color:o.Color.transparent});for(let F=0;F<_.length;F++){const N=_[F];if(u.hasRenderableParent(N))continue;const W=u.getTile(N),Y=W.getBucket(p);if(!Y)continue;const J=Y.programConfigurations.get(p.id),fe=b.useProgram("heatmap",J),{zoom:se}=b.transform;fe.draw(S,E.TRIANGLES,mr.disabled,L,z,cn.disabled,lh(N.posMatrix,W,se,p.paint.get("heatmap-intensity")),null,p.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,p.paint,b.transform.zoom,J)}S.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(S,E){const L=S.context,z=L.gl,F=E.heatmapFbo;if(!F)return;L.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,F.colorAttachment.get()),L.activeTexture.set(z.TEXTURE1);let N=E.colorRampTexture;N||(N=E.colorRampTexture=new M(L,E.colorRamp,z.RGBA)),N.bind(z.LINEAR,z.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(L,z.TRIANGLES,mr.disabled,Kr.disabled,S.colorModeForRenderPass(),cn.disabled,((W,Y,J,fe)=>{const se=o.create();o.ortho(se,0,W.width,W.height,0,0,1);const he=W.context.gl;return{u_matrix:se,u_world:[he.drawingBufferWidth,he.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Y.paint.get("heatmap-opacity")}})(S,E),null,E.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,E.paint,S.transform.zoom)}(b,p))},line:function(b,u,p,_){if(b.renderPass!=="translucent")return;const S=p.paint.get("line-opacity"),E=p.paint.get("line-width");if(S.constantOr(1)===0||E.constantOr(1)===0)return;const L=b.depthModeForSublayer(0,mr.ReadOnly),z=b.colorModeForRenderPass(),F=p.paint.get("line-dasharray"),N=p.paint.get("line-pattern"),W=N.constantOr(1),Y=p.paint.get("line-gradient"),J=p.getCrossfadeParameters(),fe=W?"linePattern":F?"lineSDF":Y?"lineGradient":"line",se=b.context,he=se.gl;let we=!0;for(const Ae of _){const Le=u.getTile(Ae);if(W&&!Le.patternsLoaded())continue;const pe=Le.getBucket(p);if(!pe)continue;const Fe=pe.programConfigurations.get(p.id),Re=b.context.program.get(),Ge=b.useProgram(fe,Fe),We=we||Ge.program!==Re,nt=b.style.terrain&&b.style.terrain.getTerrainData(Ae),He=N.constantOr(null);if(He&&Le.imageAtlas){const Et=Le.imageAtlas,ir=Et.patternPositions[He.to.toString()],lr=Et.patternPositions[He.from.toString()];ir&&lr&&Fe.setConstantPatternPositions(ir,lr)}const wt=nt?Ae:null,dt=W?ch(b,Le,p,J,wt):F?wu(b,Le,p,F,J,wt):Y?fd(b,Le,p,pe.lineClipsArray.length,wt):Sl(b,Le,p,wt);if(W)se.activeTexture.set(he.TEXTURE0),Le.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Fe.updatePaintBuffers(J);else if(F&&(We||b.lineAtlas.dirty))se.activeTexture.set(he.TEXTURE0),b.lineAtlas.bind(se);else if(Y){const Et=pe.gradients[p.id];let ir=Et.texture;if(p.gradientVersion!==Et.version){let lr=256;if(p.stepInterpolant){const Ut=u.getSource().maxzoom,$r=Ae.canonical.z===Ut?Math.ceil(1<<b.transform.maxZoom-Ae.canonical.z):1;lr=o.clamp(o.nextPowerOfTwo(pe.maxLineLength/o.EXTENT*1024*$r),256,se.maxTextureSize)}Et.gradient=o.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:lr,image:Et.gradient||void 0,clips:pe.lineClipsArray}),Et.texture?Et.texture.update(Et.gradient):Et.texture=new M(se,Et.gradient,he.RGBA),Et.version=p.gradientVersion,ir=Et.texture}se.activeTexture.set(he.TEXTURE0),ir.bind(p.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}Ge.draw(se,he.TRIANGLES,L,b.stencilModeForClipping(Ae),z,cn.disabled,dt,nt,p.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,p.paint,b.transform.zoom,Fe,pe.layoutVertexBuffer2),we=!1}},fill:function(b,u,p,_){const S=p.paint.get("fill-color"),E=p.paint.get("fill-opacity");if(E.constantOr(1)===0)return;const L=b.colorModeForRenderPass(),z=p.paint.get("fill-pattern"),F=b.opaquePassEnabledForLayer()&&!z.constantOr(1)&&S.constantOr(o.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===F){const N=b.depthModeForSublayer(1,b.renderPass==="opaque"?mr.ReadWrite:mr.ReadOnly);Mu(b,u,p,_,N,L,!1)}if(b.renderPass==="translucent"&&p.paint.get("fill-antialias")){const N=b.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,mr.ReadOnly);Mu(b,u,p,_,N,L,!0)}},"fill-extrusion":function(b,u,p,_){const S=p.paint.get("fill-extrusion-opacity");if(S!==0&&b.renderPass==="translucent"){const E=new mr(b.context.gl.LEQUAL,mr.ReadWrite,b.depthRangeFor3D);if(S!==1||p.paint.get("fill-extrusion-pattern").constantOr(1))Iu(b,u,p,_,E,Kr.disabled,tn.disabled),Iu(b,u,p,_,E,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const L=b.colorModeForRenderPass();Iu(b,u,p,_,E,Kr.disabled,L)}}},hillshade:function(b,u,p,_){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const S=b.context,E=b.depthModeForSublayer(0,mr.ReadOnly),L=b.colorModeForRenderPass(),[z,F]=b.renderPass==="translucent"?b.stencilConfigForOverlap(_):[{},_];for(const N of F){const W=u.getTile(N);W.needsHillshadePrepare!==void 0&&W.needsHillshadePrepare&&b.renderPass==="offscreen"?Hv(b,W,p,E,Kr.disabled,L):b.renderPass==="translucent"&&Ed(b,N,W,p,E,z[N.overscaledZ],L)}S.viewport.set([0,0,b.width,b.height])},raster:function(b,u,p,_){if(b.renderPass!=="translucent"||p.paint.get("raster-opacity")===0||!_.length)return;const S=b.context,E=S.gl,L=u.getSource(),z=b.useProgram("raster"),F=b.colorModeForRenderPass(),[N,W]=L instanceof Ct?[{},_]:b.stencilConfigForOverlap(_),Y=W[W.length-1].overscaledZ,J=!b.options.moving;for(const fe of W){const se=b.depthModeForSublayer(fe.overscaledZ-Y,p.paint.get("raster-opacity")===1?mr.ReadWrite:mr.ReadOnly,E.LESS),he=u.getTile(fe);he.registerFadeDuration(p.paint.get("raster-fade-duration"));const we=u.findLoadedParent(fe,0),Ae=_h(he,we,u,p,b.transform,b.style.terrain);let Le,pe;const Fe=p.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;S.activeTexture.set(E.TEXTURE0),he.texture.bind(Fe,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),S.activeTexture.set(E.TEXTURE1),we?(we.texture.bind(Fe,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),Le=Math.pow(2,we.tileID.overscaledZ-he.tileID.overscaledZ),pe=[he.tileID.canonical.x*Le%1,he.tileID.canonical.y*Le%1]):he.texture.bind(Fe,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);const Re=b.style.terrain&&b.style.terrain.getTerrainData(fe),Ge=Re?fe:null,We=Ge?Ge.posMatrix:b.transform.calculatePosMatrix(fe.toUnwrapped(),J),nt=Dv(We,pe||[0,0],Le||1,Ae,p);L instanceof Ct?z.draw(S,E.TRIANGLES,se,Kr.disabled,F,cn.disabled,nt,Re,p.id,L.boundsBuffer,b.quadTriangleIndexBuffer,L.boundsSegments):z.draw(S,E.TRIANGLES,se,N[fe.overscaledZ],F,cn.disabled,nt,Re,p.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}},background:function(b,u,p,_){const S=p.paint.get("background-color"),E=p.paint.get("background-opacity");if(E===0)return;const L=b.context,z=L.gl,F=b.transform,N=F.tileSize,W=p.paint.get("background-pattern");if(b.isPatternMissing(W))return;const Y=!W&&S.a===1&&E===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==Y)return;const J=Kr.disabled,fe=b.depthModeForSublayer(0,Y==="opaque"?mr.ReadWrite:mr.ReadOnly),se=b.colorModeForRenderPass(),he=b.useProgram(W?"backgroundPattern":"background"),we=_||F.coveringTiles({tileSize:N,terrain:b.style.terrain});W&&(L.activeTexture.set(z.TEXTURE0),b.imageManager.bind(b.context));const Ae=p.getCrossfadeParameters();for(const Le of we){const pe=_?Le.posMatrix:b.transform.calculatePosMatrix(Le.toUnwrapped()),Fe=W?g1(pe,E,b,W,{tileID:Le,tileSize:N},Ae):v1(pe,E,S),Re=b.style.terrain&&b.style.terrain.getTerrainData(Le);he.draw(L,z.TRIANGLES,fe,J,se,cn.disabled,Fe,Re,p.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}},debug:function(b,u,p){for(let _=0;_<p.length;_++)M1(b,u,p[_])},custom:function(b,u,p){const _=b.context,S=p.implementation;if(b.renderPass==="offscreen"){const E=S.prerender;E&&(b.setCustomLayerDefaults(),_.setColorMode(b.colorModeForRenderPass()),E.call(S,_.gl,b.transform.customLayerMatrix()),_.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),_.setColorMode(b.colorModeForRenderPass()),_.setStencilMode(Kr.disabled);const E=S.renderingMode==="3d"?new mr(b.context.gl.LEQUAL,mr.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,mr.ReadOnly);_.setDepthMode(E),S.render(_.gl,b.transform.customLayerMatrix()),_.setDirty(),b.setBaseState(),_.bindFramebuffer.set(null)}}};class Md{constructor(u,p){this.context=new Vv(u),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.create(),renderTime:0},this.setup(),this.numSublayers=et.maxUnderzooming+et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Zt,this.gpuTimers={}}resize(u,p,_){if(this.width=u*_,this.height=p*_,this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const u=this.context,p=new o.PosArray;p.emplaceBack(0,0),p.emplaceBack(o.EXTENT,0),p.emplaceBack(0,o.EXTENT),p.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(p,Sr.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const _=new o.PosArray;_.emplaceBack(0,0),_.emplaceBack(o.EXTENT,0),_.emplaceBack(0,o.EXTENT),_.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=u.createVertexBuffer(_,Sr.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const S=new o.RasterBoundsArray;S.emplaceBack(0,0,0,0),S.emplaceBack(o.EXTENT,0,o.EXTENT,0),S.emplaceBack(0,o.EXTENT,0,o.EXTENT),S.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=u.createVertexBuffer(S,Qe.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const E=new o.PosArray;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(E,Sr.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const L=new o.LineStripIndexArray;L.emplaceBack(0),L.emplaceBack(1),L.emplaceBack(3),L.emplaceBack(2),L.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(L);const z=new o.TriangleIndexArray;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(z),this.emptyTexture=new M(u,{width:1,height:1,data:new Uint8Array([0,0,0,0])},u.gl.RGBA);const F=this.context.gl;this.stencilClearMode=new Kr({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO)}clearStencil(){const u=this.context,p=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=o.create();o.ortho(_,0,this.width,this.height,0,0,1),o.scale(_,_,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,p.TRIANGLES,mr.disabled,this.stencilClearMode,tn.disabled,cn.disabled,wl(_),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,p){if(this.currentStencilSource===u.source||!u.isTileClipped()||!p||!p.length)return;this.currentStencilSource=u.source;const _=this.context,S=_.gl;this.nextStencilID+p.length>256&&this.clearStencil(),_.setColorMode(tn.disabled),_.setDepthMode(mr.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const L of p){const z=this._tileClippingMaskIDs[L.key]=this.nextStencilID++,F=this.style.terrain&&this.style.terrain.getTerrainData(L);E.draw(_,S.TRIANGLES,mr.disabled,new Kr({func:S.ALWAYS,mask:0},z,255,S.KEEP,S.KEEP,S.REPLACE),tn.disabled,cn.disabled,wl(L.posMatrix),F,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,p=this.context.gl;return new Kr({func:p.NOTEQUAL,mask:255},u,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(u){const p=this.context.gl;return new Kr({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(u){const p=this.context.gl,_=u.sort((L,z)=>z.overscaledZ-L.overscaledZ),S=_[_.length-1].overscaledZ,E=_[0].overscaledZ-S+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const L={};for(let z=0;z<E;z++)L[z+S]=new Kr({func:p.GEQUAL,mask:255},z+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=E,[L,_]}return[{[S]:Kr.disabled},_]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new tn([u.CONSTANT_COLOR,u.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?tn.unblended:tn.alphaBlended}depthModeForSublayer(u,p,_){if(!this.opaquePassEnabledForLayer())return mr.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new mr(_||this.context.gl.LEQUAL,p,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,p){this.style=u,this.options=p,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const _=this.style._order,S=this.style.sourceCaches,E=this.style.terrain&&new Wv(this);for(const N in S){const W=S[N];W.used&&W.prepare(this.context)}const L={},z={},F={};for(const N in S){const W=S[N];L[N]=W.getVisibleCoordinates(),z[N]=L[N].slice().reverse(),F[N]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<_.length;N++)if(this.style._layers[_[N]].is3D()){this.opaquePassCutoff=N;break}if(E){this.opaquePassCutoff=0;const N=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!o.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||N.length)&&(o.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(W,Y){const J=W.context,fe=J.gl,se=tn.unblended,he=new mr(fe.LEQUAL,mr.ReadWrite,[0,1]),we=Y.getTerrainMesh(),Ae=Y.sourceCache.getRenderableTiles(),Le=W.useProgram("terrainDepth");J.bindFramebuffer.set(Y.getFramebuffer("depth").framebuffer),J.viewport.set([0,0,W.width/devicePixelRatio,W.height/devicePixelRatio]),J.clear({color:o.Color.transparent,depth:1});for(const pe of Ae){const Fe=Y.getTerrainData(pe.tileID),Re=W.transform.calculatePosMatrix(pe.tileID.toUnwrapped());Le.draw(J,fe.TRIANGLES,he,Kr.disabled,se,cn.backCCW,{u_matrix:Re},Fe,"terrain",we.vertexBuffer,we.indexBuffer,we.segments)}J.bindFramebuffer.set(null),J.viewport.set([0,0,W.width,W.height])}(this,this.style.terrain),function(W,Y){const J=W.context,fe=J.gl,se=tn.unblended,he=new mr(fe.LEQUAL,mr.ReadWrite,[0,1]),we=Y.getTerrainMesh(),Ae=Y.getCoordsTexture(),Le=Y.sourceCache.getRenderableTiles(),pe=W.useProgram("terrainCoords");J.bindFramebuffer.set(Y.getFramebuffer("coords").framebuffer),J.viewport.set([0,0,W.width/devicePixelRatio,W.height/devicePixelRatio]),J.clear({color:o.Color.transparent,depth:1}),Y.coordsIndex=[];for(const Fe of Le){const Re=Y.getTerrainData(Fe.tileID);J.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,Ae.texture);const Ge=W.transform.calculatePosMatrix(Fe.tileID.toUnwrapped());pe.draw(J,fe.TRIANGLES,he,Kr.disabled,se,cn.backCCW,{u_matrix:Ge,u_terrain_coords_id:(255-Y.coordsIndex.length)/255,u_texture:0},Re,"terrain",we.vertexBuffer,we.indexBuffer,we.segments),Y.coordsIndex.push(Fe.tileID.key)}J.bindFramebuffer.set(null),J.viewport.set([0,0,W.width,W.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const N of _){const W=this.style._layers[N];if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const Y=z[W.source];(W.type==="custom"||Y.length)&&this.renderLayer(this,S[W.source],W,Y)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!E)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const N=this.style._layers[_[this.currentLayer]],W=S[N.source],Y=L[N.source];this._renderTileClippingMasks(N,Y),this.renderLayer(this,W,N,Y)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const N=this.style._layers[_[this.currentLayer]],W=S[N.source];if(E&&E.renderLayer(N))continue;const Y=(N.type==="symbol"?F:z)[N.source];this._renderTileClippingMasks(N,L[N.source]),this.renderLayer(this,W,N,Y)}if(this.options.showTileBoundaries){let N,W;Object.values(this.style._layers).forEach(Y=>{Y.source&&!Y.isHidden(this.transform.zoom)&&(Y.source!==(W&&W.id)&&(W=this.style.sourceCaches[Y.source]),(!N||N.getSource().maxzoom<W.getSource().maxzoom)&&(N=W))}),N&&Du.debug(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){const W=N.transform.padding;Ms(N,N.transform.height-(W.top||0),3,xh),Ms(N,W.bottom||0,3,Ea),Pu(N,W.left||0,3,jv),Pu(N,N.transform.width-(W.right||0),3,Ad);const Y=N.transform.centerPoint;(function(J,fe,se,he){Ml(J,fe-1,se-10,2,20,he),Ml(J,fe-10,se-1,20,2,he)})(N,Y.x,N.transform.height-Y.y,Gv)}(this),this.context.setDefault()}renderLayer(u,p,_,S){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="custom"||(S||[]).length)&&(this.id=_.id,this.gpuTimingStart(_),Du[_.type](u,p,_,S,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const p=this.context.extTimerQuery;let _=this.gpuTimers[u.id];_||(_=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),_.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,_.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}queryGpuTimers(u){const p={};for(const _ in u){const S=u[_],E=this.context.extTimerQuery,L=E.getQueryObjectEXT(S.query,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(S.query),p[_]=L}return p}translatePosMatrix(u,p,_,S,E){if(!_[0]&&!_[1])return u;const L=E?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(L){const N=Math.sin(L),W=Math.cos(L);_=[_[0]*W-_[1]*N,_[0]*N+_[1]*W]}const z=[E?_[0]:Pn(p,_[0],this.transform.zoom),E?_[1]:Pn(p,_[1],this.transform.zoom),0],F=new Float32Array(16);return o.translate(F,u,z),F}saveTileTexture(u){const p=this._tileTextures[u.size[0]];p?p.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const p=this._tileTextures[u];return p&&p.length>0?p.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const p=this.imageManager.getPattern(u.from.toString()),_=this.imageManager.getPattern(u.to.toString());return!p||!_}useProgram(u,p){this.cache=this.cache||{};const _=u+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[_]||(this.cache[_]=new Ev(this.context,u,xu[u],p,pd[u],this._showOverdrawInspector,this.style.terrain)),this.cache[_]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new M(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class wh{constructor(u,p){this.points=u,this.planes=p}static fromInvProjectionMatrix(u,p,_){const S=Math.pow(2,_),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const F=1/(z=o.transformMat4([],z,u))[3]/p*S;return o.mul$1(z,z,[F,F,1/z[3],F])}),L=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const F=o.sub([],E[z[0]],E[z[1]]),N=o.sub([],E[z[2]],E[z[1]]),W=o.normalize([],o.cross([],F,N)),Y=-o.dot(W,E[z[1]]);return W.concat(Y)});return new wh(E,L)}}class Lu{constructor(u,p){this.min=u,this.max=p,this.center=o.scale$1([],o.add([],this.min,this.max),.5)}quadrant(u){const p=[u%2==0,u<2],_=o.clone$2(this.min),S=o.clone$2(this.max);for(let E=0;E<p.length;E++)_[E]=p[E]?this.min[E]:this.center[E],S[E]=p[E]?this.center[E]:this.max[E];return S[2]=this.max[2],new Lu(_,S)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let _=!0;for(let S=0;S<u.planes.length;S++){const E=u.planes[S];let L=0;for(let z=0;z<p.length;z++)o.dot$1(E,p[z])>=0&&L++;if(L===0)return 0;L!==p.length&&(_=!1)}if(_)return 2;for(let S=0;S<3;S++){let E=Number.MAX_VALUE,L=-Number.MAX_VALUE;for(let z=0;z<u.points.length;z++){const F=u.points[z][S]-this.min[S];E=Math.min(E,F),L=Math.max(L,F)}if(L<0||E>this.max[S]-this.min[S])return 0}return 1}}class Il{constructor(u=0,p=0,_=0,S=0){if(isNaN(u)||u<0||isNaN(p)||p<0||isNaN(_)||_<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=p,this.left=_,this.right=S}interpolate(u,p,_){return p.top!=null&&u.top!=null&&(this.top=o.number(u.top,p.top,_)),p.bottom!=null&&u.bottom!=null&&(this.bottom=o.number(u.bottom,p.bottom,_)),p.left!=null&&u.left!=null&&(this.left=o.number(u.left,p.left,_)),p.right!=null&&u.right!=null&&(this.right=o.number(u.right,p.right,_)),this}getCenter(u,p){const _=o.clamp((this.left+u-this.right)/2,0,u),S=o.clamp((this.top+p-this.bottom)/2,0,p);return new o.pointGeometry(_,S)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Il(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ku{constructor(u,p,_,S,E){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=E===void 0||!!E,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=_??0,this._maxPitch=S??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Il,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const u=new ku(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.tileSize=this.tileSize,u.latRange=this.latRange,u.width=this.width,u.height=this.height,u._center=this._center,u._elevation=this._elevation,u.zoom=this.zoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const p=-o.wrap(u,-180,180)*Math.PI/180;var _;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(_=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(S,E,L){var z=E[0],F=E[1],N=E[2],W=E[3],Y=Math.sin(L),J=Math.cos(L);S[0]=z*J+N*Y,S[1]=F*J+W*Y,S[2]=z*-Y+N*J,S[3]=F*-Y+W*J}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const p=o.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const p=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,p,_){this._unmodified=!1,this._edgeInsets.interpolate(u,p,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const p=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(u){const p=[new o.UnwrappedTileID(0,u)];if(this._renderWorldCopies){const _=this.pointCoordinate(new o.pointGeometry(0,0)),S=this.pointCoordinate(new o.pointGeometry(this.width,0)),E=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),L=this.pointCoordinate(new o.pointGeometry(0,this.height)),z=Math.floor(Math.min(_.x,S.x,E.x,L.x)),F=Math.floor(Math.max(_.x,S.x,E.x,L.x)),N=1;for(let W=z-N;W<=F+N;W++)W!==0&&p.push(new o.UnwrappedTileID(W,u))}return p}coveringTiles(u){var p,_;let S=this.coveringZoomLevel(u);const E=S;if(u.minzoom!==void 0&&S<u.minzoom)return[];u.maxzoom!==void 0&&S>u.maxzoom&&(S=u.maxzoom);const L=this.pointCoordinate(this.getCameraPoint()),z=o.MercatorCoordinate.fromLngLat(this.center),F=Math.pow(2,S),N=[F*L.x,F*L.y,0],W=[F*z.x,F*z.y,0],Y=wh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,S);let J=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(J=S);const fe=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,se=pe=>({aabb:new Lu([pe*F,0,0],[(pe+1)*F,F,0]),zoom:0,x:0,y:0,wrap:pe,fullyVisible:!1}),he=[],we=[],Ae=S,Le=u.reparseOverscaled?E:S;if(this._renderWorldCopies)for(let pe=1;pe<=3;pe++)he.push(se(-pe)),he.push(se(pe));for(he.push(se(0));he.length>0;){const pe=he.pop(),Fe=pe.x,Re=pe.y;let Ge=pe.fullyVisible;if(!Ge){const Et=pe.aabb.intersects(Y);if(Et===0)continue;Ge=Et===2}const We=u.terrain?N:W,nt=pe.aabb.distanceX(We),He=pe.aabb.distanceY(We),wt=Math.max(Math.abs(nt),Math.abs(He)),dt=fe+(1<<Ae-pe.zoom)-2;if(pe.zoom===Ae||wt>dt&&pe.zoom>=J){const Et=Ae-pe.zoom,ir=N[0]-.5-(Fe<<Et),lr=N[1]-.5-(Re<<Et);we.push({tileID:new o.OverscaledTileID(pe.zoom===Ae?Le:pe.zoom,pe.wrap,pe.zoom,Fe,Re),distanceSq:o.sqrLen([W[0]-.5-Fe,W[1]-.5-Re]),tileDistanceToCamera:Math.sqrt(ir*ir+lr*lr)})}else for(let Et=0;Et<4;Et++){const ir=(Fe<<1)+Et%2,lr=(Re<<1)+(Et>>1),Ut=pe.zoom+1;let $r=pe.aabb.quadrant(Et);if(u.terrain){const Nr=new o.OverscaledTileID(Ut,pe.wrap,Ut,ir,lr),gr=u.terrain.getMinMaxElevation(Nr),Cr=(p=gr.minElevation)!==null&&p!==void 0?p:this.elevation,jr=(_=gr.maxElevation)!==null&&_!==void 0?_:this.elevation;$r=new Lu([$r.min[0],$r.min[1],Cr],[$r.max[0],$r.max[1],jr])}he.push({aabb:$r,zoom:Ut,x:ir,y:lr,wrap:pe.wrap,fullyVisible:Ge})}}return we.sort((pe,Fe)=>pe.distanceSq-Fe.distanceSq).map(pe=>pe.tileID)}resize(u,p){this.width=u,this.height=p,this.pixelsToGLUnits=[2/u,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const p=o.clamp(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.pointGeometry(o.mercatorXfromLng(u.lng)*this.worldSize,o.mercatorYfromLat(p)*this.worldSize)}unproject(u){return new o.MercatorCoordinate(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(u){this.freezeElevation||(this.elevation=u?this.getElevation(this._center,u):0)}getElevation(u,p){const _=o.MercatorCoordinate.fromLngLat(u),S=(1<<this.tileZoom)*o.EXTENT,E=_.x*S,L=_.y*S,z=Math.floor(E/o.EXTENT),F=Math.floor(L/o.EXTENT),N=new o.OverscaledTileID(this.tileZoom,0,this.tileZoom,z,F);return p.getElevation(N,E%o.EXTENT,L%o.EXTENT,o.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const p=this.pointLocation(this.centerPoint,u),_=this.getElevation(p,u);if(!(this.elevation-_))return;const S=this.getCameraPosition(),E=o.MercatorCoordinate.fromLngLat(S.lngLat,S.altitude),L=o.MercatorCoordinate.fromLngLat(p,_),z=E.x-L.x,F=E.y-L.y,N=E.z-L.z,W=Math.sqrt(z*z+F*F+N*N),Y=this.scaleZoom(this.cameraToCenterDistance/W/this.tileSize);this._elevation=_,this._center=p,this.zoom=Y}setLocationAtPoint(u,p){const _=this.pointCoordinate(p),S=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(u),L=new o.MercatorCoordinate(E.x-(_.x-S.x),E.y-(_.y-S.y));this.center=this.coordinateLocation(L),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,p){return p?this.coordinatePoint(this.locationCoordinate(u),this.getElevation(u,p),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,p){return this.coordinateLocation(this.pointCoordinate(u,p))}locationCoordinate(u){return o.MercatorCoordinate.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,p){if(p){const J=p.pointCoordinate(u);if(J!=null)return J}const _=[u.x,u.y,0,1],S=[u.x,u.y,1,1];o.transformMat4(_,_,this.pixelMatrixInverse),o.transformMat4(S,S,this.pixelMatrixInverse);const E=_[3],L=S[3],z=_[1]/E,F=S[1]/L,N=_[2]/E,W=S[2]/L,Y=N===W?0:(0-N)/(W-N);return new o.MercatorCoordinate(o.number(_[0]/E,S[0]/L,Y)/this.worldSize,o.number(z,F,Y)/this.worldSize)}coordinatePoint(u,p=0,_=this.pixelMatrix){const S=[u.x*this.worldSize,u.y*this.worldSize,p,1];return o.transformMat4(S,S,_),new o.pointGeometry(S[0]/S[3],S[1]/S[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new o.LngLatBounds().extend(this.pointLocation(new o.pointGeometry(0,u))).extend(this.pointLocation(new o.pointGeometry(this.width,u))).extend(this.pointLocation(new o.pointGeometry(this.width,this.height))).extend(this.pointLocation(new o.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(u,p=!1){const _=u.key,S=p?this._alignedPosMatrixCache:this._posMatrixCache;if(S[_])return S[_];const E=u.canonical,L=this.worldSize/this.zoomScale(E.z),z=E.x+Math.pow(2,E.z)*u.wrap,F=o.identity(new Float64Array(16));return o.translate(F,F,[z*L,E.y*L,0]),o.scale(F,F,[L/o.EXTENT,L/o.EXTENT,1]),o.multiply(F,p?this.alignedProjMatrix:this.projMatrix,F),S[_]=new Float32Array(F),S[_]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let u,p,_,S,E=-90,L=90,z=-180,F=180;const N=this.size,W=this._unmodified;if(this.latRange){const fe=this.latRange;E=o.mercatorYfromLat(fe[1])*this.worldSize,L=o.mercatorYfromLat(fe[0])*this.worldSize,u=L-E<N.y?N.y/(L-E):0}if(this.lngRange){const fe=this.lngRange;z=o.wrap(o.mercatorXfromLng(fe[0])*this.worldSize,0,this.worldSize),F=o.wrap(o.mercatorXfromLng(fe[1])*this.worldSize,0,this.worldSize),F<z&&(F+=this.worldSize),p=F-z<N.x?N.x/(F-z):0}const Y=this.point,J=Math.max(p||0,u||0);if(J)return this.center=this.unproject(new o.pointGeometry(p?(F+z)/2:Y.x,u?(L+E)/2:Y.y)),this.zoom+=this.scaleZoom(J),this._unmodified=W,void(this._constraining=!1);if(this.latRange){const fe=Y.y,se=N.y/2;fe-se<E&&(S=E+se),fe+se>L&&(S=L-se)}if(this.lngRange){const fe=(z+F)/2,se=o.wrap(Y.x,fe-this.worldSize/2,fe+this.worldSize/2),he=N.x/2;se-he<z&&(_=z+he),se+he>F&&(_=F-he)}_===void 0&&S===void 0||(this.center=this.unproject(new o.pointGeometry(_!==void 0?_:Y.x,S!==void 0?S:Y.y)).wrap()),this._unmodified=W,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,p=this.point.x,_=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let S=o.identity(new Float64Array(16));o.scale(S,S,[this.width/2,-this.height/2,1]),o.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=o.identity(new Float64Array(16)),o.scale(S,S,[1,-1,1]),o.translate(S,S,[-1,-1,0]),o.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const E=Math.PI/2+this._pitch,L=this._fov*(.5+u.y/this.height),z=Math.sin(L)*this.cameraToSeaLevelDistance/Math.sin(o.clamp(Math.PI-E-L,.01,Math.PI-.01)),F=this.getHorizon(),N=2*Math.atan(F/this.cameraToCenterDistance)*(.5+u.y/(2*F)),W=Math.sin(N)*this.cameraToSeaLevelDistance/Math.sin(o.clamp(Math.PI-E-N,.01,Math.PI-.01)),Y=Math.cos(Math.PI/2-this._pitch)*z+this.cameraToSeaLevelDistance,J=Math.cos(Math.PI/2-this._pitch)*W+this.cameraToSeaLevelDistance,fe=1.01*Math.min(Y,J),se=this.height/50;S=new Float64Array(16),o.perspective(S,this._fov,this.width/this.height,se,fe),S[8]=2*-u.x/this.width,S[9]=2*u.y/this.height,o.scale(S,S,[1,-1,1]),o.translate(S,S,[0,0,-this.cameraToCenterDistance]),o.rotateX(S,S,this._pitch),o.rotateZ(S,S,this.angle),o.translate(S,S,[-p,-_,0]),this.mercatorMatrix=o.scale([],S,[this.worldSize,this.worldSize,this.worldSize]),o.scale(S,S,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,S),o.translate(S,S,[0,0,-this.elevation]),this.projMatrix=S,this.invProjMatrix=o.invert([],S),this.pixelMatrix3D=o.multiply(new Float64Array(16),this.labelPlaneMatrix,S);const he=this.width%2/2,we=this.height%2/2,Ae=Math.cos(this.angle),Le=Math.sin(this.angle),pe=p-Math.round(p)+Ae*he+Le*we,Fe=_-Math.round(_)+Ae*we+Le*he,Re=new Float64Array(S);if(o.translate(Re,Re,[pe>.5?pe-1:pe,Fe>.5?Fe-1:Fe,0]),this.alignedProjMatrix=Re,S=o.invert(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");this.pixelMatrixInverse=S,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new o.pointGeometry(0,0)),p=[u.x*this.worldSize,u.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,u))}getCameraQueryGeometry(u){const p=this.getCameraPoint();if(u.length===1)return[u[0],p];{let _=p.x,S=p.y,E=p.x,L=p.y;for(const z of u)_=Math.min(_,z.x),S=Math.min(S,z.y),E=Math.max(E,z.x),L=Math.max(L,z.y);return[new o.pointGeometry(_,S),new o.pointGeometry(E,S),new o.pointGeometry(E,L),new o.pointGeometry(_,L),new o.pointGeometry(_,S)]}}}class Xv{constructor(u){this._hashName=u&&encodeURIComponent(u),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(p,_){let S=!1,E=null;const L=()=>{E=null,S&&(p(),E=setTimeout(L,300),S=!1)};return()=>(S=!0,E||L(),E)}(this._updateHashUnthrottled.bind(this))}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const p=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,S=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,S),L=Math.round(p.lng*E)/E,z=Math.round(p.lat*E)/E,F=this._map.getBearing(),N=this._map.getPitch();let W="";if(W+=u?`/${L}/${z}/${_}`:`${_}/${z}/${L}`,(F||N)&&(W+="/"+Math.round(10*F)/10),N&&(W+=`/${Math.round(N)}`),this._hashName){const Y=this._hashName;let J=!1;const fe=window.location.hash.slice(1).split("&").map(se=>{const he=se.split("=")[0];return he===Y?(J=!0,`${he}=${W}`):se}).filter(se=>se);return J||fe.push(`${Y}=${W}`),`#${fe.join("&")}`}return`#${W}`}_getCurrentHash(){const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(p=_)}),(p&&p[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}}}const Ru={linearity:.3,easing:o.bezier(0,0,.3,1)},Zv=o.extend({deceleration:2500,maxSpeed:1400},Ru),Yv=o.extend({deceleration:20,maxSpeed:1400},Ru),Kv=o.extend({deceleration:1e3,maxSpeed:360},Ru),Pl=o.extend({deceleration:1e3,maxSpeed:90},Ru);class Jv{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,p=o.exported.now();for(;u.length>0&&p-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)p.zoom+=E.zoomDelta||0,p.bearing+=E.bearingDelta||0,p.pitch+=E.pitchDelta||0,E.panDelta&&p.pan._add(E.panDelta),E.around&&(p.around=E.around),E.pinchAround&&(p.pinchAround=E.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(p.pan.mag()){const E=zu(p.pan.mag(),_,o.extend({},Zv,u||{}));S.offset=p.pan.mult(E.amount/p.pan.mag()),S.center=this._map.transform.center,Ou(S,E)}if(p.zoom){const E=zu(p.zoom,_,Yv);S.zoom=this._map.transform.zoom+E.amount,Ou(S,E)}if(p.bearing){const E=zu(p.bearing,_,Kv);S.bearing=this._map.transform.bearing+o.clamp(E.amount,-179,179),Ou(S,E)}if(p.pitch){const E=zu(p.pitch,_,Pl);S.pitch=this._map.transform.pitch+E.amount,Ou(S,E)}if(S.zoom||S.bearing){const E=p.pinchAround===void 0?p.around:p.pinchAround;S.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),o.extend(S,{noMoveStart:!0})}}function Ou(b,u){(!b.duration||b.duration<u.duration)&&(b.duration=u.duration,b.easing=u.easing)}function zu(b,u,p){const{maxSpeed:_,linearity:S,deceleration:E}=p,L=o.clamp(b*S/(u/1e3),-_,_),z=Math.abs(L)/(E*S);return{easing:p.easing,duration:1e3*z,amount:L*(z/2)}}class Xi extends o.Event{constructor(u,p,_,S={}){const E=y.mousePos(p.getCanvasContainer(),_),L=p.unproject(E);super(u,o.extend({point:E,lngLat:L,originalEvent:_},S)),this._defaultPrevented=!1,this.target=p}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Bu extends o.Event{constructor(u,p,_){const S=u==="touchend"?_.changedTouches:_.touches,E=y.touchPos(p.getCanvasContainer(),S),L=E.map(F=>p.unproject(F)),z=E.reduce((F,N,W,Y)=>F.add(N.div(Y.length)),new o.pointGeometry(0,0));super(u,{points:E,point:z,lngLats:L,lngLat:p.unproject(z),originalEvent:_}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Zi extends o.Event{constructor(u,p,_){super(u,{originalEvent:_}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class I1{constructor(u,p){this._map=u,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new Zi(u.type,this._map,u))}mousedown(u,p){return this._mousedownPos=p,this._firePreventable(new Xi(u.type,this._map,u))}mouseup(u){this._map.fire(new Xi(u.type,this._map,u))}click(u,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Xi(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Xi(u.type,this._map,u))}mouseover(u){this._map.fire(new Xi(u.type,this._map,u))}mouseout(u){this._map.fire(new Xi(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Bu(u.type,this._map,u))}touchmove(u){this._map.fire(new Bu(u.type,this._map,u))}touchend(u){this._map.fire(new Bu(u.type,this._map,u))}touchcancel(u){this._map.fire(new Bu(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qo{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Xi(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Xi(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qv{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,p){this.isEnabled()&&u.shiftKey&&u.button===0&&(y.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(u,p){if(!this._active)return;const _=p;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=_,this._box||(this._box=y.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const E=Math.min(S.x,_.x),L=Math.max(S.x,_.x),z=Math.min(S.y,_.y),F=Math.max(S.y,_.y);y.setTransform(this._box,`translate(${E}px,${z}px)`),this._box.style.width=L-E+"px",this._box.style.height=F-z+"px"}mouseupWindow(u,p){if(!this._active||u.button!==0)return;const _=this._startPos,S=p;if(this.reset(),y.suppressClick(),_.x!==S.x||_.y!==S.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:E=>E.fitScreenCoordinates(_,S,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,p){return this._map.fire(new o.Event(u,{originalEvent:p}))}}function go(b,u){if(b.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${u.length}`);const p={};for(let _=0;_<b.length;_++)p[b[_].identifier]=u[_];return p}class Fu{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,p,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),_.length===this.numTouches&&(this.centroid=function(S){const E=new o.pointGeometry(0,0);for(const L of S)E._add(L);return E.div(S.length)}(p),this.touches=go(_,p)))}touchmove(u,p,_){if(this.aborted||!this.centroid)return;const S=go(_,p);for(const E in this.touches){const L=this.touches[E],z=S[E];(!z||z.dist(L)>30)&&(this.aborted=!0)}}touchend(u,p,_){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Id{constructor(u){this.singleTap=new Fu(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,p,_){this.singleTap.touchstart(u,p,_)}touchmove(u,p,_){this.singleTap.touchmove(u,p,_)}touchend(u,p,_){const S=this.singleTap.touchend(u,p,_);if(S){const E=u.timeStamp-this.lastTime<500,L=!this.lastTap||this.lastTap.dist(S)<30;if(E&&L||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class P1{constructor(){this._zoomIn=new Id({numTouches:1,numTaps:2}),this._zoomOut=new Id({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,p,_){this._zoomIn.touchstart(u,p,_),this._zoomOut.touchstart(u,p,_)}touchmove(u,p,_){this._zoomIn.touchmove(u,p,_),this._zoomOut.touchmove(u,p,_)}touchend(u,p,_){const S=this._zoomIn.touchend(u,p,_),E=this._zoomOut.touchend(u,p,_);return S?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()+1,around:L.unproject(S)},{originalEvent:u})}):E?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()-1,around:L.unproject(E)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const D1={0:1,2:2};class Sh{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(u,p){return!1}_move(u,p){return{}}mousedown(u,p){if(this._lastPoint)return;const _=y.mouseButton(u);this._correctButton(u,_)&&(this._lastPoint=p,this._eventButton=_)}mousemoveWindow(u,p){const _=this._lastPoint;if(_){if(u.preventDefault(),function(S,E){const L=D1[E];return S.buttons===void 0||(S.buttons&L)!==L}(u,this._eventButton))this.reset();else if(this._moved||!(p.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(_,p)}}mouseupWindow(u){this._lastPoint&&y.mouseButton(u)===this._eventButton&&(this._moved&&y.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $u extends Sh{mousedown(u,p){super.mousedown(u,p),this._lastPoint&&(this._active=!0)}_correctButton(u,p){return p===0&&!u.ctrlKey}_move(u,p){return{around:p,panDelta:p.sub(u)}}}class yo extends Sh{_correctButton(u,p){return p===0&&u.ctrlKey||p===2}_move(u,p){const _=.8*(p.x-u.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(u){u.preventDefault()}}class Mt extends Sh{_correctButton(u,p){return p===0&&u.ctrlKey||p===2}_move(u,p){const _=-.5*(p.y-u.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(u){u.preventDefault()}}class eg{constructor(u,p){this._minTouches=u.cooperativeGestures?2:1,this._clickTolerance=u.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(u,p,_){return this._calculateTransform(u,p,_)}touchmove(u,p,_){if(this._map._cooperativeGestures&&(this._minTouches===2&&_.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(u,!1,_.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(_.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,p,_)}touchend(u,p,_){this._calculateTransform(u,p,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,p,_){_.length>0&&(this._active=!0);const S=go(_,p),E=new o.pointGeometry(0,0),L=new o.pointGeometry(0,0);let z=0;for(const N in S){const W=S[N],Y=this._touches[N];Y&&(E._add(W),L._add(W.sub(Y)),z++,S[N]=W)}if(this._touches=S,z<this._minTouches||!L.mag())return;const F=L.div(z);return this._sum._add(F),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(z),panDelta:F}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Is{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(u){}_move(u,p,_){return{}}touchstart(u,p,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([p[0],p[1]]))}touchmove(u,p,_){if(!this._firstTwoTouches)return;u.preventDefault();const[S,E]=this._firstTwoTouches,L=Wo(_,p,S),z=Wo(_,p,E);if(!L||!z)return;const F=this._aroundCenter?null:L.add(z).div(2);return this._move([L,z],F,u)}touchend(u,p,_){if(!this._firstTwoTouches)return;const[S,E]=this._firstTwoTouches,L=Wo(_,p,S),z=Wo(_,p,E);L&&z||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Wo(b,u,p){for(let _=0;_<b.length;_++)if(b[_].identifier===p)return u[_]}function Pd(b,u){return Math.log(b/u)/Math.LN2}class yt extends Is{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,p){const _=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Pd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Pd(this._distance,_),pinchAround:p}}}function Th(b,u){return 180*b.angleWith(u)/Math.PI}class L1 extends Is{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,p){const _=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Th(this._vector,_),pinchAround:p}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const p=25/(Math.PI*this._minDiameter)*360,_=Th(u,this._startVector);return Math.abs(_)<p}}function Dd(b){return Math.abs(b.y)>Math.abs(b.x)}class Ld extends Is{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,p,_){super.touchstart(u,p,_),this._currentTouchCount=_.length}_start(u){this._lastPoints=u,Dd(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,p,_){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const S=u[0].sub(this._lastPoints[0]),E=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,E,_.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(S.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(u,p,_){if(this._valid!==void 0)return this._valid;const S=u.mag()>=2,E=p.mag()>=2;if(!S&&!E)return;if(!S||!E)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const L=u.y>0==p.y>0;return Dd(u)&&Dd(p)&&L}}const tg={panStep:100,bearingStep:15,pitchStep:10};class rg{constructor(){const u=tg;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let p=0,_=0,S=0,E=0,L=0;switch(u.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:u.shiftKey?_=-1:(u.preventDefault(),E=-1);break;case 39:u.shiftKey?_=1:(u.preventDefault(),E=1);break;case 38:u.shiftKey?S=1:(u.preventDefault(),L=-1);break;case 40:u.shiftKey?S=-1:(u.preventDefault(),L=1);break;default:return}return this._rotationDisabled&&(_=0,S=0),{cameraAnimation:z=>{const F=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:k1,zoom:p?Math.round(F)+p*(u.shiftKey?2:1):F,bearing:z.getBearing()+_*this._bearingStep,pitch:z.getPitch()+S*this._pitchStep,offset:[-E*this._panStep,-L*this._panStep],center:z.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function k1(b){return b*(2-b)}const ng=4.000244140625;class kd{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;u.preventDefault()}let p=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const _=o.exported.now(),S=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,p!==0&&p%ng==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(S*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),u.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=u,this._delta-=p,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=y.mousePos(this._el,u);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>ng?this._wheelZoomRate:this._defaultZoomRate;let F=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&F!==0&&(F=1/F);const N=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(N*F))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,_=this._startZoom,S=this._easing;let E,L=!1;if(this._type==="wheel"&&_&&S){const z=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),F=S(z);E=o.number(_,p,F),z<1?this._frameId||(this._frameId=!0):L=!0}else E=p,L=!0;return this._active=!0,L&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!L,zoomDelta:E-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let p=o.ease;if(this._prevEase){const _=this._prevEase,S=(o.exported.now()-_.start)/_.duration,E=_.easing(S+.01)-_.easing(S),L=.27/Math.sqrt(E*E+1e-4)*.01,z=Math.sqrt(.0729-L*L);p=o.bezier(L,z,.25,1)}return this._prevEase={start:o.exported.now(),duration:u,easing:p},p}reset(){this._active=!1}}class Rd{constructor(u,p){this._clickZoom=u,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Od{constructor(){this.reset()}reset(){this._active=!1}dblclick(u,p){return u.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(u.shiftKey?-1:1),around:_.unproject(p)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zd{constructor(){this._tap=new Id({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(u,p,_){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=p[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(u,p,_))}touchmove(u,p,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const S=p[0],E=S.y-this._swipePoint.y;return this._swipePoint=S,u.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(u,p,_)}touchend(u,p,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(u,p,_)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Li{constructor(u,p,_){this._el=u,this._mousePan=p,this._touchPan=_}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Xo{constructor(u,p,_){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=p,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ig{constructor(u,p,_,S){this._el=u,this._touchZoom=p,this._touchRotate=_,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Dl=b=>b.zoom||b.drag||b.pitch||b.rotate;class Bd extends o.Event{}function Nu(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}class ag{constructor(u,p){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jv(u),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),o.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,E,L]of this._listeners)y.addEventListener(S,E,S===document?this.handleWindowEvent:this.handleEvent,L)}destroy(){for(const[u,p,_]of this._listeners)y.removeEventListener(u,p,u===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(u){const p=this._map,_=p.getCanvasContainer();this._add("mapEvent",new I1(p,u));const S=p.boxZoom=new Qv(p,u);this._add("boxZoom",S);const E=new P1,L=new Od;p.doubleClickZoom=new Rd(L,E),this._add("tapZoom",E),this._add("clickZoom",L);const z=new zd;this._add("tapDragZoom",z);const F=p.touchPitch=new Ld(p);this._add("touchPitch",F);const N=new yo(u),W=new Mt(u);p.dragRotate=new Xo(u,N,W),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",W,["mouseRotate"]);const Y=new $u(u),J=new eg(u,p);p.dragPan=new Li(_,Y,J),this._add("mousePan",Y),this._add("touchPan",J,["touchZoom","touchRotate"]);const fe=new L1,se=new yt;p.touchZoomRotate=new ig(_,se,fe,z),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]);const he=p.scrollZoom=new kd(p,this);this._add("scrollZoom",he,["mousePan"]);const we=p.keyboard=new rg;this._add("keyboard",we),this._add("blockableMapEvent",new qo(p));for(const Ae of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[Ae]&&p[Ae].enable(u[Ae])}_add(u,p,_){this._handlers.push({handlerName:u,handler:p,allowed:_}),this._handlersById[u]=p}stop(u){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Dl(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,p,_){for(const S in u)if(S!==_&&(!p||p.indexOf(S)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const p=[];for(const _ of u)this._el.contains(_.target)&&p.push(_);return p}handleEvent(u,p){if(u.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const _=u.type==="renderFrame"?void 0:u,S={needsRenderFrame:!1},E={},L={},z=u.touches,F=z?this._getMapTouches(z):void 0,N=F?y.touchPos(this._el,F):y.mousePos(this._el,u);for(const{handlerName:J,handler:fe,allowed:se}of this._handlers){if(!fe.isEnabled())continue;let he;this._blockedByActive(L,se,J)?fe.reset():fe[p||u.type]&&(he=fe[p||u.type](u,N,F),this.mergeHandlerResult(S,E,he,J,_),he&&he.needsRenderFrame&&this._triggerRenderFrame()),(he||fe.isActive())&&(L[J]=fe)}const W={};for(const J in this._previousActiveHandlers)L[J]||(W[J]=_);this._previousActiveHandlers=L,(Object.keys(W).length||Nu(S))&&(this._changes.push([S,E,W]),this._triggerRenderFrame()),(Object.keys(L).length||Nu(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Y}=S;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))}mergeHandlerResult(u,p,_,S,E){if(!_)return;o.extend(u,_);const L={handlerName:S,originalEvent:_.originalEvent||E};_.zoomDelta!==void 0&&(p.zoom=L),_.panDelta!==void 0&&(p.drag=L),_.pitchDelta!==void 0&&(p.pitch=L),_.bearingDelta!==void 0&&(p.rotate=L)}_applyChanges(){const u={},p={},_={};for(const[S,E,L]of this._changes)S.panDelta&&(u.panDelta=(u.panDelta||new o.pointGeometry(0,0))._add(S.panDelta)),S.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(u.around=S.around),S.pinchAround!==void 0&&(u.pinchAround=S.pinchAround),S.noInertia&&(u.noInertia=S.noInertia),o.extend(p,E),o.extend(_,L);this._updateMapTransform(u,p,_),this._changes=[]}_updateMapTransform(u,p,_){const S=this._map,E=S.transform,L=S.style&&S.style.terrain;if(!(Nu(u)||L&&this._drag))return this._fireEvents(p,_,!0);let{panDelta:z,zoomDelta:F,bearingDelta:N,pitchDelta:W,around:Y,pinchAround:J}=u;J!==void 0&&(Y=J),S._stop(!0),Y=Y||S.transform.centerPoint;const fe=E.pointLocation(z?Y.sub(z):Y);N&&(E.bearing+=N),W&&(E.pitch+=W),F&&(E.zoom+=F),L?p.drag&&!this._drag?(this._drag={center:E.centerPoint,lngLat:E.pointLocation(Y),point:Y,handlerName:p.drag.handlerName},S.fire(new o.Event("freezeElevation",{freeze:!0}))):this._drag&&_[this._drag.handlerName]?(S.fire(new o.Event("freezeElevation",{freeze:!1})),this._drag=null):p.drag&&this._drag&&(E.center=E.pointLocation(E.centerPoint.sub(z))):E.setLocationAtPoint(fe,Y),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(p,_,!0)}_fireEvents(u,p,_){const S=Dl(this._eventsInProgress),E=Dl(u),L={};for(const W in u){const{originalEvent:Y}=u[W];this._eventsInProgress[W]||(L[`${W}start`]=Y),this._eventsInProgress[W]=u[W]}!S&&E&&this._fireEvent("movestart",E.originalEvent);for(const W in L)this._fireEvent(W,L[W]);E&&this._fireEvent("move",E.originalEvent);for(const W in u){const{originalEvent:Y}=u[W];this._fireEvent(W,Y)}const z={};let F;for(const W in this._eventsInProgress){const{handlerName:Y,originalEvent:J}=this._eventsInProgress[W];this._handlersById[Y].isActive()||(delete this._eventsInProgress[W],F=p[Y]||J,z[`${W}end`]=F)}for(const W in z)this._fireEvent(W,z[W]);const N=Dl(this._eventsInProgress);if(_&&(S||E)&&!N){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Y=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;W?(Y(W.bearing||this._map.getBearing())&&(W.bearing=0),this._map.easeTo(W,{originalEvent:F})):(this._map.fire(new o.Event("moveend",{originalEvent:F})),Y(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,p){this._map.fire(new o.Event(u,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new Bd("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ca={extend:(b,...u)=>o.extend(b,...u),run(b){b()},logToElement(b,u=!1,p="log"){const _=window.document.getElementById(p);_&&(u&&(_.innerHTML=""),_.innerHTML+=`<br>${b}`)}};class hn extends o.Evented{constructor(u,p){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=p.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,p){return this.jumpTo({center:u},p)}panBy(u,p,_){return u=o.pointGeometry.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},p),_)}panTo(u,p,_){return this.easeTo(o.extend({center:u},p),_)}getZoom(){return this.transform.zoom}setZoom(u,p){return this.jumpTo({zoom:u},p),this}zoomTo(u,p,_){return this.easeTo(o.extend({zoom:u},p),_)}zoomIn(u,p){return this.zoomTo(this.getZoom()+1,u,p),this}zoomOut(u,p){return this.zoomTo(this.getZoom()-1,u,p),this}getBearing(){return this.transform.bearing}setBearing(u,p){return this.jumpTo({bearing:u},p),this}getPadding(){return this.transform.padding}setPadding(u,p){return this.jumpTo({padding:u},p),this}rotateTo(u,p,_){return this.easeTo(o.extend({bearing:u},p),_)}resetNorth(u,p){return this.rotateTo(0,o.extend({duration:1e3},u),p),this}resetNorthPitch(u,p){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),p),this}snapToNorth(u,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,p):this}getPitch(){return this.transform.pitch}setPitch(u,p){return this.jumpTo({pitch:u},p),this}cameraForBounds(u,p){u=o.LngLatBounds.convert(u);const _=p&&p.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),_,p)}_cameraForBoxAndBearing(u,p,_,S){const E={top:0,bottom:0,right:0,left:0};if(typeof(S=o.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const Re=S.padding;S.padding={top:Re,bottom:Re,right:Re,left:Re}}S.padding=o.extend(E,S.padding);const L=this.transform,z=L.padding,F=L.project(o.LngLat.convert(u)),N=L.project(o.LngLat.convert(p)),W=F.rotate(-_*Math.PI/180),Y=N.rotate(-_*Math.PI/180),J=new o.pointGeometry(Math.max(W.x,Y.x),Math.max(W.y,Y.y)),fe=new o.pointGeometry(Math.min(W.x,Y.x),Math.min(W.y,Y.y)),se=J.sub(fe),he=(L.width-(z.left+z.right+S.padding.left+S.padding.right))/se.x,we=(L.height-(z.top+z.bottom+S.padding.top+S.padding.bottom))/se.y;if(we<0||he<0)return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ae=Math.min(L.scaleZoom(L.scale*Math.min(he,we)),S.maxZoom),Le=o.pointGeometry.convert(S.offset),pe=new o.pointGeometry((S.padding.left-S.padding.right)/2,(S.padding.top-S.padding.bottom)/2).rotate(_*Math.PI/180),Fe=Le.add(pe).mult(L.scale/L.zoomScale(Ae));return{center:L.unproject(F.add(N).div(2).sub(Fe)),zoom:Ae,bearing:_}}fitBounds(u,p,_){return this._fitInternal(this.cameraForBounds(u,p),p,_)}fitScreenCoordinates(u,p,_,S,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.pointGeometry.convert(u)),this.transform.pointLocation(o.pointGeometry.convert(p)),_,S),S,E)}_fitInternal(u,p,_){return u?(delete(p=o.extend(u,p)).padding,p.linear?this.easeTo(p,_):this.flyTo(p,_)):this}jumpTo(u,p){this.stop();const _=this.transform;let S=!1,E=!1,L=!1;return"zoom"in u&&_.zoom!==+u.zoom&&(S=!0,_.zoom=+u.zoom),u.center!==void 0&&(_.center=o.LngLat.convert(u.center)),"bearing"in u&&_.bearing!==+u.bearing&&(E=!0,_.bearing=+u.bearing),"pitch"in u&&_.pitch!==+u.pitch&&(L=!0,_.pitch=+u.pitch),u.padding==null||_.isPaddingEqual(u.padding)||(_.padding=u.padding),this.fire(new o.Event("movestart",p)).fire(new o.Event("move",p)),S&&this.fire(new o.Event("zoomstart",p)).fire(new o.Event("zoom",p)).fire(new o.Event("zoomend",p)),E&&this.fire(new o.Event("rotatestart",p)).fire(new o.Event("rotate",p)).fire(new o.Event("rotateend",p)),L&&this.fire(new o.Event("pitchstart",p)).fire(new o.Event("pitch",p)).fire(new o.Event("pitchend",p)),this.fire(new o.Event("moveend",p))}calculateCameraOptionsFromTo(u,p,_,S=0){const E=o.MercatorCoordinate.fromLngLat(u,p),L=o.MercatorCoordinate.fromLngLat(_,S),z=L.x-E.x,F=L.y-E.y,N=L.z-E.z,W=Math.hypot(z,F,N);if(W===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(z,F),J=this.transform.scaleZoom(this.transform.cameraToCenterDistance/W/this.transform.tileSize),fe=180*Math.atan2(z,-F)/Math.PI;let se=180*Math.acos(Y/W)/Math.PI;return se=N<0?90-se:90+se,{center:L.toLngLat(),zoom:J,pitch:se,bearing:fe}}easeTo(u,p){this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||!u.essential&&o.exported.prefersReducedMotion)&&(u.duration=0);const _=this.transform,S=this.getZoom(),E=this.getBearing(),L=this.getPitch(),z=this.getPadding(),F="zoom"in u?+u.zoom:S,N="bearing"in u?this._normalizeBearing(u.bearing,E):E,W="pitch"in u?+u.pitch:L,Y="padding"in u?u.padding:_.padding,J=o.pointGeometry.convert(u.offset);let fe=_.centerPoint.add(J);const se=_.pointLocation(fe),he=o.LngLat.convert(u.center||se);this._normalizeCenter(he);const we=_.project(se),Ae=_.project(he).sub(we),Le=_.zoomScale(F-S);let pe,Fe;u.around&&(pe=o.LngLat.convert(u.around),Fe=_.locationPoint(pe));const Re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||F!==S,this._rotating=this._rotating||E!==N,this._pitching=this._pitching||W!==L,this._padding=!_.isPaddingEqual(Y),this._easeId=u.easeId,this._prepareEase(p,u.noMoveStart,Re),this._ease(Ge=>{if(this._zooming&&(_.zoom=o.number(S,F,Ge)),this._rotating&&(_.bearing=o.number(E,N,Ge)),this._pitching&&(_.pitch=o.number(L,W,Ge)),this._padding&&(_.interpolatePadding(z,Y,Ge),fe=_.centerPoint.add(J)),pe)_.setLocationAtPoint(pe,Fe);else{const We=_.zoomScale(_.zoom-S),nt=F>S?Math.min(2,Le):Math.max(.5,Le),He=Math.pow(nt,1-Ge),wt=_.unproject(we.add(Ae.mult(Ge*He)).mult(We));_.setLocationAtPoint(_.renderWorldCopies?wt.wrap():wt,fe)}this._fireMoveEvents(p)},Ge=>{this._afterEase(p,Ge)},u),this}_prepareEase(u,p,_={}){this._moving=!0,this.fire(new o.Event("freezeElevation",{freeze:!0})),p||_.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!_.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!_.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!_.pitching&&this.fire(new o.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))}_afterEase(u,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId,this.fire(new o.Event("freezeElevation",{freeze:!1}));const _=this._zooming,S=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new o.Event("zoomend",u)),S&&this.fire(new o.Event("rotateend",u)),E&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}flyTo(u,p){if(!u.essential&&o.exported.prefersReducedMotion){const Ut=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ut,p)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);const _=this.transform,S=this.getZoom(),E=this.getBearing(),L=this.getPitch(),z=this.getPadding(),F="zoom"in u?o.clamp(+u.zoom,_.minZoom,_.maxZoom):S,N="bearing"in u?this._normalizeBearing(u.bearing,E):E,W="pitch"in u?+u.pitch:L,Y="padding"in u?u.padding:_.padding,J=_.zoomScale(F-S),fe=o.pointGeometry.convert(u.offset);let se=_.centerPoint.add(fe);const he=_.pointLocation(se),we=o.LngLat.convert(u.center||he);this._normalizeCenter(we);const Ae=_.project(he),Le=_.project(we).sub(Ae);let pe=u.curve;const Fe=Math.max(_.width,_.height),Re=Fe/J,Ge=Le.mag();if("minZoom"in u){const Ut=o.clamp(Math.min(u.minZoom,S,F),_.minZoom,_.maxZoom),$r=Fe/_.zoomScale(Ut-S);pe=Math.sqrt($r/Ge*2)}const We=pe*pe;function nt(Ut){const $r=(Re*Re-Fe*Fe+(Ut?-1:1)*We*We*Ge*Ge)/(2*(Ut?Re:Fe)*We*Ge);return Math.log(Math.sqrt($r*$r+1)-$r)}function He(Ut){return(Math.exp(Ut)-Math.exp(-Ut))/2}function wt(Ut){return(Math.exp(Ut)+Math.exp(-Ut))/2}const dt=nt(0);let Et=function(Ut){return wt(dt)/wt(dt+pe*Ut)},ir=function(Ut){return Fe*((wt(dt)*(He($r=dt+pe*Ut)/wt($r))-He(dt))/We)/Ge;var $r},lr=(nt(1)-dt)/pe;if(Math.abs(Ge)<1e-6||!isFinite(lr)){if(Math.abs(Fe-Re)<1e-6)return this.easeTo(u,p);const Ut=Re<Fe?-1:1;lr=Math.abs(Math.log(Re/Fe))/pe,ir=function(){return 0},Et=function($r){return Math.exp(Ut*pe*$r)}}return u.duration="duration"in u?+u.duration:1e3*lr/("screenSpeed"in u?+u.screenSpeed/pe:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=E!==N,this._pitching=W!==L,this._padding=!_.isPaddingEqual(Y),this._prepareEase(p,!1),this._ease(Ut=>{const $r=Ut*lr,Nr=1/Et($r);_.zoom=Ut===1?F:S+_.scaleZoom(Nr),this._rotating&&(_.bearing=o.number(E,N,Ut)),this._pitching&&(_.pitch=o.number(L,W,Ut)),this._padding&&(_.interpolatePadding(z,Y,Ut),se=_.centerPoint.add(fe));const gr=Ut===1?we:_.unproject(Ae.add(Le.mult(ir($r))).mult(Nr));_.setLocationAtPoint(_.renderWorldCopies?gr.wrap():gr,se),this._fireMoveEvents(p)},()=>this._afterEase(p),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,p)}if(!u){const _=this.handlers;_&&_.stop(!1)}return this}_ease(u,p,_){_.animate===!1||_.duration===0?(u(1),p()):(this._easeStart=o.exported.now(),this._easeOptions=_,this._onEaseFrame=u,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,p){u=o.wrap(u,-180,180);const _=Math.abs(u-p);return Math.abs(u-360-p)<_&&(u-=360),Math.abs(u+360-p)<_&&(u+=360),u}_normalizeCenter(u){const p=this.transform;if(!p.renderWorldCopies||p.lngRange)return;const _=u.lng-p.center.lng;u.lng+=_>180?-360:_<-180?360:0}}class Vu{constructor(u={}){this.options=u,o.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,p){const _=this._map._getUIString(`AttributionControl.${p}`);u.title=_,u.setAttribute("aria-label",_)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(S=>typeof S!="string"?"":S)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const p=this._map.style.sourceCaches;for(const S in p){const E=p[S];if(E.used||E.usedForTerrain){const L=E.getSource();L.attribution&&u.indexOf(L.attribution)<0&&u.push(L.attribution)}}u=u.filter(S=>String(S).trim()),u.sort((S,E)=>S.length-E.length),u=u.filter((S,E)=>{for(let L=E+1;L<u.length;L++)if(u[L].indexOf(S)>=0)return!1;return!0});const _=u.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,u.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Ch{constructor(u={}){this.options=u,o.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl mapboxgl-ctrl");const p=y.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact","mapboxgl-compact"):p.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class og{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const p=++this._id;return this._queue.push({callback:u,id:p,cancelled:!1}),p}remove(u){const p=this._currentlyRunning,_=p?this._queue.concat(p):this._queue;for(const S of _)if(S.id===u)return void(S.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const _ of p)if(!_.cancelled&&(_.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const sg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},lg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},R1={showCompass:!0,showZoom:!0,visualizePitch:!1};class ja{constructor(u,p,_=!1){this._clickTolerance=10,this.element=p,this.mouseRotate=new yo({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,_&&(this.mousePitch=new Mt({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),y.addEventListener(p,"mousedown",this.mousedown),y.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(p,"touchmove",this.touchmove),y.addEventListener(p,"touchend",this.touchend),y.addEventListener(p,"touchcancel",this.reset)}down(u,p){this.mouseRotate.mousedown(u,p),this.mousePitch&&this.mousePitch.mousedown(u,p),y.disableDrag()}move(u,p){const _=this.map,S=this.mouseRotate.mousemoveWindow(u,p);if(S&&S.bearingDelta&&_.setBearing(_.getBearing()+S.bearingDelta),this.mousePitch){const E=this.mousePitch.mousemoveWindow(u,p);E&&E.pitchDelta&&_.setPitch(_.getPitch()+E.pitchDelta)}}off(){const u=this.element;y.removeEventListener(u,"mousedown",this.mousedown),y.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(u,"touchmove",this.touchmove),y.removeEventListener(u,"touchend",this.touchend),y.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup)}mousedown(u){this.down(o.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),y.mousePos(this.element,u)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)}mousemove(u){this.move(u,y.mousePos(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Uu(b,u,p){if(b=new o.LngLat(b.lng,b.lat),u){const _=new o.LngLat(b.lng-360,b.lat),S=new o.LngLat(b.lng+360,b.lat),E=p.locationPoint(b).distSqr(u);p.locationPoint(_).distSqr(u)<E?b=_:p.locationPoint(S).distSqr(u)<E&&(b=S)}for(;Math.abs(b.lng-p.center.lng)>180;){const _=p.locationPoint(b);if(_.x>=0&&_.y>=0&&_.x<=p.width&&_.y<=p.height)break;b.lng>p.center.lng?b.lng-=360:b.lng+=360}return b}const Ot={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qt(b,u,p){const _=b.classList;for(const S in Ot)_.remove(`maplibregl-${p}-anchor-${S}`,`mapboxgl-${p}-anchor-${S}`);_.add(`maplibregl-${p}-anchor-${u}`,`mapboxgl-${p}-anchor-${u}`)}class Ll extends o.Evented{constructor(u,p){if(super(),(u instanceof HTMLElement||p)&&(u=o.extend({element:u},p)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=o.pointGeometry.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const _=y.createNS("http://www.w3.org/2000/svg","svg"),S=41,E=27;_.setAttributeNS(null,"display","block"),_.setAttributeNS(null,"height",`${S}px`),_.setAttributeNS(null,"width",`${E}px`),_.setAttributeNS(null,"viewBox",`0 0 ${E} ${S}`);const L=y.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"stroke","none"),L.setAttributeNS(null,"stroke-width","1"),L.setAttributeNS(null,"fill","none"),L.setAttributeNS(null,"fill-rule","evenodd");const z=y.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const F=y.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"transform","translate(3.0, 29.0)"),F.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Le of N){const pe=y.createNS("http://www.w3.org/2000/svg","ellipse");pe.setAttributeNS(null,"opacity","0.04"),pe.setAttributeNS(null,"cx","10.5"),pe.setAttributeNS(null,"cy","5.80029008"),pe.setAttributeNS(null,"rx",Le.rx),pe.setAttributeNS(null,"ry",Le.ry),F.appendChild(pe)}const W=y.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill",this._color);const Y=y.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),W.appendChild(Y);const J=y.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");const fe=y.createNS("http://www.w3.org/2000/svg","path");fe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(fe);const se=y.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),se.setAttributeNS(null,"fill","#FFFFFF");const he=y.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(8.0, 8.0)");const we=y.createNS("http://www.w3.org/2000/svg","circle");we.setAttributeNS(null,"fill","#000000"),we.setAttributeNS(null,"opacity","0.25"),we.setAttributeNS(null,"cx","5.5"),we.setAttributeNS(null,"cy","5.5"),we.setAttributeNS(null,"r","5.4999962");const Ae=y.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#FFFFFF"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962"),he.appendChild(we),he.appendChild(Ae),z.appendChild(F),z.appendChild(W),z.appendChild(J),z.appendChild(se),z.appendChild(he),_.appendChild(z),_.setAttributeNS(null,"height",S*this._scale+"px"),_.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(_),this._offset=o.pointGeometry.convert(u&&u.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",_=>{_.preventDefault()}),this._element.addEventListener("mousedown",_=>{_.preventDefault()}),qt(this._element,this._anchor,"marker"),this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(u){const p=u.code,_=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(u){const p=u.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this}_update(u){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Uu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${Ot[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${p}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const S=this._map.unproject(this._pos),E=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=S.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(u){return this._offset=o.pointGeometry.convert(u),this._update(),this}_onMove(u){if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Fd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Zo,ni=0,Yo=!1;const Ga={maxWidth:100,unit:"metric"};function ug(b,u,p){const _=p&&p.maxWidth||100,S=b._container.clientHeight/2,E=b.unproject([0,S]),L=b.unproject([_,S]),z=E.distanceTo(L);if(p&&p.unit==="imperial"){const F=3.2808*z;F>5280?Ko(u,_,F/5280,b._getUIString("ScaleControl.Miles")):Ko(u,_,F,b._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Ko(u,_,z/1852,b._getUIString("ScaleControl.NauticalMiles")):z>=1e3?Ko(u,_,z/1e3,b._getUIString("ScaleControl.Kilometers")):Ko(u,_,z,b._getUIString("ScaleControl.Meters"))}function Ko(b,u,p,_){const S=function(E){const L=Math.pow(10,`${Math.floor(E)}`.length-1);let z=E/L;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(F){const N=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*N)/N}(z),L*z}(p);b.style.width=u*(S/p)+"px",b.innerHTML=`${S}&nbsp;${_}`}const wn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Dn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $d(b){if(b){if(typeof b=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(b,2)));return{center:new o.pointGeometry(0,0),top:new o.pointGeometry(0,b),"top-left":new o.pointGeometry(u,u),"top-right":new o.pointGeometry(-u,u),bottom:new o.pointGeometry(0,-b),"bottom-left":new o.pointGeometry(u,-u),"bottom-right":new o.pointGeometry(-u,-u),left:new o.pointGeometry(b,0),right:new o.pointGeometry(-b,0)}}if(b instanceof o.pointGeometry||Array.isArray(b)){const u=o.pointGeometry.convert(b);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:o.pointGeometry.convert(b.center||[0,0]),top:o.pointGeometry.convert(b.top||[0,0]),"top-left":o.pointGeometry.convert(b["top-left"]||[0,0]),"top-right":o.pointGeometry.convert(b["top-right"]||[0,0]),bottom:o.pointGeometry.convert(b.bottom||[0,0]),"bottom-left":o.pointGeometry.convert(b["bottom-left"]||[0,0]),"bottom-right":o.pointGeometry.convert(b["bottom-right"]||[0,0]),left:o.pointGeometry.convert(b.left||[0,0]),right:o.pointGeometry.convert(b.right||[0,0])}}return $d(new o.pointGeometry(0,0))}const Ps={supported:h,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends hn{constructor(b){var u;if(o.PerformanceUtils.mark(o.PerformanceMarkers.create),(b=o.extend({},lg,b)).minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ku(b.minZoom,b.maxZoom,b.minPitch,b.maxPitch,b.renderWorldCopies),{bearingSnap:b.bearingSnap}),this._interactive=b.interactive,this._cooperativeGestures=b.cooperativeGestures,this._maxTileCacheSize=b.maxTileCacheSize,this._failIfMajorPerformanceCaveat=b.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=b.preserveDrawingBuffer,this._antialias=b.antialias,this._trackResize=b.trackResize,this._bearingSnap=b.bearingSnap,this._refreshExpiredTiles=b.refreshExpiredTiles,this._fadeDuration=b.fadeDuration,this._crossSourceCollisions=b.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=b.collectResourceTiming,this._renderTaskQueue=new og,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},sg,b.locale),this._clickTolerance=b.clickTolerance,this._pixelRatio=(u=b.pixelRatio)!==null&&u!==void 0?u:devicePixelRatio,this._requestManager=new x(b.transformRequest),typeof b.container=="string"){if(this._container=document.getElementById(b.container),!this._container)throw new Error(`Container '${b.container}' not found.`)}else{if(!(b.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(b.maxBounds&&this.setMaxBounds(b.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ag(this,b),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=b.hash&&new Xv(typeof b.hash=="string"&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,o.extend({},b.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=b.localIdeographFontFamily,b.style&&this.setStyle(b.style,{localIdeographFontFamily:b.localIdeographFontFamily}),b.attributionControl&&this.addControl(new Vu({customAttribution:b.customAttribution})),b.maplibreLogo&&this.addControl(new Ch,b.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",p=>{this._update(p.dataType==="style"),this.fire(new o.Event(`${p.dataType}data`,p))}),this.on("dataloading",p=>{this.fire(new o.Event(`${p.dataType}dataloading`,p))}),this.on("dataabort",p=>{this.fire(new o.Event("sourcedataabort",p))})}_getMapId(){return this._mapId}addControl(b,u){if(u===void 0&&(u=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=b.onAdd(this);this._controls.push(b);const _=this._controlPositions[u];return u.indexOf("bottom")!==-1?_.insertBefore(p,_.firstChild):_.appendChild(p),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(b);return u>-1&&this._controls.splice(u,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,u,p,_){return _==null&&this.style.terrain&&(_=this.transform.getElevation(p,this.style.terrain)),super.calculateCameraOptionsFromTo(b,u,p,_)}resize(b){const u=this._containerDimensions(),p=u[0],_=u[1];this._resizeCanvas(p,_,this.getPixelRatio()),this.transform.resize(p,_),this.painter.resize(p,_,this.getPixelRatio());const S=!this._moving;return S&&(this.stop(),this.fire(new o.Event("movestart",b)).fire(new o.Event("move",b))),this.fire(new o.Event("resize",b)),S&&this.fire(new o.Event("moveend",b)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(b){const[u,p]=this._containerDimensions();this._pixelRatio=b,this._resizeCanvas(u,p,b),this.painter.resize(u,p,b)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(o.LngLatBounds.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.renderWorldCopies=b,this._update()}project(b){return this.transform.locationPoint(o.LngLat.convert(b),this.style&&this.style.terrain)}unproject(b){return this.transform.pointLocation(o.pointGeometry.convert(b),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(b,u,p){if(b==="mouseenter"||b==="mouseover"){let _=!1;return{layer:u,listener:p,delegates:{mousemove:E=>{const L=this.getLayer(u)?this.queryRenderedFeatures(E.point,{layers:[u]}):[];L.length?_||(_=!0,p.call(this,new Xi(b,this,E.originalEvent,{features:L}))):_=!1},mouseout:()=>{_=!1}}}}if(b==="mouseleave"||b==="mouseout"){let _=!1;return{layer:u,listener:p,delegates:{mousemove:L=>{(this.getLayer(u)?this.queryRenderedFeatures(L.point,{layers:[u]}):[]).length?_=!0:_&&(_=!1,p.call(this,new Xi(b,this,L.originalEvent)))},mouseout:L=>{_&&(_=!1,p.call(this,new Xi(b,this,L.originalEvent)))}}}}{const _=S=>{const E=this.getLayer(u)?this.queryRenderedFeatures(S.point,{layers:[u]}):[];E.length&&(S.features=E,p.call(this,S),delete S.features)};return{layer:u,listener:p,delegates:{[b]:_}}}}on(b,u,p){if(p===void 0)return super.on(b,u);const _=this._createDelegatedListener(b,u,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(_);for(const S in _.delegates)this.on(S,_.delegates[S]);return this}once(b,u,p){if(p===void 0)return super.once(b,u);const _=this._createDelegatedListener(b,u,p);for(const S in _.delegates)this.once(S,_.delegates[S]);return this}off(b,u,p){return p===void 0?super.off(b,u):(this._delegatedListeners&&this._delegatedListeners[b]&&(_=>{const S=this._delegatedListeners[b];for(let E=0;E<S.length;E++){const L=S[E];if(L.layer===u&&L.listener===p){for(const z in L.delegates)this.off(z,L.delegates[z]);return S.splice(E,1),this}}})(),this)}queryRenderedFeatures(b,u){if(!this.style)return[];let p;if(u!==void 0||b===void 0||b instanceof o.pointGeometry||Array.isArray(b)||(u=b,b=void 0),u=u||{},(b=b||[[0,0],[this.transform.width,this.transform.height]])instanceof o.pointGeometry||typeof b[0]=="number")p=[o.pointGeometry.convert(b)];else{const _=o.pointGeometry.convert(b[0]),S=o.pointGeometry.convert(b[1]);p=[_,new o.pointGeometry(S.x,_.y),S,new o.pointGeometry(_.x,S.y),_]}return this.style.queryRenderedFeatures(p,u,this.transform)}querySourceFeatures(b,u){return this.style.querySourceFeatures(b,u)}setStyle(b,u){return(u=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(b,u))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const u=this._locale[b];if(u==null)throw new Error(`Missing UI string '${b}'`);return u}_updateStyle(b,u){return this.style&&(this.style.setEventedParent(null),this.style._remove()),b?(this.style=new hi(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b):this.style.loadJSON(b),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new hi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,u){if(typeof b=="string"){const p=this._requestManager.transformRequest(b,o.ResourceType.Style);o.getJSON(p,(_,S)=>{_?this.fire(new o.ErrorEvent(_)):S&&this._updateDiff(S,u)})}else typeof b=="object"&&this._updateDiff(b,u)}_updateDiff(b,u){try{this.style.setState(b)&&this._update(!0)}catch(p){o.warnOnce(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(b,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")}addSource(b,u){return this._lazyInitEmptyStyle(),this.style.addSource(b,u),this._update(!0)}isSourceLoaded(b){const u=this.style&&this.style.sourceCaches[b];if(u!==void 0)return u.loaded();this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){return this.style.setTerrain(b),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const u in b){const p=b[u]._tiles;for(const _ in p){const S=p[_];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}addSourceType(b,u,p){return this._lazyInitEmptyStyle(),this.style.addSourceType(b,u,p)}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}addImage(b,u,{pixelRatio:p=1,sdf:_=!1,stretchX:S,stretchY:E,content:L}={}){if(this._lazyInitEmptyStyle(),u instanceof HTMLImageElement||o.isImageBitmap(u)){const{width:z,height:F,data:N}=o.exported.getImageData(u);this.style.addImage(b,{data:new o.RGBAImage({width:z,height:F},N),pixelRatio:p,stretchX:S,stretchY:E,content:L,sdf:_,version:0})}else{if(u.width===void 0||u.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:F,data:N}=u,W=u;this.style.addImage(b,{data:new o.RGBAImage({width:z,height:F},new Uint8Array(N)),pixelRatio:p,stretchX:S,stretchY:E,content:L,sdf:_,version:0,userImage:W}),W.onAdd&&W.onAdd(this,b)}}}updateImage(b,u){const p=this.style.getImage(b);if(!p)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=u instanceof HTMLImageElement||o.isImageBitmap(u)?o.exported.getImageData(u):u,{width:S,height:E,data:L}=_;if(S===void 0||E===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==p.data.width||E!==p.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(u instanceof HTMLImageElement||o.isImageBitmap(u));p.data.replace(L,z),this.style.updateImage(b,p)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b,u){o.getImage(this._requestManager.transformRequest(b,o.ResourceType.Image),u)}listImages(){return this.style.listImages()}addLayer(b,u){return this._lazyInitEmptyStyle(),this.style.addLayer(b,u),this._update(!0)}moveLayer(b,u){return this.style.moveLayer(b,u),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}setLayerZoomRange(b,u,p){return this.style.setLayerZoomRange(b,u,p),this._update(!0)}setFilter(b,u,p={}){return this.style.setFilter(b,u,p),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,u,p,_={}){return this.style.setPaintProperty(b,u,p,_),this._update(!0)}getPaintProperty(b,u){return this.style.getPaintProperty(b,u)}setLayoutProperty(b,u,p,_={}){return this.style.setLayoutProperty(b,u,p,_),this._update(!0)}getLayoutProperty(b,u){return this.style.getLayoutProperty(b,u)}setLight(b,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(b,u){return this.style.setFeatureState(b,u),this._update()}removeFeatureState(b,u){return this.style.removeFeatureState(b,u),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,u=0;return this._container&&(b=this._container.clientWidth||400,u=this._container.clientHeight||300),[b,u]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map","mapboxgl-map");const u=this._canvasContainer=y.create("div","maplibregl-canvas-container mapboxgl-canvas-container",b);this._interactive&&u.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const p=this._containerDimensions();this._resizeCanvas(p[0],p[1],this.getPixelRatio());const _=this._controlContainer=y.create("div","maplibregl-control-container mapboxgl-control-container",b),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{S[E]=y.create("div",`maplibregl-ctrl-${E} mapboxgl-ctrl-${E}`,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const b=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",b);let u="Control",p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",u="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${p}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",_=>{_.key===u&&(this._metaPress=!0)}),document.addEventListener("keyup",_=>{_.key===u&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",_=>{this._onCooperativeGesture(_,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(b,u,p){this._canvas.width=p*b,this._canvas.height=p*u,this._canvas.style.width=`${b}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const b=o.extend({},h.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._canvas.getContext("webgl",b)||this._canvas.getContext("experimental-webgl",b);u?(this.painter=new Md(u,this.transform),o.exported$1.testSupport(u)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(b){b.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:b}))}_contextRestored(b){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:b}))}_onMapScroll(b){if(b.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(b,u,p){return!u&&p<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){let u,p=0;const _=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(u=_.createQueryEXT(),_.beginQueryEXT(_.TIME_ELAPSED_EXT,u),p=o.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let S=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const L=this.transform.zoom,z=o.exported.now();this.style.zoomHistory.update(L,z);const F=new o.EvaluationParameters(L,{now:z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),N=F.crossFadingFactor();N===1&&N===this._crossFadingFactor||(S=!0,this._crossFadingFactor=N),this.style.update(F)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.PerformanceUtils.mark(o.PerformanceMarkers.load),this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||S)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const L=o.exported.now()-p;_.endQueryEXT(_.TIME_ELAPSED_EXT,u),setTimeout(()=>{const z=_.getQueryObjectEXT(u,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(u),this.fire(new o.Event("gpu-timing-frame",{cpuTime:L,gpuTime:z}))},50)}if(this.listens("gpu-timing-layer")){const L=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(L);this.fire(new o.Event("gpu-timing-layer",{layerTimes:z}))},50)}const E=this._sourcesDirty||this._styleDirty||this._placementDirty;return E||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||E||(this._fullyLoaded=!0,o.PerformanceUtils.mark(o.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const b=this.painter.context.gl.getExtension("WEBGL_lose_context");b&&b.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&y.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),o.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=o.exported.frame(b=>{o.PerformanceUtils.frame(b),this._frame=null,this._render(b)}))}_onWindowOnline(){this._update()}_onWindowResize(b){this._trackResize&&this.resize({originalEvent:b})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}_setCacheLimits(b,u){o.setCacheLimits(b,u)}get version(){return"2.4.0"}},NavigationControl:class{constructor(b){this.options=o.extend({},R1,b),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const b=this._map.getZoom(),u=b===this._map.getMaxZoom(),p=b===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())}_rotateCompassArrow(){const b=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=b}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ja(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,u){const p=y.create("button",b,this._container);return p.type="button",p.addEventListener("click",u),p}_setButtonTitle(b,u){const p=this._map._getUIString(`NavigationControl.${u}`);b.title=p,b.setAttribute("aria-label",p)}},GeolocateControl:class extends o.Evented{constructor(b){super(),this.options=o.extend({},Fd,b),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(b){var u;return this._map=b,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,Zo!==void 0?u(Zo):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{Zo=p.state!=="denied",u(Zo)}):(Zo=!!window.navigator.geolocation,u(Zo)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ni=0,Yo=!1}_isOutOfMapMaxBounds(b){const u=this._map.getMaxBounds(),p=b.coords;return u&&(p.longitude<u.getWest()||p.longitude>u.getEast()||p.latitude<u.getSouth()||p.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(b){if(this._map){if(this._isOutOfMapMaxBounds(b))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",b)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=b,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(b),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(b),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",b)),this._finish()}}_updateCamera(b){const u=new o.LngLat(b.coords.longitude,b.coords.latitude),p=b.coords.accuracy,_=this._map.getBearing(),S=o.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(p),S,{geolocateSource:!0})}_updateMarker(b){if(b){const u=new o.LngLat(b.coords.longitude,b.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=b.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const b=this._map._container.clientHeight/2,u=this._map.unproject([0,b]),p=this._map.unproject([1,b]),_=u.distanceTo(p),S=Math.ceil(2*this._accuracy/_);this._circleElement.style.width=`${S}px`,this._circleElement.style.height=`${S}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(b){if(this._map){if(this.options.trackUserLocation)if(b.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(b.code===3&&Yo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",b)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(b){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",b===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ll(this._dotElement),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ll({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ni--,Yo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ni++,ni>1?(b={maximumAge:6e5,timeout:0},Yo=!0):(b=this.options.positionOptions,Yo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Vu,LogoControl:Ch,ScaleControl:class{constructor(b){this.options=o.extend({},Ga,b),o.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){ug(this._map,this._container,this.options)}onAdd(b){return this._map=b,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(b){this.options.unit=b,ug(this._map,this._container,this.options)}},FullscreenControl:class{constructor(b){this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const b=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(b){this.options=b,o.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(b){return this._map=b,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends o.Evented{constructor(b){super(),this.options=o.extend(Object.create(wn),b),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.LngLat.convert(b),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const u=document.createDocumentFragment(),p=document.createElement("body");let _;for(p.innerHTML=b;_=p.firstChild,_;)u.appendChild(_);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){this._container&&this._container.classList.add(b)}removeClassName(b){this._container&&this._container.classList.remove(b)}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(b){this._update(b.point)}_onMouseMove(b){this._update(b.point)}_onDrag(b){this._update(b.point)}_update(b){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=y.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(E=>this._container.classList.add(E)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Uu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!b))return;const u=this._pos=this._trackPointer&&b?b:this._map.project(this._lngLat);let p=this.options.anchor;const _=$d(this.options.offset);if(!p){const E=this._container.offsetWidth,L=this._container.offsetHeight;let z;z=u.y+_.bottom.y<L?["top"]:u.y>this._map.transform.height-L?["bottom"]:[],u.x<E/2?z.push("left"):u.x>this._map.transform.width-E/2&&z.push("right"),p=z.length===0?"bottom":z.join("-")}const S=u.add(_[p]).round();y.setTransform(this._container,`${Ot[p]} translate(${S.x}px,${S.y}px)`),qt(this._container,p,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(Dn);b&&b.focus()}_onClose(){this.remove()}},Marker:Ll,Style:hi,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,AJAXError:o.AJAXError,config:o.config,CanvasSource:Kt,GeoJSONSource:Ye,ImageSource:Ct,RasterDEMTileSource:ve,RasterTileSource:ae,VectorTileSource:de,VideoSource:St,prewarm:function(){Ke().acquire(ue)},clearPrewarmedResources:function(){const b=je;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(ue),je=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return ge.workerCount},set workerCount(b){ge.workerCount=b},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(b){o.config.MAX_PARALLEL_IMAGE_REQUESTS=b},clearStorage(b){o.clearTileCache(b)},workerUrl:"",addProtocol(b,u){o.config.REGISTERED_PROTOCOLS[b]=u},removeProtocol(b){delete o.config.REGISTERED_PROTOCOLS[b]}};return ca.extend(Ps,{isSafari:o.isSafari,getPerformanceMetrics:o.PerformanceUtils.getPerformanceMetrics}),Ps});var s=i;return s})})(q6);var jte=q6.exports;const Ul=dT(jte);const Gte={name:"MyMap",data:()=>({map_style_url:"https://mirrors.sustech.edu.cn/osm-tile/styles/osm-bright/style.json",map_text_colour:"#000000",bus_location_data_api:[],bus_location_data_display:[],bus_plate_hash:{298:{plate:"BDF298"},363:{plate:"BDF363"},8040:{plate:"BDF040"},8147:{plate:"BDF147"},8267:{plate:"BDF267"},8330:{plate:"BDF330"},8335:{plate:"BDF335"},8338:{plate:"BDF338"},8345:{plate:"BDF345"},8365:{plate:"BDF365"},8371:{plate:"BDF371"},8411:{plate:"BDF411"},8421:{plate:"BDF421"},8430:{plate:"BDF430"},8447:{plate:"BDE447"},8458:{plate:"BDF458"},8470:{plate:"BDF470"},8471:{plate:"BDF471"},18447:{plate:"BDF447"}},geojson_line_1:[[113.99739584160139,22.610765716856296],[113.99770244929088,22.610602750604695],[113.99771094950285,22.61059767778233],[113.99771890653385,22.610591789421974],[113.99772624241524,22.61058514322198],[113.99773288526481,22.610577804306548],[113.99773876999119,22.610569844587616],[113.99824514560808,22.609808813574297],[113.998249208217,22.609802159245984],[113.99825274007058,22.60979520864264],[113.99898879543889,22.60819510708253],[113.99899240486543,22.608186143427105],[113.99899513228698,22.608176873246407],[113.99899695223624,22.60816738310082],[113.9989978477194,22.608157761604655],[113.99899781037489,22.60814809859871],[113.99899684055141,22.608138484311375],[113.99876376465981,22.606584405046835],[113.99876186005746,22.60657488398115],[113.99875904105679,22.60656559250995],[113.9987553342348,22.606556618231554],[113.99875077453878,22.606548045753847],[113.9987454049567,22.606539955896604],[113.99840124581259,22.606072409367975],[113.99839530892635,22.606065092796133],[113.9983887097732,22.60605836746942],[113.99838150693964,22.606052293094507],[113.9983737643716,22.606046923598996],[113.99836555080671,22.606042306652647],[113.99835693916405,22.60603848324417],[113.99834800589677,22.606035487317342],[113.99774294809698,22.605863822610463],[113.99773312637,22.605861563911226],[113.99772312717697,22.605860305268262],[113.99771305207776,22.60586005946536],[113.99770300340316,22.605860828999095],[113.99769308321561,22.605862606053456],[113.9976833922725,22.605865372579256],[113.996462081496,22.60628164325351],[113.99540699384544,22.60655007340282],[113.99537688636465,22.60638436471066],[113.99537457846512,22.606374521317747],[113.99537128843397,22.606364961271755],[113.99536704990152,22.60635578229431],[113.99536190619351,22.606347078211808],[113.99535590988829,22.606338937996323],[113.99534912227939,22.606331444856142],[113.99534161274892,22.60632467538524],[113.99533345805837,22.60631869878032],[113.995324741564,22.606313576133513],[113.99531555236477,22.60630935980789],[113.99491868014185,22.60615102642152],[113.99446803578164,22.605922922486105],[113.993628105381,22.605432281601264],[113.99361436378835,22.60541624974317],[113.99361283376653,22.605399929510398],[113.99403523011212,22.604697356220907],[113.99427914343141,22.604297776694622],[113.99454570612934,22.60407119840138],[113.99455101208882,22.604066349285663],[113.99481121659123,22.60381079129223],[113.99481565952753,22.603806137576637],[113.99515576701069,22.603426136652367],[113.99549648383878,22.60304833084697],[113.99570726599393,22.60298417975627],[113.99623267681147,22.60298349183956],[113.99686127008054,22.603078201644227],[113.99770971150042,22.60339811537432],[113.9977201426685,22.603401409146592],[113.99773087118898,22.603403543871796],[113.99774176868631,22.603404494006192],[113.99787229266123,22.603408704456996],[113.99788215074415,22.603408536156227],[113.9978919443383,22.60340739789566],[113.99790157824009,22.603405300740327],[113.99791095879819,22.603402265076713],[113.9979199948241,22.603398320414538],[113.9979285984785,22.60339350509991],[113.99793668612513,22.60338786594256],[113.99794417914393,22.60338145776082],[113.9980199672584,22.603309880097154],[113.99802683618526,22.603302715227613],[113.99803296099675,22.603294904709315],[113.99803828135273,22.603286525489548],[113.99804274483841,22.603277660118295],[113.9980463074806,22.603268395934986],[113.99804893418107,22.603258824208055],[113.99810024403767,22.60302739683338],[113.99810134953593,22.603021608404344],[113.99816665521513,22.602614977726315],[113.99835030416712,22.60216721735362],[113.99856193554633,22.601842951121434],[113.99880470491176,22.601545730488308],[113.99881031760918,22.601538156502247],[113.99881519216395,22.60153008765145],[113.99881928525701,22.6015215956419],[113.99882256051407,22.601512755940064],[113.99882498882864,22.601503647102295],[113.9988265486209,22.601494350076678],[113.99882722602932,22.60148494748368],[113.9988344317295,22.601194082723367],[113.99895072783376,22.600790214181995],[113.99965135994073,22.60015739690114],[113.9997487439255,22.600094924156195],[113.99975662585287,22.600089311655786],[113.99976392845348,22.6000829636668],[113.99977058335678,22.600075939622243],[113.99977652825628,22.600068305284697],[113.99978170749289,22.600060132130594],[113.99978607257604,22.600051496681044],[113.99978958263767,22.600042479785387],[113.99979220481484,22.60003316586426],[113.99979391455744,22.600023642119194],[113.99979469585801,22.60001399771619],[113.99979454140164,22.600004322950916],[113.9997934526344,22.599994708403305],[113.9997914397499,22.5999852440895],[113.99978852159374,22.599976018619078],[113.99978472548715,22.599967118365456],[113.99978008697113,22.5999586266572],[113.99977464947378,22.599950622997884],[113.99976846390364,22.599943182321713],[113.99976158817306,22.599936374291982],[113.99975408665603,22.59993026264882],[113.99974602958545,22.59992490461245],[113.99973749239562,22.59992035034746],[113.9997285550159,22.599916642493127],[113.99931433242868,22.59976784741106],[113.9988527029684,22.59945117882353],[113.99885252734994,22.599451058627373],[113.99811209682619,22.59894545191823],[113.99660435988763,22.59725046170577],[113.9966030867808,22.597249057512315],[113.99536067582889,22.595904550009735],[113.9953541984203,22.59589815108709],[113.99534716583669,22.59589236785265],[113.99533963638028,22.595887248251184],[113.99460302843119,22.595434010528884],[113.99459456469982,22.595429350779234],[113.99458569078772,22.595425529562213],[113.9945764895311,22.59542258254812],[113.99456704682186,22.595420537246756],[113.99455745080581,22.59541941275059],[113.99454779105987,22.59541921955658],[113.99453815775585,22.59541995946815],[113.99452864081873,22.59542162557837],[113.99451932908723,22.595424202334442],[113.9945103094845,22.595427665682845],[113.99450166620676,22.59543198329392],[113.99449347993728,22.59543711486362],[113.99448582709327,22.59544301248976],[113.99447877911251,22.595449621119172],[113.99447240178651,22.59545687906161],[113.99446675464631,22.595464718565623],[113.99446189040688,22.595473066451],[113.99420385593578,22.595969591352997],[113.99382768199821,22.59595993652297],[113.9938169603822,22.59596023674876],[113.99380633259398,22.59596168357378],[113.99379592089899,22.59596426035329],[113.99378584507669,22.595967937443213],[113.99321594303598,22.596211295714554],[113.99320787618828,22.59621517605677],[113.99320018866534,22.59621976224022],[113.99319294206812,22.596225017515316],[113.9931861944644,22.596230899770962],[113.99265363550316,22.596738860232236],[113.99200633643709,22.59716671060916],[113.99157366427197,22.5971462468509],[113.99090478252046,22.5969456920235],[113.99089489978897,22.59694326928491],[113.99088482201618,22.596941863390235],[113.9908746535454,22.596941488895837],[113.99086449965898,22.596942149679155],[113.99039476525739,22.596996829390125],[113.99038484213679,22.596998494112995],[113.99037513653565,22.597001147588333],[113.99036574671312,22.59700476295245],[113.99035676773141,22.597009303603546],[113.99034829049342,22.59701472357223],[113.99034040082233,22.597020967986946],[113.99033317859293,22.597027973629473],[113.99032669692278,22.59703566957495],[113.99032102143205,22.597043977909916],[113.99031620957922,22.597052814521092],[113.9903123100793,22.597062089946967],[113.99030936241067,22.59707171028347],[113.99020088374516,22.59750194984639],[113.99019873660492,22.597513104722935],[113.99019786842672,22.597524431141103],[113.99019829041364,22.59753578294312],[113.99030139387085,22.59862956838946],[113.99030286538937,22.59863964935582],[113.9903053549666,22.598649528285655],[113.99030883676294,22.59865910264432],[113.99048378356784,22.59907317753902],[113.99048795907763,22.599081866470787],[113.99049295183752,22.59909011297101],[113.99049871544861,22.599097840402962],[113.99050519634824,22.599104976953754],[113.99051233430787,22.599111456301692],[113.99052006299269,22.59911721823263],[113.99075599101839,22.599276010611053],[113.99076619844251,22.59928203412041],[113.99126127611241,22.599535900836155],[113.9917686585336,22.6000105337692],[113.99191211157755,22.60053218120178],[113.99183362959826,22.601016496848214],[113.99144872111891,22.60153952301182],[113.99077751816642,22.602118998056795],[113.99045237812743,22.602377905865616],[113.9904454049912,22.602384007276413],[113.99043902651476,22.60239072790739],[113.9904332974585,22.6023980100607],[113.99025180113084,22.60265210491943],[113.99024623928223,22.60266080939295],[113.99024160504972,22.60267004118088],[113.99023794788148,22.602679701778165],[113.99023530680027,22.60268968810428],[113.99010219314502,22.60332391993846]],geojson_line_2:[[113.9914596783045,22.59960492109923],[113.9918969233072,22.59993661748595],[113.9920105698998,22.6005318195689],[113.9919172423369,22.60102266627295],[113.9917196221943,22.601431625928],[113.9915262747645,22.601612498395962],[113.99204584987558,22.60262745159568],[113.99233952276445,22.60296808489611],[113.99279885728298,22.603280910653833],[113.99298710913483,22.60350336409337],[113.99385306765333,22.603677155592816],[113.99419945106074,22.60426804504929],[113.99386414857948,22.604784676421257],[113.9934784038899,22.60548092977822],[113.995278497141,22.60640224097063],[113.9953277666447,22.60667341560261],[113.9964905851169,22.6063775771138],[113.9977156537446,22.60596002561628],[113.9983207115444,22.60613169032316],[113.9986648706885,22.60659923685179],[113.9988979465801,22.60815331611633],[113.9981618912118,22.60975341767644],[113.9976555155949,22.61051444868976],[113.9973489079054,22.61067741494136]],bldg_geojson:{},gate_geojson:{},stations_geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[113.9902,22.60336]},properties:{name:" COE"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99153,22.599643]},properties:{name:" Research Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.990399,22.597132]},properties:{name:" Gate7"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.992403,22.597011]},properties:{name:" Administration Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.994898,22.59569]},properties:{name:"1 Gate1"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99939,22.599893]},properties:{name:"3 Gate3"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998329,22.601975]},properties:{name:" Guest Houses"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997811,22.603325]},properties:{name:" Faculty Cafteria"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995981,22.60293]},properties:{name:" C.Health.Center"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.993824,22.604854]},properties:{name:" Stu. Dormitories"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995238,22.606518]},properties:{name:" Lychee Hill"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.996732,22.606278]},properties:{name:" Chuang Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998372,22.606102]},properties:{name:" Hui Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997473,22.610667]},properties:{name:" Joy Highland"}}]},bus_marker_arr:[],map:[],time_difference:0,timer:{}}),async created(){const e=await Fa.get("https://bus.sustcra.com/geojson/sustech_bldg.json");this.bldg_geojson=e.data;const t=await Fa.get("https://bus.sustcra.com/geojson/sustech_gate.json");this.gate_geojson=t.data,console.log("Fetch geojson of sustech complete")},methods:{async fetch_bus(){const e=await Fa.get("https://bus.sustcra.com/api/v2/monitor_osm/");this.bus_location_data_api=e.data;const t=new Date;console.log("bus location data fetched at "+parseInt(t.getTime()/1e3)),typeof this.bus_location_data_api[0].time_mt<"u"&&(this.time_difference=parseInt(t.getTime()/1e3-this.bus_location_data_api[0].time_mt),console.log("The clock drift is "+this.time_difference+" seconds")),this.update_location()},update_location:function(){this.display_data=[],this.bus_marker_arr.forEach(a=>a.remove());let e;for(e=0;e<this.bus_location_data_api.length;e++)if(parseInt(new Date().getTime()/1e3)-this.bus_location_data_api[e].time_mt<300){var t=document.createElement("div");t.className="marker",t.style.backgroundImage="url(https://bus.sustcra.com/img/bus-uphill.png)",t.style.width="28px",t.style.height="28px",t.style.backgroundSize="cover";var r=document.createElement("div");r.className="marker",r.style.backgroundImage="url(https://bus.sustcra.com/img/bus-downhill.png)",r.style.width="28px",r.style.height="28px",r.style.backgroundSize="cover";var n=document.createElement("div");if(n.className="marker",n.style.backgroundImage="url(https://bus.sustcra.com/bus-top-view.png)",n.style.width="35px",n.style.height="35px",n.style.backgroundSize="cover",this.bus_location_data_api[e].route_dir===0)var i=new Ul.Marker(t).setLngLat([this.bus_location_data_api[e].lng,this.bus_location_data_api[e].lat]).setPopup(new Ul.Popup({offset:20}).setHTML('<p class="car-plate">Plate: <b>'+this.bus_location_data_api[e].id+"</b></p><p>Speed: <b>"+this.bus_location_data_api[e].speed+"km/h</b></p><p>Line: <b>"+this.bus_location_data_api[e].route_code+"</b></p>")).addTo(this.map);else var i=new Ul.Marker(r).setLngLat([this.bus_location_data_api[e].lng,this.bus_location_data_api[e].lat]).setPopup(new Ul.Popup({offset:20}).setHTML('<p class="car-plate">Plate: <b>'+this.bus_location_data_api[e].id+"</b></p><p>Speed: <b>"+this.bus_location_data_api[e].speed+"km/h</b></p><p>Line: <b>"+this.bus_location_data_api[e].route_code+"</b></p>")).addTo(this.map);this.bus_marker_arr.push(i)}},async refresh(){await this.fetch_bus()}},async mounted(){const e={lng:113.99373,lat:22.60308,zoom:14},t={bus_location_data:this.bus_location_data,geojson_line_1:this.geojson_line_1,geojson_line_2:this.geojson_line_2},r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,await r&&(console.log("dark mode enabled."),this.map_text_colour="#FFFFFF",this.map_style_url="https://mirrors.sustech.edu.cn/osm-tile/styles/osm-blue/style.json"),this.map=new Ul.Map({container:this.$refs.myMap,style:this.map_style_url,center:[e.lng,e.lat],zoom:e.zoom});var n=new Ul.NavigationControl;this.map.addControl(n,"top-left"),this.map.addControl(new Ul.FullscreenControl,"top-left");class i{onAdd(o){this._map=o,this._container=document.createElement("div"),this._container.className="maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group";const h=this._createButton("interaction-lock");return this._container.appendChild(h),h.click(),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}_createButton(o){const h=window.document.createElement("button");return h.className=o,h.isInteractionEnabled=!0,h.addEventListener("click",d=>{h.isInteractionEnabled=!h.isInteractionEnabled,h.isInteractionEnabled?(this._map.dragPan.enable(),this._map.boxZoom.enable(),this._map.doubleClickZoom.enable(),this._map.touchZoomRotate.enable(),this._map.scrollZoom.enable(),h.innerHTML='<span class="maplibregl-ctrl-icon mapboxgl-ctrl-icon map-interaction-allow" aria-hidden="true"></span>'):(this._map.dragPan.disable(),this._map.boxZoom.disable(),this._map.doubleClickZoom.disable(),this._map.touchZoomRotate.disable(),this._map.scrollZoom.disable(),h.innerHTML='<span class="maplibregl-ctrl-icon mapboxgl-ctrl-icon map-interaction-lock" aria-hidden="true"></span>'),d.preventDefault(),d.stopPropagation()},!1),h}}const a=new i;this.map.addControl(a,"top-left"),this.map.addControl(new Ul.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),this.map.on("load",()=>{this.map.addSource("line1",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_1}}}),this.map.addSource("line2",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_2}}}),this.map.addLayer({id:"line1",type:"line",source:"line1",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f7911d","line-width":3}}),this.map.addLayer({id:"line2",type:"line",source:"line2",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#29abe2","line-width":3}}),this.map.loadImage("https://bus.sustcra.com/station_icon.png",(s,o)=>{if(s)throw s;this.map.addImage("bus-station",o),this.map.loadImage("https://bus.sustcra.com/bldg_icon.png",(h,d)=>{this.map.addImage("bldg-icon",d)}),this.map.loadImage("https://bus.sustcra.com/gate_icon.png",(h,d)=>{this.map.addImage("gate-icon",d)}),this.map.addSource("stations",{type:"geojson",data:this.stations_geojson}),this.map.addSource("bldgs",{type:"geojson",data:this.bldg_geojson}),this.map.addSource("gates",{type:"geojson",data:this.gate_geojson}),this.map.addLayer({id:"bus-station",type:"symbol",source:"stations",layout:{"icon-size":.075,"icon-image":"bus-station","text-field":["get","name"],"text-size":10,"text-offset":[0,1.25],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]}),this.map.addLayer({id:"bldgs",type:"symbol",source:"bldgs",layout:{"icon-size":.02,"icon-image":"bldg-icon","text-field":["get","name"],"text-size":9,"text-offset":[0,.3],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]}),this.map.addLayer({id:"gates",type:"symbol",source:"gates",layout:{"icon-size":.05,"icon-image":"gate-icon","text-field":["get","name"],"text-size":10,"text-offset":[0,.6],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]})})}),await this.fetch_bus(),this.timer=setInterval(()=>{this.refresh()},5e3)},async unmounted(){clearInterval(this.timer)}},qte={class:"map-container",ref:"myMap"};function Wte(e,t,r,n,i,a){return lt(),Rt(Pr,null,[er("div",qte,null,512),er("span",null,"Time drift: "+Or(e.time_difference)+" sec.",1)],64)}const Xte=Ur(Gte,[["render",Wte],["__scopeId","data-v-f41c46bc"],["__file","RealtimeMap.vue"]]),Zte={name:"weather-span",data:()=>({text:""}),mounted(){this.load_weather()},methods:{load_weather(){Fa.get("https://api.sustech.online/weather").then(e=>{this.text=e.data.msg})}}},Yte={id:"weather-container"},Kte={id:"weather"};function Jte(e,t,r,n,i,a){return lt(),Rt("div",Yte,[er("span",Kte,Or(e.text),1)])}const Qte=Ur(Zte,[["render",Jte],["__file","weather-span.vue"]]);var $i=63710088e-1,eC={centimeters:$i*100,centimetres:$i*100,degrees:$i/111325,feet:$i*3.28084,inches:$i*39.37,kilometers:$i/1e3,kilometres:$i/1e3,meters:$i,metres:$i,miles:$i/1609.344,millimeters:$i*1e3,millimetres:$i*1e3,nauticalmiles:$i/1852,radians:1,yards:$i*1.0936},ere={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/$i,yards:1.0936133},T2={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function po(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function tre(e,t,r){switch(e){case"Point":return Ui(t).geometry;case"LineString":return lo(t).geometry;case"Polygon":return tC(t).geometry;case"MultiPoint":return Z6(t).geometry;case"MultiLineString":return X6(t).geometry;case"MultiPolygon":return Y6(t).geometry;default:throw new Error(e+" is invalid")}}function Ui(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!z_(e[0])||!z_(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return po(n,t,r)}function rre(e,t,r){return r===void 0&&(r={}),Zc(e.map(function(n){return Ui(n,t)}),r)}function tC(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var a=i[n];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}var o={type:"Polygon",coordinates:e};return po(o,t,r)}function nre(e,t,r){return r===void 0&&(r={}),Zc(e.map(function(n){return tC(n,t)}),r)}function lo(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return po(n,t,r)}function ire(e,t,r){return r===void 0&&(r={}),Zc(e.map(function(n){return lo(n,t)}),r)}function Zc(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function X6(e,t,r){r===void 0&&(r={});var n={type:"MultiLineString",coordinates:e};return po(n,t,r)}function Z6(e,t,r){r===void 0&&(r={});var n={type:"MultiPoint",coordinates:e};return po(n,t,r)}function Y6(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return po(n,t,r)}function are(e,t,r){r===void 0&&(r={});var n={type:"GeometryCollection",geometries:e};return po(n,t,r)}function ore(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function rC(e,t){t===void 0&&(t="kilometers");var r=eC[t];if(!r)throw new Error(t+" units is invalid");return e*r}function H0(e,t){t===void 0&&(t="kilometers");var r=eC[t];if(!r)throw new Error(t+" units is invalid");return e/r}function sre(e,t){return zm(H0(e,t))}function lre(e){var t=e%360;return t<0&&(t+=360),t}function zm(e){var t=e%(2*Math.PI);return t*180/Math.PI}function uo(e){var t=e%360;return t*Math.PI/180}function ure(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return rC(H0(e,t),r)}function cre(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=T2[t];if(!n)throw new Error("invalid original units");var i=T2[r];if(!i)throw new Error("invalid final units");return e/n*i}function z_(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function nC(e){return!!e&&e.constructor===Object}function hre(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!z_(t))throw new Error("bbox must only contain numbers")})}function fre(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const dre=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:T2,bearingToAzimuth:lre,convertArea:cre,convertLength:ure,degreesToRadians:uo,earthRadius:$i,factors:eC,feature:po,featureCollection:Zc,geometry:tre,geometryCollection:are,isNumber:z_,isObject:nC,lengthToDegrees:sre,lengthToRadians:H0,lineString:lo,lineStrings:ire,multiLineString:X6,multiPoint:Z6,multiPolygon:Y6,point:Ui,points:rre,polygon:tC,polygons:nre,radiansToDegrees:zm,radiansToLength:rC,round:ore,unitsFactors:ere,validateBBox:hre,validateId:fre},Symbol.toStringTag,{value:"Module"}));function ed(e,t,r){if(e!==null)for(var n,i,a,s,o,h,d,m=0,g=0,y,x=e.type,T=x==="FeatureCollection",M=x==="Feature",P=T?e.features.length:1,I=0;I<P;I++){d=T?e.features[I].geometry:M?e.geometry:e,y=d?d.type==="GeometryCollection":!1,o=y?d.geometries.length:1;for(var D=0;D<o;D++){var R=0,B=0;if(s=y?d.geometries[D]:d,s!==null){h=s.coordinates;var H=s.type;switch(m=r&&(H==="Polygon"||H==="MultiPolygon")?1:0,H){case null:break;case"Point":if(t(h,g,I,R,B)===!1)return!1;g++,R++;break;case"LineString":case"MultiPoint":for(n=0;n<h.length;n++){if(t(h[n],g,I,R,B)===!1)return!1;g++,H==="MultiPoint"&&R++}H==="LineString"&&R++;break;case"Polygon":case"MultiLineString":for(n=0;n<h.length;n++){for(i=0;i<h[n].length-m;i++){if(t(h[n][i],g,I,R,B)===!1)return!1;g++}H==="MultiLineString"&&R++,H==="Polygon"&&B++}H==="Polygon"&&R++;break;case"MultiPolygon":for(n=0;n<h.length;n++){for(B=0,i=0;i<h[n].length;i++){for(a=0;a<h[n][i].length-m;a++){if(t(h[n][i][a],g,I,R,B)===!1)return!1;g++}B++}R++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(ed(s.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pre(e,t,r,n){var i=r;return ed(e,function(a,s,o,h,d){s===0&&r===void 0?i=a:i=t(i,a,s,o,h,d)},n),i}function K6(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function mre(e,t,r){var n=r;return K6(e,function(i,a){a===0&&r===void 0?n=i:n=t(n,i,a)}),n}function Bm(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function vre(e,t,r){var n=r;return Bm(e,function(i,a){a===0&&r===void 0?n=i:n=t(n,i,a)}),n}function gre(e){var t=[];return ed(e,function(r){t.push(r)}),t}function iC(e,t){var r,n,i,a,s,o,h,d,m,g,y=0,x=e.type==="FeatureCollection",T=e.type==="Feature",M=x?e.features.length:1;for(r=0;r<M;r++){for(o=x?e.features[r].geometry:T?e.geometry:e,d=x?e.features[r].properties:T?e.properties:{},m=x?e.features[r].bbox:T?e.bbox:void 0,g=x?e.features[r].id:T?e.id:void 0,h=o?o.type==="GeometryCollection":!1,s=h?o.geometries.length:1,i=0;i<s;i++){if(a=h?o.geometries[i]:o,a===null){if(t(null,y,d,m,g)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,y,d,m,g)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<a.geometries.length;n++)if(t(a.geometries[n],y,d,m,g)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function yre(e,t,r){var n=r;return iC(e,function(i,a,s,o,h){a===0&&r===void 0?n=i:n=t(n,i,a,s,o,h)}),n}function td(e,t){iC(e,function(r,n,i,a,s){var o=r===null?null:r.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(po(r,i,{bbox:a,id:s}),n,0)===!1?!1:void 0}var h;switch(o){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon";break}for(var d=0;d<r.coordinates.length;d++){var m=r.coordinates[d],g={type:h,coordinates:m};if(t(po(g,i),n,d)===!1)return!1}})}function _re(e,t,r){var n=r;return td(e,function(i,a,s){a===0&&s===0&&r===void 0?n=i:n=t(n,i,a,s)}),n}function J6(e,t){td(e,function(r,n,i){var a=0;if(r.geometry){var s=r.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var o,h=0,d=0,m=0;if(ed(r,function(g,y,x,T,M){if(o===void 0||n>h||T>d||M>m){o=g,h=n,d=T,m=M,a=0;return}var P=lo([o,g],r.properties);if(t(P,n,i,M,a)===!1)return!1;a++,o=g})===!1)return!1}}})}function Q6(e,t,r){var n=r,i=!1;return J6(e,function(a,s,o,h,d){i===!1&&r===void 0?n=a:n=t(n,a,s,o,h,d),i=!0}),n}function eO(e,t){if(!e)throw new Error("geojson is required");td(e,function(r,n,i){if(r.geometry!==null){var a=r.geometry.type,s=r.geometry.coordinates;switch(a){case"LineString":if(t(r,n,i,0,0)===!1)return!1;break;case"Polygon":for(var o=0;o<s.length;o++)if(t(lo(s[o],r.properties),n,i,o)===!1)return!1;break}}})}function xre(e,t,r){var n=r;return eO(e,function(i,a,s,o){a===0&&r===void 0?n=i:n=t(n,i,a,s,o)}),n}function bre(e,t){if(t=t||{},!nC(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,a=t.segmentIndex||0,s=t.properties,o;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,o=e.features[r].geometry;break;case"Feature":s=s||e.properties,o=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=e;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var h=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=h.length+a-1),lo([h[a],h[a+1]],s,t);case"Polygon":return i<0&&(i=h.length+i),a<0&&(a=h[i].length+a-1),lo([h[i][a],h[i][a+1]],s,t);case"MultiLineString":return n<0&&(n=h.length+n),a<0&&(a=h[n].length+a-1),lo([h[n][a],h[n][a+1]],s,t);case"MultiPolygon":return n<0&&(n=h.length+n),i<0&&(i=h[n].length+i),a<0&&(a=h[n][i].length-a-1),lo([h[n][i][a],h[n][i][a+1]],s,t)}throw new Error("geojson is invalid")}function wre(e,t){if(t=t||{},!nC(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,a=t.coordIndex||0,s=t.properties,o;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,o=e.features[r].geometry;break;case"Feature":s=s||e.properties,o=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=e;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var h=o.coordinates;switch(o.type){case"Point":return Ui(h,s,t);case"MultiPoint":return n<0&&(n=h.length+n),Ui(h[n],s,t);case"LineString":return a<0&&(a=h.length+a),Ui(h[a],s,t);case"Polygon":return i<0&&(i=h.length+i),a<0&&(a=h[i].length+a),Ui(h[i][a],s,t);case"MultiLineString":return n<0&&(n=h.length+n),a<0&&(a=h[n].length+a),Ui(h[n][a],s,t);case"MultiPolygon":return n<0&&(n=h.length+n),i<0&&(i=h[n].length+i),a<0&&(a=h[n][i].length-a),Ui(h[n][i][a],s,t)}throw new Error("geojson is invalid")}const Sre=Object.freeze(Object.defineProperty({__proto__:null,coordAll:gre,coordEach:ed,coordReduce:pre,featureEach:Bm,featureReduce:vre,findPoint:wre,findSegment:bre,flattenEach:td,flattenReduce:_re,geomEach:iC,geomReduce:yre,lineEach:eO,lineReduce:xre,propEach:K6,propReduce:mre,segmentEach:J6,segmentReduce:Q6},Symbol.toStringTag,{value:"Module"}));function C2(e){var t=[1/0,1/0,-1/0,-1/0];return ed(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}C2.default=C2;const Tre=Object.freeze(Object.defineProperty({__proto__:null,default:C2},Symbol.toStringTag,{value:"Module"}));function Fm(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $f(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Pc(e,t,r){r===void 0&&(r={});var n=Fm(e),i=Fm(t),a=uo(i[1]-n[1]),s=uo(i[0]-n[0]),o=uo(n[1]),h=uo(i[1]),d=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(o)*Math.cos(h);return rC(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),r.units)}function Cre(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return tO(e);case"FeatureCollection":return Ere(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return aC(e);default:throw new Error("unknown GeoJSON type")}}function tO(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=rO(e.properties),t.geometry=aC(e.geometry),t}function rO(e){var t={};return e&&Object.keys(e).forEach(function(r){var n=e[r];typeof n=="object"?n===null?t[r]=null:Array.isArray(n)?t[r]=n.map(function(i){return i}):t[r]=rO(n):t[r]=n}),t}function Ere(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(r){return tO(r)}),t}function aC(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(r){return aC(r)}),t):(t.coordinates=nO(e.coordinates),t)}function nO(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(r){return nO(r)})}function XP(e,t,r,n){n===void 0&&(n={});var i=Fm(e),a=uo(i[0]),s=uo(i[1]),o=uo(r),h=H0(t,n.units),d=Math.asin(Math.sin(s)*Math.cos(h)+Math.cos(s)*Math.sin(h)*Math.cos(o)),m=a+Math.atan2(Math.sin(o)*Math.sin(h)*Math.cos(s),Math.cos(h)-Math.sin(s)*Math.sin(d)),g=zm(m),y=zm(d);return Ui([g,y],n.properties)}function iO(e,t,r){if(r===void 0&&(r={}),r.final===!0)return Are(e,t);var n=Fm(e),i=Fm(t),a=uo(n[0]),s=uo(i[0]),o=uo(n[1]),h=uo(i[1]),d=Math.sin(s-a)*Math.cos(h),m=Math.cos(o)*Math.sin(h)-Math.sin(o)*Math.cos(h)*Math.cos(s-a);return zm(Math.atan2(d,m))}function Are(e,t){var r=iO(t,e);return r=(r+180)%360,r}function ZP(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var r,n=1/0,i=0;return Bm(t,function(a,s){var o=Pc(e,a);o<n&&(i=s,n=o)}),r=Cre(t.features[i]),r.properties.featureIndex=i,r.properties.distanceToPoint=n,r}function YP(e){if(!e)throw new Error("geojson is required");var t=[];return td(e,function(r){Mre(r,t)}),Zc(t)}function Mre(e,t){var r=[],n=e.geometry;if(n!==null){switch(n.type){case"Polygon":r=$f(n);break;case"LineString":r=[$f(n)]}r.forEach(function(i){var a=Ire(i,e.properties);a.forEach(function(s){s.id=t.length,t.push(s)})})}}function Ire(e,t){var r=[];return e.reduce(function(n,i){var a=lo([n,i],t);return a.bbox=Pre(n,i),r.push(a),i}),r}function Pre(e,t){var r=e[0],n=e[1],i=t[0],a=t[1],s=r<i?r:i,o=n<a?n:a,h=r>i?r:i,d=n>a?n:a;return[s,o,h,d]}var oC={exports:{}},aO={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(z4,function(){function r(D,R,B,H,V){(function q(j,te,ne,ce,le){for(;ce>ne;){if(ce-ne>600){var de=ce-ne+1,ae=te-ne+1,Se=Math.log(de),ve=.5*Math.exp(2*Se/3),Ye=.5*Math.sqrt(Se*ve*(de-ve)/de)*(ae-de/2<0?-1:1),Qe=Math.max(ne,Math.floor(te-ae*ve/de+Ye)),Ct=Math.min(ce,Math.floor(te+(de-ae)*ve/de+Ye));q(j,te,Qe,Ct,le)}var St=j[te],Kt=ne,Ft=ce;for(n(j,ne,te),le(j[ce],St)>0&&n(j,ne,ce);Kt<Ft;){for(n(j,Kt,Ft),Kt++,Ft--;le(j[Kt],St)<0;)Kt++;for(;le(j[Ft],St)>0;)Ft--}le(j[ne],St)===0?n(j,ne,Ft):n(j,++Ft,ce),Ft<=te&&(ne=Ft+1),te<=Ft&&(ce=Ft-1)}})(D,R,B||0,H||D.length-1,V||i)}function n(D,R,B){var H=D[R];D[R]=D[B],D[B]=H}function i(D,R){return D<R?-1:D>R?1:0}var a=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(D,R,B){if(!B)return R.indexOf(D);for(var H=0;H<R.length;H++)if(B(D,R[H]))return H;return-1}function o(D,R){h(D,0,D.children.length,R,D)}function h(D,R,B,H,V){V||(V=P(null)),V.minX=1/0,V.minY=1/0,V.maxX=-1/0,V.maxY=-1/0;for(var q=R;q<B;q++){var j=D.children[q];d(V,D.leaf?H(j):j)}return V}function d(D,R){return D.minX=Math.min(D.minX,R.minX),D.minY=Math.min(D.minY,R.minY),D.maxX=Math.max(D.maxX,R.maxX),D.maxY=Math.max(D.maxY,R.maxY),D}function m(D,R){return D.minX-R.minX}function g(D,R){return D.minY-R.minY}function y(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function x(D){return D.maxX-D.minX+(D.maxY-D.minY)}function T(D,R){return D.minX<=R.minX&&D.minY<=R.minY&&R.maxX<=D.maxX&&R.maxY<=D.maxY}function M(D,R){return R.minX<=D.maxX&&R.minY<=D.maxY&&R.maxX>=D.minX&&R.maxY>=D.minY}function P(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function I(D,R,B,H,V){for(var q=[R,B];q.length;)if(!((B=q.pop())-(R=q.pop())<=H)){var j=R+Math.ceil((B-R)/H/2)*H;r(D,j,R,B,V),q.push(R,j,j,B)}}return a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(D){var R=this.data,B=[];if(!M(D,R))return B;for(var H=this.toBBox,V=[];R;){for(var q=0;q<R.children.length;q++){var j=R.children[q],te=R.leaf?H(j):j;M(D,te)&&(R.leaf?B.push(j):T(D,te)?this._all(j,B):V.push(j))}R=V.pop()}return B},a.prototype.collides=function(D){var R=this.data;if(!M(D,R))return!1;for(var B=[];R;){for(var H=0;H<R.children.length;H++){var V=R.children[H],q=R.leaf?this.toBBox(V):V;if(M(D,q)){if(R.leaf||T(D,q))return!0;B.push(V)}}R=B.pop()}return!1},a.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var R=0;R<D.length;R++)this.insert(D[R]);return this}var B=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length)if(this.data.height===B.height)this._splitRoot(this.data,B);else{if(this.data.height<B.height){var H=this.data;this.data=B,B=H}this._insert(B,this.data.height-B.height-1,!0)}else this.data=B;return this},a.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},a.prototype.clear=function(){return this.data=P([]),this},a.prototype.remove=function(D,R){if(!D)return this;for(var B,H,V,q=this.data,j=this.toBBox(D),te=[],ne=[];q||te.length;){if(q||(q=te.pop(),H=te[te.length-1],B=ne.pop(),V=!0),q.leaf){var ce=s(D,q.children,R);if(ce!==-1)return q.children.splice(ce,1),te.push(q),this._condense(te),this}V||q.leaf||!T(q,j)?H?(B++,q=H.children[B],V=!1):q=null:(te.push(q),ne.push(B),B=0,H=q,q=q.children[0])}return this},a.prototype.toBBox=function(D){return D},a.prototype.compareMinX=function(D,R){return D.minX-R.minX},a.prototype.compareMinY=function(D,R){return D.minY-R.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(D){return this.data=D,this},a.prototype._all=function(D,R){for(var B=[];D;)D.leaf?R.push.apply(R,D.children):B.push.apply(B,D.children),D=B.pop();return R},a.prototype._build=function(D,R,B,H){var V,q=B-R+1,j=this._maxEntries;if(q<=j)return o(V=P(D.slice(R,B+1)),this.toBBox),V;H||(H=Math.ceil(Math.log(q)/Math.log(j)),j=Math.ceil(q/Math.pow(j,H-1))),(V=P([])).leaf=!1,V.height=H;var te=Math.ceil(q/j),ne=te*Math.ceil(Math.sqrt(j));I(D,R,B,ne,this.compareMinX);for(var ce=R;ce<=B;ce+=ne){var le=Math.min(ce+ne-1,B);I(D,ce,le,te,this.compareMinY);for(var de=ce;de<=le;de+=te){var ae=Math.min(de+te-1,le);V.children.push(this._build(D,de,ae,H-1))}}return o(V,this.toBBox),V},a.prototype._chooseSubtree=function(D,R,B,H){for(;H.push(R),!R.leaf&&H.length-1!==B;){for(var V=1/0,q=1/0,j=void 0,te=0;te<R.children.length;te++){var ne=R.children[te],ce=y(ne),le=(de=D,ae=ne,(Math.max(ae.maxX,de.maxX)-Math.min(ae.minX,de.minX))*(Math.max(ae.maxY,de.maxY)-Math.min(ae.minY,de.minY))-ce);le<q?(q=le,V=ce<V?ce:V,j=ne):le===q&&ce<V&&(V=ce,j=ne)}R=j||R.children[0]}var de,ae;return R},a.prototype._insert=function(D,R,B){var H=B?D:this.toBBox(D),V=[],q=this._chooseSubtree(H,this.data,R,V);for(q.children.push(D),d(q,H);R>=0&&V[R].children.length>this._maxEntries;)this._split(V,R),R--;this._adjustParentBBoxes(H,V,R)},a.prototype._split=function(D,R){var B=D[R],H=B.children.length,V=this._minEntries;this._chooseSplitAxis(B,V,H);var q=this._chooseSplitIndex(B,V,H),j=P(B.children.splice(q,B.children.length-q));j.height=B.height,j.leaf=B.leaf,o(B,this.toBBox),o(j,this.toBBox),R?D[R-1].children.push(j):this._splitRoot(B,j)},a.prototype._splitRoot=function(D,R){this.data=P([D,R]),this.data.height=D.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(D,R,B){for(var H,V,q,j,te,ne,ce,le=1/0,de=1/0,ae=R;ae<=B-R;ae++){var Se=h(D,0,ae,this.toBBox),ve=h(D,ae,B,this.toBBox),Ye=(V=Se,q=ve,j=void 0,te=void 0,ne=void 0,ce=void 0,j=Math.max(V.minX,q.minX),te=Math.max(V.minY,q.minY),ne=Math.min(V.maxX,q.maxX),ce=Math.min(V.maxY,q.maxY),Math.max(0,ne-j)*Math.max(0,ce-te)),Qe=y(Se)+y(ve);Ye<le?(le=Ye,H=ae,de=Qe<de?Qe:de):Ye===le&&Qe<de&&(de=Qe,H=ae)}return H||B-R},a.prototype._chooseSplitAxis=function(D,R,B){var H=D.leaf?this.compareMinX:m,V=D.leaf?this.compareMinY:g;this._allDistMargin(D,R,B,H)<this._allDistMargin(D,R,B,V)&&D.children.sort(H)},a.prototype._allDistMargin=function(D,R,B,H){D.children.sort(H);for(var V=this.toBBox,q=h(D,0,R,V),j=h(D,B-R,B,V),te=x(q)+x(j),ne=R;ne<B-R;ne++){var ce=D.children[ne];d(q,D.leaf?V(ce):ce),te+=x(q)}for(var le=B-R-1;le>=R;le--){var de=D.children[le];d(j,D.leaf?V(de):de),te+=x(j)}return te},a.prototype._adjustParentBBoxes=function(D,R,B){for(var H=B;H>=0;H--)d(R[H],D)},a.prototype._condense=function(D){for(var R=D.length-1,B=void 0;R>=0;R--)D[R].children.length===0?R>0?(B=D[R-1].children).splice(B.indexOf(D[R]),1):this.clear():o(D[R],this.toBBox)},a})})(aO);var Dre=aO.exports;const Lre=pT(dre),kre=pT(Sre),Rre=pT(Tre);var ts=Dre,oO=Lre,sO=kre,Uh=Rre.default,Ore=sO.featureEach;sO.coordEach;oO.polygon;var KP=oO.featureCollection;function lO(e){var t=new ts(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Uh(r),ts.prototype.insert.call(this,r)},t.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Uh(i),n.push(i)}):Ore(r,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Uh(i),n.push(i)}),ts.prototype.load.call(this,n)},t.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Uh(r),ts.prototype.remove.call(this,r,n)},t.clear=function(){return ts.prototype.clear.call(this)},t.search=function(r){var n=ts.prototype.search.call(this,this.toBBox(r));return KP(n)},t.collides=function(r){return ts.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=ts.prototype.all.call(this);return KP(r)},t.toJSON=function(){return ts.prototype.toJSON.call(this)},t.fromJSON=function(r){return ts.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=Uh(r);else if(r.type==="FeatureCollection")n=Uh(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}oC.exports=lO;oC.exports.default=lO;var zre=oC.exports;const Bre=dT(zre);function Fre(e,t){var r={},n=[];if(e.type==="LineString"&&(e=po(e)),t.type==="LineString"&&(t=po(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var i=JP(e,t);return i&&n.push(i),Zc(n)}var a=Bre();return a.load(YP(t)),Bm(YP(e),function(s){Bm(a.search(s),function(o){var h=JP(s,o);if(h){var d=$f(h).join(",");r[d]||(r[d]=!0,n.push(h))}})}),Zc(n)}function JP(e,t){var r=$f(e),n=$f(t);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],a=r[0][1],s=r[1][0],o=r[1][1],h=n[0][0],d=n[0][1],m=n[1][0],g=n[1][1],y=(g-d)*(s-i)-(m-h)*(o-a),x=(m-h)*(a-d)-(g-d)*(i-h),T=(s-i)*(a-d)-(o-a)*(i-h);if(y===0)return null;var M=x/y,P=T/y;if(M>=0&&M<=1&&P>=0&&P<=1){var I=i+M*(s-i),D=a+M*(o-a);return Ui([I,D])}return null}function Hs(e,t,r){r===void 0&&(r={});var n=Ui([1/0,1/0],{dist:1/0}),i=0;return td(e,function(a){for(var s=$f(a),o=0;o<s.length-1;o++){var h=Ui(s[o]);h.properties.dist=Pc(t,h,r);var d=Ui(s[o+1]);d.properties.dist=Pc(t,d,r);var m=Pc(h,d,r),g=Math.max(h.properties.dist,d.properties.dist),y=iO(h,d),x=XP(t,g,y+90,r),T=XP(t,g,y-90,r),M=Fre(lo([x.geometry.coordinates,T.geometry.coordinates]),lo([h.geometry.coordinates,d.geometry.coordinates])),P=null;M.features.length>0&&(P=M.features[0],P.properties.dist=Pc(t,P,r),P.properties.location=i+Pc(h,P,r)),h.properties.dist<n.properties.dist&&(n=h,n.properties.index=o,n.properties.location=i),d.properties.dist<n.properties.dist&&(n=d,n.properties.index=o+1,n.properties.location=i+m),P&&P.properties.dist<n.properties.dist&&(n=P,n.properties.index=o),i+=m}}),n}function js(e,t){return t===void 0&&(t={}),Q6(e,function(r,n){var i=n.geometry.coordinates;return r+Pc(i[0],i[1],t)},0)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var E2=function(e,t){return E2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},E2(e,t)};function Lt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");E2(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var $re=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),Nre=function(){function e(){this.browser=new $re,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Sc=new Nre;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Sc.wxa=!0,Sc.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Sc.worker=!0:typeof navigator>"u"?(Sc.node=!0,Sc.svgSupported=!0):Vre(navigator.userAgent,Sc);function Vre(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),a&&(r.edge=!0,r.version=a[1],r.newEdge=+a[1].split(".")[0]>18),s&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var o=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in o||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Er=Sc;var sC=12,uO="sans-serif",du=sC+"px "+uO,Ure=20,Hre=100,jre="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Gre(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-Ure)/Hre;t[n]=i}return t}var qre=Gre(jre),vv={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=vv.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||du),e.measureText(r);r=r||"",n=n||du;var a=/(\d+)px/.exec(n),s=a&&+a[1]||sC,o=0;if(n.indexOf("mono")>=0)o=s*r.length;else for(var h=0;h<r.length;h++){var d=qre[r[h]];o+=d==null?s:d*s}return{width:o}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},cO=rd(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),hO=rd(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),gv=Object.prototype.toString,j0=Array.prototype,Wre=j0.forEach,Xre=j0.filter,lC=j0.slice,Zre=j0.map,QP=(function(){}).constructor,ey=QP?QP.prototype:null,uC="__proto__",Yre=2311;function fO(){return Yre++}function dO(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function zr(e){if(e==null||typeof e!="object")return e;var t=e,r=gv.call(e);if(r==="[object Array]"){if(!nm(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=zr(e[n])}}else if(hO[r]){if(!nm(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!cO[r]&&!nm(e)&&!B_(e)){t={};for(var s in e)e.hasOwnProperty(s)&&s!==uC&&(t[s]=zr(e[s]))}return t}function An(e,t,r){if(!rr(t)||!rr(e))return r?zr(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==uC){var i=e[n],a=t[n];rr(a)&&rr(i)&&!Vt(a)&&!Vt(i)&&!B_(a)&&!B_(i)&&!eD(a)&&!eD(i)&&!nm(a)&&!nm(i)?An(i,a,r):(r||!(n in e))&&(e[n]=zr(t[n]))}return e}function Kre(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=An(r,e[n],t);return r}function Tt(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==uC&&(e[r]=t[r]);return e}function _n(e,t,r){for(var n=Gr(t),i=0;i<n.length;i++){var a=n[i];(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}return e}function an(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function Jre(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Ho(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var a=n[i];a!=="constructor"&&(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}else _n(e,t,r)}function Ta(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function Ee(e,t,r){if(e&&t)if(e.forEach&&e.forEach===Wre)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(r,e[a],a,e)}function Jt(e,t,r){if(!e)return[];if(!t)return hC(e);if(e.map&&e.map===Zre)return e.map(t,r);for(var n=[],i=0,a=e.length;i<a;i++)n.push(t.call(r,e[i],i,e));return n}function rd(e,t,r,n){if(e&&t){for(var i=0,a=e.length;i<a;i++)r=t.call(n,r,e[i],i,e);return r}}function Hi(e,t,r){if(!e)return[];if(!t)return hC(e);if(e.filter&&e.filter===Xre)return e.filter(t,r);for(var n=[],i=0,a=e.length;i<a;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function Gr(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function Qre(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(lC.call(arguments)))}}var On=ey&&cr(ey.bind)?ey.call.bind(ey.bind):Qre;function gi(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(lC.call(arguments)))}}function Vt(e){return Array.isArray?Array.isArray(e):gv.call(e)==="[object Array]"}function cr(e){return typeof e=="function"}function Yt(e){return typeof e=="string"}function A2(e){return gv.call(e)==="[object String]"}function zn(e){return typeof e=="number"}function rr(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function eD(e){return!!cO[gv.call(e)]}function Ua(e){return!!hO[gv.call(e)]}function B_(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function cC(e){return e.colorStops!=null}function F_(e){return e!==e}function Nf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function Ar(e,t){return e??t}function Jy(e,t,r){return e??t??r}function hC(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return lC.apply(e,t)}function pO(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function No(e,t){if(!e)throw new Error(t)}function fs(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var mO="__ec_primitive__";function M2(e){e[mO]=!0}function nm(e){return e[mO]}var ene=function(){function e(){this.data={}}return e.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,r){return this.data[t]=r,this},e.prototype.keys=function(){return Gr(this.data)},e.prototype.forEach=function(t){var r=this.data;for(var n in r)r.hasOwnProperty(n)&&t(r[n],n)},e}(),vO=typeof Map=="function";function tne(){return vO?new Map:new ene}var rne=function(){function e(t){var r=Vt(t);this.data=tne();var n=this;t instanceof e?t.each(i):t&&Ee(t,i);function i(a,s){r?n.set(a,s):n.set(s,a)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,r){return this.data.set(t,r),r},e.prototype.each=function(t,r){this.data.forEach(function(n,i){t.call(r,n,i)})},e.prototype.keys=function(){var t=this.data.keys();return vO?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function Mr(e){return new rne(e)}function I2(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function G0(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&Tt(r,t),r}function Vf(e,t){return e.hasOwnProperty(t)}function la(){}var Qy=180/Math.PI;function nd(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function nne(e){return[e[0],e[1]]}function tD(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function gO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function ine(e){return Math.sqrt(ane(e))}function ane(e){return e[0]*e[0]+e[1]*e[1]}function hb(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function fC(e,t){var r=ine(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function P2(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var uf=P2;function one(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var xf=one;function ho(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function cf(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function hf(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Hh=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),sne=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Hh(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,a=n-this._x,s=i-this._y;this._x=n,this._y=i,r.drift(a,s,t),this.handler.dispatchToElement(new Hh(r,t),"drag",t.event);var o=this.handler.findHover(n,i,r).target,h=this._dropTarget;this._dropTarget=o,r!==o&&(h&&o!==h&&this.handler.dispatchToElement(new Hh(h,t),"dragleave",t.event),o&&o!==h&&this.handler.dispatchToElement(new Hh(o,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Hh(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Hh(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const lne=sne;var une=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var s=this._$eventProcessor;r!=null&&s&&s.normalizeQuery&&(r=s.normalizeQuery(r)),a[t]||(a[t]=[]);for(var o=0;o<a[t].length;o++)if(a[t][o].h===n)return this;var h={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},d=a[t].length-1,m=a[t][d];return m&&m.callAtLast?a[t].splice(d,0,h):a[t].push(h),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],a=0,s=n[t].length;a<s;a++)n[t][a].h!==r&&i.push(n[t][a]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var s=r.length,o=i.length,h=0;h<o;h++){var d=i[h];if(!(a&&a.filter&&d.query!=null&&!a.filter(t,d.query)))switch(s){case 0:d.h.call(d.ctx);break;case 1:d.h.call(d.ctx,r[0]);break;case 2:d.h.call(d.ctx,r[0],r[1]);break;default:d.h.apply(d.ctx,r);break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var s=r.length,o=r[s-1],h=i.length,d=0;d<h;d++){var m=i[d];if(!(a&&a.filter&&m.query!=null&&!a.filter(t,m.query)))switch(s){case 0:m.h.call(o);break;case 1:m.h.call(o,r[0]);break;case 2:m.h.call(o,r[0],r[1]);break;default:m.h.apply(o,r.slice(1,s-1));break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e}();const dl=une;var cne=Math.log(2);function D2(e,t,r,n,i,a){var s=n+"-"+i,o=e.length;if(a.hasOwnProperty(s))return a[s];if(t===1){var h=Math.round(Math.log((1<<o)-1&~i)/cne);return e[r][h]}for(var d=n|1<<r,m=r+1;n&1<<m;)m++;for(var g=0,y=0,x=0;y<o;y++){var T=1<<y;T&i||(g+=(x%2?-1:1)*e[r][y]*D2(e,t-1,m,d,i|T,a),x++)}return a[s]=g,g}function rD(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=D2(r,8,0,0,0,n);if(i!==0){for(var a=[],s=0;s<8;s++)for(var o=0;o<8;o++)a[o]==null&&(a[o]=0),a[o]+=((s+o)%2?-1:1)*D2(r,7,s===0?1:0,1<<s,1<<o,n)/i*t[s];return function(h,d,m){var g=d*a[6]+m*a[7]+1;h[0]=(d*a[0]+m*a[1]+a[2])/g,h[1]=(d*a[3]+m*a[4]+a[5])/g}}}var nD="___zrEVENTSAVED",fb=[];function hne(e,t,r,n,i){return L2(fb,t,n,i,!0)&&L2(e,r,fb[0],fb[1])}function L2(e,t,r,n,i){if(t.getBoundingClientRect&&Er.domSupported&&!yO(t)){var a=t[nD]||(t[nD]={}),s=fne(t,a),o=dne(s,a,i);if(o)return o(e,r,n),!0}return!1}function fne(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],a=0;a<4;a++){var s=document.createElement("div"),o=s.style,h=a%2,d=(a>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[h]+":0",i[d]+":0",n[1-h]+":auto",i[1-d]+":auto",""].join("!important;"),e.appendChild(s),r.push(s)}return r}function dne(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],a=t.srcCoords,s=[],o=[],h=!0,d=0;d<4;d++){var m=e[d].getBoundingClientRect(),g=2*d,y=m.left,x=m.top;s.push(y,x),h=h&&a&&y===a[g]&&x===a[g+1],o.push(e[d].offsetLeft,e[d].offsetTop)}return h&&i?i:(t.srcCoords=s,t[n]=r?rD(o,s):rD(s,o))}function yO(e){return e.nodeName.toUpperCase()==="CANVAS"}var pne=/([&<>"'])/g,mne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function $a(e){return e==null?"":(e+"").replace(pne,function(t,r){return mne[r]})}var vne=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,db=[],gne=Er.browser.firefox&&+Er.browser.version.split(".")[0]<39;function k2(e,t,r,n){return r=r||{},n?iD(e,t,r):gne&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):iD(e,t,r),r}function iD(e,t,r){if(Er.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(yO(e)){var a=e.getBoundingClientRect();r.zrX=n-a.left,r.zrY=i-a.top;return}else if(L2(db,e,n,i)){r.zrX=db[0],r.zrY=db[1];return}}r.zrX=r.zrY=0}function dC(e){return e||window.event}function to(e,t,r){if(t=dC(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var s=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];s&&k2(e,s,t,r)}else{k2(e,t,t,r);var a=yne(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var o=t.button;return t.which==null&&o!==void 0&&vne.test(t.type)&&(t.which=o&1?1:o&2?3:o&4?2:0),t}function yne(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),a=n>0?-1:n<0?1:r>0?-1:1;return 3*i*a}function _ne(e,t,r,n){e.addEventListener(t,r,n)}function xne(e,t,r,n){e.removeEventListener(t,r,n)}var _O=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0},bne=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(i){for(var a={points:[],touches:[],target:r,event:t},s=0,o=i.length;s<o;s++){var h=i[s],d=k2(n,h,{});a.points.push([d.zrX,d.zrY]),a.touches.push(h)}this._track.push(a)}},e.prototype._recognize=function(t){for(var r in pb)if(pb.hasOwnProperty(r)){var n=pb[r](this._track,t);if(n)return n}},e}();function aD(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function wne(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var pb={pinch:function(e,t){var r=e.length;if(r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var a=aD(n)/aD(i);!isFinite(a)&&(a=1),t.pinchScale=a;var s=wne(n);return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}};function $m(){return[1,0,0,1,0,0]}function pC(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Sne(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function bf(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],a=t[0]*r[2]+t[2]*r[3],s=t[1]*r[2]+t[3]*r[3],o=t[0]*r[4]+t[2]*r[5]+t[4],h=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=a,e[3]=s,e[4]=o,e[5]=h,e}function R2(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function mC(e,t,r){var n=t[0],i=t[2],a=t[4],s=t[1],o=t[3],h=t[5],d=Math.sin(r),m=Math.cos(r);return e[0]=n*m+s*d,e[1]=-n*d+s*m,e[2]=i*m+o*d,e[3]=-i*d+m*o,e[4]=m*a+d*h,e[5]=m*h-d*a,e}function Tne(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function vC(e,t){var r=t[0],n=t[2],i=t[4],a=t[1],s=t[3],o=t[5],h=r*s-a*n;return h?(h=1/h,e[0]=s*h,e[1]=-a*h,e[2]=-n*h,e[3]=r*h,e[4]=(n*o-s*i)*h,e[5]=(a*i-r*o)*h,e):null}var Cne=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var a=1-i;t.x=a*r.x+i*n.x,t.y=a*r.y+i*n.y},e}();const pn=Cne;var ty=Math.min,ry=Math.max,Ju=new pn,Qu=new pn,ec=new pn,tc=new pn,dp=new pn,pp=new pn,Ene=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=ty(t.x,this.x),n=ty(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=ry(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=ry(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,a=$m();return R2(a,a,[-r.x,-r.y]),Tne(a,a,[n,i]),R2(a,a,[t.x,t.y]),a},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,a=n.x+n.width,s=n.y,o=n.y+n.height,h=t.x,d=t.x+t.width,m=t.y,g=t.y+t.height,y=!(a<h||d<i||o<m||g<s);if(r){var x=1/0,T=0,M=Math.abs(a-h),P=Math.abs(d-i),I=Math.abs(o-m),D=Math.abs(g-s),R=Math.min(M,P),B=Math.min(I,D);a<h||d<i?R>T&&(T=R,M<P?pn.set(pp,-M,0):pn.set(pp,P,0)):R<x&&(x=R,M<P?pn.set(dp,M,0):pn.set(dp,-P,0)),o<m||g<s?B>T&&(T=B,I<D?pn.set(pp,0,-I):pn.set(pp,0,D)):R<x&&(x=R,I<D?pn.set(dp,0,I):pn.set(dp,0,-D))}return r&&pn.copy(r,y?dp:pp),y},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],a=n[3],s=n[4],o=n[5];t.x=r.x*i+s,t.y=r.y*a+o,t.width=r.width*i,t.height=r.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Ju.x=ec.x=r.x,Ju.y=tc.y=r.y,Qu.x=tc.x=r.x+r.width,Qu.y=ec.y=r.y+r.height,Ju.transform(n),tc.transform(n),Qu.transform(n),ec.transform(n),t.x=ty(Ju.x,Qu.x,ec.x,tc.x),t.y=ty(Ju.y,Qu.y,ec.y,tc.y);var h=ry(Ju.x,Qu.x,ec.x,tc.x),d=ry(Ju.y,Qu.y,ec.y,tc.y);t.width=h-t.x,t.height=d-t.y},e}();const sn=Ene;var xO="silent";function Ane(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:Mne}}function Mne(){_O(this.event)}var Ine=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(dl),mp=function(){function e(t,r){this.x=t,this.y=r}return e}(),Pne=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],mb=new sn(0,0,0,0),bO=function(e){Lt(t,e);function t(r,n,i,a,s){var o=e.call(this)||this;return o._hovered=new mp(0,0),o.storage=r,o.painter=n,o.painterRoot=a,o._pointerSize=s,i=i||new Ine,o.proxy=null,o.setHandlerProxy(i),o._draggingMgr=new lne(o),o}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(Ee(Pne,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,a=wO(this,n,i),s=this._hovered,o=s.target;o&&!o.__zr&&(s=this.findHover(s.x,s.y),o=s.target);var h=this._hovered=a?new mp(n,i):this.findHover(n,i),d=h.target,m=this.proxy;m.setCursor&&m.setCursor(d?d.cursor:"default"),o&&d!==o&&this.dispatchToElement(s,"mouseout",r),this.dispatchToElement(h,"mousemove",r),d&&d!==o&&this.dispatchToElement(h,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new mp(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var a=r.target;if(!(a&&a.silent)){for(var s="on"+n,o=Ane(n,r,i);a&&(a[s]&&(o.cancelBubble=!!a[s].call(a,o)),a.trigger(n,o),a=a.__hostTarget?a.__hostTarget:a.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(n,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(h){typeof h[s]=="function"&&h[s].call(h,o),h.trigger&&h.trigger(n,o)}))}},t.prototype.findHover=function(r,n,i){var a=this.storage.getDisplayList(),s=new mp(r,n);if(oD(a,s,r,n,i),this._pointerSize&&!s.target){for(var o=[],h=this._pointerSize,d=h/2,m=new sn(r-d,n-d,h,h),g=a.length-1;g>=0;g--){var y=a[g];y!==i&&!y.ignore&&!y.ignoreCoarsePointer&&(!y.parent||!y.parent.ignoreCoarsePointer)&&(mb.copy(y.getBoundingRect()),y.transform&&mb.applyTransform(y.transform),mb.intersect(m)&&o.push(y))}if(o.length)for(var x=4,T=Math.PI/12,M=Math.PI*2,P=0;P<d;P+=x)for(var I=0;I<M;I+=T){var D=r+P*Math.cos(I),R=n+P*Math.sin(I);if(oD(o,s,D,R,i),s.target)return s}}return s},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new bne);var i=this._gestureMgr;n==="start"&&i.clear();var a=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),a){var s=a.type;r.gestureEvent=s;var o=new mp;o.target=a.target,this.dispatchToElement(o,s,a.event)}},t}(dl);Ee(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){bO.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=wO(this,r,n),a,s;if((e!=="mouseup"||!i)&&(a=this.findHover(r,n),s=a.target),e==="mousedown")this._downEl=s,this._downPoint=[t.zrX,t.zrY],this._upEl=s;else if(e==="mouseup")this._upEl=s;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||uf(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,e,t)}});function Dne(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,a=!1;n;){if(n.ignoreClip&&(a=!0),!a){var s=n.getClipPath();if(s&&!s.contain(t,r))return!1;n.silent&&(i=!0)}var o=n.__hostTarget;n=o||n.parent}return i?xO:!0}return!1}function oD(e,t,r,n,i){for(var a=e.length-1;a>=0;a--){var s=e[a],o=void 0;if(s!==i&&!s.ignore&&(o=Dne(s,r,n))&&(!t.topTarget&&(t.topTarget=s),o!==xO)){t.target=s;break}}}function wO(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const Lne=bO;var SO=32,vp=7;function kne(e){for(var t=0;e>=SO;)t|=e&1,e>>=1;return e+t}function sD(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;Rne(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function Rne(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function lD(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var a=e[n],s=t,o=n,h;s<o;)h=s+o>>>1,i(a,e[h])<0?o=h:s=h+1;var d=n-s;switch(d){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;d>0;)e[s+d]=e[s+d-1],d--}e[s]=a}}function vb(e,t,r,n,i,a){var s=0,o=0,h=1;if(a(e,t[r+i])>0){for(o=n-i;h<o&&a(e,t[r+i+h])>0;)s=h,h=(h<<1)+1,h<=0&&(h=o);h>o&&(h=o),s+=i,h+=i}else{for(o=i+1;h<o&&a(e,t[r+i-h])<=0;)s=h,h=(h<<1)+1,h<=0&&(h=o);h>o&&(h=o);var d=s;s=i-h,h=i-d}for(s++;s<h;){var m=s+(h-s>>>1);a(e,t[r+m])>0?s=m+1:h=m}return h}function gb(e,t,r,n,i,a){var s=0,o=0,h=1;if(a(e,t[r+i])<0){for(o=i+1;h<o&&a(e,t[r+i-h])<0;)s=h,h=(h<<1)+1,h<=0&&(h=o);h>o&&(h=o);var d=s;s=i-h,h=i-d}else{for(o=n-i;h<o&&a(e,t[r+i+h])>=0;)s=h,h=(h<<1)+1,h<=0&&(h=o);h>o&&(h=o),s+=i,h+=i}for(s++;s<h;){var m=s+(h-s>>>1);a(e,t[r+m])<0?h=m:s=m+1}return h}function One(e,t){var r=vp,n,i,a=0;e.length;var s=[];n=[],i=[];function o(x,T){n[a]=x,i[a]=T,a+=1}function h(){for(;a>1;){var x=a-2;if(x>=1&&i[x-1]<=i[x]+i[x+1]||x>=2&&i[x-2]<=i[x]+i[x-1])i[x-1]<i[x+1]&&x--;else if(i[x]>i[x+1])break;m(x)}}function d(){for(;a>1;){var x=a-2;x>0&&i[x-1]<i[x+1]&&x--,m(x)}}function m(x){var T=n[x],M=i[x],P=n[x+1],I=i[x+1];i[x]=M+I,x===a-3&&(n[x+1]=n[x+2],i[x+1]=i[x+2]),a--;var D=gb(e[P],e,T,M,0,t);T+=D,M-=D,M!==0&&(I=vb(e[T+M-1],e,P,I,I-1,t),I!==0&&(M<=I?g(T,M,P,I):y(T,M,P,I)))}function g(x,T,M,P){var I=0;for(I=0;I<T;I++)s[I]=e[x+I];var D=0,R=M,B=x;if(e[B++]=e[R++],--P===0){for(I=0;I<T;I++)e[B+I]=s[D+I];return}if(T===1){for(I=0;I<P;I++)e[B+I]=e[R+I];e[B+P]=s[D];return}for(var H=r,V,q,j;;){V=0,q=0,j=!1;do if(t(e[R],s[D])<0){if(e[B++]=e[R++],q++,V=0,--P===0){j=!0;break}}else if(e[B++]=s[D++],V++,q=0,--T===1){j=!0;break}while((V|q)<H);if(j)break;do{if(V=gb(e[R],s,D,T,0,t),V!==0){for(I=0;I<V;I++)e[B+I]=s[D+I];if(B+=V,D+=V,T-=V,T<=1){j=!0;break}}if(e[B++]=e[R++],--P===0){j=!0;break}if(q=vb(s[D],e,R,P,0,t),q!==0){for(I=0;I<q;I++)e[B+I]=e[R+I];if(B+=q,R+=q,P-=q,P===0){j=!0;break}}if(e[B++]=s[D++],--T===1){j=!0;break}H--}while(V>=vp||q>=vp);if(j)break;H<0&&(H=0),H+=2}if(r=H,r<1&&(r=1),T===1){for(I=0;I<P;I++)e[B+I]=e[R+I];e[B+P]=s[D]}else{if(T===0)throw new Error;for(I=0;I<T;I++)e[B+I]=s[D+I]}}function y(x,T,M,P){var I=0;for(I=0;I<P;I++)s[I]=e[M+I];var D=x+T-1,R=P-1,B=M+P-1,H=0,V=0;if(e[B--]=e[D--],--T===0){for(H=B-(P-1),I=0;I<P;I++)e[H+I]=s[I];return}if(P===1){for(B-=T,D-=T,V=B+1,H=D+1,I=T-1;I>=0;I--)e[V+I]=e[H+I];e[B]=s[R];return}for(var q=r;;){var j=0,te=0,ne=!1;do if(t(s[R],e[D])<0){if(e[B--]=e[D--],j++,te=0,--T===0){ne=!0;break}}else if(e[B--]=s[R--],te++,j=0,--P===1){ne=!0;break}while((j|te)<q);if(ne)break;do{if(j=T-gb(s[R],e,x,T,T-1,t),j!==0){for(B-=j,D-=j,T-=j,V=B+1,H=D+1,I=j-1;I>=0;I--)e[V+I]=e[H+I];if(T===0){ne=!0;break}}if(e[B--]=s[R--],--P===1){ne=!0;break}if(te=P-vb(e[D],s,0,P,P-1,t),te!==0){for(B-=te,R-=te,P-=te,V=B+1,H=R+1,I=0;I<te;I++)e[V+I]=s[H+I];if(P<=1){ne=!0;break}}if(e[B--]=e[D--],--T===0){ne=!0;break}q--}while(j>=vp||te>=vp);if(ne)break;q<0&&(q=0),q+=2}if(r=q,r<1&&(r=1),P===1){for(B-=T,D-=T,V=B+1,H=D+1,I=T-1;I>=0;I--)e[V+I]=e[H+I];e[B]=s[R]}else{if(P===0)throw new Error;for(H=B-(P-1),I=0;I<P;I++)e[H+I]=s[I]}}return{mergeRuns:h,forceMergeRuns:d,pushRun:o}}function e_(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var a=0;if(i<SO){a=sD(e,r,n,t),lD(e,r,n,r+a,t);return}var s=One(e,t),o=kne(i);do{if(a=sD(e,r,n,t),a<o){var h=i;h>o&&(h=o),lD(e,r,r+h,r+a,t),a=h}s.pushRun(r,a),s.mergeRuns(),i-=a,r+=a}while(i!==0);s.forceMergeRuns()}}var cs=1,Op=2,nf=4,uD=!1;function yb(){uD||(uD=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function cD(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var zne=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=cD}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,a=r.length;i<a;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,e_(n,cD)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var a=i,s=t;a;)a.parent=s,a.updateTransform(),r.push(a),s=a,a=a.getClipPath()}if(t.childrenRef){for(var o=t.childrenRef(),h=0;h<o.length;h++){var d=o[h];t.__dirty&&(d.__dirty|=cs),this._updateAndAddDisplayable(d,r,n)}t.__dirty=0}else{var m=t;r&&r.length?m.__clipPaths=r:m.__clipPaths&&m.__clipPaths.length>0&&(m.__clipPaths=[]),isNaN(m.z)&&(yb(),m.z=0),isNaN(m.z2)&&(yb(),m.z2=0),isNaN(m.zlevel)&&(yb(),m.zlevel=0),this._displayList[this._displayListLen++]=m}var g=t.getDecalElement&&t.getDecalElement();g&&this._updateAndAddDisplayable(g,r,n);var y=t.getTextGuideLine();y&&this._updateAndAddDisplayable(y,r,n);var x=t.getTextContent();x&&this._updateAndAddDisplayable(x,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=an(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const Bne=zne;var TO;TO=Er.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const hD=TO;var t_={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-t_.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?t_.bounceIn(e*2)*.5:t_.bounceOut(e*2-1)*.5+.5}};const CO=t_;var ny=Math.pow,lu=Math.sqrt,$_=1e-8,EO=1e-4,fD=lu(3),iy=1/3,hs=nd(),io=nd(),wf=nd();function ru(e){return e>-$_&&e<$_}function AO(e){return e>$_||e<-$_}function wi(e,t,r,n,i){var a=1-i;return a*a*(a*e+3*i*t)+i*i*(i*n+3*a*r)}function dD(e,t,r,n,i){var a=1-i;return 3*(((t-e)*a+2*(r-t)*i)*a+(n-r)*i*i)}function MO(e,t,r,n,i,a){var s=n+3*(t-r)-e,o=3*(r-t*2+e),h=3*(t-e),d=e-i,m=o*o-3*s*h,g=o*h-9*s*d,y=h*h-3*o*d,x=0;if(ru(m)&&ru(g))if(ru(o))a[0]=0;else{var T=-h/o;T>=0&&T<=1&&(a[x++]=T)}else{var M=g*g-4*m*y;if(ru(M)){var P=g/m,T=-o/s+P,I=-P/2;T>=0&&T<=1&&(a[x++]=T),I>=0&&I<=1&&(a[x++]=I)}else if(M>0){var D=lu(M),R=m*o+1.5*s*(-g+D),B=m*o+1.5*s*(-g-D);R<0?R=-ny(-R,iy):R=ny(R,iy),B<0?B=-ny(-B,iy):B=ny(B,iy);var T=(-o-(R+B))/(3*s);T>=0&&T<=1&&(a[x++]=T)}else{var H=(2*m*o-3*s*g)/(2*lu(m*m*m)),V=Math.acos(H)/3,q=lu(m),j=Math.cos(V),T=(-o-2*q*j)/(3*s),I=(-o+q*(j+fD*Math.sin(V)))/(3*s),te=(-o+q*(j-fD*Math.sin(V)))/(3*s);T>=0&&T<=1&&(a[x++]=T),I>=0&&I<=1&&(a[x++]=I),te>=0&&te<=1&&(a[x++]=te)}}return x}function IO(e,t,r,n,i){var a=6*r-12*t+6*e,s=9*t+3*n-3*e-9*r,o=3*t-3*e,h=0;if(ru(s)){if(AO(a)){var d=-o/a;d>=0&&d<=1&&(i[h++]=d)}}else{var m=a*a-4*s*o;if(ru(m))i[0]=-a/(2*s);else if(m>0){var g=lu(m),d=(-a+g)/(2*s),y=(-a-g)/(2*s);d>=0&&d<=1&&(i[h++]=d),y>=0&&y<=1&&(i[h++]=y)}}return h}function N_(e,t,r,n,i,a){var s=(t-e)*i+e,o=(r-t)*i+t,h=(n-r)*i+r,d=(o-s)*i+s,m=(h-o)*i+o,g=(m-d)*i+d;a[0]=e,a[1]=s,a[2]=d,a[3]=g,a[4]=g,a[5]=m,a[6]=h,a[7]=n}function Fne(e,t,r,n,i,a,s,o,h,d,m){var g,y=.005,x=1/0,T,M,P,I;hs[0]=h,hs[1]=d;for(var D=0;D<1;D+=.05)io[0]=wi(e,r,i,s,D),io[1]=wi(t,n,a,o,D),P=xf(hs,io),P<x&&(g=D,x=P);x=1/0;for(var R=0;R<32&&!(y<EO);R++)T=g-y,M=g+y,io[0]=wi(e,r,i,s,T),io[1]=wi(t,n,a,o,T),P=xf(io,hs),T>=0&&P<x?(g=T,x=P):(wf[0]=wi(e,r,i,s,M),wf[1]=wi(t,n,a,o,M),I=xf(wf,hs),M<=1&&I<x?(g=M,x=I):y*=.5);return m&&(m[0]=wi(e,r,i,s,g),m[1]=wi(t,n,a,o,g)),lu(x)}function $ne(e,t,r,n,i,a,s,o,h){for(var d=e,m=t,g=0,y=1/h,x=1;x<=h;x++){var T=x*y,M=wi(e,r,i,s,T),P=wi(t,n,a,o,T),I=M-d,D=P-m;g+=Math.sqrt(I*I+D*D),d=M,m=P}return g}function Si(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function O2(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function Nne(e,t,r,n,i){var a=e-2*t+r,s=2*(t-e),o=e-n,h=0;if(ru(a)){if(AO(s)){var d=-o/s;d>=0&&d<=1&&(i[h++]=d)}}else{var m=s*s-4*a*o;if(ru(m)){var d=-s/(2*a);d>=0&&d<=1&&(i[h++]=d)}else if(m>0){var g=lu(m),d=(-s+g)/(2*a),y=(-s-g)/(2*a);d>=0&&d<=1&&(i[h++]=d),y>=0&&y<=1&&(i[h++]=y)}}return h}function PO(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function V_(e,t,r,n,i){var a=(t-e)*n+e,s=(r-t)*n+t,o=(s-a)*n+a;i[0]=e,i[1]=a,i[2]=o,i[3]=o,i[4]=s,i[5]=r}function Vne(e,t,r,n,i,a,s,o,h){var d,m=.005,g=1/0;hs[0]=s,hs[1]=o;for(var y=0;y<1;y+=.05){io[0]=Si(e,r,i,y),io[1]=Si(t,n,a,y);var x=xf(hs,io);x<g&&(d=y,g=x)}g=1/0;for(var T=0;T<32&&!(m<EO);T++){var M=d-m,P=d+m;io[0]=Si(e,r,i,M),io[1]=Si(t,n,a,M);var x=xf(io,hs);if(M>=0&&x<g)d=M,g=x;else{wf[0]=Si(e,r,i,P),wf[1]=Si(t,n,a,P);var I=xf(wf,hs);P<=1&&I<g?(d=P,g=I):m*=.5}}return h&&(h[0]=Si(e,r,i,d),h[1]=Si(t,n,a,d)),lu(g)}function Une(e,t,r,n,i,a,s){for(var o=e,h=t,d=0,m=1/s,g=1;g<=s;g++){var y=g*m,x=Si(e,r,i,y),T=Si(t,n,a,y),M=x-o,P=T-h;d+=Math.sqrt(M*M+P*P),o=x,h=T}return d}var Hne=/cubic-bezier\(([0-9,\.e ]+)\)/;function gC(e){var t=e&&Hne.exec(e);if(t){var r=t[1].split(","),n=+fs(r[0]),i=+fs(r[1]),a=+fs(r[2]),s=+fs(r[3]);if(isNaN(n+i+a+s))return;var o=[];return function(h){return h<=0?0:h>=1?1:MO(0,n,a,1,h,o)&&wi(0,i,s,1,o[0])}}}var jne=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||la,this.ondestroy=t.ondestroy||la,this.onrestart=t.onrestart||la,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,a=i/n;a<0&&(a=0),a=Math.min(a,1);var s=this.easingFunc,o=s?s(a):a;if(this.onframe(o),a===1)if(this.loop){var h=i%n;this._startTime=t-h,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=cr(t)?t:CO[t]||gC(t)},e}();const Gne=jne;var DO=function(){function e(t){this.value=t}return e}(),qne=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new DO(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),Wne=function(){function e(t){this._list=new qne,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,a=null;if(i[t]==null){var s=n.len(),o=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var h=n.head;n.remove(h),delete i[h.key],a=h.value,this._lastRemovedEntry=h}o?o.value=r:o=new DO(r),o.key=t,n.insertEntry(o),i[t]=o}return a},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const yv=Wne;var pD={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function im(e){return e=Math.round(e),e<0?0:e>255?255:e}function mD(e){return e<0?0:e>1?1:e}function _b(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?im(parseFloat(t)/100*255):im(parseInt(t,10))}function am(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?mD(parseFloat(t)/100):mD(parseFloat(t))}function xb(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function Qa(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function z2(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var LO=new yv(20),ay=null;function jh(e,t){ay&&z2(ay,t),ay=LO.put(e,ay||t.slice())}function Uc(e,t){if(e){t=t||[];var r=LO.get(e);if(r)return z2(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in pD)return z2(t,pD[n]),jh(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(n.slice(1,4),16);if(!(a>=0&&a<=4095)){Qa(t,0,0,0,1);return}return Qa(t,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),jh(e,t),t}else if(i===7||i===9){var a=parseInt(n.slice(1,7),16);if(!(a>=0&&a<=16777215)){Qa(t,0,0,0,1);return}return Qa(t,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(n.slice(7),16)/255:1),jh(e,t),t}return}var s=n.indexOf("("),o=n.indexOf(")");if(s!==-1&&o+1===i){var h=n.substr(0,s),d=n.substr(s+1,o-(s+1)).split(","),m=1;switch(h){case"rgba":if(d.length!==4)return d.length===3?Qa(t,+d[0],+d[1],+d[2],1):Qa(t,0,0,0,1);m=am(d.pop());case"rgb":if(d.length>=3)return Qa(t,_b(d[0]),_b(d[1]),_b(d[2]),d.length===3?m:am(d[3])),jh(e,t),t;Qa(t,0,0,0,1);return;case"hsla":if(d.length!==4){Qa(t,0,0,0,1);return}return d[3]=am(d[3]),vD(d,t),jh(e,t),t;case"hsl":if(d.length!==3){Qa(t,0,0,0,1);return}return vD(d,t),jh(e,t),t;default:return}}Qa(t,0,0,0,1)}}function vD(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=am(e[1]),i=am(e[2]),a=i<=.5?i*(n+1):i+n-i*n,s=i*2-a;return t=t||[],Qa(t,im(xb(s,a,r+1/3)*255),im(xb(s,a,r)*255),im(xb(s,a,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function gD(e,t){var r=Uc(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return kO(r,r.length===4?"rgba":"rgb")}}function kO(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function U_(e,t){var r=Uc(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var H_=Math.round;function Nm(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var r=Uc(e);r&&(e="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:e,opacity:t??1}}var yD=1e-4;function nu(e){return e<yD&&e>-yD}function oy(e){return H_(e*1e3)/1e3}function B2(e){return H_(e*1e4)/1e4}function Xne(e){return"matrix("+oy(e[0])+","+oy(e[1])+","+oy(e[2])+","+oy(e[3])+","+B2(e[4])+","+B2(e[5])+")"}var Zne={left:"start",right:"end",center:"middle",middle:"middle"};function Yne(e,t,r){return r==="top"?e+=t/2:r==="bottom"&&(e-=t/2),e}function Kne(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function Jne(e){var t=e.style,r=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function RO(e){return e&&!!e.image}function Qne(e){return e&&!!e.svgElement}function yC(e){return RO(e)||Qne(e)}function OO(e){return e.type==="linear"}function zO(e){return e.type==="radial"}function BO(e){return e&&(e.type==="linear"||e.type==="radial")}function q0(e){return"url(#"+e+")"}function FO(e){var t=e.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function $O(e){var t=e.x||0,r=e.y||0,n=(e.rotation||0)*Qy,i=Ar(e.scaleX,1),a=Ar(e.scaleY,1),s=e.skewX||0,o=e.skewY||0,h=[];return(t||r)&&h.push("translate("+t+"px,"+r+"px)"),n&&h.push("rotate("+n+")"),(i!==1||a!==1)&&h.push("scale("+i+","+a+")"),(s||o)&&h.push("skew("+H_(s*Qy)+"deg, "+H_(o*Qy)+"deg)"),h.join(" ")}var eie=function(){return Er.hasGlobalWindow&&cr(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}(),F2=Array.prototype.slice;function Ks(e,t,r){return(t-e)*r+e}function bb(e,t,r,n){for(var i=t.length,a=0;a<i;a++)e[a]=Ks(t[a],r[a],n);return e}function tie(e,t,r,n){for(var i=t.length,a=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var o=0;o<a;o++)e[s][o]=Ks(t[s][o],r[s][o],n)}return e}function sy(e,t,r,n){for(var i=t.length,a=0;a<i;a++)e[a]=t[a]+r[a]*n;return e}function _D(e,t,r,n){for(var i=t.length,a=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var o=0;o<a;o++)e[s][o]=t[s][o]+r[s][o]*n}return e}function rie(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,a=Math.min(r,n),s=i[a-1]||{color:[0,0,0,0],offset:0},o=a;o<Math.max(r,n);o++)i.push({offset:s.offset,color:s.color.slice()})}function nie(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var a=n.length,s=i.length;if(a!==s){var o=a>s;if(o)n.length=s;else for(var h=a;h<s;h++)n.push(r===1?i[h]:F2.call(i[h]))}for(var d=n[0]&&n[0].length,h=0;h<n.length;h++)if(r===1)isNaN(n[h])&&(n[h]=i[h]);else for(var m=0;m<d;m++)isNaN(n[h][m])&&(n[h][m]=i[h][m])}}function r_(e){if(Ta(e)){var t=e.length;if(Ta(e[0])){for(var r=[],n=0;n<t;n++)r.push(F2.call(e[n]));return r}return F2.call(e)}return e}function n_(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function iie(e){return Ta(e&&e[0])?2:1}var ly=0,i_=1,NO=2,zp=3,$2=4,N2=5,xD=6;function bD(e){return e===$2||e===N2}function uy(e){return e===i_||e===NO}var gp=[0,0,0,0],aie=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,a=i.length,s=!1,o=xD,h=r;if(Ta(r)){var d=iie(r);o=d,(d===1&&!zn(r[0])||d===2&&!zn(r[0][0]))&&(s=!0)}else if(zn(r)&&!F_(r))o=ly;else if(Yt(r))if(!isNaN(+r))o=ly;else{var m=Uc(r);m&&(h=m,o=zp)}else if(cC(r)){var g=Tt({},h);g.colorStops=Jt(r.colorStops,function(x){return{offset:x.offset,color:Uc(x.color)}}),OO(r)?o=$2:zO(r)&&(o=N2),h=g}a===0?this.valType=o:(o!==this.valType||o===xD)&&(s=!0),this.discrete=this.discrete||s;var y={time:t,value:h,rawValue:r,percent:0};return n&&(y.easing=n,y.easingFunc=cr(n)?n:CO[n]||gC(n)),i.push(y),y},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(M,P){return M.time-P.time});for(var i=this.valType,a=n.length,s=n[a-1],o=this.discrete,h=uy(i),d=bD(i),m=0;m<a;m++){var g=n[m],y=g.value,x=s.value;g.percent=g.time/t,o||(h&&m!==a-1?nie(y,x,i):d&&rie(y.colorStops,x.colorStops))}if(!o&&i!==N2&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var T=n[0].value,m=0;m<a;m++)i===ly?n[m].additiveValue=n[m].value-T:i===zp?n[m].additiveValue=sy([],n[m].value,T,-1):uy(i)&&(n[m].additiveValue=i===i_?sy([],n[m].value,T,-1):_D([],n[m].value,T,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",a=this.valType,s=this.keyframes,o=s.length,h=this.propName,d=a===zp,m,g=this._lastFr,y=Math.min,x,T;if(o===1)x=T=s[0];else{if(r<0)m=0;else if(r<this._lastFrP){var M=y(g+1,o-1);for(m=M;m>=0&&!(s[m].percent<=r);m--);m=y(m,o-2)}else{for(m=g;m<o&&!(s[m].percent>r);m++);m=y(m-1,o-2)}T=s[m+1],x=s[m]}if(x&&T){this._lastFr=m,this._lastFrP=r;var P=T.percent-x.percent,I=P===0?1:y((r-x.percent)/P,1);T.easingFunc&&(I=T.easingFunc(I));var D=n?this._additiveValue:d?gp:t[h];if((uy(a)||d)&&!D&&(D=this._additiveValue=[]),this.discrete)t[h]=I<1?x.rawValue:T.rawValue;else if(uy(a))a===i_?bb(D,x[i],T[i],I):tie(D,x[i],T[i],I);else if(bD(a)){var R=x[i],B=T[i],H=a===$2;t[h]={type:H?"linear":"radial",x:Ks(R.x,B.x,I),y:Ks(R.y,B.y,I),colorStops:Jt(R.colorStops,function(q,j){var te=B.colorStops[j];return{offset:Ks(q.offset,te.offset,I),color:n_(bb([],q.color,te.color,I))}}),global:B.global},H?(t[h].x2=Ks(R.x2,B.x2,I),t[h].y2=Ks(R.y2,B.y2,I)):t[h].r=Ks(R.r,B.r,I)}else if(d)bb(D,x[i],T[i],I),n||(t[h]=n_(D));else{var V=Ks(x[i],T[i],I);n?this._additiveValue=V:t[h]=V}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===ly?t[n]=t[n]+i:r===zp?(Uc(t[n],gp),sy(gp,gp,i,1),t[n]=n_(gp)):r===i_?sy(t[n],t[n],i,1):r===NO&&_D(t[n],t[n],i,1)},e}(),oie=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){dO("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,Gr(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var a=this._tracks,s=0;s<n.length;s++){var o=n[s],h=a[o];if(!h){h=a[o]=new aie(o);var d=void 0,m=this._getAdditiveTrack(o);if(m){var g=m.keyframes,y=g[g.length-1];d=y&&y.value,m.valType===zp&&d&&(d=n_(d))}else d=this._target[o];if(d==null)continue;t>0&&h.addKeyframe(0,r_(d),i),this._trackKeys.push(o)}h.addKeyframe(t,r_(r[o]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var a=n[i].getTrack(t);a&&(r=a)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var s=this._trackKeys[a],o=this._tracks[s],h=this._getAdditiveTrack(s),d=o.keyframes,m=d.length;if(o.prepare(i,h),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var g=d[m-1];g&&(r._target[o.propName]=g.rawValue),o.setFinished()}else n.push(o)}if(n.length||this._force){var y=new Gne({life:i,loop:this._loop,delay:this._delay||0,onframe:function(x){r._started=2;var T=r._additiveAnimators;if(T){for(var M=!1,P=0;P<T.length;P++)if(T[P]._clip){M=!0;break}M||(r._additiveAnimators=null)}for(var P=0;P<n.length;P++)n[P].step(r._target,x);var I=r._onframeCbs;if(I)for(var P=0;P<I.length;P++)I[P](r._target,x)},ondestroy:function(){r._doneCallback()}});this._clip=y,this.animation&&this.animation.addClip(y),t&&y.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Jt(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,a=0;a<t.length;a++){var s=n[t[a]];s&&!s.isFinished()&&(r?s.step(this._target,1):this._started===1&&s.step(this._target,0),s.setFinished())}for(var o=!0,a=0;a<i.length;a++)if(!n[i[a]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},e.prototype.saveTo=function(t,r,n){if(t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var a=r[i],s=this._tracks[a];if(!(!s||s.isFinished())){var o=s.keyframes,h=o[n?0:o.length-1];h&&(t[a]=r_(h.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||Gr(t);for(var n=0;n<r.length;n++){var i=r[n],a=this._tracks[i];if(a){var s=a.keyframes;if(s.length>1){var o=s.pop();a.addKeyframe(o.time,t[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},e}();const _C=oie;function ff(){return new Date().getTime()}var sie=function(e){Lt(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=ff()-this._pausedTime,i=n-this._time,a=this._head;a;){var s=a.next,o=a.step(n,i);o&&(a.ondestroy(),this.removeClip(a)),a=s}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(hD(n),!r._paused&&r.update())}hD(n)},t.prototype.start=function(){this._running||(this._time=ff(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=ff(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=ff()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new _C(r,n.loop);return this.addAnimator(i),i},t}(dl);const lie=sie;var uie=300,wb=Er.domSupported,Sb=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Jt(e,function(i){var a=i.replace("mouse","pointer");return r.hasOwnProperty(a)?a:i});return{mouse:e,touch:t,pointer:n}}(),wD={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},SD=!1;function V2(e){var t=e.pointerType;return t==="pen"||t==="touch"}function cie(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function Tb(e){e&&(e.zrByTouch=!0)}function hie(e,t){return to(e.dom,new fie(e,t),!0)}function VO(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var fie=function(){function e(t,r){this.stopPropagation=la,this.stopImmediatePropagation=la,this.preventDefault=la,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),Io={mousedown:function(e){e=to(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=to(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=to(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=to(this.dom,e);var t=e.toElement||e.relatedTarget;VO(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){SD=!0,e=to(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){SD||(e=to(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=to(this.dom,e),Tb(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Io.mousemove.call(this,e),Io.mousedown.call(this,e)},touchmove:function(e){e=to(this.dom,e),Tb(e),this.handler.processGesture(e,"change"),Io.mousemove.call(this,e)},touchend:function(e){e=to(this.dom,e),Tb(e),this.handler.processGesture(e,"end"),Io.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<uie&&Io.click.call(this,e)},pointerdown:function(e){Io.mousedown.call(this,e)},pointermove:function(e){V2(e)||Io.mousemove.call(this,e)},pointerup:function(e){Io.mouseup.call(this,e)},pointerout:function(e){V2(e)||Io.mouseout.call(this,e)}};Ee(["click","dblclick","contextmenu"],function(e){Io[e]=function(t){t=to(this.dom,t),this.trigger(e,t)}});var U2={pointermove:function(e){V2(e)||U2.mousemove.call(this,e)},pointerup:function(e){U2.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function die(e,t){var r=t.domHandlers;Er.pointerEventsSupported?Ee(Sb.pointer,function(n){a_(t,n,function(i){r[n].call(e,i)})}):(Er.touchEventsSupported&&Ee(Sb.touch,function(n){a_(t,n,function(i){r[n].call(e,i),cie(t)})}),Ee(Sb.mouse,function(n){a_(t,n,function(i){i=dC(i),t.touching||r[n].call(e,i)})}))}function pie(e,t){Er.pointerEventsSupported?Ee(wD.pointer,r):Er.touchEventsSupported||Ee(wD.mouse,r);function r(n){function i(a){a=dC(a),VO(e,a.target)||(a=hie(e,a),t.domHandlers[n].call(e,a))}a_(t,n,i,{capture:!0})}}function a_(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,_ne(e.domTarget,t,r,n)}function Cb(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&xne(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var TD=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),mie=function(e){Lt(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new TD(r,Io),wb&&(i._globalHandlerScope=new TD(document,U2)),die(i,i._localHandlerScope),i}return t.prototype.dispose=function(){Cb(this._localHandlerScope),wb&&Cb(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,wb&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?pie(this,n):Cb(n)}},t}(dl);const vie=mie;var UO=1;Er.hasGlobalWindow&&(UO=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var CD=UO,H2=.4,j2="#333",G2="#ccc",gie="#eee",ED=pC,AD=5e-5;function rc(e){return e>AD||e<-AD}var nc=[],Gh=[],Eb=$m(),Ab=Math.abs,yie=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return rc(this.rotation)||rc(this.x)||rc(this.y)||rc(this.scaleX-1)||rc(this.scaleY-1)||rc(this.skewX)||rc(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&ED(n);return}n=n||$m(),r?this.getLocalTransform(n):ED(n),t&&(r?bf(n,t,n):Sne(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(nc);var n=nc[0]<0?-1:1,i=nc[1]<0?-1:1,a=((nc[0]-n)*r+n)/nc[0]||0,s=((nc[1]-i)*r+i)/nc[1]||0;t[0]*=a,t[1]*=a,t[2]*=s,t[3]*=s}this.invTransform=this.invTransform||$m(),vC(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),a=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(a),r=Math.sqrt(r),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(bf(Gh,t.invTransform,r),r=Gh);var n=this.originX,i=this.originY;(n||i)&&(Eb[4]=n,Eb[5]=i,bf(Gh,r,Eb),Gh[4]-=n,Gh[5]-=i,r=Gh),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&ho(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&ho(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&Ab(t[0]-1)>1e-10&&Ab(t[3]-1)>1e-10?Math.sqrt(Ab(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){HO(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,a=t.scaleX,s=t.scaleY,o=t.anchorX,h=t.anchorY,d=t.rotation||0,m=t.x,g=t.y,y=t.skewX?Math.tan(t.skewX):0,x=t.skewY?Math.tan(-t.skewY):0;if(n||i||o||h){var T=n+o,M=i+h;r[4]=-T*a-y*M*s,r[5]=-M*s-x*T*a}else r[4]=r[5]=0;return r[0]=a,r[3]=s,r[1]=x*a,r[2]=y*s,d&&mC(r,r,d),r[4]+=n+m,r[5]+=i+g,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Vm=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function HO(e,t){for(var r=0;r<Vm.length;r++){var n=Vm[r];e[n]=t[n]}}const xC=yie;var MD={};function Na(e,t){t=t||du;var r=MD[t];r||(r=MD[t]=new yv(500));var n=r.get(e);return n==null&&(n=vv.measureText(e,t).width,r.put(e,n)),n}function ID(e,t,r,n){var i=Na(e,t),a=W0(t),s=Bp(0,i,r),o=af(0,a,n),h=new sn(s,o,i,a);return h}function bC(e,t,r,n){var i=((e||"")+"").split(`
`),a=i.length;if(a===1)return ID(i[0],t,r,n);for(var s=new sn(0,0,0,0),o=0;o<i.length;o++){var h=ID(i[o],t,r,n);o===0?s.copy(h):s.union(h)}return s}function Bp(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function af(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function W0(e){return Na("",e)}function Yc(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function jO(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,a=r.height,s=r.width,o=a/2,h=r.x,d=r.y,m="left",g="top";if(n instanceof Array)h+=Yc(n[0],r.width),d+=Yc(n[1],r.height),m=null,g=null;else switch(n){case"left":h-=i,d+=o,m="right",g="middle";break;case"right":h+=i+s,d+=o,g="middle";break;case"top":h+=s/2,d-=i,m="center",g="bottom";break;case"bottom":h+=s/2,d+=a+i,m="center";break;case"inside":h+=s/2,d+=o,m="center",g="middle";break;case"insideLeft":h+=i,d+=o,g="middle";break;case"insideRight":h+=s-i,d+=o,m="right",g="middle";break;case"insideTop":h+=s/2,d+=i,m="center";break;case"insideBottom":h+=s/2,d+=a-i,m="center",g="bottom";break;case"insideTopLeft":h+=i,d+=i;break;case"insideTopRight":h+=s-i,d+=i,m="right";break;case"insideBottomLeft":h+=i,d+=a-i,g="bottom";break;case"insideBottomRight":h+=s-i,d+=a-i,m="right",g="bottom";break}return e=e||{},e.x=h,e.y=d,e.align=m,e.verticalAlign=g,e}var Mb="__zr_normal__",Ib=Vm.concat(["ignore"]),_ie=rd(Vm,function(e,t){return e[t]=!0,e},{ignore:!1}),qh={},xie=new sn(0,0,0,0),wC=function(){function e(t){this.id=fO(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,a=r.innerTransformable,s=void 0,o=void 0,h=!1;a.parent=i?this:null;var d=!1;if(a.copyTransform(r),n.position!=null){var m=xie;n.layoutRect?m.copy(n.layoutRect):m.copy(this.getBoundingRect()),i||m.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(qh,n,m):jO(qh,n,m),a.x=qh.x,a.y=qh.y,s=qh.align,o=qh.verticalAlign;var g=n.origin;if(g&&n.rotation!=null){var y=void 0,x=void 0;g==="center"?(y=m.width*.5,x=m.height*.5):(y=Yc(g[0],m.width),x=Yc(g[1],m.height)),d=!0,a.originX=-a.x+y+(i?0:m.x),a.originY=-a.y+x+(i?0:m.y)}}n.rotation!=null&&(a.rotation=n.rotation);var T=n.offset;T&&(a.x+=T[0],a.y+=T[1],d||(a.originX=-T[0],a.originY=-T[1]));var M=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,P=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),I=void 0,D=void 0,R=void 0;M&&this.canBeInsideText()?(I=n.insideFill,D=n.insideStroke,(I==null||I==="auto")&&(I=this.getInsideTextFill()),(D==null||D==="auto")&&(D=this.getInsideTextStroke(I),R=!0)):(I=n.outsideFill,D=n.outsideStroke,(I==null||I==="auto")&&(I=this.getOutsideFill()),(D==null||D==="auto")&&(D=this.getOutsideStroke(I),R=!0)),I=I||"#000",(I!==P.fill||D!==P.stroke||R!==P.autoStroke||s!==P.align||o!==P.verticalAlign)&&(h=!0,P.fill=I,P.stroke=D,P.autoStroke=R,P.align=s,P.verticalAlign=o,r.setDefaultTextStyle(P)),r.__dirty|=cs,h&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?G2:j2},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&Uc(r);n||(n=[255,255,255,1]);for(var i=n[3],a=this.__zr.isDarkMode(),s=0;s<3;s++)n[s]=n[s]*i+(a?0:255)*(1-i);return n[3]=1,kO(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},Tt(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(rr(t))for(var n=t,i=Gr(n),a=0;a<i.length;a++){var s=i[a];this.attrKV(s,t[s])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==Mb)){var s=i.targetName,o=s?r[s]:r;i.saveTo(o)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,Ib)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var a=n[i];t[a]!=null&&!(a in r)&&(r[a]=this[a])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(Mb,!1,t)},e.prototype.useState=function(t,r,n,i){var a=t===Mb,s=this.hasState();if(!(!s&&a)){var o=this.currentStates,h=this.stateTransition;if(!(an(o,t)>=0&&(r||o.length===1))){var d;if(this.stateProxy&&!a&&(d=this.stateProxy(t)),d||(d=this.states&&this.states[t]),!d&&!a){dO("State "+t+" not exists.");return}a||this.saveCurrentToNormalState(d);var m=!!(d&&d.hoverLayer||i);m&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,d,this._normalState,r,!n&&!this.__inHover&&h&&h.duration>0,h);var g=this._textContent,y=this._textGuide;return g&&g.useState(t,r,n,m),y&&y.useState(t,r,n,m),a?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!m&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~cs),d}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],a=this.currentStates,s=t.length,o=s===a.length;if(o){for(var h=0;h<s;h++)if(t[h]!==a[h]){o=!1;break}}if(o)return;for(var h=0;h<s;h++){var d=t[h],m=void 0;this.stateProxy&&(m=this.stateProxy(d,t)),m||(m=this.states[d]),m&&i.push(m)}var g=i[s-1],y=!!(g&&g.hoverLayer||n);y&&this._toggleHoverLayerFlag(!0);var x=this._mergeStates(i),T=this.stateTransition;this.saveCurrentToNormalState(x),this._applyStateObj(t.join(","),x,this._normalState,!1,!r&&!this.__inHover&&T&&T.duration>0,T);var M=this._textContent,P=this._textGuide;M&&M.useStates(t,r,y),P&&P.useStates(t,r,y),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!y&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~cs)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=an(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),a=an(i,t),s=an(i,r)>=0;a>=0?s?i.splice(a,1):i[a]=r:n&&!s&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var a=t[i];Tt(r,a),a.textConfig&&(n=n||{},Tt(n,a.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,a,s){var o=!(r&&i);r&&r.textConfig?(this.textConfig=Tt({},i?this.textConfig:n.textConfig),Tt(this.textConfig,r.textConfig)):o&&n.textConfig&&(this.textConfig=n.textConfig);for(var h={},d=!1,m=0;m<Ib.length;m++){var g=Ib[m],y=a&&_ie[g];r&&r[g]!=null?y?(d=!0,h[g]=r[g]):this[g]=r[g]:o&&n[g]!=null&&(y?(d=!0,h[g]=n[g]):this[g]=n[g])}if(!a)for(var m=0;m<this.animators.length;m++){var x=this.animators[m],T=x.targetName;x.getLoop()||x.__changeFinalValue(T?(r||n)[T]:r||n)}d&&this._transitionState(t,h,s)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new xC,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),Tt(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=cs;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,a=new _C(i,r,n);return t&&(a.targetName=t),this.addAnimator(a,t),a},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var a=i.animators,s=an(a,t);s>=0&&a.splice(s,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,a=[],s=0;s<i;s++){var o=n[s];!t||t===o.scope?o.stop(r):a.push(o)}return this.animators=a,this},e.prototype.animateTo=function(t,r,n){Pb(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){Pb(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var a=Pb(this,r,n,i),s=0;s<a.length;s++)a[s].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=cs;function r(n,i,a,s){Object.defineProperty(t,n,{get:function(){if(!this[i]){var h=this[i]=[];o(this,h)}return this[i]},set:function(h){this[a]=h[0],this[s]=h[1],this[i]=h,o(this,h)}});function o(h,d){Object.defineProperty(d,0,{get:function(){return h[a]},set:function(m){h[a]=m}}),Object.defineProperty(d,1,{get:function(){return h[s]},set:function(m){h[s]=m}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Ho(wC,dl);Ho(wC,xC);function Pb(e,t,r,n,i){r=r||{};var a=[];GO(e,"",e,t,r,n,a,i);var s=a.length,o=!1,h=r.done,d=r.aborted,m=function(){o=!0,s--,s<=0&&(o?h&&h():d&&d())},g=function(){s--,s<=0&&(o?h&&h():d&&d())};s||h&&h(),a.length>0&&r.during&&a[0].during(function(T,M){r.during(M)});for(var y=0;y<a.length;y++){var x=a[y];m&&x.done(m),g&&x.aborted(g),r.force&&x.duration(r.duration),x.start(r.easing)}return a}function Db(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function bie(e){return Ta(e[0])}function wie(e,t,r){if(Ta(t[r]))if(Ta(e[r])||(e[r]=[]),Ua(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),Db(e[r],t[r],n))}else{var i=t[r],a=e[r],s=i.length;if(bie(i))for(var o=i[0].length,h=0;h<s;h++)a[h]?Db(a[h],i[h],o):a[h]=Array.prototype.slice.call(i[h]);else Db(a,i,s);a.length=i.length}else e[r]=t[r]}function Sie(e,t){return e===t||Ta(e)&&Ta(t)&&Tie(e,t)}function Tie(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function GO(e,t,r,n,i,a,s,o){for(var h=Gr(n),d=i.duration,m=i.delay,g=i.additive,y=i.setToFinal,x=!rr(a),T=e.animators,M=[],P=0;P<h.length;P++){var I=h[P],D=n[I];if(D!=null&&r[I]!=null&&(x||a[I]))if(rr(D)&&!Ta(D)&&!cC(D)){if(t){o||(r[I]=D,e.updateDuringAnimation(t));continue}GO(e,I,r[I],D,i,a&&a[I],s,o)}else M.push(I);else o||(r[I]=D,e.updateDuringAnimation(t),M.push(I))}var R=M.length;if(!g&&R)for(var B=0;B<T.length;B++){var H=T[B];if(H.targetName===t){var V=H.stopTracks(M);if(V){var q=an(T,H);T.splice(q,1)}}}if(i.force||(M=Hi(M,function(ce){return!Sie(n[ce],r[ce])}),R=M.length),R>0||i.force&&!s.length){var j=void 0,te=void 0,ne=void 0;if(o){te={},y&&(j={});for(var B=0;B<R;B++){var I=M[B];te[I]=r[I],y?j[I]=n[I]:r[I]=n[I]}}else if(y){ne={};for(var B=0;B<R;B++){var I=M[B];ne[I]=r_(r[I]),wie(r,n,I)}}var H=new _C(r,!1,!1,g?Hi(T,function(le){return le.targetName===t}):null);H.targetName=t,i.scope&&(H.scope=i.scope),y&&j&&H.whenWithKeys(0,j,M),ne&&H.whenWithKeys(0,ne,M),H.whenWithKeys(d??500,o?te:n,M).delay(m||0),e.addAnimator(H,t),s.push(H)}}const qO=wC;var WO=function(e){Lt(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,a=i.indexOf(n);a>=0&&(i.splice(a,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=an(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,a=i[n];if(r&&r!==this&&r.parent!==this&&r!==a){i[n]=r,a.parent=null;var s=this.__zr;s&&a.removeSelfFromZr(s),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,a=an(i,r);return a<0?this:(i.splice(a,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var a=r[i];n&&a.removeSelfFromZr(n),a.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,a=0;a<i.length;a++){var s=i[a];r.call(n,s,a)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var a=this._children[i],s=r.call(n,a);a.isGroup&&!s&&a.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new sn(0,0,0,0),i=r||this._children,a=[],s=null,o=0;o<i.length;o++){var h=i[o];if(!(h.ignore||h.invisible)){var d=h.getBoundingRect(),m=h.getLocalTransform(a);m?(sn.applyTransform(n,d,m),s=s||n.clone(),s.union(n)):(s=s||d.clone(),s.union(d))}}return s||n},t}(qO);WO.prototype.type="group";const Pi=WO;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var o_={},XO={};function Cie(e){delete XO[e]}function Eie(e){if(!e)return!1;if(typeof e=="string")return U_(e,1)<H2;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=U_(t[i].color,1);return r/=n,r<H2}return!1}var Aie=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var a=new Bne,s=n.renderer||"canvas";o_[s]||(s=Gr(o_)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var o=new o_[s](r,a,n,t),h=n.ssr||o.ssrOnly;this.storage=a,this.painter=o;var d=!Er.node&&!Er.worker&&!h?new vie(o.getViewportRoot(),o.root):null,m=n.useCoarsePointer,g=m==null||m==="auto"?Er.touchEventsSupported:!!m,y=44,x;g&&(x=Ar(n.pointerSize,y)),this.handler=new Lne(a,o,d,o.root,x),this.animation=new lie({stage:{update:h?null:function(){return i._flush(!0)}}}),h||this.animation.start()}return e.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=Eie(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=ff();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=ff();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Pi&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,Cie(this.id)},e}();function PD(e,t){var r=new Aie(fO(),e,t);return XO[r.id]=r,r}function Mie(e,t){o_[e]=t}var DD=1e-4,ZO=20;function Iie(e){return e.replace(/^\s+|\s+$/g,"")}function LD(e,t,r,n){var i=t[0],a=t[1],s=r[0],o=r[1],h=a-i,d=o-s;if(h===0)return d===0?s:(s+o)/2;if(n)if(h>0){if(e<=i)return s;if(e>=a)return o}else{if(e>=i)return s;if(e<=a)return o}else{if(e===i)return s;if(e===a)return o}return(e-i)/h*d+s}function Ti(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Yt(e)?Iie(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function si(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),ZO),e=(+e).toFixed(t),r?e:+e}function Uf(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return Pie(e)}function Pie(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,a=t.indexOf("."),s=a<0?0:i-1-a;return Math.max(0,s-n)}function Die(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),a=Math.round(r(Math.abs(t[1]-t[0]))/n),s=Math.min(Math.max(-i+a,0),20);return isFinite(s)?s:20}function Lie(e,t){var r=Math.max(Uf(e),Uf(t)),n=e+t;return r>ZO?n:si(n,r)}function YO(e){var t=Math.PI*2;return(e%t+t)%t}function j_(e){return e>-DD&&e<DD}var kie=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ll(e){if(e instanceof Date)return e;if(Yt(e)){var t=kie.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function Rie(e){return Math.pow(10,SC(e))}function SC(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function KO(e,t){var r=SC(e),n=Math.pow(10,r),i=e/n,a;return t?i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10:i<1?a=1:i<2?a=2:i<3?a=3:i<5?a=5:a=10,e=a*n,r>=-20?+e.toFixed(r<0?-r:0):e}function G_(e){var t=parseFloat(e);return t==e&&(t!==0||!Yt(e)||e.indexOf("x")<=0)?t:NaN}function Oie(e){return!isNaN(G_(e))}function JO(){return Math.round(Math.random()*9)}function QO(e,t){return t===0?e:QO(t,e%t)}function kD(e,t){return e==null?t:t==null?e:e*t/QO(e,t)}function ga(e){throw new Error(e)}var ez="series\0",zie="\0_ec_\0";function ua(e){return e instanceof Array?e:e==null?[]:[e]}function q2(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var a=r[n];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var RD=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function _v(e){return rr(e)&&!Vt(e)&&!(e instanceof Date)?e.value:e}function Bie(e){return rr(e)&&!(e instanceof Array)}function Fie(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",a=r==="replaceAll";e=e||[],t=(t||[]).slice();var s=Mr();Ee(t,function(h,d){if(!rr(h)){t[d]=null;return}});var o=$ie(e,s,r);return(n||i)&&Nie(o,e,s,t),n&&Vie(o,t),n||i?Uie(o,t,i):a&&Hie(o,t),jie(o),o}function $ie(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var a=e[i];a&&a.id!=null&&t.set(a.id,i),n.push({existing:r==="replaceMerge"||Um(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return n}function Nie(e,t,r,n){Ee(n,function(i,a){if(!(!i||i.id==null)){var s=om(i.id),o=r.get(s);if(o!=null){var h=e[o];No(!h.newOption,'Duplicated option on id "'+s+'".'),h.newOption=i,h.existing=t[o],n[a]=null}}})}function Vie(e,t){Ee(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var a=e[i].existing;if(!e[i].newOption&&a&&(a.id==null||r.id==null)&&!Um(r)&&!Um(a)&&tz("name",a,r)){e[i].newOption=r,t[n]=null;return}}})}function Uie(e,t,r){Ee(t,function(n){if(n){for(var i,a=0;(i=e[a])&&(i.newOption||Um(i.existing)||i.existing&&n.id!=null&&!tz("id",n,i.existing));)a++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),a++}})}function Hie(e,t){Ee(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function jie(e){var t=Mr();Ee(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),Ee(e,function(r){var n=r.newOption;No(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),Ee(e,function(r,n){var i=r.existing,a=r.newOption,s=r.keyInfo;if(rr(a)){if(s.name=a.name!=null?om(a.name):i?i.name:ez+n,i)s.id=om(i.id);else if(a.id!=null)s.id=om(a.id);else{var o=0;do s.id="\0"+s.name+"\0"+o++;while(t.get(s.id))}t.set(s.id,r)}})}function tz(e,t,r){var n=vs(t[e],null),i=vs(r[e],null);return n!=null&&i!=null&&n===i}function om(e){return vs(e,"")}function vs(e,t){return e==null?t:Yt(e)?e:zn(e)||A2(e)?e+"":t}function rz(e){var t=e.name;return!!(t&&t.indexOf(ez))}function Um(e){return e&&e.id!=null&&om(e.id).indexOf(zie)===0}function Gie(e,t,r){Ee(e,function(n){var i=n.newOption;rr(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=qie(t,i,n.existing,r))})}function qie(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function xv(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return Vt(t.dataIndex)?Jt(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return Vt(t.name)?Jt(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Hn(){var e="__ec_inner_"+Wie++;return function(t){return t[e]||(t[e]={})}}var Wie=JO();function Lb(e,t,r){var n=TC(t,r),i=n.mainTypeSpecified,a=n.queryOptionMap,s=n.others,o=s,h=r?r.defaultMainType:null;return!i&&h&&a.set(h,{}),a.each(function(d,m){var g=bv(e,m,d,{useDefault:h===m,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});o[m+"Models"]=g.models,o[m+"Model"]=g.models[0]}),o}function TC(e,t){var r;if(Yt(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=Mr(),a={},s=!1;return Ee(r,function(o,h){if(h==="dataIndex"||h==="dataIndexInside"){a[h]=o;return}var d=h.match(/^(\w+)(Index|Id|Name)$/)||[],m=d[1],g=(d[2]||"").toLowerCase();if(!(!m||!g||t&&t.includeMainTypes&&an(t.includeMainTypes,m)<0)){s=s||!!m;var y=i.get(m)||i.set(m,{});y[g]=o}}),{mainTypeSpecified:s,queryOptionMap:i,others:a}}var Oo={useDefault:!0,enableAll:!1,enableNone:!1};function bv(e,t,r,n){n=n||Oo;var i=r.index,a=r.id,s=r.name,o={models:null,specified:i!=null||a!=null||s!=null};if(!o.specified){var h=void 0;return o.models=n.useDefault&&(h=e.getComponent(t))?[h]:[],o}return i==="none"||i===!1?(No(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(i==="all"&&(No(n.enableAll,'`"all"` is not a valid value on index option.'),i=a=s=null),o.models=e.queryComponents({mainType:t,index:i,id:a,name:s}),o)}function nz(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function Xie(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function Zie(e){return e==="auto"?Er.domSupported?"html":"richText":e||"html"}var Yie=".",ic="___EC__COMPONENT__CONTAINER___",iz="___EC__EXTENDED_CLASS___";function ds(e){var t={main:"",sub:""};if(e){var r=e.split(Yie);t.main=r[0]||"",t.sub=r[1]||""}return t}function Kie(e){No(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function Jie(e){return!!(e&&e[iz])}function CC(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return Qie(n)?i=function(a){Lt(s,a);function s(){return a.apply(this,arguments)||this}return s}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},Jre(i,this)),Tt(i.prototype,r),i[iz]=!0,i.extend=this.extend,i.superCall=rae,i.superApply=nae,i.superClass=n,i}}function Qie(e){return cr(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function az(e,t){e.extend=t.extend}var eae=Math.round(Math.random()*10);function tae(e){var t=["__\0is_clz",eae++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function rae(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function nae(e,t,r){return this.superClass.prototype[t].apply(e,r)}function X0(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){Kie(i),n.prototype.type=i;var a=ds(i);if(!a.sub)t[a.main]=n;else if(a.sub!==ic){var s=r(a);s[a.sub]=n}}return n},e.getClass=function(n,i,a){var s=t[n];if(s&&s[ic]&&(s=i?s[i]:null),a&&!s)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return s},e.getClassesByMainType=function(n){var i=ds(n),a=[],s=t[i.main];return s&&s[ic]?Ee(s,function(o,h){h!==ic&&a.push(o)}):a.push(s),a},e.hasClass=function(n){var i=ds(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return Ee(t,function(i,a){n.push(a)}),n},e.hasSubTypes=function(n){var i=ds(n),a=t[i.main];return a&&a[ic]};function r(n){var i=t[n.main];return(!i||!i[ic])&&(i=t[n.main]={},i[ic]=!0),i}}function Hm(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,a){for(var s={},o=0;o<e.length;o++){var h=e[o][1];if(!(i&&an(i,h)>=0||a&&an(a,h)<0)){var d=n.getShallow(h,t);d!=null&&(s[e[o][0]]=d)}}return s}}var iae=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],aae=Hm(iae),oae=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return aae(this,t,r)},e}(),W2=new yv(50);function sae(e){if(typeof e=="string"){var t=W2.get(e);return t&&t.image}else return e}function EC(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var a=W2.get(e),s={hostEl:r,cb:n,cbPayload:i};return a?(t=a.image,!Z0(t)&&a.pending.push(s)):(t=vv.loadImage(e,OD,OD),t.__zrImageSrc=e,W2.put(e,t.__cachedImgObj={image:t,pending:[s]})),t}else return e;else return t}function OD(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function Z0(e){return e&&e.width&&e.height}var kb=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function lae(e,t,r,n,i){if(!t)return"";var a=(e+"").split(`
`);i=oz(t,r,n,i);for(var s=0,o=a.length;s<o;s++)a[s]=sz(a[s],i);return a.join(`
`)}function oz(e,t,r,n){n=n||{};var i=Tt({},n);i.font=t,r=Ar(r,"..."),i.maxIterations=Ar(n.maxIterations,2);var a=i.minChar=Ar(n.minChar,0);i.cnCharWidth=Na("",t);var s=i.ascCharWidth=Na("a",t);i.placeholder=Ar(n.placeholder,"");for(var o=e=Math.max(0,e-1),h=0;h<a&&o>=s;h++)o-=s;var d=Na(r,t);return d>o&&(r="",d=0),o=e-d,i.ellipsis=r,i.ellipsisWidth=d,i.contentWidth=o,i.containerWidth=e,i}function sz(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var a=Na(e,n);if(a<=r)return e;for(var s=0;;s++){if(a<=i||s>=t.maxIterations){e+=t.ellipsis;break}var o=s===0?uae(e,i,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*i/a):0;e=e.substr(0,o),a=Na(e,n)}return e===""&&(e=t.placeholder),e}function uae(e,t,r,n){for(var i=0,a=0,s=e.length;a<s&&i<t;a++){var o=e.charCodeAt(a);i+=0<=o&&o<=127?r:n}return a}function cae(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,a=r==="truncate",s=W0(i),o=Ar(t.lineHeight,s),h=!!t.backgroundColor,d=t.lineOverflow==="truncate",m=t.width,g;m!=null&&(r==="break"||r==="breakAll")?g=e?lz(e,t.font,m,r==="breakAll",0).lines:[]:g=e?e.split(`
`):[];var y=g.length*o,x=Ar(t.height,y);if(y>x&&d){var T=Math.floor(x/o);g=g.slice(0,T)}if(e&&a&&m!=null)for(var M=oz(m,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),P=0;P<g.length;P++)g[P]=sz(g[P],M);for(var I=x,D=0,P=0;P<g.length;P++)D=Math.max(Na(g[P],i),D);m==null&&(m=D);var R=D;return n&&(I+=n[0]+n[2],R+=n[1]+n[3],m+=n[1]+n[3]),h&&(R=m),{lines:g,height:x,outerWidth:R,outerHeight:I,lineHeight:o,calculatedLineHeight:s,contentWidth:D,contentHeight:y,width:m}}var hae=function(){function e(){}return e}(),zD=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),fae=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function dae(e,t){var r=new fae;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,a=t.overflow,s=(a==="break"||a==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:a==="breakAll"}:null,o=kb.lastIndex=0,h;(h=kb.exec(e))!=null;){var d=h.index;d>o&&Rb(r,e.substring(o,d),t,s),Rb(r,h[2],t,s,h[1]),o=kb.lastIndex}o<e.length&&Rb(r,e.substring(o,e.length),t,s);var m=[],g=0,y=0,x=t.padding,T=a==="truncate",M=t.lineOverflow==="truncate";function P(Qe,Ct,St){Qe.width=Ct,Qe.lineHeight=St,g+=St,y=Math.max(y,Ct)}e:for(var I=0;I<r.lines.length;I++){for(var D=r.lines[I],R=0,B=0,H=0;H<D.tokens.length;H++){var V=D.tokens[H],q=V.styleName&&t.rich[V.styleName]||{},j=V.textPadding=q.padding,te=j?j[1]+j[3]:0,ne=V.font=q.font||t.font;V.contentHeight=W0(ne);var ce=Ar(q.height,V.contentHeight);if(V.innerHeight=ce,j&&(ce+=j[0]+j[2]),V.height=ce,V.lineHeight=Jy(q.lineHeight,t.lineHeight,ce),V.align=q&&q.align||t.align,V.verticalAlign=q&&q.verticalAlign||"middle",M&&i!=null&&g+V.lineHeight>i){H>0?(D.tokens=D.tokens.slice(0,H),P(D,B,R),r.lines=r.lines.slice(0,I+1)):r.lines=r.lines.slice(0,I);break e}var le=q.width,de=le==null||le==="auto";if(typeof le=="string"&&le.charAt(le.length-1)==="%")V.percentWidth=le,m.push(V),V.contentWidth=Na(V.text,ne);else{if(de){var ae=q.backgroundColor,Se=ae&&ae.image;Se&&(Se=sae(Se),Z0(Se)&&(V.width=Math.max(V.width,Se.width*ce/Se.height)))}var ve=T&&n!=null?n-B:null;ve!=null&&ve<V.width?!de||ve<te?(V.text="",V.width=V.contentWidth=0):(V.text=lae(V.text,ve-te,ne,t.ellipsis,{minChar:t.truncateMinChar}),V.width=V.contentWidth=Na(V.text,ne)):V.contentWidth=Na(V.text,ne)}V.width+=te,B+=V.width,q&&(R=Math.max(R,V.lineHeight))}P(D,B,R)}r.outerWidth=r.width=Ar(n,y),r.outerHeight=r.height=Ar(i,g),r.contentHeight=g,r.contentWidth=y,x&&(r.outerWidth+=x[1]+x[3],r.outerHeight+=x[0]+x[2]);for(var I=0;I<m.length;I++){var V=m[I],Ye=V.percentWidth;V.width=parseInt(Ye,10)/100*r.width}return r}function Rb(e,t,r,n,i){var a=t==="",s=i&&r.rich[i]||{},o=e.lines,h=s.font||r.font,d=!1,m,g;if(n){var y=s.padding,x=y?y[1]+y[3]:0;if(s.width!=null&&s.width!=="auto"){var T=Yc(s.width,n.width)+x;o.length>0&&T+n.accumWidth>n.width&&(m=t.split(`
`),d=!0),n.accumWidth=T}else{var M=lz(t,h,n.width,n.breakAll,n.accumWidth);n.accumWidth=M.accumWidth+x,g=M.linesWidths,m=M.lines}}else m=t.split(`
`);for(var P=0;P<m.length;P++){var I=m[P],D=new hae;if(D.styleName=i,D.text=I,D.isLineHolder=!I&&!a,typeof s.width=="number"?D.width=s.width:D.width=g?g[P]:Na(I,h),!P&&!d){var R=(o[o.length-1]||(o[0]=new zD)).tokens,B=R.length;B===1&&R[0].isLineHolder?R[0]=D:(I||!B||a)&&R.push(D)}else o.push(new zD([D]))}}function pae(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var mae=rd(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function vae(e){return pae(e)?!!mae[e]:!0}function lz(e,t,r,n,i){for(var a=[],s=[],o="",h="",d=0,m=0,g=0;g<e.length;g++){var y=e.charAt(g);if(y===`
`){h&&(o+=h,m+=d),a.push(o),s.push(m),o="",h="",d=0,m=0;continue}var x=Na(y,t),T=n?!1:!vae(y);if(a.length?m+x>r:i+m+x>r){m?(o||h)&&(T?(o||(o=h,h="",d=0,m=d),a.push(o),s.push(m-d),h+=y,d+=x,o="",m=d):(h&&(o+=h,h="",d=0),a.push(o),s.push(m),o=y,m=x)):T?(a.push(h),s.push(d),h=y,d=x):(a.push(y),s.push(x));continue}m+=x,T?(h+=y,d+=x):(h&&(o+=h,h="",d=0),o+=y)}return!a.length&&!o&&(o=e,h="",d=0),h&&(o+=h),o&&(a.push(o),s.push(m)),a.length===1&&(m+=i),{accumWidth:m,lines:a,linesWidths:s}}var X2="__zr_style_"+Math.round(Math.random()*10),Hc={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Y0={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Hc[X2]=!0;var BD=["z","z2","invisible"],gae=["invisible"],yae=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=Gr(r),i=0;i<n.length;i++){var a=n[i];a==="style"?this.useStyle(r[a]):e.prototype.attrKV.call(this,a,r[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,a){var s=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&_ae(this,r,n)||s&&!s[0]&&!s[3])return!1;if(i&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(a&&this.parent)for(var h=this.parent;h;){if(h.ignore)return!1;h=h.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();return a.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),a=this.style,s=a.shadowBlur||0,o=a.shadowOffsetX||0,h=a.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new sn(0,0,0,0)),n?sn.applyTransform(r,i,n):r.copy(i),(s||o||h)&&(r.width+=s*2+Math.abs(o),r.height+=s*2+Math.abs(h),r.x=Math.min(r.x,r.x+o-s),r.y=Math.min(r.y,r.y+h-s));var d=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-d),r.y=Math.floor(r.y-d),r.width=Math.ceil(r.width+1+d*2),r.height=Math.ceil(r.height+1+d*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new sn(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:Tt(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Op,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Op)},t.prototype.styleUpdated=function(){this.__dirty&=~Op},t.prototype.createStyle=function(r){return G0(Hc,r)},t.prototype.useStyle=function(r){r[X2]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[X2]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,BD)},t.prototype._applyStateObj=function(r,n,i,a,s,o){e.prototype._applyStateObj.call(this,r,n,i,a,s,o);var h=!(n&&a),d;if(n&&n.style?s?a?d=n.style:(d=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(d,n.style)):(d=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(d,n.style)):h&&(d=i.style),d)if(s){var m=this.style;if(this.style=this.createStyle(h?{}:m),h)for(var g=Gr(m),y=0;y<g.length;y++){var x=g[y];x in d&&(d[x]=d[x],this.style[x]=m[x])}for(var T=Gr(d),y=0;y<T.length;y++){var x=T[y];this.style[x]=this.style[x]}this._transitionState(r,{style:d},o,this.getAnimationStyleProps())}else this.useStyle(d);for(var M=this.__inHover?gae:BD,y=0;y<M.length;y++){var x=M[y];n&&n[x]!=null?this[x]=n[x]:h&&i[x]!=null&&(this[x]=i[x])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,a=0;a<r.length;a++){var s=r[a];s.style&&(i=i||{},this._mergeStyle(i,s.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return Tt(r,n),r},t.prototype.getAnimationStyleProps=function(){return Y0},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=cs|Op}(),t}(qO),Ob=new sn(0,0,0,0),zb=new sn(0,0,0,0);function _ae(e,t,r){return Ob.copy(e.getBoundingRect()),e.transform&&Ob.applyTransform(e.transform),zb.width=t,zb.height=r,!Ob.intersect(zb)}const wv=yae;var ao=Math.min,oo=Math.max,Bb=Math.sin,Fb=Math.cos,ac=Math.PI*2,cy=nd(),hy=nd(),fy=nd();function FD(e,t,r,n,i,a){i[0]=ao(e,r),i[1]=ao(t,n),a[0]=oo(e,r),a[1]=oo(t,n)}var $D=[],ND=[];function xae(e,t,r,n,i,a,s,o,h,d){var m=IO,g=wi,y=m(e,r,i,s,$D);h[0]=1/0,h[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var x=0;x<y;x++){var T=g(e,r,i,s,$D[x]);h[0]=ao(T,h[0]),d[0]=oo(T,d[0])}y=m(t,n,a,o,ND);for(var x=0;x<y;x++){var M=g(t,n,a,o,ND[x]);h[1]=ao(M,h[1]),d[1]=oo(M,d[1])}h[0]=ao(e,h[0]),d[0]=oo(e,d[0]),h[0]=ao(s,h[0]),d[0]=oo(s,d[0]),h[1]=ao(t,h[1]),d[1]=oo(t,d[1]),h[1]=ao(o,h[1]),d[1]=oo(o,d[1])}function bae(e,t,r,n,i,a,s,o){var h=PO,d=Si,m=oo(ao(h(e,r,i),1),0),g=oo(ao(h(t,n,a),1),0),y=d(e,r,i,m),x=d(t,n,a,g);s[0]=ao(e,i,y),s[1]=ao(t,a,x),o[0]=oo(e,i,y),o[1]=oo(t,a,x)}function wae(e,t,r,n,i,a,s,o,h){var d=cf,m=hf,g=Math.abs(i-a);if(g%ac<1e-4&&g>1e-4){o[0]=e-r,o[1]=t-n,h[0]=e+r,h[1]=t+n;return}if(cy[0]=Fb(i)*r+e,cy[1]=Bb(i)*n+t,hy[0]=Fb(a)*r+e,hy[1]=Bb(a)*n+t,d(o,cy,hy),m(h,cy,hy),i=i%ac,i<0&&(i=i+ac),a=a%ac,a<0&&(a=a+ac),i>a&&!s?a+=ac:i<a&&s&&(i+=ac),s){var y=a;a=i,i=y}for(var x=0;x<a;x+=Math.PI/2)x>i&&(fy[0]=Fb(x)*r+e,fy[1]=Bb(x)*n+t,d(o,fy,o),m(h,fy,h))}var Zr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},oc=[],sc=[],rs=[],Hl=[],ns=[],is=[],$b=Math.min,Nb=Math.max,lc=Math.cos,uc=Math.sin,Gs=Math.abs,Z2=Math.PI,Zl=Z2*2,Vb=typeof Float32Array<"u",yp=[];function Ub(e){var t=Math.round(e/Z2*1e8)/1e8;return t%2*Z2}function Sae(e,t){var r=Ub(e[0]);r<0&&(r+=Zl);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=Zl?i=r+Zl:t&&r-i>=Zl?i=r-Zl:!t&&r>i?i=r+(Zl-Ub(r-i)):t&&r<i&&(i=r-(Zl-Ub(i-r))),e[0]=r,e[1]=i}var Tae=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=Gs(n/CD/t)||0,this._uy=Gs(n/CD/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(Zr.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=Gs(t-this._xi),i=Gs(r-this._yi),a=n>this._ux||i>this._uy;if(this.addData(Zr.L,t,r),this._ctx&&a&&this._ctx.lineTo(t,r),a)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var s=n*n+i*i;s>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=s)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,a,s){return this._drawPendingPt(),this.addData(Zr.C,t,r,n,i,a,s),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,a,s),this._xi=a,this._yi=s,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(Zr.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,a,s){this._drawPendingPt(),yp[0]=i,yp[1]=a,Sae(yp,s),i=yp[0],a=yp[1];var o=a-i;return this.addData(Zr.A,t,r,n,n,i,o,0,s?0:1),this._ctx&&this._ctx.arc(t,r,n,i,a,s),this._xi=lc(a)*n+t,this._yi=uc(a)*n+r,this},e.prototype.arcTo=function(t,r,n,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,a),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(Zr.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(Zr.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&Vb&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,a=0;a<r;a++)n+=t[a].len();Vb&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var a=0;a<r;a++)for(var s=t[a].data,o=0;o<s.length;o++)this.data[i++]=s[o];this._len=i},e.prototype.addData=function(t,r,n,i,a,s,o,h,d){if(this._saveData){var m=this.data;this._len+arguments.length>m.length&&(this._expandData(),m=this.data);for(var g=0;g<arguments.length;g++)m[this._len++]=arguments[g]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Vb&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){rs[0]=rs[1]=ns[0]=ns[1]=Number.MAX_VALUE,Hl[0]=Hl[1]=is[0]=is[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,a=0,s;for(s=0;s<this._len;){var o=t[s++],h=s===1;switch(h&&(r=t[s],n=t[s+1],i=r,a=n),o){case Zr.M:r=i=t[s++],n=a=t[s++],ns[0]=i,ns[1]=a,is[0]=i,is[1]=a;break;case Zr.L:FD(r,n,t[s],t[s+1],ns,is),r=t[s++],n=t[s++];break;case Zr.C:xae(r,n,t[s++],t[s++],t[s++],t[s++],t[s],t[s+1],ns,is),r=t[s++],n=t[s++];break;case Zr.Q:bae(r,n,t[s++],t[s++],t[s],t[s+1],ns,is),r=t[s++],n=t[s++];break;case Zr.A:var d=t[s++],m=t[s++],g=t[s++],y=t[s++],x=t[s++],T=t[s++]+x;s+=1;var M=!t[s++];h&&(i=lc(x)*g+d,a=uc(x)*y+m),wae(d,m,g,y,x,T,M,ns,is),r=lc(T)*g+d,n=uc(T)*y+m;break;case Zr.R:i=r=t[s++],a=n=t[s++];var P=t[s++],I=t[s++];FD(i,a,i+P,a+I,ns,is);break;case Zr.Z:r=i,n=a;break}cf(rs,rs,ns),hf(Hl,Hl,is)}return s===0&&(rs[0]=rs[1]=Hl[0]=Hl[1]=0),new sn(rs[0],rs[1],Hl[0]-rs[0],Hl[1]-rs[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,a=0,s=0,o=0,h=0;this._pathSegLen||(this._pathSegLen=[]);for(var d=this._pathSegLen,m=0,g=0,y=0;y<r;){var x=t[y++],T=y===1;T&&(a=t[y],s=t[y+1],o=a,h=s);var M=-1;switch(x){case Zr.M:a=o=t[y++],s=h=t[y++];break;case Zr.L:{var P=t[y++],I=t[y++],D=P-a,R=I-s;(Gs(D)>n||Gs(R)>i||y===r-1)&&(M=Math.sqrt(D*D+R*R),a=P,s=I);break}case Zr.C:{var B=t[y++],H=t[y++],P=t[y++],I=t[y++],V=t[y++],q=t[y++];M=$ne(a,s,B,H,P,I,V,q,10),a=V,s=q;break}case Zr.Q:{var B=t[y++],H=t[y++],P=t[y++],I=t[y++];M=Une(a,s,B,H,P,I,10),a=P,s=I;break}case Zr.A:var j=t[y++],te=t[y++],ne=t[y++],ce=t[y++],le=t[y++],de=t[y++],ae=de+le;y+=1,t[y++],T&&(o=lc(le)*ne+j,h=uc(le)*ce+te),M=Nb(ne,ce)*$b(Zl,Math.abs(de)),a=lc(ae)*ne+j,s=uc(ae)*ce+te;break;case Zr.R:{o=a=t[y++],h=s=t[y++];var Se=t[y++],ve=t[y++];M=Se*2+ve*2;break}case Zr.Z:{var D=o-a,R=h-s;M=Math.sqrt(D*D+R*R),a=o,s=h;break}}M>=0&&(d[g++]=M,m+=M)}return this._pathLen=m,m},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,a=this._uy,s=this._len,o,h,d,m,g,y,x=r<1,T,M,P=0,I=0,D,R=0,B,H;if(!(x&&(this._pathSegLen||this._calculateLength(),T=this._pathSegLen,M=this._pathLen,D=r*M,!D)))e:for(var V=0;V<s;){var q=n[V++],j=V===1;switch(j&&(d=n[V],m=n[V+1],o=d,h=m),q!==Zr.L&&R>0&&(t.lineTo(B,H),R=0),q){case Zr.M:o=d=n[V++],h=m=n[V++],t.moveTo(d,m);break;case Zr.L:{g=n[V++],y=n[V++];var te=Gs(g-d),ne=Gs(y-m);if(te>i||ne>a){if(x){var ce=T[I++];if(P+ce>D){var le=(D-P)/ce;t.lineTo(d*(1-le)+g*le,m*(1-le)+y*le);break e}P+=ce}t.lineTo(g,y),d=g,m=y,R=0}else{var de=te*te+ne*ne;de>R&&(B=g,H=y,R=de)}break}case Zr.C:{var ae=n[V++],Se=n[V++],ve=n[V++],Ye=n[V++],Qe=n[V++],Ct=n[V++];if(x){var ce=T[I++];if(P+ce>D){var le=(D-P)/ce;N_(d,ae,ve,Qe,le,oc),N_(m,Se,Ye,Ct,le,sc),t.bezierCurveTo(oc[1],sc[1],oc[2],sc[2],oc[3],sc[3]);break e}P+=ce}t.bezierCurveTo(ae,Se,ve,Ye,Qe,Ct),d=Qe,m=Ct;break}case Zr.Q:{var ae=n[V++],Se=n[V++],ve=n[V++],Ye=n[V++];if(x){var ce=T[I++];if(P+ce>D){var le=(D-P)/ce;V_(d,ae,ve,le,oc),V_(m,Se,Ye,le,sc),t.quadraticCurveTo(oc[1],sc[1],oc[2],sc[2]);break e}P+=ce}t.quadraticCurveTo(ae,Se,ve,Ye),d=ve,m=Ye;break}case Zr.A:var St=n[V++],Kt=n[V++],Ft=n[V++],br=n[V++],Ir=n[V++],vr=n[V++],fr=n[V++],qe=!n[V++],st=Ft>br?Ft:br,et=Gs(Ft-br)>.001,mt=Ir+vr,ft=!1;if(x){var ce=T[I++];P+ce>D&&(mt=Ir+vr*(D-P)/ce,ft=!0),P+=ce}if(et&&t.ellipse?t.ellipse(St,Kt,Ft,br,fr,Ir,mt,qe):t.arc(St,Kt,st,Ir,mt,qe),ft)break e;j&&(o=lc(Ir)*Ft+St,h=uc(Ir)*br+Kt),d=lc(mt)*Ft+St,m=uc(mt)*br+Kt;break;case Zr.R:o=d=n[V],h=m=n[V+1],g=n[V++],y=n[V++];var ue=n[V++],ge=n[V++];if(x){var ce=T[I++];if(P+ce>D){var Ie=D-P;t.moveTo(g,y),t.lineTo(g+$b(Ie,ue),y),Ie-=ue,Ie>0&&t.lineTo(g+ue,y+$b(Ie,ge)),Ie-=ge,Ie>0&&t.lineTo(g+Nb(ue-Ie,0),y+ge),Ie-=ue,Ie>0&&t.lineTo(g,y+Nb(ge-Ie,0));break e}P+=ce}t.rect(g,y,ue,ge);break;case Zr.Z:if(x){var ce=T[I++];if(P+ce>D){var le=(D-P)/ce;t.lineTo(d*(1-le)+o*le,m*(1-le)+h*le);break e}P+=ce}t.closePath(),d=o,m=h}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=Zr,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const Kc=Tae;function eu(e,t,r,n,i,a,s){if(i===0)return!1;var o=i,h=0,d=e;if(s>t+o&&s>n+o||s<t-o&&s<n-o||a>e+o&&a>r+o||a<e-o&&a<r-o)return!1;if(e!==r)h=(t-n)/(e-r),d=(e*n-r*t)/(e-r);else return Math.abs(a-e)<=o/2;var m=h*a-s+d,g=m*m/(h*h+1);return g<=o/2*o/2}function Cae(e,t,r,n,i,a,s,o,h,d,m){if(h===0)return!1;var g=h;if(m>t+g&&m>n+g&&m>a+g&&m>o+g||m<t-g&&m<n-g&&m<a-g&&m<o-g||d>e+g&&d>r+g&&d>i+g&&d>s+g||d<e-g&&d<r-g&&d<i-g&&d<s-g)return!1;var y=Fne(e,t,r,n,i,a,s,o,d,m,null);return y<=g/2}function uz(e,t,r,n,i,a,s,o,h){if(s===0)return!1;var d=s;if(h>t+d&&h>n+d&&h>a+d||h<t-d&&h<n-d&&h<a-d||o>e+d&&o>r+d&&o>i+d||o<e-d&&o<r-d&&o<i-d)return!1;var m=Vne(e,t,r,n,i,a,o,h,null);return m<=d/2}var VD=Math.PI*2;function dy(e){return e%=VD,e<0&&(e+=VD),e}var _p=Math.PI*2;function Eae(e,t,r,n,i,a,s,o,h){if(s===0)return!1;var d=s;o-=e,h-=t;var m=Math.sqrt(o*o+h*h);if(m-d>r||m+d<r)return!1;if(Math.abs(n-i)%_p<1e-4)return!0;if(a){var g=n;n=dy(i),i=dy(g)}else n=dy(n),i=dy(i);n>i&&(i+=_p);var y=Math.atan2(h,o);return y<0&&(y+=_p),y>=n&&y<=i||y+_p>=n&&y+_p<=i}function cc(e,t,r,n,i,a){if(a>t&&a>n||a<t&&a<n||n===t)return 0;var s=(a-t)/(n-t),o=n<t?1:-1;(s===1||s===0)&&(o=n<t?.5:-.5);var h=s*(r-e)+e;return h===i?1/0:h>i?o:0}var jl=Kc.CMD,hc=Math.PI*2,Aae=1e-4;function Mae(e,t){return Math.abs(e-t)<Aae}var na=[-1,-1,-1],no=[-1,-1];function Iae(){var e=no[0];no[0]=no[1],no[1]=e}function Pae(e,t,r,n,i,a,s,o,h,d){if(d>t&&d>n&&d>a&&d>o||d<t&&d<n&&d<a&&d<o)return 0;var m=MO(t,n,a,o,d,na);if(m===0)return 0;for(var g=0,y=-1,x=void 0,T=void 0,M=0;M<m;M++){var P=na[M],I=P===0||P===1?.5:1,D=wi(e,r,i,s,P);D<h||(y<0&&(y=IO(t,n,a,o,no),no[1]<no[0]&&y>1&&Iae(),x=wi(t,n,a,o,no[0]),y>1&&(T=wi(t,n,a,o,no[1]))),y===2?P<no[0]?g+=x<t?I:-I:P<no[1]?g+=T<x?I:-I:g+=o<T?I:-I:P<no[0]?g+=x<t?I:-I:g+=o<x?I:-I)}return g}function Dae(e,t,r,n,i,a,s,o){if(o>t&&o>n&&o>a||o<t&&o<n&&o<a)return 0;var h=Nne(t,n,a,o,na);if(h===0)return 0;var d=PO(t,n,a);if(d>=0&&d<=1){for(var m=0,g=Si(t,n,a,d),y=0;y<h;y++){var x=na[y]===0||na[y]===1?.5:1,T=Si(e,r,i,na[y]);T<s||(na[y]<d?m+=g<t?x:-x:m+=a<g?x:-x)}return m}else{var x=na[0]===0||na[0]===1?.5:1,T=Si(e,r,i,na[0]);return T<s?0:a<t?x:-x}}function Lae(e,t,r,n,i,a,s,o){if(o-=t,o>r||o<-r)return 0;var h=Math.sqrt(r*r-o*o);na[0]=-h,na[1]=h;var d=Math.abs(n-i);if(d<1e-4)return 0;if(d>=hc-1e-4){n=0,i=hc;var m=a?1:-1;return s>=na[0]+e&&s<=na[1]+e?m:0}if(n>i){var g=n;n=i,i=g}n<0&&(n+=hc,i+=hc);for(var y=0,x=0;x<2;x++){var T=na[x];if(T+e>s){var M=Math.atan2(o,T),m=a?1:-1;M<0&&(M=hc+M),(M>=n&&M<=i||M+hc>=n&&M+hc<=i)&&(M>Math.PI/2&&M<Math.PI*1.5&&(m=-m),y+=m)}}return y}function cz(e,t,r,n,i){for(var a=e.data,s=e.len(),o=0,h=0,d=0,m=0,g=0,y,x,T=0;T<s;){var M=a[T++],P=T===1;switch(M===jl.M&&T>1&&(r||(o+=cc(h,d,m,g,n,i))),P&&(h=a[T],d=a[T+1],m=h,g=d),M){case jl.M:m=a[T++],g=a[T++],h=m,d=g;break;case jl.L:if(r){if(eu(h,d,a[T],a[T+1],t,n,i))return!0}else o+=cc(h,d,a[T],a[T+1],n,i)||0;h=a[T++],d=a[T++];break;case jl.C:if(r){if(Cae(h,d,a[T++],a[T++],a[T++],a[T++],a[T],a[T+1],t,n,i))return!0}else o+=Pae(h,d,a[T++],a[T++],a[T++],a[T++],a[T],a[T+1],n,i)||0;h=a[T++],d=a[T++];break;case jl.Q:if(r){if(uz(h,d,a[T++],a[T++],a[T],a[T+1],t,n,i))return!0}else o+=Dae(h,d,a[T++],a[T++],a[T],a[T+1],n,i)||0;h=a[T++],d=a[T++];break;case jl.A:var I=a[T++],D=a[T++],R=a[T++],B=a[T++],H=a[T++],V=a[T++];T+=1;var q=!!(1-a[T++]);y=Math.cos(H)*R+I,x=Math.sin(H)*B+D,P?(m=y,g=x):o+=cc(h,d,y,x,n,i);var j=(n-I)*B/R+I;if(r){if(Eae(I,D,B,H,H+V,q,t,j,i))return!0}else o+=Lae(I,D,B,H,H+V,q,j,i);h=Math.cos(H+V)*R+I,d=Math.sin(H+V)*B+D;break;case jl.R:m=h=a[T++],g=d=a[T++];var te=a[T++],ne=a[T++];if(y=m+te,x=g+ne,r){if(eu(m,g,y,g,t,n,i)||eu(y,g,y,x,t,n,i)||eu(y,x,m,x,t,n,i)||eu(m,x,m,g,t,n,i))return!0}else o+=cc(y,g,y,x,n,i),o+=cc(m,x,m,g,n,i);break;case jl.Z:if(r){if(eu(h,d,m,g,t,n,i))return!0}else o+=cc(h,d,m,g,n,i);h=m,d=g;break}}return!r&&!Mae(d,g)&&(o+=cc(h,d,m,g,n,i)||0),o!==0}function kae(e,t,r){return cz(e,0,!1,t,r)}function Rae(e,t,r,n){return cz(e,t,!0,r,n)}var q_=_n({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Hc),Oae={style:_n({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Y0.style)},Hb=Vm.concat(["invisible","culling","z","z2","zlevel","parent"]),zae=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(h){r.buildPath(h,r.shape)}),i.silent=!0;var a=i.style;for(var s in n)a[s]!==n[s]&&(a[s]=n[s]);a.fill=n.fill?n.decal:null,a.decal=null,a.shadowColor=null,n.strokeFirst&&(a.stroke=null);for(var o=0;o<Hb.length;++o)i[Hb[o]]=this[Hb[o]];i.__dirty|=cs}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=Gr(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<n.length;a++){var s=n[a],o=r[s];s==="style"?this.style?Tt(this.style,o):this.useStyle(o):s==="shape"?Tt(this.shape,o):e.prototype.attrKV.call(this,s,o)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Yt(r)){var n=U_(r,0);return n>.5?j2:n>.2?gie:G2}else if(r)return G2}return j2},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Yt(n)){var i=this.__zr,a=!!(i&&i.isDarkMode()),s=U_(r,0)<H2;if(a===s)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~nf},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new Kc(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var s=this.path;(a||this.__dirty&nf)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),r=s.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){o.copy(r);var h=n.strokeNoScale?this.getLineScale():1,d=n.lineWidth;if(!this.hasFill()){var m=this.strokeContainThreshold;d=Math.max(d,m??4)}h>1e-10&&(o.width+=d/h,o.height+=d/h,o.x-=d/h/2,o.y-=d/h/2)}return o}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect(),s=this.style;if(r=i[0],n=i[1],a.contain(r,n)){var o=this.path;if(this.hasStroke()){var h=s.lineWidth,d=s.strokeNoScale?this.getLineScale():1;if(d>1e-10&&(this.hasFill()||(h=Math.max(h,this.strokeContainThreshold)),Rae(o,h/d,r,n)))return!0}if(this.hasFill())return kae(o,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=nf,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:Tt(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&nf)},t.prototype.createStyle=function(r){return G0(q_,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=Tt({},this.shape))},t.prototype._applyStateObj=function(r,n,i,a,s,o){e.prototype._applyStateObj.call(this,r,n,i,a,s,o);var h=!(n&&a),d;if(n&&n.shape?s?a?d=n.shape:(d=Tt({},i.shape),Tt(d,n.shape)):(d=Tt({},a?this.shape:i.shape),Tt(d,n.shape)):h&&(d=i.shape),d)if(s){this.shape=Tt({},this.shape);for(var m={},g=Gr(d),y=0;y<g.length;y++){var x=g[y];typeof d[x]=="object"?this.shape[x]=d[x]:m[x]=d[x]}this._transitionState(r,{shape:m},o)}else this.shape=d,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,a=0;a<r.length;a++){var s=r[a];s.shape&&(i=i||{},this._mergeStyle(i,s.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return Oae},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(a){Lt(s,a);function s(o){var h=a.call(this,o)||this;return r.init&&r.init.call(h,o),h}return s.prototype.getDefaultStyle=function(){return zr(r.style)},s.prototype.getDefaultShape=function(){return zr(r.shape)},s}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=cs|Op|nf}(),t}(wv);const en=zae;var Bae=_n({strokeFirst:!0,font:du,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},q_),hz=function(e){Lt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return G0(Bae,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=bC(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var a=r.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(wv);hz.prototype.type="tspan";const W_=hz;var Fae=_n({x:0,y:0},Hc),$ae={style:_n({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Y0.style)};function Nae(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var fz=function(e){Lt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return G0(Fae,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var a=Nae(n.image)?n.image:this.__image;if(!a)return 0;var s=r==="width"?"height":"width",o=n[s];return o==null?a[r]:a[r]/a[s]*o},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return $ae},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new sn(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(wv);fz.prototype.type="image";const pl=fz;function Vae(e,t){var r=t.x,n=t.y,i=t.width,a=t.height,s=t.r,o,h,d,m;i<0&&(r=r+i,i=-i),a<0&&(n=n+a,a=-a),typeof s=="number"?o=h=d=m=s:s instanceof Array?s.length===1?o=h=d=m=s[0]:s.length===2?(o=d=s[0],h=m=s[1]):s.length===3?(o=s[0],h=m=s[1],d=s[2]):(o=s[0],h=s[1],d=s[2],m=s[3]):o=h=d=m=0;var g;o+h>i&&(g=o+h,o*=i/g,h*=i/g),d+m>i&&(g=d+m,d*=i/g,m*=i/g),h+d>a&&(g=h+d,h*=a/g,d*=a/g),o+m>a&&(g=o+m,o*=a/g,m*=a/g),e.moveTo(r+o,n),e.lineTo(r+i-h,n),h!==0&&e.arc(r+i-h,n+h,h,-Math.PI/2,0),e.lineTo(r+i,n+a-d),d!==0&&e.arc(r+i-d,n+a-d,d,0,Math.PI/2),e.lineTo(r+m,n+a),m!==0&&e.arc(r+m,n+a-m,m,Math.PI/2,Math.PI),e.lineTo(r,n+o),o!==0&&e.arc(r+o,n+o,o,Math.PI,Math.PI*1.5)}var df=Math.round;function dz(e,t,r){if(t){var n=t.x1,i=t.x2,a=t.y1,s=t.y2;e.x1=n,e.x2=i,e.y1=a,e.y2=s;var o=r&&r.lineWidth;return o&&(df(n*2)===df(i*2)&&(e.x1=e.x2=Oc(n,o,!0)),df(a*2)===df(s*2)&&(e.y1=e.y2=Oc(a,o,!0))),e}}function pz(e,t,r){if(t){var n=t.x,i=t.y,a=t.width,s=t.height;e.x=n,e.y=i,e.width=a,e.height=s;var o=r&&r.lineWidth;return o&&(e.x=Oc(n,o,!0),e.y=Oc(i,o,!0),e.width=Math.max(Oc(n+a,o,!1)-e.x,a===0?0:1),e.height=Math.max(Oc(i+s,o,!1)-e.y,s===0?0:1)),e}}function Oc(e,t,r){if(!t)return e;var n=df(e*2);return(n+df(t))%2===0?n/2:(n+(r?1:-1))/2}var Uae=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),Hae={},mz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Uae},t.prototype.buildPath=function(r,n){var i,a,s,o;if(this.subPixelOptimize){var h=pz(Hae,n,this.style);i=h.x,a=h.y,s=h.width,o=h.height,h.r=n.r,n=h}else i=n.x,a=n.y,s=n.width,o=n.height;n.r?Vae(r,n):r.rect(i,a,s,o)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(en);mz.prototype.type="rect";const xa=mz;var UD={fill:"#000"},HD=2,jae={style:_n({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Y0.style)},vz=function(e){Lt(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=UD,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,Wae(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new sn(0,0,0,0),n=this._children,i=[],a=null,s=0;s<n.length;s++){var o=n[s],h=o.getBoundingRect(),d=o.getLocalTransform(i);d?(r.copy(h),r.applyTransform(d),a=a||r.clone(),a.union(r)):(a=a||h.clone(),a.union(h))}this._rect=a||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||UD},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,a=r.rich||i&&{};return Tt(r,n),i&&a?(this._mergeRich(a,i),r.rich=a):a&&(r.rich=a),r},t.prototype._mergeRich=function(r,n){for(var i=Gr(n),a=0;a<i.length;a++){var s=i[a];r[s]=r[s]||{},Tt(r[s],n[s])}},t.prototype.getAnimationStyleProps=function(){return jae},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||du,i=r.padding,a=YD(r),s=cae(a,r),o=jb(r),h=!!r.backgroundColor,d=s.outerHeight,m=s.outerWidth,g=s.contentWidth,y=s.lines,x=s.lineHeight,T=this._defaultStyle,M=r.x||0,P=r.y||0,I=r.align||T.align||"left",D=r.verticalAlign||T.verticalAlign||"top",R=M,B=af(P,s.contentHeight,D);if(o||i){var H=Bp(M,m,I),V=af(P,d,D);o&&this._renderBackground(r,r,H,V,m,d)}B+=x/2,i&&(R=ZD(M,I,i),D==="top"?B+=i[0]:D==="bottom"&&(B-=i[2]));for(var q=0,j=!1,te=XD("fill"in r?r.fill:(j=!0,T.fill)),ne=WD("stroke"in r?r.stroke:!h&&(!T.autoStroke||j)?(q=HD,T.stroke):null),ce=r.textShadowBlur>0,le=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),de=s.calculatedLineHeight,ae=0;ae<y.length;ae++){var Se=this._getOrCreateChild(W_),ve=Se.createStyle();Se.useStyle(ve),ve.text=y[ae],ve.x=R,ve.y=B,I&&(ve.textAlign=I),ve.textBaseline="middle",ve.opacity=r.opacity,ve.strokeFirst=!0,ce&&(ve.shadowBlur=r.textShadowBlur||0,ve.shadowColor=r.textShadowColor||"transparent",ve.shadowOffsetX=r.textShadowOffsetX||0,ve.shadowOffsetY=r.textShadowOffsetY||0),ve.stroke=ne,ve.fill=te,ne&&(ve.lineWidth=r.lineWidth||q,ve.lineDash=r.lineDash,ve.lineDashOffset=r.lineDashOffset||0),ve.font=n,GD(ve,r),B+=x,le&&Se.setBoundingRect(new sn(Bp(ve.x,r.width,ve.textAlign),af(ve.y,de,ve.textBaseline),g,de))}},t.prototype._updateRichTexts=function(){var r=this.style,n=YD(r),i=dae(n,r),a=i.width,s=i.outerWidth,o=i.outerHeight,h=r.padding,d=r.x||0,m=r.y||0,g=this._defaultStyle,y=r.align||g.align,x=r.verticalAlign||g.verticalAlign,T=Bp(d,s,y),M=af(m,o,x),P=T,I=M;h&&(P+=h[3],I+=h[0]);var D=P+a;jb(r)&&this._renderBackground(r,r,T,M,s,o);for(var R=!!r.backgroundColor,B=0;B<i.lines.length;B++){for(var H=i.lines[B],V=H.tokens,q=V.length,j=H.lineHeight,te=H.width,ne=0,ce=P,le=D,de=q-1,ae=void 0;ne<q&&(ae=V[ne],!ae.align||ae.align==="left");)this._placeToken(ae,r,j,I,ce,"left",R),te-=ae.width,ce+=ae.width,ne++;for(;de>=0&&(ae=V[de],ae.align==="right");)this._placeToken(ae,r,j,I,le,"right",R),te-=ae.width,le-=ae.width,de--;for(ce+=(a-(ce-P)-(D-le)-te)/2;ne<=de;)ae=V[ne],this._placeToken(ae,r,j,I,ce+ae.width/2,"center",R),ce+=ae.width,ne++;I+=j}},t.prototype._placeToken=function(r,n,i,a,s,o,h){var d=n.rich[r.styleName]||{};d.text=r.text;var m=r.verticalAlign,g=a+i/2;m==="top"?g=a+r.height/2:m==="bottom"&&(g=a+i-r.height/2);var y=!r.isLineHolder&&jb(d);y&&this._renderBackground(d,n,o==="right"?s-r.width:o==="center"?s-r.width/2:s,g-r.height/2,r.width,r.height);var x=!!d.backgroundColor,T=r.textPadding;T&&(s=ZD(s,o,T),g-=r.height/2-T[0]-r.innerHeight/2);var M=this._getOrCreateChild(W_),P=M.createStyle();M.useStyle(P);var I=this._defaultStyle,D=!1,R=0,B=XD("fill"in d?d.fill:"fill"in n?n.fill:(D=!0,I.fill)),H=WD("stroke"in d?d.stroke:"stroke"in n?n.stroke:!x&&!h&&(!I.autoStroke||D)?(R=HD,I.stroke):null),V=d.textShadowBlur>0||n.textShadowBlur>0;P.text=r.text,P.x=s,P.y=g,V&&(P.shadowBlur=d.textShadowBlur||n.textShadowBlur||0,P.shadowColor=d.textShadowColor||n.textShadowColor||"transparent",P.shadowOffsetX=d.textShadowOffsetX||n.textShadowOffsetX||0,P.shadowOffsetY=d.textShadowOffsetY||n.textShadowOffsetY||0),P.textAlign=o,P.textBaseline="middle",P.font=r.font||du,P.opacity=Jy(d.opacity,n.opacity,1),GD(P,d),H&&(P.lineWidth=Jy(d.lineWidth,n.lineWidth,R),P.lineDash=Ar(d.lineDash,n.lineDash),P.lineDashOffset=n.lineDashOffset||0,P.stroke=H),B&&(P.fill=B);var q=r.contentWidth,j=r.contentHeight;M.setBoundingRect(new sn(Bp(P.x,q,P.textAlign),af(P.y,j,P.textBaseline),q,j))},t.prototype._renderBackground=function(r,n,i,a,s,o){var h=r.backgroundColor,d=r.borderWidth,m=r.borderColor,g=h&&h.image,y=h&&!g,x=r.borderRadius,T=this,M,P;if(y||r.lineHeight||d&&m){M=this._getOrCreateChild(xa),M.useStyle(M.createStyle()),M.style.fill=null;var I=M.shape;I.x=i,I.y=a,I.width=s,I.height=o,I.r=x,M.dirtyShape()}if(y){var D=M.style;D.fill=h||null,D.fillOpacity=Ar(r.fillOpacity,1)}else if(g){P=this._getOrCreateChild(pl),P.onload=function(){T.dirtyStyle()};var R=P.style;R.image=h.image,R.x=i,R.y=a,R.width=s,R.height=o}if(d&&m){var D=M.style;D.lineWidth=d,D.stroke=m,D.strokeOpacity=Ar(r.strokeOpacity,1),D.lineDash=r.borderDash,D.lineDashOffset=r.borderDashOffset||0,M.strokeContainThreshold=0,M.hasFill()&&M.hasStroke()&&(D.strokeFirst=!0,D.lineWidth*=2)}var B=(M||P).style;B.shadowBlur=r.shadowBlur||0,B.shadowColor=r.shadowColor||"transparent",B.shadowOffsetX=r.shadowOffsetX||0,B.shadowOffsetY=r.shadowOffsetY||0,B.opacity=Jy(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return yz(r)&&(n=[r.fontStyle,r.fontWeight,gz(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&fs(n)||r.textFont||r.font},t}(wv),Gae={left:!0,right:1,center:1},qae={top:1,bottom:1,middle:1},jD=["fontStyle","fontWeight","fontSize","fontFamily"];function gz(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?sC+"px":e+"px"}function GD(e,t){for(var r=0;r<jD.length;r++){var n=jD[r],i=t[n];i!=null&&(e[n]=i)}}function yz(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function Wae(e){return qD(e),Ee(e.rich,qD),e}function qD(e){if(e){e.font=vz.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||Gae[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||qae[r]?r:"top";var n=e.padding;n&&(e.padding=pO(e.padding))}}function WD(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function XD(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function ZD(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function YD(e){var t=e.text;return t!=null&&(t+=""),t}function jb(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const Vo=vz;var yn=Hn(),Xae=function(e,t,r,n){if(n){var i=yn(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(a){var s=yn(a);s.seriesIndex=e,s.dataIndex=r,s.dataType=t})}},KD=1,JD={},_z=Hn(),AC=Hn(),xz=0,MC=1,IC=2,_s=["emphasis","blur","select"],QD=["normal","emphasis","blur","select"],Zae=10,Yae=9,jc="highlight",s_="downplay",sm="select",l_="unselect",lm="toggleSelect";function Wh(e){return e!=null&&e!=="none"}var e5=new yv(100);function t5(e){if(Yt(e)){var t=e5.get(e);return t||(t=gD(e,-.1),e5.put(e,t)),t}else if(cC(e)){var r=Tt({},e);return r.colorStops=Jt(e.colorStops,function(n){return{offset:n.offset,color:gD(n.color,-.1)}}),r}return e}function K0(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function bz(e){K0(e,"emphasis",IC)}function wz(e){e.hoverState===IC&&K0(e,"normal",xz)}function PC(e){K0(e,"blur",MC)}function Sz(e){e.hoverState===MC&&K0(e,"normal",xz)}function Kae(e){e.selected=!0}function Jae(e){e.selected=!1}function r5(e,t,r){t(e,r)}function ml(e,t,r){r5(e,t,r),e.isGroup&&e.traverse(function(n){r5(n,t,r)})}function Qae(e,t,r,n){for(var i=e.style,a={},s=0;s<t.length;s++){var o=t[s],h=i[o];a[o]=h??(n&&n[o])}for(var s=0;s<e.animators.length;s++){var d=e.animators[s];d.__fromStateTransition&&d.__fromStateTransition.indexOf(r)<0&&d.targetName==="style"&&d.saveTo(a,t)}return a}function eoe(e,t,r,n){var i=r&&an(r,"select")>=0,a=!1;if(e instanceof en){var s=_z(e),o=i&&s.selectFill||s.normalFill,h=i&&s.selectStroke||s.normalStroke;if(Wh(o)||Wh(h)){n=n||{};var d=n.style||{};d.fill==="inherit"?(a=!0,n=Tt({},n),d=Tt({},d),d.fill=o):!Wh(d.fill)&&Wh(o)?(a=!0,n=Tt({},n),d=Tt({},d),d.fill=t5(o)):!Wh(d.stroke)&&Wh(h)&&(a||(n=Tt({},n),d=Tt({},d)),d.stroke=t5(h)),n.style=d}}if(n&&n.z2==null){a||(n=Tt({},n));var m=e.z2EmphasisLift;n.z2=e.z2+(m??Zae)}return n}function toe(e,t,r){if(r&&r.z2==null){r=Tt({},r);var n=e.z2SelectLift;r.z2=e.z2+(n??Yae)}return r}function roe(e,t,r){var n=an(e.currentStates,t)>=0,i=e.style.opacity,a=n?null:Qae(e,["opacity"],t,{opacity:1});r=r||{};var s=r.style||{};return s.opacity==null&&(r=Tt({},r),s=Tt({opacity:n?i:a.opacity*.1},s),r.style=s),r}function Gb(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return eoe(this,e,t,r);if(e==="blur")return roe(this,e,r);if(e==="select")return toe(this,e,r)}return r}function noe(e){e.stateProxy=Gb;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=Gb),r&&(r.stateProxy=Gb)}function n5(e,t){!Az(e,t)&&!e.__highByOuter&&ml(e,bz)}function i5(e,t){!Az(e,t)&&!e.__highByOuter&&ml(e,wz)}function jm(e,t){e.__highByOuter|=1<<(t||0),ml(e,bz)}function Gm(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&ml(e,wz)}function Tz(e){ml(e,PC)}function DC(e){ml(e,Sz)}function Cz(e){ml(e,Kae)}function Ez(e){ml(e,Jae)}function Az(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function Mz(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,a){var s=AC(a),o=i==="series",h=o?e.getViewOfSeriesModel(a):e.getViewOfComponentModel(a);!o&&n.push(h),s.isBlured&&(h.group.traverse(function(d){Sz(d)}),o&&r.push(a)),s.isBlured=!1}),Ee(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function Y2(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function a(d,m){for(var g=0;g<m.length;g++){var y=d.getItemGraphicEl(m[g]);y&&DC(y)}}if(e!=null&&!(!t||t==="none")){var s=i.getSeriesByIndex(e),o=s.coordinateSystem;o&&o.master&&(o=o.master);var h=[];i.eachSeries(function(d){var m=s===d,g=d.coordinateSystem;g&&g.master&&(g=g.master);var y=g&&o?g===o:m;if(!(r==="series"&&!m||r==="coordinateSystem"&&!y||t==="series"&&m)){var x=n.getViewOfSeriesModel(d);if(x.group.traverse(function(P){PC(P)}),Ta(t))a(d.getData(),t);else if(rr(t))for(var T=Gr(t),M=0;M<T.length;M++)a(d.getData(T[M]),t[T[M]]);h.push(d),AC(d).isBlured=!0}}),i.eachComponent(function(d,m){if(d!=="series"){var g=n.getViewOfComponentModel(m);g&&g.toggleBlurSeries&&g.toggleBlurSeries(h,!0,i)}})}}function K2(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(n){AC(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(a){PC(a)})}}}function ioe(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(i){var a=xv(i,t);a=(Vt(a)?a[0]:a)||0;var s=i.getItemGraphicEl(a);if(!s)for(var o=i.count(),h=0;!s&&h<o;)s=i.getItemGraphicEl(h++);if(s){var d=yn(s);Y2(n,d.focus,d.blurScope,r)}else{var m=e.get(["emphasis","focus"]),g=e.get(["emphasis","blurScope"]);m!=null&&Y2(n,m,g,r)}}}function LC(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var a=n.getModel().getComponent(e,t);if(!a)return i;var s=n.getViewOfComponentModel(a);if(!s||!s.findHighDownDispatchers)return i;for(var o=s.findHighDownDispatchers(r),h,d=0;d<o.length;d++)if(yn(o[d]).focus==="self"){h=!0;break}return{focusSelf:h,dispatchers:o}}function aoe(e,t,r){var n=yn(e),i=LC(n.componentMainType,n.componentIndex,n.componentHighDownName,r),a=i.dispatchers,s=i.focusSelf;a?(s&&K2(n.componentMainType,n.componentIndex,r),Ee(a,function(o){return n5(o,t)})):(Y2(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&K2(n.componentMainType,n.componentIndex,r),n5(e,t))}function ooe(e,t,r){Mz(r);var n=yn(e),i=LC(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?Ee(i,function(a){return i5(a,t)}):i5(e,t)}function soe(e,t,r){if(Q2(t)){var n=t.dataType,i=e.getData(n),a=xv(i,t);Vt(a)||(a=[a]),e[t.type===lm?"toggleSelect":t.type===sm?"select":"unselect"](a,n)}}function a5(e){var t=e.getAllData();Ee(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(a,s){e.isSelected(s,i)?Cz(a):Ez(a)})})}function loe(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();Ee(n,function(i){i.data;var a=i.type,s=r.getSelectedDataIndices();if(s.length>0){var o={dataIndex:s,seriesIndex:r.seriesIndex};a!=null&&(o.dataType=a),t.push(o)}})}),t}function uoe(e,t,r){Iz(e,!0),ml(e,noe),hoe(e,t,r)}function coe(e){Iz(e,!1)}function kC(e,t,r,n){n?coe(e):uoe(e,t,r)}function hoe(e,t,r){var n=yn(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}function Iz(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function J2(e){return!!(e&&e.__highDownDispatcher)}function foe(e){var t=JD[e];return t==null&&KD<=32&&(t=JD[e]=KD++),t}function Q2(e){var t=e.type;return t===sm||t===l_||t===lm}function o5(e){var t=e.type;return t===jc||t===s_}function doe(e){var t=_z(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Xh=Kc.CMD,poe=[[],[],[]],s5=Math.sqrt,moe=Math.atan2;function voe(e,t){if(t){var r=e.data,n=e.len(),i,a,s,o,h,d,m=Xh.M,g=Xh.C,y=Xh.L,x=Xh.R,T=Xh.A,M=Xh.Q;for(s=0,o=0;s<n;){switch(i=r[s++],o=s,a=0,i){case m:a=1;break;case y:a=1;break;case g:a=3;break;case M:a=2;break;case T:var P=t[4],I=t[5],D=s5(t[0]*t[0]+t[1]*t[1]),R=s5(t[2]*t[2]+t[3]*t[3]),B=moe(-t[1]/R,t[0]/D);r[s]*=D,r[s++]+=P,r[s]*=R,r[s++]+=I,r[s++]*=D,r[s++]*=R,r[s++]+=B,r[s++]+=B,s+=2,o=s;break;case x:d[0]=r[s++],d[1]=r[s++],ho(d,d,t),r[o++]=d[0],r[o++]=d[1],d[0]+=r[s++],d[1]+=r[s++],ho(d,d,t),r[o++]=d[0],r[o++]=d[1]}for(h=0;h<a;h++){var H=poe[h];H[0]=r[s++],H[1]=r[s++],ho(H,H,t),r[o++]=H[0],r[o++]=H[1]}}e.increaseVersion()}}var qb=Math.sqrt,py=Math.sin,my=Math.cos,xp=Math.PI;function l5(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function eS(e,t){return(e[0]*t[0]+e[1]*t[1])/(l5(e)*l5(t))}function u5(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(eS(e,t))}function c5(e,t,r,n,i,a,s,o,h,d,m){var g=h*(xp/180),y=my(g)*(e-r)/2+py(g)*(t-n)/2,x=-1*py(g)*(e-r)/2+my(g)*(t-n)/2,T=y*y/(s*s)+x*x/(o*o);T>1&&(s*=qb(T),o*=qb(T));var M=(i===a?-1:1)*qb((s*s*(o*o)-s*s*(x*x)-o*o*(y*y))/(s*s*(x*x)+o*o*(y*y)))||0,P=M*s*x/o,I=M*-o*y/s,D=(e+r)/2+my(g)*P-py(g)*I,R=(t+n)/2+py(g)*P+my(g)*I,B=u5([1,0],[(y-P)/s,(x-I)/o]),H=[(y-P)/s,(x-I)/o],V=[(-1*y-P)/s,(-1*x-I)/o],q=u5(H,V);if(eS(H,V)<=-1&&(q=xp),eS(H,V)>=1&&(q=0),q<0){var j=Math.round(q/xp*1e6)/1e6;q=xp*2+j%2*xp}m.addData(d,D,R,s,o,B,q,g,a)}var goe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,yoe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function _oe(e){var t=new Kc;if(!e)return t;var r=0,n=0,i=r,a=n,s,o=Kc.CMD,h=e.match(goe);if(!h)return t;for(var d=0;d<h.length;d++){for(var m=h[d],g=m.charAt(0),y=void 0,x=m.match(yoe)||[],T=x.length,M=0;M<T;M++)x[M]=parseFloat(x[M]);for(var P=0;P<T;){var I=void 0,D=void 0,R=void 0,B=void 0,H=void 0,V=void 0,q=void 0,j=r,te=n,ne=void 0,ce=void 0;switch(g){case"l":r+=x[P++],n+=x[P++],y=o.L,t.addData(y,r,n);break;case"L":r=x[P++],n=x[P++],y=o.L,t.addData(y,r,n);break;case"m":r+=x[P++],n+=x[P++],y=o.M,t.addData(y,r,n),i=r,a=n,g="l";break;case"M":r=x[P++],n=x[P++],y=o.M,t.addData(y,r,n),i=r,a=n,g="L";break;case"h":r+=x[P++],y=o.L,t.addData(y,r,n);break;case"H":r=x[P++],y=o.L,t.addData(y,r,n);break;case"v":n+=x[P++],y=o.L,t.addData(y,r,n);break;case"V":n=x[P++],y=o.L,t.addData(y,r,n);break;case"C":y=o.C,t.addData(y,x[P++],x[P++],x[P++],x[P++],x[P++],x[P++]),r=x[P-2],n=x[P-1];break;case"c":y=o.C,t.addData(y,x[P++]+r,x[P++]+n,x[P++]+r,x[P++]+n,x[P++]+r,x[P++]+n),r+=x[P-2],n+=x[P-1];break;case"S":I=r,D=n,ne=t.len(),ce=t.data,s===o.C&&(I+=r-ce[ne-4],D+=n-ce[ne-3]),y=o.C,j=x[P++],te=x[P++],r=x[P++],n=x[P++],t.addData(y,I,D,j,te,r,n);break;case"s":I=r,D=n,ne=t.len(),ce=t.data,s===o.C&&(I+=r-ce[ne-4],D+=n-ce[ne-3]),y=o.C,j=r+x[P++],te=n+x[P++],r+=x[P++],n+=x[P++],t.addData(y,I,D,j,te,r,n);break;case"Q":j=x[P++],te=x[P++],r=x[P++],n=x[P++],y=o.Q,t.addData(y,j,te,r,n);break;case"q":j=x[P++]+r,te=x[P++]+n,r+=x[P++],n+=x[P++],y=o.Q,t.addData(y,j,te,r,n);break;case"T":I=r,D=n,ne=t.len(),ce=t.data,s===o.Q&&(I+=r-ce[ne-4],D+=n-ce[ne-3]),r=x[P++],n=x[P++],y=o.Q,t.addData(y,I,D,r,n);break;case"t":I=r,D=n,ne=t.len(),ce=t.data,s===o.Q&&(I+=r-ce[ne-4],D+=n-ce[ne-3]),r+=x[P++],n+=x[P++],y=o.Q,t.addData(y,I,D,r,n);break;case"A":R=x[P++],B=x[P++],H=x[P++],V=x[P++],q=x[P++],j=r,te=n,r=x[P++],n=x[P++],y=o.A,c5(j,te,r,n,V,q,R,B,H,y,t);break;case"a":R=x[P++],B=x[P++],H=x[P++],V=x[P++],q=x[P++],j=r,te=n,r+=x[P++],n+=x[P++],y=o.A,c5(j,te,r,n,V,q,R,B,H,y,t);break}}(g==="z"||g==="Z")&&(y=o.Z,t.addData(y),r=i,n=a),s=y}return t.toStatic(),t}var Pz=function(e){Lt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(en);function Dz(e){return e.setData!=null}function Lz(e,t){var r=_oe(e),n=Tt({},t);return n.buildPath=function(i){if(Dz(i)){i.setData(r.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;r.rebuildPath(a,1)}},n.applyTransform=function(i){voe(r,i),this.dirtyShape()},n}function xoe(e,t){return new Pz(Lz(e,t))}function boe(e,t){var r=Lz(e,t),n=function(i){Lt(a,i);function a(s){var o=i.call(this,s)||this;return o.applyTransform=r.applyTransform,o.buildPath=r.buildPath,o}return a}(Pz);return n}function woe(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var a=e[i];r.push(a.getUpdatedPathProxy(!0))}var s=new en(t);return s.createPathProxy(),s.buildPath=function(o){if(Dz(o)){o.appendPath(r);var h=o.getContext();h&&o.rebuildPath(h,1)}},s}var Soe=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),kz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Soe},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(en);kz.prototype.type="circle";const RC=kz;var Toe=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),Rz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Toe},t.prototype.buildPath=function(r,n){var i=.5522848,a=n.cx,s=n.cy,o=n.rx,h=n.ry,d=o*i,m=h*i;r.moveTo(a-o,s),r.bezierCurveTo(a-o,s-m,a-d,s-h,a,s-h),r.bezierCurveTo(a+d,s-h,a+o,s-m,a+o,s),r.bezierCurveTo(a+o,s+m,a+d,s+h,a,s+h),r.bezierCurveTo(a-d,s+h,a-o,s+m,a-o,s),r.closePath()},t}(en);Rz.prototype.type="ellipse";const Oz=Rz;var zz=Math.PI,Wb=zz*2,fc=Math.sin,Zh=Math.cos,Coe=Math.acos,Bi=Math.atan2,h5=Math.abs,um=Math.sqrt,Fp=Math.max,as=Math.min,Mo=1e-4;function Eoe(e,t,r,n,i,a,s,o){var h=r-e,d=n-t,m=s-i,g=o-a,y=g*h-m*d;if(!(y*y<Mo))return y=(m*(t-a)-g*(e-i))/y,[e+y*h,t+y*d]}function vy(e,t,r,n,i,a,s){var o=e-r,h=t-n,d=(s?a:-a)/um(o*o+h*h),m=d*h,g=-d*o,y=e+m,x=t+g,T=r+m,M=n+g,P=(y+T)/2,I=(x+M)/2,D=T-y,R=M-x,B=D*D+R*R,H=i-a,V=y*M-T*x,q=(R<0?-1:1)*um(Fp(0,H*H*B-V*V)),j=(V*R-D*q)/B,te=(-V*D-R*q)/B,ne=(V*R+D*q)/B,ce=(-V*D+R*q)/B,le=j-P,de=te-I,ae=ne-P,Se=ce-I;return le*le+de*de>ae*ae+Se*Se&&(j=ne,te=ce),{cx:j,cy:te,x0:-m,y0:-g,x1:j*(i/H-1),y1:te*(i/H-1)}}function Aoe(e){var t;if(Vt(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function Moe(e,t){var r,n=Fp(t.r,0),i=Fp(t.r0||0,0),a=n>0,s=i>0;if(!(!a&&!s)){if(a||(n=i,i=0),i>n){var o=n;n=i,i=o}var h=t.startAngle,d=t.endAngle;if(!(isNaN(h)||isNaN(d))){var m=t.cx,g=t.cy,y=!!t.clockwise,x=h5(d-h),T=x>Wb&&x%Wb;if(T>Mo&&(x=T),!(n>Mo))e.moveTo(m,g);else if(x>Wb-Mo)e.moveTo(m+n*Zh(h),g+n*fc(h)),e.arc(m,g,n,h,d,!y),i>Mo&&(e.moveTo(m+i*Zh(d),g+i*fc(d)),e.arc(m,g,i,d,h,y));else{var M=void 0,P=void 0,I=void 0,D=void 0,R=void 0,B=void 0,H=void 0,V=void 0,q=void 0,j=void 0,te=void 0,ne=void 0,ce=void 0,le=void 0,de=void 0,ae=void 0,Se=n*Zh(h),ve=n*fc(h),Ye=i*Zh(d),Qe=i*fc(d),Ct=x>Mo;if(Ct){var St=t.cornerRadius;St&&(r=Aoe(St),M=r[0],P=r[1],I=r[2],D=r[3]);var Kt=h5(n-i)/2;if(R=as(Kt,I),B=as(Kt,D),H=as(Kt,M),V=as(Kt,P),te=q=Fp(R,B),ne=j=Fp(H,V),(q>Mo||j>Mo)&&(ce=n*Zh(d),le=n*fc(d),de=i*Zh(h),ae=i*fc(h),x<zz)){var Ft=Eoe(Se,ve,de,ae,ce,le,Ye,Qe);if(Ft){var br=Se-Ft[0],Ir=ve-Ft[1],vr=ce-Ft[0],fr=le-Ft[1],qe=1/fc(Coe((br*vr+Ir*fr)/(um(br*br+Ir*Ir)*um(vr*vr+fr*fr)))/2),st=um(Ft[0]*Ft[0]+Ft[1]*Ft[1]);te=as(q,(n-st)/(qe+1)),ne=as(j,(i-st)/(qe-1))}}}if(!Ct)e.moveTo(m+Se,g+ve);else if(te>Mo){var et=as(I,te),mt=as(D,te),ft=vy(de,ae,Se,ve,n,et,y),ue=vy(ce,le,Ye,Qe,n,mt,y);e.moveTo(m+ft.cx+ft.x0,g+ft.cy+ft.y0),te<q&&et===mt?e.arc(m+ft.cx,g+ft.cy,te,Bi(ft.y0,ft.x0),Bi(ue.y0,ue.x0),!y):(et>0&&e.arc(m+ft.cx,g+ft.cy,et,Bi(ft.y0,ft.x0),Bi(ft.y1,ft.x1),!y),e.arc(m,g,n,Bi(ft.cy+ft.y1,ft.cx+ft.x1),Bi(ue.cy+ue.y1,ue.cx+ue.x1),!y),mt>0&&e.arc(m+ue.cx,g+ue.cy,mt,Bi(ue.y1,ue.x1),Bi(ue.y0,ue.x0),!y))}else e.moveTo(m+Se,g+ve),e.arc(m,g,n,h,d,!y);if(!(i>Mo)||!Ct)e.lineTo(m+Ye,g+Qe);else if(ne>Mo){var et=as(M,ne),mt=as(P,ne),ft=vy(Ye,Qe,ce,le,i,-mt,y),ue=vy(Se,ve,de,ae,i,-et,y);e.lineTo(m+ft.cx+ft.x0,g+ft.cy+ft.y0),ne<j&&et===mt?e.arc(m+ft.cx,g+ft.cy,ne,Bi(ft.y0,ft.x0),Bi(ue.y0,ue.x0),!y):(mt>0&&e.arc(m+ft.cx,g+ft.cy,mt,Bi(ft.y0,ft.x0),Bi(ft.y1,ft.x1),!y),e.arc(m,g,i,Bi(ft.cy+ft.y1,ft.cx+ft.x1),Bi(ue.cy+ue.y1,ue.cx+ue.x1),y),et>0&&e.arc(m+ue.cx,g+ue.cy,et,Bi(ue.y1,ue.x1),Bi(ue.y0,ue.x0),!y))}else e.lineTo(m+Ye,g+Qe),e.arc(m,g,i,d,h,y)}e.closePath()}}}var Ioe=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),Bz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Ioe},t.prototype.buildPath=function(r,n){Moe(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(en);Bz.prototype.type="sector";const OC=Bz;var Poe=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),Fz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Poe},t.prototype.buildPath=function(r,n){var i=n.cx,a=n.cy,s=Math.PI*2;r.moveTo(i+n.r,a),r.arc(i,a,n.r,0,s,!1),r.moveTo(i+n.r0,a),r.arc(i,a,n.r0,0,s,!0)},t}(en);Fz.prototype.type="ring";const $z=Fz;function Doe(e,t,r,n){var i=[],a=[],s=[],o=[],h,d,m,g;if(n){m=[1/0,1/0],g=[-1/0,-1/0];for(var y=0,x=e.length;y<x;y++)cf(m,m,e[y]),hf(g,g,e[y]);cf(m,m,n[0]),hf(g,g,n[1])}for(var y=0,x=e.length;y<x;y++){var T=e[y];if(r)h=e[y?y-1:x-1],d=e[(y+1)%x];else if(y===0||y===x-1){i.push(nne(e[y]));continue}else h=e[y-1],d=e[y+1];gO(a,d,h),hb(a,a,t);var M=P2(T,h),P=P2(T,d),I=M+P;I!==0&&(M/=I,P/=I),hb(s,a,-M),hb(o,a,P);var D=tD([],T,s),R=tD([],T,o);n&&(hf(D,D,m),cf(D,D,g),hf(R,R,m),cf(R,R,g)),i.push(D),i.push(R)}return r&&i.push(i.shift()),i}function Nz(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var a=Doe(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var s=i.length,o=0;o<(r?s:s-1);o++){var h=a[o*2],d=a[o*2+1],m=i[(o+1)%s];e.bezierCurveTo(h[0],h[1],d[0],d[1],m[0],m[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var o=1,g=i.length;o<g;o++)e.lineTo(i[o][0],i[o][1])}r&&e.closePath()}}var Loe=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),Vz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Loe},t.prototype.buildPath=function(r,n){Nz(r,n,!0)},t}(en);Vz.prototype.type="polygon";const Uz=Vz;var koe=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),Hz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new koe},t.prototype.buildPath=function(r,n){Nz(r,n,!1)},t}(en);Hz.prototype.type="polyline";const zC=Hz;var Roe={},Ooe=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),jz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ooe},t.prototype.buildPath=function(r,n){var i,a,s,o;if(this.subPixelOptimize){var h=dz(Roe,n,this.style);i=h.x1,a=h.y1,s=h.x2,o=h.y2}else i=n.x1,a=n.y1,s=n.x2,o=n.y2;var d=n.percent;d!==0&&(r.moveTo(i,a),d<1&&(s=i*(1-d)+s*d,o=a*(1-d)+o*d),r.lineTo(s,o))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(en);jz.prototype.type="line";const pu=jz;var pa=[],zoe=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function f5(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?dD:wi)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?dD:wi)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?O2:Si)(e.x1,e.cpx1,e.x2,t),(r?O2:Si)(e.y1,e.cpy1,e.y2,t)]}var Gz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new zoe},t.prototype.buildPath=function(r,n){var i=n.x1,a=n.y1,s=n.x2,o=n.y2,h=n.cpx1,d=n.cpy1,m=n.cpx2,g=n.cpy2,y=n.percent;y!==0&&(r.moveTo(i,a),m==null||g==null?(y<1&&(V_(i,h,s,y,pa),h=pa[1],s=pa[2],V_(a,d,o,y,pa),d=pa[1],o=pa[2]),r.quadraticCurveTo(h,d,s,o)):(y<1&&(N_(i,h,m,s,y,pa),h=pa[1],m=pa[2],s=pa[3],N_(a,d,g,o,y,pa),d=pa[1],g=pa[2],o=pa[3]),r.bezierCurveTo(h,d,m,g,s,o)))},t.prototype.pointAt=function(r){return f5(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=f5(this.shape,r,!0);return fC(n,n)},t}(en);Gz.prototype.type="bezier-curve";const BC=Gz;var Boe=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),qz=function(e){Lt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Boe},t.prototype.buildPath=function(r,n){var i=n.cx,a=n.cy,s=Math.max(n.r,0),o=n.startAngle,h=n.endAngle,d=n.clockwise,m=Math.cos(o),g=Math.sin(o);r.moveTo(m*s+i,g*s+a),r.arc(i,a,s,o,h,!d)},t}(en);qz.prototype.type="arc";const FC=qz;var Foe=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],a=0;a<i.length;a++)i[a].buildPath(r,i[a].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),en.prototype.getBoundingRect.call(this)},t}(en);const Wz=Foe;var $oe=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const Xz=$oe;var Noe=function(e){Lt(t,e);function t(r,n,i,a,s,o){var h=e.call(this,s)||this;return h.x=r??0,h.y=n??0,h.x2=i??1,h.y2=a??0,h.type="linear",h.global=o||!1,h}return t}(Xz);const Voe=Noe;var Uoe=function(e){Lt(t,e);function t(r,n,i,a,s){var o=e.call(this,a)||this;return o.x=r??.5,o.y=n??.5,o.r=i??.5,o.type="radial",o.global=s||!1,o}return t}(Xz);const Hoe=Uoe;var dc=[0,0],pc=[0,0],gy=new pn,yy=new pn,joe=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new pn;for(var n=0;n<2;n++)this._axes[n]=new pn;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,a=t.x,s=t.y,o=a+t.width,h=s+t.height;if(n[0].set(a,s),n[1].set(o,s),n[2].set(o,h),n[3].set(a,h),r)for(var d=0;d<4;d++)n[d].transform(r);pn.sub(i[0],n[1],n[0]),pn.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var d=0;d<2;d++)this._origin[d]=i[d].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return gy.set(1/0,1/0),yy.set(0,0),!this._intersectCheckOneSide(this,t,gy,yy,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,gy,yy,i,-1)&&(n=!1,i)||i||pn.copy(r,n?gy:yy),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,a,s){for(var o=!0,h=0;h<2;h++){var d=this._axes[h];if(this._getProjMinMaxOnAxis(h,t._corners,dc),this._getProjMinMaxOnAxis(h,r._corners,pc),dc[1]<pc[0]||dc[0]>pc[1]){if(o=!1,a)return o;var m=Math.abs(pc[0]-dc[1]),g=Math.abs(dc[0]-pc[1]);Math.min(m,g)>i.len()&&(m<g?pn.scale(i,d,-m*s):pn.scale(i,d,g*s))}else if(n){var m=Math.abs(pc[0]-dc[1]),g=Math.abs(dc[0]-pc[1]);Math.min(m,g)<n.len()&&(m<g?pn.scale(n,d,m*s):pn.scale(n,d,-g*s))}}return o},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],a=this._origin,s=r[0].dot(i)+a[t],o=s,h=s,d=1;d<r.length;d++){var m=r[d].dot(i)+a[t];o=Math.min(m,o),h=Math.max(m,h)}n[0]=o,n[1]=h},e}();const X_=joe;var Goe=[],qoe=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new sn(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(Goe)),r.union(a)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var s=0;s<this._displayables.length;s++){var o=this._displayables[s];if(o.contain(r,n))return!0}return!1},t}(wv);const Woe=qoe;var Xoe=Hn();function Zoe(e,t,r,n,i){var a;if(t&&t.ecModel){var s=t.ecModel.getUpdatePayload();a=s&&s.animation}var o=t&&t.isAnimationEnabled(),h=e==="update";if(o){var d=void 0,m=void 0,g=void 0;n?(d=Ar(n.duration,200),m=Ar(n.easing,"cubicOut"),g=0):(d=t.getShallow(h?"animationDurationUpdate":"animationDuration"),m=t.getShallow(h?"animationEasingUpdate":"animationEasing"),g=t.getShallow(h?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(d=a.duration),a.easing!=null&&(m=a.easing),a.delay!=null&&(g=a.delay)),cr(g)&&(g=g(r,i)),cr(d)&&(d=d(r));var y={duration:d||0,delay:g,easing:m};return y}else return null}function $C(e,t,r,n,i,a,s){var o=!1,h;cr(i)?(s=a,a=i,i=null):rr(i)&&(a=i.cb,s=i.during,o=i.isFrom,h=i.removeOpt,i=i.dataIndex);var d=e==="leave";d||t.stopAnimation("leave");var m=Zoe(e,n,i,d?h||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(m&&m.duration>0){var g=m.duration,y=m.delay,x=m.easing,T={duration:g,delay:y||0,easing:x,done:a,force:!!a||!!s,setToFinal:!d,scope:e,during:s};o?t.animateFrom(r,T):t.animateTo(r,T)}else t.stopAnimation(),!o&&t.attr(r),s&&s(1),a&&a()}function ih(e,t,r,n,i,a){$C("update",e,t,r,n,i,a)}function Sv(e,t,r,n,i,a){$C("enter",e,t,r,n,i,a)}function cm(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function Z_(e,t,r,n,i,a){cm(e)||$C("leave",e,t,r,n,i,a)}function d5(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),Z_(e,{style:{opacity:0}},t,r,n)}function Yoe(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||d5(i,t,r,n)}):d5(e,t,r,n)}function Koe(e){Xoe(e).oldStyle=e.style}var Y_=Math.max,K_=Math.min,tS={};function Joe(e){return en.extend(e)}var Qoe=boe;function ese(e,t){return Qoe(e,t)}function jo(e,t){tS[e]=t}function tse(e){if(tS.hasOwnProperty(e))return tS[e]}function NC(e,t,r,n){var i=xoe(e,t);return r&&(n==="center"&&(r=Yz(r,i.getBoundingRect())),Kz(i,r)),i}function Zz(e,t,r){var n=new pl({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var a={width:i.width,height:i.height};n.setStyle(Yz(t,a))}}});return n}function Yz(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var a=e.x+e.width/2,s=e.y+e.height/2;return{x:a-n/2,y:s-i/2,width:n,height:i}}var rse=woe;function Kz(e,t){if(e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function qm(e,t){return dz(e,e,{lineWidth:t}),e}function nse(e){return pz(e.shape,e.shape,e.style),e}var ise=Oc;function ase(e,t){for(var r=pC([]);e&&e!==t;)bf(r,e.getLocalTransform(),r),e=e.parent;return r}function VC(e,t,r){return t&&!Ta(t)&&(t=xC.getLocalTransform(t)),r&&(t=vC([],t)),ho([],e,t)}function ose(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),a=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return a=VC(a,t,r),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function p5(e){return!e.isGroup}function sse(e){return e.shape!=null}function Jz(e,t,r){if(!e||!t)return;function n(s){var o={};return s.traverse(function(h){p5(h)&&h.anid&&(o[h.anid]=h)}),o}function i(s){var o={x:s.x,y:s.y,rotation:s.rotation};return sse(s)&&(o.shape=Tt({},s.shape)),o}var a=n(e);t.traverse(function(s){if(p5(s)&&s.anid){var o=a[s.anid];if(o){var h=i(s);s.attr(i(o)),ih(s,h,r,yn(s).dataIndex)}}})}function lse(e,t){return Jt(e,function(r){var n=r[0];n=Y_(n,t.x),n=K_(n,t.x+t.width);var i=r[1];return i=Y_(i,t.y),i=K_(i,t.y+t.height),[n,i]})}function use(e,t){var r=Y_(e.x,t.x),n=K_(e.x+e.width,t.x+t.width),i=Y_(e.y,t.y),a=K_(e.y+e.height,t.y+t.height);if(n>=r&&a>=i)return{x:r,y:i,width:n-r,height:a-i}}function Qz(e,t,r){var n=Tt({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),_n(i,r),new pl(n)):NC(e.replace("path://",""),n,r,"center")}function cse(e,t,r,n,i){for(var a=0,s=i[i.length-1];a<i.length;a++){var o=i[a];if(e9(e,t,r,n,o[0],o[1],s[0],s[1]))return!0;s=o}}function e9(e,t,r,n,i,a,s,o){var h=r-e,d=n-t,m=s-i,g=o-a,y=Xb(m,g,h,d);if(hse(y))return!1;var x=e-i,T=t-a,M=Xb(x,T,h,d)/y;if(M<0||M>1)return!1;var P=Xb(x,T,m,g)/y;return!(P<0||P>1)}function Xb(e,t,r,n){return e*n-r*t}function hse(e){return e<=1e-6&&e>=-1e-6}function t9(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Yt(t)?{formatter:t}:t,a=r.mainType,s=r.componentIndex,o={componentType:a,name:n,$vars:["name"]};o[a+"Index"]=s;var h=e.formatterParamsExtra;h&&Ee(Gr(h),function(m){Vf(o,m)||(o[m]=h[m],o.$vars.push(m))});var d=yn(e.el);d.componentMainType=a,d.componentIndex=s,d.tooltipConfig={name:n,option:_n({content:n,formatterParams:o},i)}}function m5(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function J0(e,t){if(e)if(Vt(e))for(var r=0;r<e.length;r++)m5(e[r],t);else m5(e,t)}jo("circle",RC);jo("ellipse",Oz);jo("sector",OC);jo("ring",$z);jo("polygon",Uz);jo("polyline",zC);jo("rect",xa);jo("line",pu);jo("bezierCurve",BC);jo("arc",FC);const fse=Object.freeze(Object.defineProperty({__proto__:null,Arc:FC,BezierCurve:BC,BoundingRect:sn,Circle:RC,CompoundPath:Wz,Ellipse:Oz,Group:Pi,Image:pl,IncrementalDisplayable:Woe,Line:pu,LinearGradient:Voe,OrientedBoundingRect:X_,Path:en,Point:pn,Polygon:Uz,Polyline:zC,RadialGradient:Hoe,Rect:xa,Ring:$z,Sector:OC,Text:Vo,applyTransform:VC,clipPointsByRect:lse,clipRectByRect:use,createIcon:Qz,extendPath:ese,extendShape:Joe,getShapeClass:tse,getTransform:ase,groupTransition:Jz,initProps:Sv,isElementRemoved:cm,lineLineIntersect:e9,linePolygonIntersect:cse,makeImage:Zz,makePath:NC,mergePath:rse,registerShape:jo,removeElement:Z_,removeElementWithFadeOut:Yoe,resizePath:Kz,setTooltipConfig:t9,subPixelOptimize:ise,subPixelOptimizeLine:qm,subPixelOptimizeRect:nse,transformDirection:ose,traverseElements:J0,updateProps:ih},Symbol.toStringTag,{value:"Module"}));var Q0={};function dse(e,t){for(var r=0;r<_s.length;r++){var n=_s[r],i=t[n],a=e.ensureState(n);a.style=a.style||{},a.style.text=i}var s=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(s,!0)}function v5(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,a=e.labelDimIndex,s=t.normal,o;n&&(o=n.getFormattedLabel(i,"normal",null,a,s&&s.get("formatter"),r!=null?{interpolatedValue:r}:null)),o==null&&(o=cr(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var h={normal:o},d=0;d<_s.length;d++){var m=_s[d],g=t[m];h[m]=Ar(n?n.getFormattedLabel(i,m,null,a,g&&g.get("formatter")):null,o)}return h}function r9(e,t,r,n){r=r||Q0;for(var i=e instanceof Vo,a=!1,s=0;s<QD.length;s++){var o=t[QD[s]];if(o&&o.getShallow("show")){a=!0;break}}var h=i?e:e.getTextContent();if(a){i||(h||(h=new Vo,e.setTextContent(h)),e.stateProxy&&(h.stateProxy=e.stateProxy));var d=v5(r,t),m=t.normal,g=!!m.getShallow("show"),y=Jc(m,n&&n.normal,r,!1,!i);y.text=d.normal,i||e.setTextConfig(g5(m,r,!1));for(var s=0;s<_s.length;s++){var x=_s[s],o=t[x];if(o){var T=h.ensureState(x),M=!!Ar(o.getShallow("show"),g);if(M!==g&&(T.ignore=!M),T.style=Jc(o,n&&n[x],r,!0,!i),T.style.text=d[x],!i){var P=e.ensureState(x);P.textConfig=g5(o,r,!0)}}}h.silent=!!m.getShallow("silent"),h.style.x!=null&&(y.x=h.style.x),h.style.y!=null&&(y.y=h.style.y),h.ignore=!g,h.useStyle(y),h.dirty(),r.enableTextSetter&&(gse(h).setLabelText=function(I){var D=v5(r,t,I);dse(h,D)})}else h&&(h.ignore=!0);e.dirty()}function e1(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<_s.length;n++){var i=_s[n];r[i]=e.getModel([i,t])}return r}function Jc(e,t,r,n,i){var a={};return pse(a,e,r,n,i),t&&Tt(a,t),a}function g5(e,t,r){t=t||{};var n={},i,a=e.getShallow("rotate"),s=Ar(e.getShallow("distance"),r?null:5),o=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),o!=null&&(n.offset=o),a!=null&&(a*=Math.PI/180,n.rotation=a),s!=null&&(n.distance=s),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function pse(e,t,r,n,i){r=r||Q0;var a=t.ecModel,s=a&&a.option.textStyle,o=mse(t),h;if(o){h={};for(var d in o)if(o.hasOwnProperty(d)){var m=t.getModel(["rich",d]);b5(h[d]={},m,s,r,n,i,!1,!0)}}h&&(e.rich=h);var g=t.get("overflow");g&&(e.overflow=g);var y=t.get("minMargin");y!=null&&(e.margin=y),b5(e,t,s,r,n,i,!0,!1)}function mse(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||Q0).rich;if(r){t=t||{};for(var n=Gr(r),i=0;i<n.length;i++){var a=n[i];t[a]=1}}e=e.parentModel}return t}var y5=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],_5=["align","lineHeight","width","height","tag","verticalAlign"],x5=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function b5(e,t,r,n,i,a,s,o){r=!i&&r||Q0;var h=n&&n.inheritColor,d=t.getShallow("color"),m=t.getShallow("textBorderColor"),g=Ar(t.getShallow("opacity"),r.opacity);(d==="inherit"||d==="auto")&&(h?d=h:d=null),(m==="inherit"||m==="auto")&&(h?m=h:m=null),a||(d=d||r.color,m=m||r.textBorderColor),d!=null&&(e.fill=d),m!=null&&(e.stroke=m);var y=Ar(t.getShallow("textBorderWidth"),r.textBorderWidth);y!=null&&(e.lineWidth=y);var x=Ar(t.getShallow("textBorderType"),r.textBorderType);x!=null&&(e.lineDash=x);var T=Ar(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);T!=null&&(e.lineDashOffset=T),!i&&g==null&&!o&&(g=n&&n.defaultOpacity),g!=null&&(e.opacity=g),!i&&!a&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var M=0;M<y5.length;M++){var P=y5[M],I=Ar(t.getShallow(P),r[P]);I!=null&&(e[P]=I)}for(var M=0;M<_5.length;M++){var P=_5[M],I=t.getShallow(P);I!=null&&(e[P]=I)}if(e.verticalAlign==null){var D=t.getShallow("baseline");D!=null&&(e.verticalAlign=D)}if(!s||!n.disableBox){for(var M=0;M<x5.length;M++){var P=x5[M],I=t.getShallow(P);I!=null&&(e[P]=I)}var R=t.getShallow("borderType");R!=null&&(e.borderDash=R),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&h&&(e.backgroundColor=h),(e.borderColor==="auto"||e.borderColor==="inherit")&&h&&(e.borderColor=h)}}function vse(e,t){var r=t&&t.getModel("textStyle");return fs([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var gse=Hn(),yse=["textStyle","color"],Zb=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],Yb=new Vo,_se=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(yse):null)},e.prototype.getFont=function(){return vse({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<Zb.length;n++)r[Zb[n]]=this.getShallow(Zb[n]);return Yb.useStyle(r),Yb.update(),Yb.getBoundingRect()},e}();const xse=_se;var n9=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],bse=Hm(n9),wse=function(){function e(){}return e.prototype.getLineStyle=function(t){return bse(this,t)},e}(),i9=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Sse=Hm(i9),Tse=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return Sse(this,t,r)},e}(),ah=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){An(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var a=this.parentModel;a&&(i=a.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,a=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(a,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(zr(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Er.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();CC(ah);tae(ah);Ho(ah,wse);Ho(ah,Tse);Ho(ah,oae);Ho(ah,xse);const sa=ah;var Cse=Math.round(Math.random()*10);function t1(e){return[e||"",Cse++].join("_")}function Ese(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=ds(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var a=ds(r).main;e.hasSubTypes(r)&&t[a]&&(i=t[a](n))}return i}}function Ase(e,t){e.topologicalTravel=function(a,s,o,h){if(!a.length)return;var d=r(s),m=d.graph,g=d.noEntryList,y={};for(Ee(a,function(D){y[D]=!0});g.length;){var x=g.pop(),T=m[x],M=!!y[x];M&&(o.call(h,x,T.originalDeps.slice()),delete y[x]),Ee(T.successor,M?I:P)}Ee(y,function(){var D="";throw new Error(D)});function P(D){m[D].entryCount--,m[D].entryCount===0&&g.push(D)}function I(D){y[D]=!0,P(D)}};function r(a){var s={},o=[];return Ee(a,function(h){var d=n(s,h),m=d.originalDeps=t(h),g=i(m,a);d.entryCount=g.length,d.entryCount===0&&o.push(h),Ee(g,function(y){an(d.predecessor,y)<0&&d.predecessor.push(y);var x=n(s,y);an(x.successor,y)<0&&x.successor.push(h)})}),{graph:s,noEntryList:o}}function n(a,s){return a[s]||(a[s]={predecessor:[],successor:[]}),a[s]}function i(a,s){var o=[];return Ee(a,function(h){an(s,h)>=0&&o.push(h)}),o}}const Mse={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Ise={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var J_="ZH",UC="EN",Wm=UC,u_={},HC={},a9=Er.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(J_)>-1?J_:Wm}():Wm;function o9(e,t){e=e.toUpperCase(),HC[e]=new sa(t),u_[e]=t}function Pse(e){if(Yt(e)){var t=u_[e.toUpperCase()]||{};return e===J_||e===UC?zr(t):An(zr(t),zr(u_[Wm]),!1)}else return An(zr(e),zr(u_[Wm]),!1)}function Dse(e){return HC[e]}function Lse(){return HC[Wm]}o9(UC,Mse);o9(J_,Ise);var jC=1e3,GC=jC*60,hm=GC*60,so=hm*24,w5=so*365,$p={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},_y="{yyyy}-{MM}-{dd}",S5={year:"{yyyy}",month:"{yyyy}-{MM}",day:_y,hour:_y+" "+$p.hour,minute:_y+" "+$p.minute,second:_y+" "+$p.second,millisecond:$p.none},Kb=["year","month","day","hour","minute","second","millisecond"],s9=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function mc(e,t){return e+="","0000".substr(0,t-e.length)+e}function Sf(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function kse(e){return e===Sf(e)}function Rse(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function r1(e,t,r,n){var i=ll(e),a=i[qC(r)](),s=i[Tf(r)]()+1,o=Math.floor((s-1)/3)+1,h=i[n1(r)](),d=i["get"+(r?"UTC":"")+"Day"](),m=i[Xm(r)](),g=(m-1)%12+1,y=i[i1(r)](),x=i[a1(r)](),T=i[o1(r)](),M=n instanceof sa?n:Dse(n||a9)||Lse(),P=M.getModel("time"),I=P.get("month"),D=P.get("monthAbbr"),R=P.get("dayOfWeek"),B=P.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,a%100+"").replace(/{Q}/g,o+"").replace(/{MMMM}/g,I[s-1]).replace(/{MMM}/g,D[s-1]).replace(/{MM}/g,mc(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,mc(h,2)).replace(/{d}/g,h+"").replace(/{eeee}/g,R[d]).replace(/{ee}/g,B[d]).replace(/{e}/g,d+"").replace(/{HH}/g,mc(m,2)).replace(/{H}/g,m+"").replace(/{hh}/g,mc(g+"",2)).replace(/{h}/g,g+"").replace(/{mm}/g,mc(y,2)).replace(/{m}/g,y+"").replace(/{ss}/g,mc(x,2)).replace(/{s}/g,x+"").replace(/{SSS}/g,mc(T,3)).replace(/{S}/g,T+"")}function Ose(e,t,r,n,i){var a=null;if(Yt(r))a=r;else if(cr(r))a=r(e.value,t,{level:e.level});else{var s=Tt({},$p);if(e.level>0)for(var o=0;o<Kb.length;++o)s[Kb[o]]="{primary|"+s[Kb[o]]+"}";var h=r?r.inherit===!1?r:_n(r,s):s,d=l9(e.value,i);if(h[d])a=h[d];else if(h.inherit){for(var m=s9.indexOf(d),o=m-1;o>=0;--o)if(h[d]){a=h[d];break}a=a||s.none}if(Vt(a)){var g=e.level==null?0:e.level>=0?e.level:a.length+e.level;g=Math.min(g,a.length-1),a=a[g]}}return r1(new Date(e.value),a,i,n)}function l9(e,t){var r=ll(e),n=r[Tf(t)]()+1,i=r[n1(t)](),a=r[Xm(t)](),s=r[i1(t)](),o=r[a1(t)](),h=r[o1(t)](),d=h===0,m=d&&o===0,g=m&&s===0,y=g&&a===0,x=y&&i===1,T=x&&n===1;return T?"year":x?"month":y?"day":g?"hour":m?"minute":d?"second":"millisecond"}function T5(e,t,r){var n=zn(e)?ll(e):e;switch(t=t||l9(e,r),t){case"year":return n[qC(r)]();case"half-year":return n[Tf(r)]()>=6?1:0;case"quarter":return Math.floor((n[Tf(r)]()+1)/4);case"month":return n[Tf(r)]();case"day":return n[n1(r)]();case"half-day":return n[Xm(r)]()/24;case"hour":return n[Xm(r)]();case"minute":return n[i1(r)]();case"second":return n[a1(r)]();case"millisecond":return n[o1(r)]()}}function qC(e){return e?"getUTCFullYear":"getFullYear"}function Tf(e){return e?"getUTCMonth":"getMonth"}function n1(e){return e?"getUTCDate":"getDate"}function Xm(e){return e?"getUTCHours":"getHours"}function i1(e){return e?"getUTCMinutes":"getMinutes"}function a1(e){return e?"getUTCSeconds":"getSeconds"}function o1(e){return e?"getUTCMilliseconds":"getMilliseconds"}function zse(e){return e?"setUTCFullYear":"setFullYear"}function u9(e){return e?"setUTCMonth":"setMonth"}function c9(e){return e?"setUTCDate":"setDate"}function h9(e){return e?"setUTCHours":"setHours"}function f9(e){return e?"setUTCMinutes":"setMinutes"}function d9(e){return e?"setUTCSeconds":"setSeconds"}function p9(e){return e?"setUTCMilliseconds":"setMilliseconds"}function m9(e){if(!Oie(e))return Yt(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function v9(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var WC=pO;function rS(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(m){return m&&fs(m)?m:"-"}function a(m){return!!(m!=null&&!isNaN(m)&&isFinite(m))}var s=t==="time",o=e instanceof Date;if(s||o){var h=s?ll(e):e;if(isNaN(+h)){if(o)return"-"}else return r1(h,n,r)}if(t==="ordinal")return A2(e)?i(e):zn(e)&&a(e)?e+"":"-";var d=G_(e);return a(d)?m9(d):A2(e)?i(e):typeof e=="boolean"?e+"":"-"}var C5=["a","b","c","d","e","f","g"],Jb=function(e,t){return"{"+e+(t??"")+"}"};function g9(e,t,r){Vt(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],a=0;a<i.length;a++){var s=C5[a];e=e.replace(Jb(s),Jb(s,0))}for(var o=0;o<n;o++)for(var h=0;h<i.length;h++){var d=t[o][i[h]];e=e.replace(Jb(C5[h],o),r?$a(d):d)}return e}function Bse(e,t){var r=Yt(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var a=r.renderMode||"html";if(!n)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+$a(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+$a(n)+";"+(t||"")+'"></span>';var s=r.markerId||"markerX";return{renderMode:a,content:"{"+s+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function Zm(e,t){return t=t||"transparent",Yt(e)?e:rr(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function E5(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var c_=Ee,Fse=["left","right","top","bottom","width","height"],xy=[["width","left","right"],["height","top","bottom"]];function y9(e,t,r,n,i){var a=0,s=0;n==null&&(n=1/0),i==null&&(i=1/0);var o=0;t.eachChild(function(h,d){var m=h.getBoundingRect(),g=t.childAt(d+1),y=g&&g.getBoundingRect(),x,T;if(e==="horizontal"){var M=m.width+(y?-y.x+m.x:0);x=a+M,x>n||h.newline?(a=0,x=M,s+=o+r,o=m.height):o=Math.max(o,m.height)}else{var P=m.height+(y?-y.y+m.y:0);T=s+P,T>i||h.newline?(a+=o+r,s=0,T=P,o=m.width):o=Math.max(o,m.width)}h.newline||(h.x=a,h.y=s,h.markRedraw(),e==="horizontal"?a=x+r:s=T+r)})}gi(y9,"vertical");gi(y9,"horizontal");function XC(e,t,r){r=WC(r||0);var n=t.width,i=t.height,a=Ti(e.left,n),s=Ti(e.top,i),o=Ti(e.right,n),h=Ti(e.bottom,i),d=Ti(e.width,n),m=Ti(e.height,i),g=r[2]+r[0],y=r[1]+r[3],x=e.aspect;switch(isNaN(d)&&(d=n-o-y-a),isNaN(m)&&(m=i-h-g-s),x!=null&&(isNaN(d)&&isNaN(m)&&(x>n/i?d=n*.8:m=i*.8),isNaN(d)&&(d=x*m),isNaN(m)&&(m=d/x)),isNaN(a)&&(a=n-o-d-y),isNaN(s)&&(s=i-h-m-g),e.left||e.right){case"center":a=n/2-d/2-r[3];break;case"right":a=n-d-y;break}switch(e.top||e.bottom){case"middle":case"center":s=i/2-m/2-r[0];break;case"bottom":s=i-m-g;break}a=a||0,s=s||0,isNaN(d)&&(d=n-y-a-(o||0)),isNaN(m)&&(m=i-g-s-(h||0));var T=new sn(a+r[3],s+r[0],d,m);return T.margin=r,T}function Ym(e){var t=e.layoutMode||e.constructor.layoutMode;return rr(t)?t:t?{type:t}:null}function Km(e,t,r){var n=r&&r.ignoreSize;!Vt(n)&&(n=[n,n]);var i=s(xy[0],0),a=s(xy[1],1);d(xy[0],e,i),d(xy[1],e,a);function s(m,g){var y={},x=0,T={},M=0,P=2;if(c_(m,function(R){T[R]=e[R]}),c_(m,function(R){o(t,R)&&(y[R]=T[R]=t[R]),h(y,R)&&x++,h(T,R)&&M++}),n[g])return h(t,m[1])?T[m[2]]=null:h(t,m[2])&&(T[m[1]]=null),T;if(M===P||!x)return T;if(x>=P)return y;for(var I=0;I<m.length;I++){var D=m[I];if(!o(y,D)&&o(e,D)){y[D]=e[D];break}}return y}function o(m,g){return m.hasOwnProperty(g)}function h(m,g){return m[g]!=null&&m[g]!=="auto"}function d(m,g,y){c_(m,function(x){g[x]=y[x]})}}function ZC(e){return $se({},e)}function $se(e,t){return t&&e&&c_(Fse,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var Nse=Hn(),id=function(e){Lt(t,e);function t(r,n,i){var a=e.call(this,r,n,i)||this;return a.uid=t1("ec_cpt_model"),a}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=Ym(this),a=i?ZC(r):{},s=n.getTheme();An(r,s.get(this.mainType)),An(r,this.getDefaultOption()),i&&Km(r,a,i)},t.prototype.mergeOption=function(r,n){An(this.option,r,!0);var i=Ym(this);i&&Km(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!Jie(r))return r.defaultOption;var n=Nse(this);if(!n.defaultOption){for(var i=[],a=r;a;){var s=a.prototype.defaultOption;s&&i.push(s),a=a.superClass}for(var o={},h=i.length-1;h>=0;h--)o=An(o,i[h],!0);n.defaultOption=o}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",a=r+"Id";return bv(this.ecModel,r,{index:this.get(i,!0),id:this.get(a,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(sa);az(id,sa);X0(id);Ese(id);Ase(id,Vse);function Vse(e){var t=[];return Ee(id.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Jt(t,function(r){return ds(r).main}),e!=="dataset"&&an(t,"dataset")<=0&&t.unshift("dataset"),t}const Tn=id;var _9="";typeof navigator<"u"&&(_9=navigator.platform||"");var Yh="rgba(0, 0, 0, 0.2)";const Use={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Yh,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Yh,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Yh,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Yh,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Yh,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Yh,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:_9.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var x9=Mr(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),mo="original",Ca="arrayRows",ws="objectRows",vl="keyedColumns",uu="typedArray",b9="unknown",il="column",ad="row",Oa={Must:1,Might:2,Not:3},w9=Hn();function Hse(e){w9(e).datasetMap=Mr()}function jse(e,t,r){var n={},i=S9(t);if(!i||!e)return n;var a=[],s=[],o=t.ecModel,h=w9(o).datasetMap,d=i.uid+"_"+r.seriesLayoutBy,m,g;e=e.slice(),Ee(e,function(M,P){var I=rr(M)?M:e[P]={name:M};I.type==="ordinal"&&m==null&&(m=P,g=T(I)),n[I.name]=[]});var y=h.get(d)||h.set(d,{categoryWayDim:g,valueWayDim:0});Ee(e,function(M,P){var I=M.name,D=T(M);if(m==null){var R=y.valueWayDim;x(n[I],R,D),x(s,R,D),y.valueWayDim+=D}else if(m===P)x(n[I],0,D),x(a,0,D);else{var R=y.categoryWayDim;x(n[I],R,D),x(s,R,D),y.categoryWayDim+=D}});function x(M,P,I){for(var D=0;D<I;D++)M.push(P+D)}function T(M){var P=M.dimsDef;return P?P.length:1}return a.length&&(n.itemName=a),s.length&&(n.seriesName=s),n}function S9(e){var t=e.get("data",!0);if(!t)return bv(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Oo).models[0]}function Gse(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:bv(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Oo).models}function T9(e,t){return qse(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function qse(e,t,r,n,i,a){var s,o=5;if(Ua(e))return Oa.Not;var h,d;if(n){var m=n[a];rr(m)?(h=m.name,d=m.type):Yt(m)&&(h=m)}if(d!=null)return d==="ordinal"?Oa.Must:Oa.Not;if(t===Ca){var g=e;if(r===ad){for(var y=g[a],x=0;x<(y||[]).length&&x<o;x++)if((s=B(y[i+x]))!=null)return s}else for(var x=0;x<g.length&&x<o;x++){var T=g[i+x];if(T&&(s=B(T[a]))!=null)return s}}else if(t===ws){var M=e;if(!h)return Oa.Not;for(var x=0;x<M.length&&x<o;x++){var P=M[x];if(P&&(s=B(P[h]))!=null)return s}}else if(t===vl){var I=e;if(!h)return Oa.Not;var y=I[h];if(!y||Ua(y))return Oa.Not;for(var x=0;x<y.length&&x<o;x++)if((s=B(y[x]))!=null)return s}else if(t===mo)for(var D=e,x=0;x<D.length&&x<o;x++){var P=D[x],R=_v(P);if(!Vt(R))return Oa.Not;if((s=B(R[a]))!=null)return s}function B(H){var V=Yt(H);if(H!=null&&isFinite(H)&&H!=="")return V?Oa.Might:Oa.Not;if(V&&H!=="-")return Oa.Must}return Oa.Not}var Wse=Mr();function Xse(e,t,r){var n=Wse.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var A5=Hn();Hn();var YC=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=ua(this.get("color",!0)),a=this.get("colorLayer",!0);return Yse(this,A5,i,a,t,r,n)},e.prototype.clearColorPalette=function(){Kse(this,A5)},e}();function Zse(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function Yse(e,t,r,n,i,a,s){a=a||e;var o=t(a),h=o.paletteIdx||0,d=o.paletteNameMap=o.paletteNameMap||{};if(d.hasOwnProperty(i))return d[i];var m=s==null||!n?r:Zse(n,s);if(m=m||r,!(!m||!m.length)){var g=m[h];return i&&(d[i]=g),o.paletteIdx=(h+1)%m.length,g}}function Kse(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var by,bp,M5,I5="\0_ec_inner",Jse=1,C9=function(e){Lt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,a,s,o){a=a||{},this.option=null,this._theme=new sa(a),this._locale=new sa(s),this._optionManager=o},t.prototype.setOption=function(r,n,i){var a=L5(n);this._optionManager.setOption(r,i,a),this._resetOption(null,a)},t.prototype.resetOption=function(r,n){return this._resetOption(r,L5(n))},t.prototype._resetOption=function(r,n){var i=!1,a=this._optionManager;if(!r||r==="recreate"){var s=a.mountOption(r==="recreate");!this.option||r==="recreate"?M5(this,s):(this.restoreData(),this._mergeOption(s,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var o=a.getTimelineOption(this);o&&(i=!0,this._mergeOption(o,n))}if(!r||r==="recreate"||r==="media"){var h=a.getMediaOption(this);h.length&&Ee(h,function(d){i=!0,this._mergeOption(d,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,a=this._componentsMap,s=this._componentsCount,o=[],h=Mr(),d=n&&n.replaceMergeMainTypeMap;Hse(this),Ee(r,function(g,y){g!=null&&(Tn.hasClass(y)?y&&(o.push(y),h.set(y,!0)):i[y]=i[y]==null?zr(g):An(i[y],g,!0))}),d&&d.each(function(g,y){Tn.hasClass(y)&&!h.get(y)&&(o.push(y),h.set(y,!0))}),Tn.topologicalTravel(o,Tn.getAllClassMainTypes(),m,this);function m(g){var y=Xse(this,g,ua(r[g])),x=a.get(g),T=x?d&&d.get(g)?"replaceMerge":"normalMerge":"replaceAll",M=Fie(x,y,T);Gie(M,g,Tn),i[g]=null,a.set(g,null),s.set(g,0);var P=[],I=[],D=0,R;Ee(M,function(B,H){var V=B.existing,q=B.newOption;if(!q)V&&(V.mergeOption({},this),V.optionUpdated({},!1));else{var j=g==="series",te=Tn.getClass(g,B.keyInfo.subType,!j);if(!te)return;if(g==="tooltip"){if(R)return;R=!0}if(V&&V.constructor===te)V.name=B.keyInfo.name,V.mergeOption(q,this),V.optionUpdated(q,!1);else{var ne=Tt({componentIndex:H},B.keyInfo);V=new te(q,this,this,ne),Tt(V,ne),B.brandNew&&(V.__requireNewView=!0),V.init(q,this,this),V.optionUpdated(null,!0)}}V?(P.push(V.option),I.push(V),D++):(P.push(void 0),I.push(void 0))},this),i[g]=P,a.set(g,I),s.set(g,D),g==="series"&&by(this)}this._seriesIndices||by(this)},t.prototype.getOption=function(){var r=zr(this.option);return Ee(r,function(n,i){if(Tn.hasClass(i)){for(var a=ua(n),s=a.length,o=!1,h=s-1;h>=0;h--)a[h]&&!Um(a[h])?o=!0:(a[h]=null,!o&&s--);a.length=s,r[i]=a}}),delete r[I5],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var a=i[n||0];if(a)return a;if(n==null){for(var s=0;s<i.length;s++)if(i[s])return i[s]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,a=r.id,s=r.name,o=this._componentsMap.get(n);if(!o||!o.length)return[];var h;return i!=null?(h=[],Ee(ua(i),function(d){o[d]&&h.push(o[d])})):a!=null?h=P5("id",a,o):s!=null?h=P5("name",s,o):h=Hi(o,function(d){return!!d}),D5(h,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,a=o(n),s=a?this.queryComponents(a):Hi(this._componentsMap.get(i),function(d){return!!d});return h(D5(s,r));function o(d){var m=i+"Index",g=i+"Id",y=i+"Name";return d&&(d[m]!=null||d[g]!=null||d[y]!=null)?{mainType:i,index:d[m],id:d[g],name:d[y]}:null}function h(d){return r.filter?Hi(d,r.filter):d}},t.prototype.eachComponent=function(r,n,i){var a=this._componentsMap;if(cr(r)){var s=n,o=r;a.each(function(g,y){for(var x=0;g&&x<g.length;x++){var T=g[x];T&&o.call(s,y,T,T.componentIndex)}})}else for(var h=Yt(r)?a.get(r):rr(r)?this.findComponents(r):null,d=0;h&&d<h.length;d++){var m=h[d];m&&n.call(i,m,m.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=vs(r,null);return Hi(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return Hi(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return Hi(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){bp(this),Ee(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];r.call(n,a,i)},this)},t.prototype.eachRawSeries=function(r,n){Ee(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){bp(this),Ee(this._seriesIndices,function(a){var s=this._componentsMap.get("series")[a];s.subType===r&&n.call(i,s,a)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return Ee(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return bp(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){bp(this);var i=[];Ee(this._seriesIndices,function(a){var s=this._componentsMap.get("series")[a];r.call(n,s,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=Mr(i)},t.prototype.restoreData=function(r){by(this);var n=this._componentsMap,i=[];n.each(function(a,s){Tn.hasClass(s)&&i.push(s)}),Tn.topologicalTravel(i,Tn.getAllClassMainTypes(),function(a){Ee(n.get(a),function(s){s&&(a!=="series"||!Qse(s,r))&&s.restoreData()})})},t.internalField=function(){by=function(r){var n=r._seriesIndices=[];Ee(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=Mr(n)},bp=function(r){},M5=function(r,n){r.option={},r.option[I5]=Jse,r._componentsMap=Mr({series:[]}),r._componentsCount=Mr();var i=n.aria;rr(i)&&i.enabled==null&&(i.enabled=!0),ele(n,r._theme.option),An(n,Use,!1),r._mergeOption(n,null)}}(),t}(sa);function Qse(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function ele(e,t){var r=e.color&&!e.colorLayer;Ee(t,function(n,i){i==="colorLayer"&&r||Tn.hasClass(i)||(typeof n=="object"?e[i]=e[i]?An(e[i],n,!1):zr(n):e[i]==null&&(e[i]=n))})}function P5(e,t,r){if(Vt(t)){var n=Mr();return Ee(t,function(a){if(a!=null){var s=vs(a,null);s!=null&&n.set(a,!0)}}),Hi(r,function(a){return a&&n.get(a[e])})}else{var i=vs(t,null);return Hi(r,function(a){return a&&i!=null&&a[e]===i})}}function D5(e,t){return t.hasOwnProperty("subType")?Hi(e,function(r){return r&&r.subType===t.subType}):e}function L5(e){var t=Mr();return e&&Ee(ua(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Ho(C9,YC);const E9=C9;var tle=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],rle=function(){function e(t){Ee(tle,function(r){this[r]=On(t[r],t)},this)}return e}();const A9=rle;var Qb={},nle=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];Ee(Qb,function(i,a){var s=i.create(t,r);n=n.concat(s||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){Ee(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){Qb[t]=r},e.get=function(t){return Qb[t]},e}();const KC=nle;var ile=/^(min|max)?(.+)$/,ale=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(Ee(ua(t.series),function(s){s&&s.data&&Ua(s.data)&&M2(s.data)}),Ee(ua(t.dataset),function(s){s&&s.source&&Ua(s.source)&&M2(s.source)})),t=zr(t);var i=this._optionBackup,a=ole(t,r,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],zr(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=zr(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,s=[],o=[];if(!i.length&&!a)return o;for(var h=0,d=i.length;h<d;h++)sle(i[h].query,r,n)&&s.push(h);return!s.length&&a&&(s=[-1]),s.length&&!ule(s,this._currentMediaIndices)&&(o=Jt(s,function(m){return zr(m===-1?a.option:i[m].option)})),this._currentMediaIndices=s,o},e}();function ole(e,t,r){var n=[],i,a,s=e.baseOption,o=e.timeline,h=e.options,d=e.media,m=!!e.media,g=!!(h||o||s&&s.timeline);s?(a=s,a.timeline||(a.timeline=o)):((g||m)&&(e.options=e.media=null),a=e),m&&Vt(d)&&Ee(d,function(x){x&&x.option&&(x.query?n.push(x):i||(i=x))}),y(a),Ee(h,function(x){return y(x)}),Ee(n,function(x){return y(x.option)});function y(x){Ee(t,function(T){T(x,r)})}return{baseOption:a,timelineOptions:h||[],mediaDefault:i,mediaList:n}}function sle(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return Ee(e,function(a,s){var o=s.match(ile);if(!(!o||!o[1]||!o[2])){var h=o[1],d=o[2].toLowerCase();lle(n[d],a,h)||(i=!1)}}),i}function lle(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function ule(e,t){return e.join(",")===t.join(",")}const cle=ale;var Co=Ee,Jm=rr,k5=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function ew(e){var t=e&&e.itemStyle;if(t)for(var r=0,n=k5.length;r<n;r++){var i=k5[r],a=t.normal,s=t.emphasis;a&&a[i]&&(e[i]=e[i]||{},e[i].normal?An(e[i].normal,a[i]):e[i].normal=a[i],a[i]=null),s&&s[i]&&(e[i]=e[i]||{},e[i].emphasis?An(e[i].emphasis,s[i]):e[i].emphasis=s[i],s[i]=null)}}function Vi(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,_n(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function Np(e){Vi(e,"itemStyle"),Vi(e,"lineStyle"),Vi(e,"areaStyle"),Vi(e,"label"),Vi(e,"labelLine"),Vi(e,"upperLabel"),Vi(e,"edgeLabel")}function Un(e,t){var r=Jm(e)&&e[t],n=Jm(r)&&r.textStyle;if(n)for(var i=0,a=RD.length;i<a;i++){var s=RD[i];n.hasOwnProperty(s)&&(r[s]=n[s])}}function ro(e){e&&(Np(e),Un(e,"label"),e.emphasis&&Un(e.emphasis,"label"))}function hle(e){if(Jm(e)){ew(e),Np(e),Un(e,"label"),Un(e,"upperLabel"),Un(e,"edgeLabel"),e.emphasis&&(Un(e.emphasis,"label"),Un(e.emphasis,"upperLabel"),Un(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(ew(t),ro(t));var r=e.markLine;r&&(ew(r),ro(r));var n=e.markArea;n&&ro(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var a=e.links||e.edges;if(a&&!Ua(a))for(var s=0;s<a.length;s++)ro(a[s]);Ee(e.categories,function(d){Np(d)})}if(i&&!Ua(i))for(var s=0;s<i.length;s++)ro(i[s]);if(t=e.markPoint,t&&t.data)for(var o=t.data,s=0;s<o.length;s++)ro(o[s]);if(r=e.markLine,r&&r.data)for(var h=r.data,s=0;s<h.length;s++)Vt(h[s])?(ro(h[s][0]),ro(h[s][1])):ro(h[s]);e.type==="gauge"?(Un(e,"axisLabel"),Un(e,"title"),Un(e,"detail")):e.type==="treemap"?(Vi(e.breadcrumb,"itemStyle"),Ee(e.levels,function(d){Np(d)})):e.type==="tree"&&Np(e.leaves)}}function qs(e){return Vt(e)?e:e?[e]:[]}function R5(e){return(Vt(e)?e[0]:e)||{}}function fle(e,t){Co(qs(e.series),function(n){Jm(n)&&hle(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),Co(r,function(n){Co(qs(e[n]),function(i){i&&(Un(i,"axisLabel"),Un(i.axisPointer,"label"))})}),Co(qs(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Un(i,"axisLabel"),Un(i&&i.axisPointer,"label")}),Co(qs(e.calendar),function(n){Vi(n,"itemStyle"),Un(n,"dayLabel"),Un(n,"monthLabel"),Un(n,"yearLabel")}),Co(qs(e.radar),function(n){Un(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),Co(qs(e.geo),function(n){Jm(n)&&(ro(n),Co(qs(n.regions),function(i){ro(i)}))}),Co(qs(e.timeline),function(n){ro(n),Vi(n,"label"),Vi(n,"itemStyle"),Vi(n,"controlStyle",!0);var i=n.data;Vt(i)&&Ee(i,function(a){rr(a)&&(Vi(a,"label"),Vi(a,"itemStyle"))})}),Co(qs(e.toolbox),function(n){Vi(n,"iconStyle"),Co(n.feature,function(i){Vi(i,"iconStyle")})}),Un(R5(e.axisPointer),"label"),Un(R5(e.tooltip).axisPointer,"label")}function dle(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function ple(e,t,r,n){for(var i=t.split(","),a=e,s,o=0;o<i.length-1;o++)s=i[o],a[s]==null&&(a[s]={}),a=a[s];(n||a[i[o]]==null)&&(a[i[o]]=r)}function O5(e){e&&Ee(mle,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var mle=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],vle=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],tw=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function wp(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<tw.length;r++){var n=tw[r][1],i=tw[r][0];t[n]!=null&&(t[i]=t[n])}}function z5(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function B5(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function gle(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function M9(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&M9(e[r].children,t)}function I9(e,t){fle(e,t),e.series=ua(e.series),Ee(e.series,function(r){if(rr(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),z5(r.label);var i=r.data;if(i&&!Ua(i))for(var a=0;a<i.length;a++)z5(i[a]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var s=dle(r,"pointer.color");s!=null&&ple(r,"itemStyle.color",s)}else if(n==="bar"){wp(r),wp(r.backgroundStyle),wp(r.emphasis);var i=r.data;if(i&&!Ua(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(wp(i[a]),wp(i[a]&&i[a].emphasis))}else if(n==="sunburst"){var o=r.highlightPolicy;o&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=o)),B5(r),M9(r.data,B5)}else n==="graph"||n==="sankey"?gle(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&_n(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),O5(r)}}),e.dataRange&&(e.visualMap=e.dataRange),Ee(vle,function(r){var n=e[r];n&&(Vt(n)||(n=[n]),Ee(n,function(i){O5(i)}))})}function yle(e){var t=Mr();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),a=r.getData(),s={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:r};if(!s.stackedDimension||!(s.isStackedByIndex||s.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(s)}}),t.each(_le)}function _le(e){Ee(e,function(t,r){var n=[],i=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],s=t.data,o=t.isStackedByIndex,h=t.seriesModel.get("stackStrategy")||"samesign";s.modify(a,function(d,m,g){var y=s.get(t.stackedDimension,g);if(isNaN(y))return i;var x,T;o?T=s.getRawIndex(g):x=s.get(t.stackedByDimension,g);for(var M=NaN,P=r-1;P>=0;P--){var I=e[P];if(o||(T=I.data.rawIndexOf(I.stackedByDimension,x)),T>=0){var D=I.data.getByRawIndex(I.stackResultDimension,T);if(h==="all"||h==="positive"&&D>0||h==="negative"&&D<0||h==="samesign"&&y>=0&&D>0||h==="samesign"&&y<=0&&D<0){y=Lie(y,D),M=D;break}}}return n[0]=y,n[1]=M,n})})}var s1=function(){function e(t){this.data=t.data||(t.sourceFormat===vl?{}:[]),this.sourceFormat=t.sourceFormat||b9,this.seriesLayoutBy=t.seriesLayoutBy||il,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&T9(this,n)===Oa.Must&&(i.type="ordinal")}}return e}();function JC(e){return e instanceof s1}function nS(e,t,r){r=r||P9(e);var n=t.seriesLayoutBy,i=ble(e,r,n,t.sourceHeader,t.dimensions),a=new s1({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:zr(t)});return a}function QC(e){return new s1({data:e,sourceFormat:Ua(e)?uu:mo})}function xle(e){return new s1({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:zr(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function P9(e){var t=b9;if(Ua(e))t=uu;else if(Vt(e)){e.length===0&&(t=Ca);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(Vt(i)){t=Ca;break}else if(rr(i)){t=ws;break}}}}else if(rr(e)){for(var a in e)if(Vf(e,a)&&Ta(e[a])){t=vl;break}}return t}function ble(e,t,r,n,i){var a,s;if(!e)return{dimensionsDefine:F5(i),startIndex:s,dimensionsDetectedCount:a};if(t===Ca){var o=e;n==="auto"||n==null?$5(function(d){d!=null&&d!=="-"&&(Yt(d)?s==null&&(s=1):s=0)},r,o,10):s=zn(n)?n:n?1:0,!i&&s===1&&(i=[],$5(function(d,m){i[m]=d!=null?d+"":""},r,o,1/0)),a=i?i.length:r===ad?o.length:o[0]?o[0].length:null}else if(t===ws)i||(i=wle(e));else if(t===vl)i||(i=[],Ee(e,function(d,m){i.push(m)}));else if(t===mo){var h=_v(e[0]);a=Vt(h)&&h.length||1}return{startIndex:s,dimensionsDefine:F5(i),dimensionsDetectedCount:a}}function wle(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return Ee(r,function(i,a){n.push(a)}),n}}function F5(e){if(e){var t=Mr();return Jt(e,function(r,n){r=rr(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=t.get(i.name);return a?i.name+="-"+a.count++:t.set(i.name,{count:1}),i})}}function $5(e,t,r,n){if(t===ad)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var a=r[0]||[],i=0;i<a.length&&i<n;i++)e(a[i],i)}function D9(e){var t=e.sourceFormat;return t===ws||t===vl}var vc,gc,yc,N5,V5,L9=function(){function e(t,r){var n=JC(t)?t:QC(t);this._source=n;var i=this._data=n.data;n.sourceFormat===uu&&(this._offset=0,this._dimSize=r,this._data=i),V5(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;V5=function(s,o,h){var d=h.sourceFormat,m=h.seriesLayoutBy,g=h.startIndex,y=h.dimensionsDefine,x=N5[eE(d,m)];if(Tt(s,x),d===uu)s.getItem=r,s.count=i,s.fillStorage=n;else{var T=k9(d,m);s.getItem=On(T,null,o,g,y);var M=R9(d,m);s.count=On(M,null,o,g,y)}};var r=function(s,o){s=s-this._offset,o=o||[];for(var h=this._data,d=this._dimSize,m=d*s,g=0;g<d;g++)o[g]=h[m+g];return o},n=function(s,o,h,d){for(var m=this._data,g=this._dimSize,y=0;y<g;y++){for(var x=d[y],T=x[0]==null?1/0:x[0],M=x[1]==null?-1/0:x[1],P=o-s,I=h[y],D=0;D<P;D++){var R=m[D*g+y];I[s+D]=R,R<T&&(T=R),R>M&&(M=R)}x[0]=T,x[1]=M}},i=function(){return this._data?this._data.length/this._dimSize:0};N5=(t={},t[Ca+"_"+il]={pure:!0,appendData:a},t[Ca+"_"+ad]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[ws]={pure:!0,appendData:a},t[vl]={pure:!0,appendData:function(s){var o=this._data;Ee(s,function(h,d){for(var m=o[d]||(o[d]=[]),g=0;g<(h||[]).length;g++)m.push(h[g])})}},t[mo]={appendData:a},t[uu]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},t);function a(s){for(var o=0;o<s.length;o++)this._data.push(s[o])}}(),e}(),U5=function(e,t,r,n){return e[n]},Sle=(vc={},vc[Ca+"_"+il]=function(e,t,r,n){return e[n+t]},vc[Ca+"_"+ad]=function(e,t,r,n,i){n+=t;for(var a=i||[],s=e,o=0;o<s.length;o++){var h=s[o];a[o]=h?h[n]:null}return a},vc[ws]=U5,vc[vl]=function(e,t,r,n,i){for(var a=i||[],s=0;s<r.length;s++){var o=r[s].name,h=e[o];a[s]=h?h[n]:null}return a},vc[mo]=U5,vc);function k9(e,t){var r=Sle[eE(e,t)];return r}var H5=function(e,t,r){return e.length},Tle=(gc={},gc[Ca+"_"+il]=function(e,t,r){return Math.max(0,e.length-t)},gc[Ca+"_"+ad]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},gc[ws]=H5,gc[vl]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},gc[mo]=H5,gc);function R9(e,t){var r=Tle[eE(e,t)];return r}var rw=function(e,t,r){return e[t]},Cle=(yc={},yc[Ca]=rw,yc[ws]=function(e,t,r){return e[r]},yc[vl]=rw,yc[mo]=function(e,t,r){var n=_v(e);return n instanceof Array?n[t]:n},yc[uu]=rw,yc);function O9(e){var t=Cle[e];return t}function eE(e,t){return e===Ca?e+"_"+t:e}function Hf(e,t,r){if(e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),a=i.getSource().sourceFormat;if(r!=null){var s=e.getDimensionIndex(r),o=i.getDimensionProperty(s);return O9(a)(n,s,o)}else{var h=n;return a===mo&&(h=_v(n)),h}}}}var Ele=/\{@(.+?)\}/g,z9=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),a=n.getRawIndex(t),s=n.getName(t),o=n.getRawDataItem(t),h=n.getItemVisual(t,"style"),d=h&&h[n.getItemVisual(t,"drawType")||"fill"],m=h&&h.stroke,g=this.mainType,y=g==="series",x=n.userOutput&&n.userOutput.get();return{componentType:g,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:y?this.subType:null,seriesIndex:this.seriesIndex,seriesId:y?this.id:null,seriesName:y?this.name:null,name:s,dataIndex:a,data:o,dataType:r,value:i,color:d,borderColor:m,dimensionNames:x?x.fullDimensions:null,encode:x?x.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,a,s){r=r||"normal";var o=this.getData(n),h=this.getDataParams(t,n);if(s&&(h.value=s.interpolatedValue),i!=null&&Vt(h.value)&&(h.value=h.value[i]),!a){var d=o.getItemModel(t);a=d.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(cr(a))return h.status=r,h.dimensionIndex=i,a(h);if(Yt(a)){var m=g9(a,h);return m.replace(Ele,function(g,y){var x=y.length,T=y;T.charAt(0)==="["&&T.charAt(x-1)==="]"&&(T=+T.slice(1,x-1));var M=Hf(o,t,T);if(s&&Vt(s.interpolatedValue)){var P=o.getDimensionIndex(T);P>=0&&(M=s.interpolatedValue[P])}return M!=null?M+"":""})}},e.prototype.getRawValue=function(t,r){return Hf(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function j5(e){var t,r;return rr(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function fm(e){return new Ale(e)}var Ale=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!n&&(a=this._plan(this.context));var s=m(this._modBy),o=this._modDataCount||0,h=m(t&&t.modBy),d=t&&t.modDataCount||0;(s!==h||o!==d)&&(a="reset");function m(D){return!(D>=1)&&(D=1),D}var g;(this._dirty||a==="reset")&&(this._dirty=!1,g=this._doReset(n)),this._modBy=h,this._modDataCount=d;var y=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var x=this._dueIndex,T=Math.min(y!=null?this._dueIndex+y:1/0,this._dueEnd);if(!n&&(g||x<T)){var M=this._progress;if(Vt(M))for(var P=0;P<M.length;P++)this._doProgress(M[P],x,T,h,d);else this._doProgress(M,x,T,h,d)}this._dueIndex=T;var I=this._settedOutputEnd!=null?this._settedOutputEnd:T;this._outputDueEnd=I}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,a){G5.reset(r,n,i,a),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:G5.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),Vt(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),G5=function(){var e,t,r,n,i,a={reset:function(h,d,m,g){t=h,e=d,r=m,n=g,i=Math.ceil(n/r),a.next=r>1&&n>0?o:s}};return a;function s(){return t<e?t++:null}function o(){var h=t%i*r+Math.ceil(t/i),d=t>=e?null:h<n?h:t;return t++,d}}();function Cf(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!zn(e)&&e!=null&&e!=="-"&&(e=+ll(e)),e==null||e===""?NaN:+e)}Mr({number:function(e){return parseFloat(e)},time:function(e){return+ll(e)},trim:function(e){return Yt(e)?fs(e):e}});var Mle=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=zn(t)?t:G_(t),i=zn(r)?r:G_(r),a=isNaN(n),s=isNaN(i);if(a&&(n=this._incomparable),s&&(i=this._incomparable),a&&s){var o=Yt(t),h=Yt(r);o&&(n=h?t:0),h&&(i=o?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),Ile=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Cf(t,r)},e}();function Ple(e,t){var r=new Ile,n=e.data,i=r.sourceFormat=e.sourceFormat,a=e.startIndex,s="";e.seriesLayoutBy!==il&&ga(s);var o=[],h={},d=e.dimensionsDefine;if(d)Ee(d,function(M,P){var I=M.name,D={index:P,name:I,displayName:M.displayName};if(o.push(D),I!=null){var R="";Vf(h,I)&&ga(R),h[I]=D}});else for(var m=0;m<e.dimensionsDetectedCount;m++)o.push({index:m});var g=k9(i,il);t.__isBuiltIn&&(r.getRawDataItem=function(M){return g(n,a,o,M)},r.getRawData=On(Dle,null,e)),r.cloneRawData=On(Lle,null,e);var y=R9(i,il);r.count=On(y,null,n,a,o);var x=O9(i);r.retrieveValue=function(M,P){var I=g(n,a,o,M);return T(I,P)};var T=r.retrieveValueFromItem=function(M,P){if(M!=null){var I=o[P];if(I)return x(M,P,I.name)}};return r.getDimensionInfo=On(kle,null,o,h),r.cloneAllDimensionInfo=On(Rle,null,o),r}function Dle(e){var t=e.sourceFormat;if(!tE(t)){var r="";ga(r)}return e.data}function Lle(e){var t=e.sourceFormat,r=e.data;if(!tE(t)){var n="";ga(n)}if(t===Ca){for(var i=[],a=0,s=r.length;a<s;a++)i.push(r[a].slice());return i}else if(t===ws){for(var i=[],a=0,s=r.length;a<s;a++)i.push(Tt({},r[a]));return i}}function kle(e,t,r){if(r!=null){if(zn(r)||!isNaN(r)&&!Vf(t,r))return e[r];if(Vf(t,r))return t[r]}}function Rle(e){return zr(e)}var B9=Mr();function Ole(e){e=zr(e);var t=e.type,r="";t||ga(r);var n=t.split(":");n.length!==2&&ga(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,B9.set(t,e)}function zle(e,t,r){var n=ua(e),i=n.length,a="";i||ga(a);for(var s=0,o=i;s<o;s++){var h=n[s];t=Ble(h,t),s!==o-1&&(t.length=Math.max(t.length,1))}return t}function Ble(e,t,r,n){var i="";t.length||ga(i),rr(e)||ga(i);var a=e.type,s=B9.get(a);s||ga(i);var o=Jt(t,function(d){return Ple(d,s)}),h=ua(s.transform({upstream:o[0],upstreamList:o,config:zr(e.config)}));return Jt(h,function(d,m){var g="";rr(d)||ga(g),d.data||ga(g);var y=P9(d.data);tE(y)||ga(g);var x,T=t[0];if(T&&m===0&&!d.dimensions){var M=T.startIndex;M&&(d.data=T.data.slice(0,M).concat(d.data)),x={seriesLayoutBy:il,sourceHeader:M,dimensions:T.metaRawOption.dimensions}}else x={seriesLayoutBy:il,sourceHeader:0,dimensions:d.dimensions};return nS(d.data,x,null)})}function tE(e){return e===Ca||e===ws}var l1="undefined",Fle=typeof Uint32Array===l1?Array:Uint32Array,$le=typeof Uint16Array===l1?Array:Uint16Array,F9=typeof Int32Array===l1?Array:Int32Array,q5=typeof Float64Array===l1?Array:Float64Array,$9={float:q5,int:F9,ordinal:Array,number:Array,time:q5},nw;function Sp(e){return e>65535?Fle:$le}function Kh(){return[1/0,-1/0]}function Nle(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function W5(e,t,r,n,i){var a=$9[r||"float"];if(i){var s=e[t],o=s&&s.length;if(o!==n){for(var h=new a(n),d=0;d<o;d++)h[d]=s[d];e[t]=h}}else e[t]=new a(n)}var iS=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Mr()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),a=this.defaultDimValueGetter=nw[i.sourceFormat];this._dimValueGetter=n||a,this._rawExtent=[],D9(i),this._dimensions=Jt(r,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,a=n.get(t);if(a!=null){if(i[a].type===r)return a}else a=i.length;return i[a]={type:r},n.set(t,a),this._chunks[a]=new $9[r||"float"](this._rawCount),this._rawExtent[a]=Kh(),a},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],a=this._rawExtent,s=i.ordinalOffset||0,o=n.length;s===0&&(a[t]=Kh());for(var h=a[t],d=s;d<o;d++){var m=n[d]=r.parseAndCollect(n[d]);isNaN(m)||(h[0]=Math.min(m,h[0]),h[1]=Math.max(m,h[1]))}i.ordinalMeta=r,i.ordinalOffset=o,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,a=i.length,s=this._rawExtent,o=this.count(),h=o+Math.max(t.length,r||0),d=0;d<a;d++){var m=i[d];W5(n,d,m.type,h,!0)}for(var g=[],y=o;y<h;y++)for(var x=y-o,T=0;T<a;T++){var m=i[T],M=nw.arrayRows.call(this,t[x]||g,m.property,x,T);n[T][y]=M;var P=s[T];M<P[0]&&(P[0]=M),M>P[1]&&(P[1]=M)}return this._rawCount=this._count=h,{start:o,end:h}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,a=this._chunks,s=this._dimensions,o=s.length,h=this._rawExtent,d=Jt(s,function(D){return D.property}),m=0;m<o;m++){var g=s[m];h[m]||(h[m]=Kh()),W5(a,m,g.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,a,h);else for(var y=[],x=t;x<r;x++){y=i.getItem(x,y);for(var T=0;T<o;T++){var M=a[T],P=this._dimValueGetter(y,d[T],x,T);M[x]=P;var I=h[T];P<I[0]&&(I[0]=P),P>I[1]&&(I[1]=P)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=t;for(var a=0,s=i.length;a<s;a++)n.push(this.get(i[a],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,a=this.count();i<a;i++){var s=this.get(t,i);isNaN(s)||(n+=s)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(a){isNaN(a)||r.push(a)});var n=r.sort(function(a,s){return a-s}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,a=this._count-1;i<=a;){var s=(i+a)/2|0;if(r[s]<t)i=s+1;else if(r[s]>t)a=s-1;else return s}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,a=i[t],s=[];if(!a)return s;n==null&&(n=1/0);for(var o=1/0,h=-1,d=0,m=0,g=this.count();m<g;m++){var y=this.getRawIndex(m),x=r-a[y],T=Math.abs(x);T<=n&&((T<o||T===o&&x>=0&&h<0)&&(o=T,h=x,d=0),x===h&&(s[d++]=m))}return s.length=d,s},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var a=0;a<i;a++)t[a]=r[a]}else t=new n(r.buffer,0,i)}else{var n=Sp(this._rawCount);t=new n(this.count());for(var a=0;a<t.length;a++)t[a]=a}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),a=Sp(n._rawCount),s=new a(i),o=[],h=t.length,d=0,m=t[0],g=n._chunks,y=0;y<i;y++){var x=void 0,T=n.getRawIndex(y);if(h===0)x=r(y);else if(h===1){var M=g[m][T];x=r(M,y)}else{for(var P=0;P<h;P++)o[P]=g[t[P]][T];o[P]=y,x=r.apply(null,o)}x&&(s[d++]=T)}return d<i&&(n._indices=s),n._count=d,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=Gr(t),a=i.length;if(!a)return this;var s=r.count(),o=Sp(r._rawCount),h=new o(s),d=0,m=i[0],g=t[m][0],y=t[m][1],x=r._chunks,T=!1;if(!r._indices){var M=0;if(a===1){for(var P=x[i[0]],I=0;I<n;I++){var D=P[I];(D>=g&&D<=y||isNaN(D))&&(h[d++]=M),M++}T=!0}else if(a===2){for(var P=x[i[0]],R=x[i[1]],B=t[i[1]][0],H=t[i[1]][1],I=0;I<n;I++){var D=P[I],V=R[I];(D>=g&&D<=y||isNaN(D))&&(V>=B&&V<=H||isNaN(V))&&(h[d++]=M),M++}T=!0}}if(!T)if(a===1)for(var I=0;I<s;I++){var q=r.getRawIndex(I),D=x[i[0]][q];(D>=g&&D<=y||isNaN(D))&&(h[d++]=q)}else for(var I=0;I<s;I++){for(var j=!0,q=r.getRawIndex(I),te=0;te<a;te++){var ne=i[te],D=x[ne][q];(D<t[ne][0]||D>t[ne][1])&&(j=!1)}j&&(h[d++]=r.getRawIndex(I))}return d<s&&(r._indices=h),r._count=d,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,a=[],s=r.length,o=t.count(),h=[],d=t._rawExtent,m=0;m<r.length;m++)d[r[m]]=Kh();for(var g=0;g<o;g++){for(var y=t.getRawIndex(g),x=0;x<s;x++)h[x]=i[r[x]][y];h[s]=g;var T=n&&n.apply(null,h);if(T!=null){typeof T!="object"&&(a[0]=T,T=a);for(var m=0;m<T.length;m++){var M=r[m],P=T[m],I=d[M],D=i[M];D&&(D[y]=P),P<I[0]&&(I[0]=P),P>I[1]&&(I[1]=P)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,a=i[t],s=this.count(),o=0,h=Math.floor(1/r),d=this.getRawIndex(0),m,g,y,x=new(Sp(this._rawCount))(Math.min((Math.ceil(s/h)+2)*2,s));x[o++]=d;for(var T=1;T<s-1;T+=h){for(var M=Math.min(T+h,s-1),P=Math.min(T+h*2,s),I=(P+M)/2,D=0,R=M;R<P;R++){var B=this.getRawIndex(R),H=a[B];isNaN(H)||(D+=H)}D/=P-M;var V=T,q=Math.min(T+h,s),j=T-1,te=a[d];m=-1,y=V;for(var ne=-1,ce=0,R=V;R<q;R++){var B=this.getRawIndex(R),H=a[B];if(isNaN(H)){ce++,ne<0&&(ne=B);continue}g=Math.abs((j-I)*(H-te)-(j-R)*(D-te)),g>m&&(m=g,y=B)}ce>0&&ce<q-V&&(x[o++]=Math.min(ne,y),y=Math.max(ne,y)),x[o++]=y,d=y}return x[o++]=this.getRawIndex(s-1),n._count=o,n._indices=x,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var a=this.clone([t],!0),s=a._chunks,o=[],h=Math.floor(1/r),d=s[t],m=this.count(),g=a._rawExtent[t]=Kh(),y=new(Sp(this._rawCount))(Math.ceil(m/h)),x=0,T=0;T<m;T+=h){h>m-T&&(h=m-T,o.length=h);for(var M=0;M<h;M++){var P=this.getRawIndex(T+M);o[M]=d[P]}var I=n(o),D=this.getRawIndex(Math.min(T+i(o,I)||0,m-1));d[D]=I,I<g[0]&&(g[0]=I),I>g[1]&&(g[1]=I),y[x++]=D}return a._count=x,a._indices=y,a._updateGetRawIdx(),a},e.prototype.each=function(t,r){if(this._count)for(var n=t.length,i=this._chunks,a=0,s=this.count();a<s;a++){var o=this.getRawIndex(a);switch(n){case 0:r(a);break;case 1:r(i[t[0]][o],a);break;case 2:r(i[t[0]][o],i[t[1]][o],a);break;default:for(var h=0,d=[];h<n;h++)d[h]=i[t[h]][o];d[h]=a,r.apply(null,d)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=Kh();if(!r)return n;var i=this.count(),a=!this._indices,s;if(a)return this._rawExtent[t].slice();if(s=this._extent[t],s)return s.slice();s=n;for(var o=s[0],h=s[1],d=0;d<i;d++){var m=this.getRawIndex(d),g=r[m];g<o&&(o=g),g>h&&(h=g)}return s=[o,h],this._extent[t]=s,s},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,a=0;a<i.length;a++)n.push(i[a][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,a=t&&rd(t,function(o,h){return o[h]=!0,o},{});if(a)for(var s=0;s<i.length;s++)n._chunks[s]=a[s]?Nle(i[s]):i[s];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=zr(this._extent),t._rawExtent=zr(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,a){return Cf(r[a],this._dimensions[a])}nw={arrayRows:t,objectRows:function(r,n,i,a){return Cf(r[n],this._dimensions[a])},keyedColumns:t,original:function(r,n,i,a){var s=r&&(r.value==null?r:r.value);return Cf(s instanceof Array?s[a]:s,this._dimensions[a])},typedArray:function(r,n,i,a){return r[a]}}}(),e}(),Vle=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,a;if(wy(t)){var s=t,o=void 0,h=void 0,d=void 0;if(n){var m=r[0];m.prepareSource(),d=m.getSource(),o=d.data,h=d.sourceFormat,a=[m._getVersionSign()]}else o=s.get("data",!0),h=Ua(o)?uu:mo,a=[];var g=this._getSourceMetaRawOption()||{},y=d&&d.metaRawOption||{},x=Ar(g.seriesLayoutBy,y.seriesLayoutBy)||null,T=Ar(g.sourceHeader,y.sourceHeader),M=Ar(g.dimensions,y.dimensions),P=x!==y.seriesLayoutBy||!!T!=!!y.sourceHeader||M;i=P?[nS(o,{seriesLayoutBy:x,sourceHeader:T,dimensions:M},h)]:[]}else{var I=t;if(n){var D=this._applyTransform(r);i=D.sourceList,a=D.upstreamSignList}else{var R=I.get("source",!0);i=[nS(R,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var a="";t.length!==1&&X5(a)}var s,o=[],h=[];return Ee(t,function(d){d.prepareSource();var m=d.getSource(i||0),g="";i!=null&&!m&&X5(g),o.push(m),h.push(d._getVersionSign())}),n?s=zle(n,o,{datasetIndex:r.componentIndex}):i!=null&&(s=[xle(o[0])]),{sourceList:s,upstreamSignList:h}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,a=this._storeList,s=a[i];s||(s=a[i]={});var o=s[n];if(!o){var h=this._getUpstreamSourceManagers()[0];wy(this._sourceHost)&&h?o=h._innerGetDataStore(t,r,n):(o=new iS,o.initData(new L9(r,t.length),t)),s[n]=o}return o},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(wy(t)){var r=S9(t);return r?[r.getSourceManager()]:[]}else return Jt(Gse(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(wy(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=t;r=a.get("seriesLayoutBy",!0),n=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function wy(e){return e.mainType==="series"}function X5(e){throw new Error(e)}var N9="line-height:1";function V9(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",a=e.color||"#464646",s=e.fontSize||14,o=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+$a(n+"")+"px;color:"+$a(r)+";font-weight:"+$a(i+""),valueStyle:"font-size:"+$a(s+"")+"px;color:"+$a(a)+";font-weight:"+$a(o+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:s,fill:a,fontWeight:o}}}var Ule=[0,10,20,30],Hle=["",`
`,`

`,`


`];function mu(e,t){return t.type=e,t}function aS(e){return e.type==="section"}function U9(e){return aS(e)?jle:Gle}function H9(e){if(aS(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return Ee(e.blocks,function(i){var a=H9(i);a>=t&&(t=a+ +(n&&(!a||aS(i)&&!i.noHeader)))}),t}return 0}function jle(e,t,r,n){var i=t.noHeader,a=qle(H9(t)),s=[],o=t.blocks||[];No(!o||Vt(o)),o=o||[];var h=e.orderMode;if(t.sortBlocks&&h){o=o.slice();var d={valueAsc:"asc",valueDesc:"desc"};if(Vf(d,h)){var m=new Mle(d[h],null);o.sort(function(T,M){return m.evaluate(T.sortParam,M.sortParam)})}else h==="seriesDesc"&&o.reverse()}Ee(o,function(T,M){var P=t.valueFormatter,I=U9(T)(P?Tt(Tt({},e),{valueFormatter:P}):e,T,M>0?a.html:0,n);I!=null&&s.push(I)});var g=e.renderMode==="richText"?s.join(a.richText):oS(s.join(""),i?r:a.html);if(i)return g;var y=rS(t.header,"ordinal",e.useUTC),x=V9(n,e.renderMode).nameStyle;return e.renderMode==="richText"?j9(e,y,x)+a.richText+g:oS('<div style="'+x+";"+N9+';">'+$a(y)+"</div>"+g,r)}function Gle(e,t,r,n){var i=e.renderMode,a=t.noName,s=t.noValue,o=!t.markerType,h=t.name,d=e.useUTC,m=t.valueFormatter||e.valueFormatter||function(B){return B=Vt(B)?B:[B],Jt(B,function(H,V){return rS(H,Vt(x)?x[V]:x,d)})};if(!(a&&s)){var g=o?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),y=a?"":rS(h,"ordinal",d),x=t.valueType,T=s?[]:m(t.value),M=!o||!a,P=!o&&a,I=V9(n,i),D=I.nameStyle,R=I.valueStyle;return i==="richText"?(o?"":g)+(a?"":j9(e,y,D))+(s?"":Zle(e,T,M,P,R)):oS((o?"":g)+(a?"":Wle(y,!o,D))+(s?"":Xle(T,M,P,R)),r)}}function Z5(e,t,r,n,i,a){if(e){var s=U9(e),o={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return s(o,e,0,a)}}function qle(e){return{html:Ule[e],richText:Hle[e]}}function oS(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+N9+';">'+e+r+"</div>"}function Wle(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+$a(e)+"</span>"}function Xle(e,t,r,n){var i=r?"10px":"20px",a=t?"float:right;margin-left:"+i:"";return e=Vt(e)?e:[e],'<span style="'+a+";"+n+'">'+Jt(e,function(s){return $a(s)}).join("&nbsp;&nbsp;")+"</span>"}function j9(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function Zle(e,t,r,n,i){var a=[i],s=n?10:20;return r&&a.push({padding:[0,0,0,s],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(Vt(t)?t.join("  "):t,a)}function Yle(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return Zm(n)}function G9(e,t){var r=e.get("padding");return r??(t==="richText"?[8,10]:10)}var iw=function(){function e(){this.richTextStyles={},this._nextStyleNameId=JO()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,a=Bse({color:r,type:t,renderMode:n,markerId:i});return Yt(a)?a:(this.richTextStyles[i]=a.style,a.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};Vt(r)?Ee(r,function(a){return Tt(n,a)}):Tt(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function Kle(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),a=i.mapDimensionsAll("defaultedTooltip"),s=a.length,o=t.getRawValue(r),h=Vt(o),d=Yle(t,r),m,g,y,x;if(s>1||h&&!s){var T=Jle(o,t,r,a,d);m=T.inlineValues,g=T.inlineValueTypes,y=T.blocks,x=T.inlineValues[0]}else if(s){var M=i.getDimensionInfo(a[0]);x=m=Hf(i,r,a[0]),g=M.type}else x=m=h?o[0]:o;var P=rz(t),I=P&&t.name||"",D=i.getName(r),R=n?I:D;return mu("section",{header:I,noHeader:n||!P,sortParam:x,blocks:[mu("nameValue",{markerType:"item",markerColor:d,name:R,noName:!fs(R),value:m,valueType:g})].concat(y||[])})}function Jle(e,t,r,n,i){var a=t.getData(),s=rd(e,function(g,y,x){var T=a.getDimensionInfo(x);return g=g||T&&T.tooltip!==!1&&T.displayName!=null},!1),o=[],h=[],d=[];n.length?Ee(n,function(g){m(Hf(a,r,g),g)}):Ee(e,m);function m(g,y){var x=a.getDimensionInfo(y);!x||x.otherDims.tooltip===!1||(s?d.push(mu("nameValue",{markerType:"subItem",markerColor:i,name:x.displayName,value:g,valueType:x.type})):(o.push(g),h.push(x.type)))}return{inlineValues:o,inlineValueTypes:h,blocks:d}}var Gl=Hn();function Sy(e,t){return e.getName(t)||e.getId(t)}var Qle="__universalTransitionEnabled",u1=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=fm({count:tue,reset:rue}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var a=Gl(this).sourceManager=new Vle(this);a.prepareSource();var s=this.getInitialData(r,i);K5(s,this),this.dataTask.context.data=s,Gl(this).dataBeforeProcessed=s,Y5(this),this._initSelectedMapFromData(s)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=Ym(this),a=i?ZC(r):{},s=this.subType;Tn.hasClass(s)&&(s+="Series"),An(r,n.getTheme().get(this.subType)),An(r,this.getDefaultOption()),q2(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&Km(r,a,i)},t.prototype.mergeOption=function(r,n){r=An(this.option,r,!0),this.fillDataTextStyle(r.data);var i=Ym(this);i&&Km(this.option,r,i);var a=Gl(this).sourceManager;a.dirty(),a.prepareSource();var s=this.getInitialData(r,n);K5(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,Gl(this).dataBeforeProcessed=s,Y5(this),this._initSelectedMapFromData(s)},t.prototype.fillDataTextStyle=function(r){if(r&&!Ua(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&q2(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=sS(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return Gl(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=sS(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}Gl(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return Mr(r)},t.prototype.getSourceManager=function(){return Gl(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Gl(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return Kle({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Er.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var a=this.ecModel,s=YC.prototype.getColorFromPalette.call(this,r,n,i);return s||(s=a.getColorFromPalette(r,n,i)),s},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,s=this.getData(n);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<r.length;o++){var h=r[o],d=Sy(s,h);i[d]=!1,this._selectedDataIndicesMap[d]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],a=0;a<r.length;a++)i[0]=r[a],this.isSelected(r[a],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=Gr(r),i=[],a=0;a<n.length;a++){var s=r[n[a]];s>=0&&i.push(s)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(n);return(i==="all"||i[Sy(a,r)])&&!a.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[Qle])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,a,s=this.option,o=s.selectedMode,h=n.length;if(!(!o||!h)){if(o==="series")s.selectedMap="all";else if(o==="multiple"){rr(s.selectedMap)||(s.selectedMap={});for(var d=s.selectedMap,m=0;m<h;m++){var g=n[m],y=Sy(r,g);d[y]=!0,this._selectedDataIndicesMap[y]=r.getRawIndex(g)}}else if(o==="single"||o===!0){var x=n[h-1],y=Sy(r,x);s.selectedMap=(i={},i[y]=!0,i),this._selectedDataIndicesMap=(a={},a[y]=r.getRawIndex(x),a)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var a=r.getRawDataItem(i);a&&a.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Tn.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Tn);Ho(u1,z9);Ho(u1,YC);az(u1,Tn);function Y5(e){var t=e.name;rz(e)||(e.name=eue(e)||t)}function eue(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return Ee(r,function(i){var a=t.getDimensionInfo(i);a.displayName&&n.push(a.displayName)}),n.join(" ")}function tue(e){return e.model.getRawData().count()}function rue(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),nue}function nue(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function K5(e,t){Ee(I2(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,gi(iue,t))})}function iue(e,t){var r=sS(e);return r&&r.setOutputEnd((t||this).count()),t}function sS(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const jf=u1;var rE=function(){function e(){this.group=new Pi,this.uid=t1("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();CC(rE);X0(rE);const ul=rE;function nE(){var e=Hn();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,a=!!r.progressiveRender,s=r.large=!!(n&&n.large),o=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==s||a!==o)&&"reset"}}var q9=Hn(),aue=nE(),iE=function(){function e(){this.group=new Pi,this.uid=t1("viewChart"),this.renderTask=fm({plan:oue,reset:sue}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var a=t.getData(i&&i.dataType);a&&Q5(a,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var a=t.getData(i&&i.dataType);a&&Q5(a,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){J0(this.group,t)},e.markUpdateMethod=function(t,r){q9(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function J5(e,t,r){e&&J2(e)&&(t==="emphasis"?jm:Gm)(e,r)}function Q5(e,t,r){var n=xv(e,t),i=t&&t.highlightKey!=null?foe(t.highlightKey):null;n!=null?Ee(ua(n),function(a){J5(e.getItemGraphicEl(a),r,i)}):e.eachItemGraphicEl(function(a){J5(a,r,i)})}CC(iE);X0(iE);function oue(e){return aue(e.model)}function sue(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,a=t.pipelineContext.progressiveRender,s=e.view,o=i&&q9(i).updateMethod,h=a?"incrementalPrepareRender":o&&s[o]?o:"render";return h!=="render"&&s[h](t,r,n,i),lue[h]}var lue={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const Gc=iE;var Q_="\0__throttleOriginMethod",e3="\0__throttleRate",t3="\0__throttleType";function aE(e,t,r){var n,i=0,a=0,s=null,o,h,d,m;t=t||0;function g(){a=new Date().getTime(),s=null,e.apply(h,d||[])}var y=function(){for(var x=[],T=0;T<arguments.length;T++)x[T]=arguments[T];n=new Date().getTime(),h=this,d=x;var M=m||t,P=m||r;m=null,o=n-(P?i:a)-M,clearTimeout(s),P?s=setTimeout(g,M):o>=0?g():s=setTimeout(g,-o),i=n};return y.clear=function(){s&&(clearTimeout(s),s=null)},y.debounceNextCall=function(x){m=x},y}function W9(e,t,r,n){var i=e[t];if(i){var a=i[Q_]||i,s=i[t3],o=i[e3];if(o!==r||s!==n){if(r==null||!n)return e[t]=a;i=e[t]=aE(a,r,n==="debounce"),i[Q_]=a,i[t3]=n,i[e3]=r}return i}}function lS(e,t){var r=e[t];r&&r[Q_]&&(r.clear&&r.clear(),e[t]=r[Q_])}var r3=Hn(),n3={itemStyle:Hm(i9,!0),lineStyle:Hm(n9,!0)},uue={lineStyle:"stroke",itemStyle:"fill"};function X9(e,t){var r=e.visualStyleMapper||n3[t];return r||(console.warn("Unknown style type '"+t+"'."),n3.itemStyle)}function Z9(e,t){var r=e.visualDrawType||uue[t];return r||(console.warn("Unknown style type '"+t+"'."),"fill")}var cue={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),a=X9(e,n),s=a(i),o=i.getShallow("decal");o&&(r.setVisual("decal",o),o.dirty=!0);var h=Z9(e,n),d=s[h],m=cr(d)?d:null,g=s.fill==="auto"||s.stroke==="auto";if(!s[h]||m||g){var y=e.getColorFromPalette(e.name,null,t.getSeriesCount());s[h]||(s[h]=y,r.setVisual("colorFromPalette",!0)),s.fill=s.fill==="auto"||cr(s.fill)?y:s.fill,s.stroke=s.stroke==="auto"||cr(s.stroke)?y:s.stroke}if(r.setVisual("style",s),r.setVisual("drawType",h),!t.isSeriesFiltered(e)&&m)return r.setVisual("colorFromPalette",!1),{dataEach:function(x,T){var M=e.getDataParams(T),P=Tt({},s);P[h]=m(M),x.setItemVisual(T,"style",P)}}}},Tp=new sa,hue={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=X9(e,n),a=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(s,o){var h=s.getRawDataItem(o);if(h&&h[n]){Tp.option=h[n];var d=i(Tp),m=s.ensureUniqueItemVisual(o,"style");Tt(m,d),Tp.option.decal&&(s.setItemVisual(o,"decal",Tp.option.decal),Tp.option.decal.dirty=!0),a in d&&s.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},fue={performRawSeries:!0,overallReset:function(e){var t=Mr();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,a=t.get(i);a||(a={},t.set(i,a)),r3(r).scope=a}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},a=r.getData(),s=r3(r).scope,o=r.visualStyleAccessPath||"itemStyle",h=Z9(r,o);a.each(function(d){var m=a.getRawIndex(d);i[m]=d}),n.each(function(d){var m=i[d],g=a.getItemVisual(m,"colorFromPalette");if(g){var y=a.ensureUniqueItemVisual(m,"style"),x=n.getName(d)||d+"",T=n.count();y[h]=r.getColorFromPalette(x,s,T)}})}})}},Ty=Math.PI;function due(e,t){t=t||{},_n(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Pi,n=new xa({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new Vo({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new xa({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(a);var s;return t.showSpinner&&(s=new FC({shape:{startAngle:-Ty/2,endAngle:-Ty/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),s.animateShape(!0).when(1e3,{endAngle:Ty*3/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:Ty*3/2}).delay(300).start("circularInOut"),r.add(s)),r.resize=function(){var o=i.getBoundingRect().width,h=t.showSpinner?t.spinnerRadius:0,d=(e.getWidth()-h*2-(t.showSpinner&&o?10:0)-o)/2-(t.showSpinner&&o?0:5+o/2)+(t.showSpinner?0:o/2)+(o?0:h),m=e.getHeight()/2;t.showSpinner&&s.setShape({cx:d,cy:m}),a.setShape({x:d-h,y:m-h,width:h*2,height:h*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var pue=function(){function e(t,r,n,i){this._stageTaskMap=Mr(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,a=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,s=a?n.step:null,o=i&&i.modDataCount,h=o!=null?Math.ceil(o/s):null;return{step:s,modBy:h,modDataCount:o}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),a=i.count(),s=n.progressiveEnabled&&r.incrementalPrepareRender&&a>=n.threshold,o=t.get("large")&&a>=t.get("largeThreshold"),h=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=n.context={progressiveRender:s,modDataCount:h,large:o}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=Mr();t.eachSeries(function(i){var a=i.getProgressive(),s=i.uid;n.set(s,{id:s,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;Ee(this._allHandlers,function(i){var a=t.get(i.uid)||t.set(i.uid,{}),s="";No(!(i.reset&&i.overallReset),s),i.reset&&this._createSeriesStageTask(i,a,r,n),i.overallReset&&this._createOverallStageTask(i,a,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var a=t.renderTask,s=a.context;s.model=r,s.ecModel=n,s.api=i,a.__block=!t.incrementalPrepareRender,this._pipe(r,a)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var a=!1,s=this;Ee(t,function(h,d){if(!(i.visualType&&i.visualType!==h.visualType)){var m=s._stageTaskMap.get(h.uid),g=m.seriesTaskMap,y=m.overallTask;if(y){var x,T=y.agentStubMap;T.each(function(P){o(i,P)&&(P.dirty(),x=!0)}),x&&y.dirty(),s.updatePayload(y,n);var M=s.getPerformArgs(y,i.block);T.each(function(P){P.perform(M)}),y.perform(M)&&(a=!0)}else g&&g.each(function(P,I){o(i,P)&&P.dirty();var D=s.getPerformArgs(P,i.block);D.skip=!h.performRawSeries&&r.isSeriesFiltered(P.context.model),s.updatePayload(P,n),P.perform(D)&&(a=!0)})}});function o(h,d){return h.setDirty&&(!h.dirtyMap||h.dirtyMap.get(d.__pipeline.id))}this.unfinished=a||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var a=this,s=r.seriesTaskMap,o=r.seriesTaskMap=Mr(),h=t.seriesType,d=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(m):h?n.eachRawSeriesByType(h,m):d&&d(n,i).each(m);function m(g){var y=g.uid,x=o.set(y,s&&s.get(y)||fm({plan:_ue,reset:xue,count:wue}));x.context={model:g,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:a},a._pipe(g,x)}},e.prototype._createOverallStageTask=function(t,r,n,i){var a=this,s=r.overallTask=r.overallTask||fm({reset:mue});s.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:a};var o=s.agentStubMap,h=s.agentStubMap=Mr(),d=t.seriesType,m=t.getTargetSeries,g=!0,y=!1,x="";No(!t.createOnAllSeries,x),d?n.eachRawSeriesByType(d,T):m?m(n,i).each(T):(g=!1,Ee(n.getSeries(),T));function T(M){var P=M.uid,I=h.set(P,o&&o.get(P)||(y=!0,fm({reset:vue,onDirty:yue})));I.context={model:M,overallProgress:g},I.agent=s,I.__block=g,a._pipe(M,I)}y&&s.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return cr(t)&&(t={overallReset:t,seriesType:Sue(t)}),t.uid=t1("stageHandler"),r&&(t.visualType=r),t},e}();function mue(e){e.overallReset(e.ecModel,e.api,e.payload)}function vue(e){return e.overallProgress&&gue}function gue(){this.agent.dirty(),this.getDownstream().dirty()}function yue(){this.agent&&this.agent.dirty()}function _ue(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function xue(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=ua(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Jt(t,function(r,n){return Y9(n)}):bue}var bue=Y9(0);function Y9(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var a=t.start;a<t.end;a++)i.dataEach(n,a);else i&&i.progress&&i.progress(t,n)}}function wue(e){return e.data.count()}function Sue(e){e0=null;try{e(Qm,K9)}catch{}return e0}var Qm={},K9={},e0;J9(Qm,E9);J9(K9,A9);Qm.eachSeriesByType=Qm.eachRawSeriesByType=function(e){e0=e};Qm.eachComponent=function(e){e.mainType==="series"&&e.subType&&(e0=e.subType)};function J9(e,t){for(var r in t.prototype)e[r]=la}const Q9=pue;var i3=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Tue={color:i3,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],i3]};var ra="#B9B8CE",a3="#100C2A",Cy=function(){return{axisLine:{lineStyle:{color:ra}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},o3=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],eB={darkMode:!0,color:o3,backgroundColor:a3,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ra}},textStyle:{color:ra},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ra}},dataZoom:{borderColor:"#71708A",textStyle:{color:ra},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ra}},timeline:{lineStyle:{color:ra},label:{color:ra},controlStyle:{color:ra,borderColor:ra}},calendar:{itemStyle:{color:a3},dayLabel:{color:ra},monthLabel:{color:ra},yearLabel:{color:ra}},timeAxis:Cy(),logAxis:Cy(),valueAxis:Cy(),categoryAxis:Cy(),line:{symbol:"circle"},graph:{color:o3},gauge:{title:{color:ra},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ra},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};eB.categoryAxis.splitLine.show=!1;const Cue=eB;var Eue=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Yt(t)){var a=ds(t);r.mainType=a.main||null,r.subType=a.sub||null}else{var s=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};Ee(t,function(h,d){for(var m=!1,g=0;g<s.length;g++){var y=s[g],x=d.lastIndexOf(y);if(x>0&&x===d.length-y.length){var T=d.slice(0,x);T!=="data"&&(r.mainType=T,r[y.toLowerCase()]=h,m=!0)}}o.hasOwnProperty(d)&&(n[d]=h,m=!0),m||(i[d]=h)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,a=n.packedEvent,s=n.model,o=n.view;if(!s||!o)return!0;var h=r.cptQuery,d=r.dataQuery;return m(h,s,"mainType")&&m(h,s,"subType")&&m(h,s,"index","componentIndex")&&m(h,s,"name")&&m(h,s,"id")&&m(d,a,"name")&&m(d,a,"dataIndex")&&m(d,a,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(t,r.otherQuery,i,a));function m(g,y,x,T){return g[x]==null||y[T||x]===g[x]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),uS=["symbol","symbolSize","symbolRotate","symbolOffset"],s3=uS.concat(["symbolKeepAspect"]),Aue={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},a=!1,s=0;s<uS.length;s++){var o=uS[s],h=e.get(o);cr(h)?(a=!0,i[o]=h):n[o]=h}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(Tt({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var d=Gr(i);function m(g,y){for(var x=e.getRawValue(y),T=e.getDataParams(y),M=0;M<d.length;M++){var P=d[M];g.setItemVisual(y,P,i[P](x,T))}}return{dataEach:a?m:null}}},Mue={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,a){for(var s=i.getItemModel(a),o=0;o<s3.length;o++){var h=s3[o],d=s.getShallow(h,!0);d!=null&&i.setItemVisual(a,h,d)}}return{dataEach:r.hasItemOption?n:null}}};function Iue(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function tB(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function Jh(e,t,r,n,i){var a=e+t;r.isSilent(a)||n.eachComponent({mainType:"series",subType:"pie"},function(s){for(var o=s.seriesIndex,h=s.option.selectedMap,d=i.selected,m=0;m<d.length;m++)if(d[m].seriesIndex===o){var g=s.getData(),y=xv(g,i.fromActionPayload);r.trigger(a,{type:a,seriesId:s.id,name:Vt(y)?g.getName(y[0]):g.getName(y),selected:Yt(h)?h:Tt({},h)})}})}function Pue(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(Jh("map","selectchanged",t,i,n),Jh("pie","selectchanged",t,i,n)):n.fromAction==="select"?(Jh("map","selected",t,i,n),Jh("pie","selected",t,i,n)):n.fromAction==="unselect"&&(Jh("map","unselected",t,i,n),Jh("pie","unselected",t,i,n))})}function Vp(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var Due=Math.round(Math.random()*9),Lue=typeof Object.defineProperty=="function",kue=function(){function e(){this._id="__ec_inner_"+Due++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return Lue?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const Rue=kue;var Oue=en.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,a=t.height/2;e.moveTo(r,n-a),e.lineTo(r+i,n+a),e.lineTo(r-i,n+a),e.closePath()}}),zue=en.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,a=t.height/2;e.moveTo(r,n-a),e.lineTo(r+i,n),e.lineTo(r,n+a),e.lineTo(r-i,n),e.closePath()}}),Bue=en.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,a=Math.max(i,t.height),s=i/2,o=s*s/(a-s),h=n-a+s+o,d=Math.asin(o/s),m=Math.cos(d)*s,g=Math.sin(d),y=Math.cos(d),x=s*.6,T=s*.7;e.moveTo(r-m,h+o),e.arc(r,h,s,Math.PI-d,Math.PI*2+d),e.bezierCurveTo(r+m-g*x,h+o+y*x,r,n-T,r,n),e.bezierCurveTo(r,n-T,r-m+g*x,h+o+y*x,r-m,h+o),e.closePath()}}),Fue=en.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,a=t.y,s=n/3*2;e.moveTo(i,a),e.lineTo(i+s,a+r),e.lineTo(i,a+r/4*3),e.lineTo(i-s,a+r),e.lineTo(i,a),e.closePath()}}),$ue={line:pu,rect:xa,roundRect:xa,square:xa,circle:RC,diamond:zue,pin:Bue,arrow:Fue,triangle:Oue},Nue={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var a=Math.min(r,n);i.x=e,i.y=t,i.width=a,i.height=a},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},cS={};Ee($ue,function(e,t){cS[t]=new e});var Vue=en.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=jO(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=cS[n];i||(n="rect",i=cS[n]),Nue[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function Uue(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function od(e,t,r,n,i,a,s){var o=e.indexOf("empty")===0;o&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var h;return e.indexOf("image://")===0?h=Zz(e.slice(8),new sn(t,r,n,i),s?"center":"cover"):e.indexOf("path://")===0?h=NC(e.slice(7),{},new sn(t,r,n,i),s?"center":"cover"):h=new Vue({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),h.__isEmptyBrush=o,h.setColor=Uue,a&&h.setColor(a),h}function rB(e){return Vt(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function oE(e,t){if(e!=null)return Vt(e)||(e=[e,e]),[Ti(e[0],t[0])||0,Ti(Ar(e[1],e[0]),t[1])||0]}function zc(e){return isFinite(e)}function Hue(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,a=t.y==null?0:t.y,s=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,a=a*r.height+r.y,s=s*r.height+r.y),n=zc(n)?n:0,i=zc(i)?i:1,a=zc(a)?a:0,s=zc(s)?s:0;var o=e.createLinearGradient(n,a,i,s);return o}function jue(e,t,r){var n=r.width,i=r.height,a=Math.min(n,i),s=t.x==null?.5:t.x,o=t.y==null?.5:t.y,h=t.r==null?.5:t.r;t.global||(s=s*n+r.x,o=o*i+r.y,h=h*a),s=zc(s)?s:.5,o=zc(o)?o:.5,h=h>=0&&zc(h)?h:.5;var d=e.createRadialGradient(s,o,0,s,o,h);return d}function l3(e,t,r){for(var n=t.type==="radial"?jue(e,t,r):Hue(e,t,r),i=t.colorStops,a=0;a<i.length;a++)n.addColorStop(i[a].offset,i[a].color);return n}function Gue(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function Ey(e){return parseInt(e,10)}function u3(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],s=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var o=document.defaultView.getComputedStyle(e);return(e[i]||Ey(o[n])||Ey(e.style[n]))-(Ey(o[a])||0)-(Ey(o[s])||0)|0}function que(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:zn(e)?[e]:Vt(e)?e:null}function sE(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&que(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Jt(r,function(a){return a/i}),n/=i)}return[r,n]}var Wue=new Kc(!0);function t0(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function c3(e){return typeof e=="string"&&e!=="none"}function r0(e){var t=e.fill;return t!=null&&t!=="none"}function h3(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function f3(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function d3(e,t,r){var n=EC(t.image,t.__image,r);if(Z0(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*Qy),a.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(a)}return i}}function Xue(e,t,r,n){var i,a=t0(r),s=r0(r),o=r.strokePercent,h=o<1,d=!t.path;(!t.silent||h)&&d&&t.createPathProxy();var m=t.path||Wue,g=t.__dirty;if(!n){var y=r.fill,x=r.stroke,T=s&&!!y.colorStops,M=a&&!!x.colorStops,P=s&&!!y.image,I=a&&!!x.image,D=void 0,R=void 0,B=void 0,H=void 0,V=void 0;(T||M)&&(V=t.getBoundingRect()),T&&(D=g?l3(e,y,V):t.__canvasFillGradient,t.__canvasFillGradient=D),M&&(R=g?l3(e,x,V):t.__canvasStrokeGradient,t.__canvasStrokeGradient=R),P&&(B=g||!t.__canvasFillPattern?d3(e,y,t):t.__canvasFillPattern,t.__canvasFillPattern=B),I&&(H=g||!t.__canvasStrokePattern?d3(e,x,t):t.__canvasStrokePattern,t.__canvasStrokePattern=B),T?e.fillStyle=D:P&&(B?e.fillStyle=B:s=!1),M?e.strokeStyle=R:I&&(H?e.strokeStyle=H:a=!1)}var q=t.getGlobalScale();m.setScale(q[0],q[1],t.segmentIgnoreThreshold);var j,te;e.setLineDash&&r.lineDash&&(i=sE(t),j=i[0],te=i[1]);var ne=!0;(d||g&nf)&&(m.setDPR(e.dpr),h?m.setContext(null):(m.setContext(e),ne=!1),m.reset(),t.buildPath(m,t.shape,n),m.toStatic(),t.pathUpdated()),ne&&m.rebuildPath(e,h?o:1),j&&(e.setLineDash(j),e.lineDashOffset=te),n||(r.strokeFirst?(a&&f3(e,r),s&&h3(e,r)):(s&&h3(e,r),a&&f3(e,r))),j&&e.setLineDash([])}function Zue(e,t,r){var n=t.__image=EC(r.image,t.__image,t,t.onload);if(!(!n||!Z0(n))){var i=r.x||0,a=r.y||0,s=t.getWidth(),o=t.getHeight(),h=n.width/n.height;if(s==null&&o!=null?s=o*h:o==null&&s!=null?o=s/h:s==null&&o==null&&(s=n.width,o=n.height),r.sWidth&&r.sHeight){var d=r.sx||0,m=r.sy||0;e.drawImage(n,d,m,r.sWidth,r.sHeight,i,a,s,o)}else if(r.sx&&r.sy){var d=r.sx,m=r.sy,g=s-d,y=o-m;e.drawImage(n,d,m,g,y,i,a,s,o)}else e.drawImage(n,i,a,s,o)}}function Yue(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||du,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var a=void 0,s=void 0;e.setLineDash&&r.lineDash&&(n=sE(t),a=n[0],s=n[1]),a&&(e.setLineDash(a),e.lineDashOffset=s),r.strokeFirst?(t0(r)&&e.strokeText(i,r.x,r.y),r0(r)&&e.fillText(i,r.x,r.y)):(r0(r)&&e.fillText(i,r.x,r.y),t0(r)&&e.strokeText(i,r.x,r.y)),a&&e.setLineDash([])}}var p3=["shadowBlur","shadowOffsetX","shadowOffsetY"],m3=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function nB(e,t,r,n,i){var a=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){ya(e,i),a=!0;var s=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(s)?Hc.opacity:s}(n||t.blend!==r.blend)&&(a||(ya(e,i),a=!0),e.globalCompositeOperation=t.blend||Hc.blend);for(var o=0;o<p3.length;o++){var h=p3[o];(n||t[h]!==r[h])&&(a||(ya(e,i),a=!0),e[h]=e.dpr*(t[h]||0))}return(n||t.shadowColor!==r.shadowColor)&&(a||(ya(e,i),a=!0),e.shadowColor=t.shadowColor||Hc.shadowColor),a}function v3(e,t,r,n,i){var a=ev(t,i.inHover),s=n?null:r&&ev(r,i.inHover)||{};if(a===s)return!1;var o=nB(e,a,s,n,i);if((n||a.fill!==s.fill)&&(o||(ya(e,i),o=!0),c3(a.fill)&&(e.fillStyle=a.fill)),(n||a.stroke!==s.stroke)&&(o||(ya(e,i),o=!0),c3(a.stroke)&&(e.strokeStyle=a.stroke)),(n||a.opacity!==s.opacity)&&(o||(ya(e,i),o=!0),e.globalAlpha=a.opacity==null?1:a.opacity),t.hasStroke()){var h=a.lineWidth,d=h/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==d&&(o||(ya(e,i),o=!0),e.lineWidth=d)}for(var m=0;m<m3.length;m++){var g=m3[m],y=g[0];(n||a[y]!==s[y])&&(o||(ya(e,i),o=!0),e[y]=a[y]||g[1])}return o}function Kue(e,t,r,n,i){return nB(e,ev(t,i.inHover),r&&ev(r,i.inHover),n,i)}function iB(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function Jue(e,t,r){for(var n=!1,i=0;i<e.length;i++){var a=e[i];n=n||a.isZeroArea(),iB(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}r.allClipped=n}function Que(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var g3=1,y3=2,_3=3,x3=4;function ece(e){var t=r0(e),r=t0(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function ya(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function ev(e,t){return t&&e.__hoverStyle||e.style}function tce(e,t){hS(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function hS(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~cs,t.__isRendered=!1;return}var a=t.__clipPaths,s=r.prevElClipPaths,o=!1,h=!1;if((!s||Gue(a,s))&&(s&&s.length&&(ya(e,r),e.restore(),h=o=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),a&&a.length&&(ya(e,r),e.save(),Jue(a,e,r),o=!0),r.prevElClipPaths=a),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var d=r.prevEl;d||(h=o=!0);var m=t instanceof en&&t.autoBatch&&ece(t.style);o||Que(i,d.transform)?(ya(e,r),iB(e,t)):m||ya(e,r);var g=ev(t,r.inHover);t instanceof en?(r.lastDrawType!==g3&&(h=!0,r.lastDrawType=g3),v3(e,t,d,h,r),(!m||!r.batchFill&&!r.batchStroke)&&e.beginPath(),Xue(e,t,g,m),m&&(r.batchFill=g.fill||"",r.batchStroke=g.stroke||"")):t instanceof W_?(r.lastDrawType!==_3&&(h=!0,r.lastDrawType=_3),v3(e,t,d,h,r),Yue(e,t,g)):t instanceof pl?(r.lastDrawType!==y3&&(h=!0,r.lastDrawType=y3),Kue(e,t,d,h,r),Zue(e,t,g)):t.getTemporalDisplayables&&(r.lastDrawType!==x3&&(h=!0,r.lastDrawType=x3),rce(e,t,r)),m&&n&&ya(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function rce(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},s,o;for(s=t.getCursor(),o=n.length;s<o;s++){var h=n[s];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),hS(e,h,a,s===o-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),a.prevEl=h}for(var d=0,m=i.length;d<m;d++){var h=i[d];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),hS(e,h,a,d===m-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),a.prevEl=h}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var aw=new Rue,b3=new yv(100),w3=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function S3(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&aw.delete(e);var a=aw.get(e);if(a)return a;var s=_n(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});s.backgroundColor==="none"&&(s.backgroundColor=null);var o={repeat:"repeat"};return h(o),o.rotation=s.rotation,o.scaleX=o.scaleY=i?1:1/r,aw.set(e,o),e.dirty=!1,o;function h(d){for(var m=[r],g=!0,y=0;y<w3.length;++y){var x=s[w3[y]];if(x!=null&&!Vt(x)&&!Yt(x)&&!zn(x)&&typeof x!="boolean"){g=!1;break}m.push(x)}var T;if(g){T=m.join(",")+(i?"-svg":"");var M=b3.get(T);M&&(i?d.svgElement=M:d.image=M)}var P=oB(s.dashArrayX),I=nce(s.dashArrayY),D=aB(s.symbol),R=ice(P),B=sB(I),H=!i&&vv.createCanvas(),V=i&&{tag:"g",attrs:{},key:"dcl",children:[]},q=te(),j;H&&(H.width=q.width*r,H.height=q.height*r,j=H.getContext("2d")),ne(),g&&b3.put(T,H||V),d.image=H,d.svgElement=V,d.svgWidth=q.width,d.svgHeight=q.height;function te(){for(var ce=1,le=0,de=R.length;le<de;++le)ce=kD(ce,R[le]);for(var ae=1,le=0,de=D.length;le<de;++le)ae=kD(ae,D[le].length);ce*=ae;var Se=B*R.length*D.length;return{width:Math.max(1,Math.min(ce,s.maxTileWidth)),height:Math.max(1,Math.min(Se,s.maxTileHeight))}}function ne(){j&&(j.clearRect(0,0,H.width,H.height),s.backgroundColor&&(j.fillStyle=s.backgroundColor,j.fillRect(0,0,H.width,H.height)));for(var ce=0,le=0;le<I.length;++le)ce+=I[le];if(ce<=0)return;for(var de=-B,ae=0,Se=0,ve=0;de<q.height;){if(ae%2===0){for(var Ye=Se/2%D.length,Qe=0,Ct=0,St=0;Qe<q.width*2;){for(var Kt=0,le=0;le<P[ve].length;++le)Kt+=P[ve][le];if(Kt<=0)break;if(Ct%2===0){var Ft=(1-s.symbolSize)*.5,br=Qe+P[ve][Ct]*Ft,Ir=de+I[ae]*Ft,vr=P[ve][Ct]*s.symbolSize,fr=I[ae]*s.symbolSize,qe=St/2%D[Ye].length;st(br,Ir,vr,fr,D[Ye][qe])}Qe+=P[ve][Ct],++St,++Ct,Ct===P[ve].length&&(Ct=0)}++ve,ve===P.length&&(ve=0)}de+=I[ae],++Se,++ae,ae===I.length&&(ae=0)}function st(et,mt,ft,ue,ge){var Ie=i?1:r,je=od(ge,et*Ie,mt*Ie,ft*Ie,ue*Ie,s.color,s.symbolKeepAspect);if(i){var Ke=n.painter.renderOneToVNode(je);Ke&&V.children.push(Ke)}else tce(j,je)}}}}function aB(e){if(!e||e.length===0)return[["rect"]];if(Yt(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Yt(e[r])){t=!1;break}if(t)return aB([e]);for(var n=[],r=0;r<e.length;++r)Yt(e[r])?n.push([e[r]]):n.push(e[r]);return n}function oB(e){if(!e||e.length===0)return[[0,0]];if(zn(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!zn(e[n])){r=!1;break}if(r)return oB([e]);for(var i=[],n=0;n<e.length;++n)if(zn(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Jt(e[n],function(o){return Math.ceil(o)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function nce(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(zn(e)){var t=Math.ceil(e);return[t,t]}var r=Jt(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function ice(e){return Jt(e,function(t){return sB(t)})}function sB(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function ace(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(s){var o=n.getItemVisual(s,"decal");if(o){var h=n.ensureUniqueItemVisual(s,"style");h.decal=S3(o,t)}});var i=n.getVisual("decal");if(i){var a=n.getVisual("style");a.decal=S3(i,t)}}})}var oce=new dl;const Po=oce;var lB={};function sce(e,t){lB[e]=t}function lce(e){return lB[e]}var uce=1,cce=800,hce=900,fce=1e3,dce=2e3,pce=5e3,uB=1e3,mce=1100,lE=2e3,cB=3e3,vce=4e3,c1=4500,gce=4600,yce=5e3,_ce=6e3,hB=7e3,xce={PROCESSOR:{FILTER:fce,SERIES_FILTER:cce,STATISTIC:pce},VISUAL:{LAYOUT:uB,PROGRESSIVE_LAYOUT:mce,GLOBAL:lE,CHART:cB,POST_CHART_LAYOUT:gce,COMPONENT:vce,BRUSH:yce,CHART_ITEM:c1,ARIA:_ce,DECAL:hB}},Fi="__flagInMainProcess",ma="__pendingUpdate",ow="__needsUpdateStatus",T3=/^[a-zA-Z0-9_]+$/,sw="__connectUpdateStatus",C3=0,bce=1,wce=2;function fB(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return pB(this,e,t)}}function dB(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return pB(this,e,t)}}function pB(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),dl.prototype[t].apply(e,r)}var mB=function(e){Lt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(dl),vB=mB.prototype;vB.on=dB("on");vB.off=dB("off");var Qh,lw,Ay,ql,uw,cw,hw,Cp,Ep,E3,A3,fw,M3,My,I3,gB,Ka,P3,yB=function(e){Lt(t,e);function t(r,n,i){var a=e.call(this,new Eue)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},Yt(n)&&(n=_B[n]),a._dom=r;var s="canvas",o="auto",h=!1,d=a._zr=PD(r,{renderer:i.renderer||s,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Ar(i.useDirtyRect,h),useCoarsePointer:Ar(i.useCoarsePointer,o),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=aE(On(d.flush,d),17),n=zr(n),n&&I9(n,!0),a._theme=n,a._locale=Pse(i.locale||a9),a._coordSysMgr=new KC;var m=a._api=I3(a);function g(y,x){return y.__prio-x.__prio}return e_(i0,g),e_(fS,g),a._scheduler=new Q9(a,m,fS,i0),a._messageCenter=new mB,a._initEvents(),a.resize=On(a.resize,a),d.animation.on("frame",a._onframe,a),E3(d,a),A3(d,a),M2(a),a}return t.prototype._onframe=function(){if(!this._disposed){P3(this);var r=this._scheduler;if(this[ma]){var n=this[ma].silent;this[Fi]=!0;try{Qh(this),ql.update.call(this,null,this[ma].updateParams)}catch(h){throw this[Fi]=!1,this[ma]=null,h}this._zr.flush(),this[Fi]=!1,this[ma]=null,Cp.call(this,n),Ep.call(this,n)}else if(r.unfinished){var i=uce,a=this._model,s=this._api;r.unfinished=!1;do{var o=+new Date;r.performSeriesTasks(a),r.performDataProcessorTasks(a),cw(this,a),r.performVisualTasks(a),My(this,this._model,s,"remain",{}),i-=+new Date-o}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[Fi]){if(this._disposed){this.id;return}var a,s,o;if(rr(n)&&(i=n.lazyUpdate,a=n.silent,s=n.replaceMerge,o=n.transition,n=n.notMerge),this[Fi]=!0,!this._model||n){var h=new cle(this._api),d=this._theme,m=this._model=new E9;m.scheduler=this._scheduler,m.ssr=this._ssr,m.init(null,null,null,d,this._locale,h)}this._model.setOption(r,{replaceMerge:s},dS);var g={seriesTransition:o,optionChanged:!0};if(i)this[ma]={silent:a,updateParams:g},this[Fi]=!1,this.getZr().wakeUp();else{try{Qh(this),ql.update.call(this,null,g)}catch(y){throw this[ma]=null,this[Fi]=!1,y}this._ssr||this._zr.flush(),this[ma]=null,this[Fi]=!1,Cp.call(this,a),Ep.call(this,a)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Er.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(Er.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return Ee(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,a=[],s=this;Ee(n,function(h){i.eachComponent({mainType:h},function(d){var m=s._componentsMap[d.__viewId];m.group.ignore||(a.push(m),m.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return Ee(a,function(h){h.group.ignore=!1}),o},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,a=Math.min,s=Math.max,o=1/0;if(D3[i]){var h=o,d=o,m=-o,g=-o,y=[],x=r&&r.pixelRatio||this.getDevicePixelRatio();Ee(pm,function(R,B){if(R.group===i){var H=n?R.getZr().painter.getSvgDom().innerHTML:R.renderToCanvas(zr(r)),V=R.getDom().getBoundingClientRect();h=a(V.left,h),d=a(V.top,d),m=s(V.right,m),g=s(V.bottom,g),y.push({dom:H,left:V.left,top:V.top})}}),h*=x,d*=x,m*=x,g*=x;var T=m-h,M=g-d,P=vv.createCanvas(),I=PD(P,{renderer:n?"svg":"canvas"});if(I.resize({width:T,height:M}),n){var D="";return Ee(y,function(R){var B=R.left-h,H=R.top-d;D+='<g transform="translate('+B+","+H+')">'+R.dom+"</g>"}),I.painter.getSvgRoot().innerHTML=D,r.connectedBackgroundColor&&I.painter.setBackgroundColor(r.connectedBackgroundColor),I.refreshImmediately(),I.painter.toDataURL()}else return r.connectedBackgroundColor&&I.add(new xa({shape:{x:0,y:0,width:T,height:M},style:{fill:r.connectedBackgroundColor}})),Ee(y,function(R){var B=new pl({style:{x:R.left*x-h,y:R.top*x-d,image:R.dom}});I.add(B)}),I.refreshImmediately(),P.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return uw(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return uw(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,a,s=Lb(i,r);return Ee(s,function(o,h){h.indexOf("Models")>=0&&Ee(o,function(d){var m=d.coordinateSystem;if(m&&m.containPoint)a=a||!!m.containPoint(n);else if(h==="seriesModels"){var g=this._chartsMap[d.__viewId];g&&g.containPoint&&(a=a||g.containPoint(n,d))}},this)},this),!!a},t.prototype.getVisual=function(r,n){var i=this._model,a=Lb(i,r,{defaultMainType:"series"}),s=a.seriesModel,o=s.getData(),h=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?o.indexOfRawIndex(a.dataIndex):null;return h!=null?Iue(o,h,n):tB(o,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;Ee(Sce,function(n){var i=function(a){var s=r.getModel(),o=a.target,h,d=n==="globalout";if(d?h={}:o&&Vp(o,function(T){var M=yn(T);if(M&&M.dataIndex!=null){var P=M.dataModel||s.getSeriesByIndex(M.seriesIndex);return h=P&&P.getDataParams(M.dataIndex,M.dataType)||{},!0}else if(M.eventData)return h=Tt({},M.eventData),!0},!0),h){var m=h.componentType,g=h.componentIndex;(m==="markLine"||m==="markPoint"||m==="markArea")&&(m="series",g=h.seriesIndex);var y=m&&g!=null&&s.getComponent(m,g),x=y&&r[y.mainType==="series"?"_chartsMap":"_componentsMap"][y.__viewId];h.event=a,h.type=n,r._$eventProcessor.eventInfo={targetEl:o,packedEvent:h,model:y,view:x},r.trigger(n,h)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),Ee(dm,function(n,i){r._messageCenter.on(i,function(a){this.trigger(i,a)},r)}),Ee(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),Pue(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&nz(this.getDom(),cE,"");var n=this,i=n._api,a=n._model;Ee(n._componentsViews,function(s){s.dispose(a,i)}),Ee(n._chartsViews,function(s){s.dispose(a,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete pm[n.id]},t.prototype.resize=function(r){if(!this[Fi]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),a=r&&r.silent;this[ma]&&(a==null&&(a=this[ma].silent),i=!0,this[ma]=null),this[Fi]=!0;try{i&&Qh(this),ql.update.call(this,{type:"resize",animation:Tt({duration:0},r&&r.animation)})}catch(s){throw this[Fi]=!1,s}this[Fi]=!1,Cp.call(this,a),Ep.call(this,a)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(rr(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!pS[r]){var i=pS[r](this._api,n),a=this._zr;this._loadingFX=i,a.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=Tt({},r);return n.type=dm[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(rr(n)||(n={silent:!!n}),!!n0[r.type]&&this._model){if(this[Fi]){this._pendingActions.push(r);return}var i=n.silent;hw.call(this,r,i);var a=n.flush;a?this._zr.flush():a!==!1&&Er.browser.weChat&&this._throttledZrFlush(),Cp.call(this,i),Ep.call(this,i)}},t.prototype.updateLabelLayout=function(){Po.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(n);a.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Qh=function(g){var y=g._scheduler;y.restorePipelines(g._model),y.prepareStageTasks(),lw(g,!0),lw(g,!1),y.plan()},lw=function(g,y){for(var x=g._model,T=g._scheduler,M=y?g._componentsViews:g._chartsViews,P=y?g._componentsMap:g._chartsMap,I=g._zr,D=g._api,R=0;R<M.length;R++)M[R].__alive=!1;y?x.eachComponent(function(V,q){V!=="series"&&B(q)}):x.eachSeries(B);function B(V){var q=V.__requireNewView;V.__requireNewView=!1;var j="_ec_"+V.id+"_"+V.type,te=!q&&P[j];if(!te){var ne=ds(V.type),ce=y?ul.getClass(ne.main,ne.sub):Gc.getClass(ne.sub);te=new ce,te.init(x,D),P[j]=te,M.push(te),I.add(te.group)}V.__viewId=te.__id=j,te.__alive=!0,te.__model=V,te.group.__ecComponentInfo={mainType:V.mainType,index:V.componentIndex},!y&&T.prepareView(te,V,x,D)}for(var R=0;R<M.length;){var H=M[R];H.__alive?R++:(!y&&H.renderTask.dispose(),I.remove(H.group),H.dispose(x,D),M.splice(R,1),P[H.__id]===H&&delete P[H.__id],H.__id=H.group.__ecComponentInfo=null)}},Ay=function(g,y,x,T,M){var P=g._model;if(P.setUpdatePayload(x),!T){Ee([].concat(g._componentsViews).concat(g._chartsViews),H);return}var I={};I[T+"Id"]=x[T+"Id"],I[T+"Index"]=x[T+"Index"],I[T+"Name"]=x[T+"Name"];var D={mainType:T,query:I};M&&(D.subType=M);var R=x.excludeSeriesId,B;R!=null&&(B=Mr(),Ee(ua(R),function(V){var q=vs(V,null);q!=null&&B.set(q,!0)})),P&&P.eachComponent(D,function(V){var q=B&&B.get(V.id)!=null;if(!q)if(o5(x))if(V instanceof jf)x.type===jc&&!x.notBlur&&!V.get(["emphasis","disabled"])&&ioe(V,x,g._api);else{var j=LC(V.mainType,V.componentIndex,x.name,g._api),te=j.focusSelf,ne=j.dispatchers;x.type===jc&&te&&!x.notBlur&&K2(V.mainType,V.componentIndex,g._api),ne&&Ee(ne,function(ce){x.type===jc?jm(ce):Gm(ce)})}else Q2(x)&&V instanceof jf&&(soe(V,x,g._api),a5(V),Ka(g))},g),P&&P.eachComponent(D,function(V){var q=B&&B.get(V.id)!=null;q||H(g[T==="series"?"_chartsMap":"_componentsMap"][V.__viewId])},g);function H(V){V&&V.__alive&&V[y]&&V[y](V.__model,P,g._api,x)}},ql={prepareAndUpdate:function(g){Qh(this),ql.update.call(this,g,{optionChanged:g.newOption!=null})},update:function(g,y){var x=this._model,T=this._api,M=this._zr,P=this._coordSysMgr,I=this._scheduler;if(x){x.setUpdatePayload(g),I.restoreData(x,g),I.performSeriesTasks(x),P.create(x,T),I.performDataProcessorTasks(x,g),cw(this,x),P.update(x,T),r(x),I.performVisualTasks(x,g),fw(this,x,T,g,y);var D=x.get("backgroundColor")||"transparent",R=x.get("darkMode");M.setBackgroundColor(D),R!=null&&R!=="auto"&&M.setDarkMode(R),Po.trigger("afterupdate",x,T)}},updateTransform:function(g){var y=this,x=this._model,T=this._api;if(x){x.setUpdatePayload(g);var M=[];x.eachComponent(function(I,D){if(I!=="series"){var R=y.getViewOfComponentModel(D);if(R&&R.__alive)if(R.updateTransform){var B=R.updateTransform(D,x,T,g);B&&B.update&&M.push(R)}else M.push(R)}});var P=Mr();x.eachSeries(function(I){var D=y._chartsMap[I.__viewId];if(D.updateTransform){var R=D.updateTransform(I,x,T,g);R&&R.update&&P.set(I.uid,1)}else P.set(I.uid,1)}),r(x),this._scheduler.performVisualTasks(x,g,{setDirty:!0,dirtyMap:P}),My(this,x,T,g,{},P),Po.trigger("afterupdate",x,T)}},updateView:function(g){var y=this._model;y&&(y.setUpdatePayload(g),Gc.markUpdateMethod(g,"updateView"),r(y),this._scheduler.performVisualTasks(y,g,{setDirty:!0}),fw(this,y,this._api,g,{}),Po.trigger("afterupdate",y,this._api))},updateVisual:function(g){var y=this,x=this._model;x&&(x.setUpdatePayload(g),x.eachSeries(function(T){T.getData().clearAllVisual()}),Gc.markUpdateMethod(g,"updateVisual"),r(x),this._scheduler.performVisualTasks(x,g,{visualType:"visual",setDirty:!0}),x.eachComponent(function(T,M){if(T!=="series"){var P=y.getViewOfComponentModel(M);P&&P.__alive&&P.updateVisual(M,x,y._api,g)}}),x.eachSeries(function(T){var M=y._chartsMap[T.__viewId];M.updateVisual(T,x,y._api,g)}),Po.trigger("afterupdate",x,this._api))},updateLayout:function(g){ql.update.call(this,g)}},uw=function(g,y,x,T){if(g._disposed){g.id;return}for(var M=g._model,P=g._coordSysMgr.getCoordinateSystems(),I,D=Lb(M,x),R=0;R<P.length;R++){var B=P[R];if(B[y]&&(I=B[y](M,D,T))!=null)return I}},cw=function(g,y){var x=g._chartsMap,T=g._scheduler;y.eachSeries(function(M){T.updateStreamModes(M,x[M.__viewId])})},hw=function(g,y){var x=this,T=this.getModel(),M=g.type,P=g.escapeConnect,I=n0[M],D=I.actionInfo,R=(D.update||"update").split(":"),B=R.pop(),H=R[0]!=null&&ds(R[0]);this[Fi]=!0;var V=[g],q=!1;g.batch&&(q=!0,V=Jt(g.batch,function(ae){return ae=_n(Tt({},ae),g),ae.batch=null,ae}));var j=[],te,ne=Q2(g),ce=o5(g);if(ce&&Mz(this._api),Ee(V,function(ae){if(te=I.action(ae,x._model,x._api),te=te||Tt({},ae),te.type=D.event||te.type,j.push(te),ce){var Se=TC(g),ve=Se.queryOptionMap,Ye=Se.mainTypeSpecified,Qe=Ye?ve.keys()[0]:"series";Ay(x,B,ae,Qe),Ka(x)}else ne?(Ay(x,B,ae,"series"),Ka(x)):H&&Ay(x,B,ae,H.main,H.sub)}),B!=="none"&&!ce&&!ne&&!H)try{this[ma]?(Qh(this),ql.update.call(this,g),this[ma]=null):ql[B].call(this,g)}catch(ae){throw this[Fi]=!1,ae}if(q?te={type:D.event||M,escapeConnect:P,batch:j}:te=j[0],this[Fi]=!1,!y){var le=this._messageCenter;if(le.trigger(te.type,te),ne){var de={type:"selectchanged",escapeConnect:P,selected:loe(T),isFromClick:g.isFromClick||!1,fromAction:g.type,fromActionPayload:g};le.trigger(de.type,de)}}},Cp=function(g){for(var y=this._pendingActions;y.length;){var x=y.shift();hw.call(this,x,g)}},Ep=function(g){!g&&this.trigger("updated")},E3=function(g,y){g.on("rendered",function(x){y.trigger("rendered",x),g.animation.isFinished()&&!y[ma]&&!y._scheduler.unfinished&&!y._pendingActions.length&&y.trigger("finished")})},A3=function(g,y){g.on("mouseover",function(x){var T=x.target,M=Vp(T,J2);M&&(aoe(M,x,y._api),Ka(y))}).on("mouseout",function(x){var T=x.target,M=Vp(T,J2);M&&(ooe(M,x,y._api),Ka(y))}).on("click",function(x){var T=x.target,M=Vp(T,function(D){return yn(D).dataIndex!=null},!0);if(M){var P=M.selected?"unselect":"select",I=yn(M);y._api.dispatchAction({type:P,dataType:I.dataType,dataIndexInside:I.dataIndex,seriesIndex:I.seriesIndex,isFromClick:!0})}})};function r(g){g.clearColorPalette(),g.eachSeries(function(y){y.clearColorPalette()})}function n(g){var y=[],x=[],T=!1;if(g.eachComponent(function(D,R){var B=R.get("zlevel")||0,H=R.get("z")||0,V=R.getZLevelKey();T=T||!!V,(D==="series"?x:y).push({zlevel:B,z:H,idx:R.componentIndex,type:D,key:V})}),T){var M=y.concat(x),P,I;e_(M,function(D,R){return D.zlevel===R.zlevel?D.z-R.z:D.zlevel-R.zlevel}),Ee(M,function(D){var R=g.getComponent(D.type,D.idx),B=D.zlevel,H=D.key;P!=null&&(B=Math.max(P,B)),H?(B===P&&H!==I&&B++,I=H):I&&(B===P&&B++,I=""),P=B,R.setZLevel(B)})}}fw=function(g,y,x,T,M){n(y),M3(g,y,x,T,M),Ee(g._chartsViews,function(P){P.__alive=!1}),My(g,y,x,T,M),Ee(g._chartsViews,function(P){P.__alive||P.remove(y,x)})},M3=function(g,y,x,T,M,P){Ee(P||g._componentsViews,function(I){var D=I.__model;d(D,I),I.render(D,y,x,T),o(D,I),m(D,I)})},My=function(g,y,x,T,M,P){var I=g._scheduler;M=Tt(M||{},{updatedSeries:y.getSeries()}),Po.trigger("series:beforeupdate",y,x,M);var D=!1;y.eachSeries(function(R){var B=g._chartsMap[R.__viewId];B.__alive=!0;var H=B.renderTask;I.updatePayload(H,T),d(R,B),P&&P.get(R.uid)&&H.dirty(),H.perform(I.getPerformArgs(H))&&(D=!0),B.group.silent=!!R.get("silent"),s(R,B),a5(R)}),I.unfinished=D||I.unfinished,Po.trigger("series:layoutlabels",y,x,M),Po.trigger("series:transition",y,x,M),y.eachSeries(function(R){var B=g._chartsMap[R.__viewId];o(R,B),m(R,B)}),a(g,y),Po.trigger("series:afterupdate",y,x,M)},Ka=function(g){g[ow]=!0,g.getZr().wakeUp()},P3=function(g){g[ow]&&(g.getZr().storage.traverse(function(y){cm(y)||i(y)}),g[ow]=!1)};function i(g){for(var y=[],x=g.currentStates,T=0;T<x.length;T++){var M=x[T];M==="emphasis"||M==="blur"||M==="select"||y.push(M)}g.selected&&g.states.select&&y.push("select"),g.hoverState===IC&&g.states.emphasis?y.push("emphasis"):g.hoverState===MC&&g.states.blur&&y.push("blur"),g.useStates(y)}function a(g,y){var x=g._zr,T=x.storage,M=0;T.traverse(function(P){P.isGroup||M++}),M>y.get("hoverLayerThreshold")&&!Er.node&&!Er.worker&&y.eachSeries(function(P){if(!P.preventUsingHoverLayer){var I=g._chartsMap[P.__viewId];I.__alive&&I.eachRendered(function(D){D.states.emphasis&&(D.states.emphasis.hoverLayer=!0)})}})}function s(g,y){var x=g.get("blendMode")||null;y.eachRendered(function(T){T.isGroup||(T.style.blend=x)})}function o(g,y){if(!g.preventAutoZ){var x=g.get("z")||0,T=g.get("zlevel")||0;y.eachRendered(function(M){return h(M,x,T,-1/0),!0})}}function h(g,y,x,T){var M=g.getTextContent(),P=g.getTextGuideLine(),I=g.isGroup;if(I)for(var D=g.childrenRef(),R=0;R<D.length;R++)T=Math.max(h(D[R],y,x,T),T);else g.z=y,g.zlevel=x,T=Math.max(g.z2,T);if(M&&(M.z=y,M.zlevel=x,isFinite(T)&&(M.z2=T+2)),P){var B=g.textGuideLineConfig;P.z=y,P.zlevel=x,isFinite(T)&&(P.z2=T+(B&&B.showAbove?1:-1))}return T}function d(g,y){y.eachRendered(function(x){if(!cm(x)){var T=x.getTextContent(),M=x.getTextGuideLine();x.stateTransition&&(x.stateTransition=null),T&&T.stateTransition&&(T.stateTransition=null),M&&M.stateTransition&&(M.stateTransition=null),x.hasState()?(x.prevStates=x.currentStates,x.clearStates()):x.prevStates&&(x.prevStates=null)}})}function m(g,y){var x=g.getModel("stateAnimation"),T=g.isAnimationEnabled(),M=x.get("duration"),P=M>0?{duration:M,delay:x.get("delay"),easing:x.get("easing")}:null;y.eachRendered(function(I){if(I.states&&I.states.emphasis){if(cm(I))return;if(I instanceof en&&doe(I),I.__dirty){var D=I.prevStates;D&&I.useStates(D)}if(T){I.stateTransition=P;var R=I.getTextContent(),B=I.getTextGuideLine();R&&(R.stateTransition=P),B&&(B.stateTransition=P)}I.__dirty&&i(I)}})}I3=function(g){return new(function(y){Lt(x,y);function x(){return y!==null&&y.apply(this,arguments)||this}return x.prototype.getCoordinateSystems=function(){return g._coordSysMgr.getCoordinateSystems()},x.prototype.getComponentByElement=function(T){for(;T;){var M=T.__ecComponentInfo;if(M!=null)return g._model.getComponent(M.mainType,M.index);T=T.parent}},x.prototype.enterEmphasis=function(T,M){jm(T,M),Ka(g)},x.prototype.leaveEmphasis=function(T,M){Gm(T,M),Ka(g)},x.prototype.enterBlur=function(T){Tz(T),Ka(g)},x.prototype.leaveBlur=function(T){DC(T),Ka(g)},x.prototype.enterSelect=function(T){Cz(T),Ka(g)},x.prototype.leaveSelect=function(T){Ez(T),Ka(g)},x.prototype.getModel=function(){return g.getModel()},x.prototype.getViewOfComponentModel=function(T){return g.getViewOfComponentModel(T)},x.prototype.getViewOfSeriesModel=function(T){return g.getViewOfSeriesModel(T)},x}(A9))(g)},gB=function(g){function y(x,T){for(var M=0;M<x.length;M++){var P=x[M];P[sw]=T}}Ee(dm,function(x,T){g._messageCenter.on(T,function(M){if(D3[g.group]&&g[sw]!==C3){if(M&&M.escapeConnect)return;var P=g.makeActionFromEvent(M),I=[];Ee(pm,function(D){D!==g&&D.group===g.group&&I.push(D)}),y(I,C3),Ee(I,function(D){D[sw]!==bce&&D.dispatchAction(P)}),y(I,wce)}})})}}(),t}(dl),uE=yB.prototype;uE.on=fB("on");uE.off=fB("off");uE.one=function(e,t,r){var n=this;function i(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t&&t.apply&&t.apply(this,a),n.off(e,i)}this.on.call(this,e,i,r)};var Sce=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var n0={},dm={},fS=[],dS=[],i0=[],_B={},pS={},pm={},D3={},Tce=+new Date-0,cE="_echarts_instance_";function Cce(e,t,r){var n=!(r&&r.ssr);if(n){var i=Ece(e);if(i)return i}var a=new yB(e,t,r);return a.id="ec_"+Tce++,pm[a.id]=a,n&&nz(e,cE,a.id),gB(a),Po.trigger("afterinit",a),a}function Ece(e){return pm[Xie(e,cE)]}function xB(e,t){_B[e]=t}function bB(e){an(dS,e)<0&&dS.push(e)}function wB(e,t){fE(fS,e,t,dce)}function Ace(e){hE("afterinit",e)}function Mce(e){hE("afterupdate",e)}function hE(e,t){Po.on(e,t)}function sd(e,t,r){cr(t)&&(r=t,t="");var n=rr(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!dm[t]&&(No(T3.test(n)&&T3.test(t)),n0[n]||(n0[n]={action:r,actionInfo:e}),dm[t]=n)}function Ice(e,t){KC.register(e,t)}function Pce(e,t){fE(i0,e,t,uB,"layout")}function oh(e,t){fE(i0,e,t,cB,"visual")}var L3=[];function fE(e,t,r,n,i){if((cr(t)||rr(t))&&(r=t,t=n),!(an(L3,r)>=0)){L3.push(r);var a=Q9.wrapStageHandler(r,i);a.__prio=t,a.__raw=r,e.push(a)}}function SB(e,t){pS[e]=t}function Dce(e,t,r){var n=lce("registerMap");n&&n(e,t,r)}var Lce=Ole;oh(lE,cue);oh(c1,hue);oh(c1,fue);oh(lE,Aue);oh(c1,Mue);oh(hB,ace);bB(I9);wB(hce,yle);SB("default",due);sd({type:jc,event:jc,update:jc},la);sd({type:s_,event:s_,update:s_},la);sd({type:sm,event:sm,update:sm},la);sd({type:l_,event:l_,update:l_},la);sd({type:lm,event:lm,update:lm},la);xB("light",Tue);xB("dark",Cue);function Ap(e){return e==null?0:e.length||1}function k3(e){return e}var kce=function(){function e(t,r,n,i,a,s){this._old=t,this._new=r,this._oldKeyGetter=n||k3,this._newKeyGetter=i||k3,this.context=a,this._diffModeMultiple=s==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),a=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,a,"_newKeyGetter");for(var s=0;s<t.length;s++){var o=i[s],h=n[o],d=Ap(h);if(d>1){var m=h.shift();h.length===1&&(n[o]=h[0]),this._update&&this._update(m,s)}else d===1?(n[o]=null,this._update&&this._update(h,s)):this._remove&&this._remove(s)}this._performRestAdd(a,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},a=[],s=[];this._initIndexMap(t,n,a,"_oldKeyGetter"),this._initIndexMap(r,i,s,"_newKeyGetter");for(var o=0;o<a.length;o++){var h=a[o],d=n[h],m=i[h],g=Ap(d),y=Ap(m);if(g>1&&y===1)this._updateManyToOne&&this._updateManyToOne(m,d),i[h]=null;else if(g===1&&y>1)this._updateOneToMany&&this._updateOneToMany(m,d),i[h]=null;else if(g===1&&y===1)this._update&&this._update(m,d),i[h]=null;else if(g>1&&y>1)this._updateManyToMany&&this._updateManyToMany(m,d),i[h]=null;else if(g>1)for(var x=0;x<g;x++)this._remove&&this._remove(d[x]);else this._remove&&this._remove(d)}this._performRestAdd(s,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],a=r[i],s=Ap(a);if(s>1)for(var o=0;o<s;o++)this._add&&this._add(a[o]);else s===1&&this._add&&this._add(a);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var a=this._diffModeMultiple,s=0;s<t.length;s++){var o="_ec_"+this[i](t[s],s);if(a||(n[s]=o),!!r){var h=r[o],d=Ap(h);d===0?(r[o]=s,a&&n.push(o)):d===1?r[o]=[h,s]:h.push(s)}}},e}();const Rce=kce;var Oce=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function zce(e,t){var r={},n=r.encode={},i=Mr(),a=[],s=[],o={};Ee(e.dimensions,function(y){var x=e.getDimensionInfo(y),T=x.coordDim;if(T){var M=x.coordDimIndex;dw(n,T)[M]=y,x.isExtraCoord||(i.set(T,1),Fce(x.type)&&(a[0]=y),dw(o,T)[M]=e.getDimensionIndex(x.name)),x.defaultTooltip&&s.push(y)}x9.each(function(P,I){var D=dw(n,I),R=x.otherDims[I];R!=null&&R!==!1&&(D[R]=x.name)})});var h=[],d={};i.each(function(y,x){var T=n[x];d[x]=T[0],h=h.concat(T)}),r.dataDimsOnCoord=h,r.dataDimIndicesOnCoord=Jt(h,function(y){return e.getDimensionInfo(y).storeDimIndex}),r.encodeFirstDimNotExtra=d;var m=n.label;m&&m.length&&(a=m.slice());var g=n.tooltip;return g&&g.length?s=g.slice():s.length||(s=a.slice()),n.defaultedLabel=a,n.defaultedTooltip=s,r.userOutput=new Oce(o,t),r}function dw(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Bce(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function Fce(e){return!(e==="ordinal"||e==="time")}var $ce=function(){function e(t){this.otherDims={},t!=null&&Tt(this,t)}return e}();const h_=$ce;var Nce=Hn(),Vce={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},TB=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=AB(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Ar(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=D9(this.source),n=!MB(t),i="",a=[],s=0,o=0;s<t;s++){var h=void 0,d=void 0,m=void 0,g=this.dimensions[o];if(g&&g.storeDimIndex===s)h=r?g.name:null,d=g.type,m=g.ordinalMeta,o++;else{var y=this.getSourceDimension(s);y&&(h=r?y.name:null,d=y.type)}a.push({property:h,type:d,ordinalMeta:m}),r&&h!=null&&(!g||!g.isCalculationCoord)&&(i+=n?h.replace(/\`/g,"`1").replace(/\$/g,"`2"):h),i+="$",i+=Vce[d]||"f",m&&(i+=m.uid),i+="$"}var x=this.source,T=[x.seriesLayoutBy,x.startIndex,i].join("$$");return{dimensions:a,hash:T}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,a=this.dimensions[n];if(a&&a.storeDimIndex===r)a.isCalculationCoord||(i=a.name),n++;else{var s=this.getSourceDimension(r);s&&(i=s.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function CB(e){return e instanceof TB}function EB(e){for(var t=Mr(),r=0;r<(e||[]).length;r++){var n=e[r],i=rr(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function AB(e){var t=Nce(e);return t.dimNameMap||(t.dimNameMap=EB(e.dimensionsDefine))}function MB(e){return e>30}var Mp=rr,Wl=Jt,Uce=typeof Int32Array>"u"?Array:Int32Array,Hce="e\0\0",R3=-1,jce=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Gce=["_approximateExtent"],O3,Iy,Ip,Pp,pw,Py,mw,qce=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;CB(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var a={},s=[],o={},h=!1,d={},m=0;m<n.length;m++){var g=n[m],y=Yt(g)?new h_({name:g}):g instanceof h_?g:new h_(g),x=y.name;y.type=y.type||"float",y.coordDim||(y.coordDim=x,y.coordDimIndex=0);var T=y.otherDims=y.otherDims||{};s.push(x),a[x]=y,d[x]!=null&&(h=!0),y.createInvertedIndices&&(o[x]=[]),T.itemName===0&&(this._nameDimIdx=m),T.itemId===0&&(this._idDimIdx=m),i&&(y.storeDimIndex=m)}if(this.dimensions=s,this._dimInfos=a,this._initGetDimensionInfo(h),this.hostModel=r,this._invertedIndicesMap=o,this._dimOmitted){var M=this._dimIdxToName=Mr();Ee(s,function(P){M.set(a[P].storeDimIndex,P)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(zn(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,a;if(t instanceof iS&&(a=t),!a){var s=this.dimensions,o=JC(t)||Ta(t)?new L9(t,s.length):t;a=new iS;var h=Wl(s,function(d){return{type:i._dimInfos[d].type,property:d}});a.initData(o,h,n)}this._store=a,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=zce(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,a=n.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var o=i;o<a;o++){var h=o-i;this._nameList[o]=r[h],s&&mw(this,o)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==uu&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var a=this._nameList,s=this._idList,o=i.getSource().sourceFormat,h=o===mo;if(h&&!i.pure)for(var d=[],m=t;m<r;m++){var g=i.getItem(m,d);if(!this.hasItemOption&&Bie(g)&&(this.hasItemOption=!0),g){var y=g.name;a[m]==null&&y!=null&&(a[m]=vs(y,null));var x=g.id;s[m]==null&&x!=null&&(s[m]=vs(x,null))}}if(this._shouldMakeIdFromName())for(var m=t;m<r;m++)mw(this,m);O3(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){Mp(t)?Tt(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=Ip(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return Iy(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return Vt(t)?i.getValues(Wl(t,function(a){return n._getStoreDimIndex(a)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?R3:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){cr(t)&&(n=r,r=t,t=[]);var i=n||this,a=Wl(Pp(t),this._getStoreDimIndex,this);this._store.each(a,i?On(r,i):r)},e.prototype.filterSelf=function(t,r,n){cr(t)&&(n=r,r=t,t=[]);var i=n||this,a=Wl(Pp(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?On(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=Gr(t);return Ee(i,function(a){var s=r._getStoreDimIndex(a);n[s]=t[a]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){cr(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var a=n||i||this,s=Wl(Pp(t),this._getStoreDimIndex,this),o=Py(this);return o._store=this._store.map(s,a?On(r,a):r),o},e.prototype.modify=function(t,r,n,i){var a=n||i||this,s=Wl(Pp(t),this._getStoreDimIndex,this);this._store.modify(s,a?On(r,a):r)},e.prototype.downSample=function(t,r,n,i){var a=Py(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),a},e.prototype.lttbDownSample=function(t,r){var n=Py(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new sa(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new Rce(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return Iy(t,n)},function(n){return Iy(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},Mp(t)?Tt(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i??this.getVisual(r)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var a=i[r];return a==null&&(a=this.getVisual(r),Vt(a)?a=a.slice():Mp(a)&&(a=Tt({},a)),i[r]=a),a},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,Mp(r)?Tt(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){Mp(t)?Tt(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?Tt(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;Xae(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){Ee(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Wl(this.dimensions,this._getDimInfo,this),this.hostModel)),pw(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];cr(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(hC(arguments)))})},e.internalField=function(){O3=function(t){var r=t._invertedIndicesMap;Ee(r,function(n,i){var a=t._dimInfos[i],s=a.ordinalMeta,o=t._store;if(s){n=r[i]=new Uce(s.categories.length);for(var h=0;h<n.length;h++)n[h]=R3;for(var h=0;h<o.count();h++)n[o.get(a.storeDimIndex,h)]=h}})},Ip=function(t,r,n){return vs(t._getCategory(r,n),null)},Iy=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=Ip(t,t._idDimIdx,r)),n==null&&(n=Hce+r),n},Pp=function(t){return Vt(t)||(t=t!=null?[t]:[]),t},Py=function(t){var r=new e(t._schema?t._schema:Wl(t.dimensions,t._getDimInfo,t),t.hostModel);return pw(r,t),r},pw=function(t,r){Ee(jce.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,Ee(Gce,function(n){t[n]=zr(r[n])}),t._calculationInfo=Tt({},r._calculationInfo)},mw=function(t,r){var n=t._nameList,i=t._idList,a=t._nameDimIdx,s=t._idDimIdx,o=n[r],h=i[r];if(o==null&&a!=null&&(n[r]=o=Ip(t,a,r)),h==null&&s!=null&&(i[r]=h=Ip(t,s,r)),h==null&&o!=null){var d=t._nameRepeatCount,m=d[o]=(d[o]||0)+1;h=o,m>1&&(h+="__ec__"+m),i[r]=h}}}(),e}();const dE=qce;function Wce(e,t){JC(e)||(e=QC(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=Mr(),a=[],s=Zce(e,r,n,t.dimensionsCount),o=t.canOmitUnusedDimensions&&MB(s),h=n===e.dimensionsDefine,d=h?AB(e):EB(n),m=t.encodeDefine;!m&&t.encodeDefaulter&&(m=t.encodeDefaulter(e,s));for(var g=Mr(m),y=new F9(s),x=0;x<y.length;x++)y[x]=-1;function T(te){var ne=y[te];if(ne<0){var ce=n[te],le=rr(ce)?ce:{name:ce},de=new h_,ae=le.name;ae!=null&&d.get(ae)!=null&&(de.name=de.displayName=ae),le.type!=null&&(de.type=le.type),le.displayName!=null&&(de.displayName=le.displayName);var Se=a.length;return y[te]=Se,de.storeDimIndex=te,a.push(de),de}return a[ne]}if(!o)for(var x=0;x<s;x++)T(x);g.each(function(te,ne){var ce=ua(te).slice();if(ce.length===1&&!Yt(ce[0])&&ce[0]<0){g.set(ne,!1);return}var le=g.set(ne,[]);Ee(ce,function(de,ae){var Se=Yt(de)?d.get(de):de;Se!=null&&Se<s&&(le[ae]=Se,P(T(Se),ne,ae))})});var M=0;Ee(r,function(te){var ne,ce,le,de;if(Yt(te))ne=te,de={};else{de=te,ne=de.name;var ae=de.ordinalMeta;de.ordinalMeta=null,de=Tt({},de),de.ordinalMeta=ae,ce=de.dimsDef,le=de.otherDims,de.name=de.coordDim=de.coordDimIndex=de.dimsDef=de.otherDims=null}var Se=g.get(ne);if(Se!==!1){if(Se=ua(Se),!Se.length)for(var ve=0;ve<(ce&&ce.length||1);ve++){for(;M<s&&T(M).coordDim!=null;)M++;M<s&&Se.push(M++)}Ee(Se,function(Ye,Qe){var Ct=T(Ye);if(h&&de.type!=null&&(Ct.type=de.type),P(_n(Ct,de),ne,Qe),Ct.name==null&&ce){var St=ce[Qe];!rr(St)&&(St={name:St}),Ct.name=Ct.displayName=St.name,Ct.defaultTooltip=St.defaultTooltip}le&&_n(Ct.otherDims,le)})}});function P(te,ne,ce){x9.get(ne)!=null?te.otherDims[ne]=ce:(te.coordDim=ne,te.coordDimIndex=ce,i.set(ne,!0))}var I=t.generateCoord,D=t.generateCoordCount,R=D!=null;D=I?D||1:0;var B=I||"value";function H(te){te.name==null&&(te.name=te.coordDim)}if(o)Ee(a,function(te){H(te)}),a.sort(function(te,ne){return te.storeDimIndex-ne.storeDimIndex});else for(var V=0;V<s;V++){var q=T(V),j=q.coordDim;j==null&&(q.coordDim=Yce(B,i,R),q.coordDimIndex=0,(!I||D<=0)&&(q.isExtraCoord=!0),D--),H(q),q.type==null&&(T9(e,V)===Oa.Must||q.isExtraCoord&&(q.otherDims.itemName!=null||q.otherDims.seriesName!=null))&&(q.type="ordinal")}return Xce(a),new TB({source:e,dimensions:a,fullDimensionCount:s,dimensionOmitted:o})}function Xce(e){for(var t=Mr(),r=0;r<e.length;r++){var n=e[r],i=n.name,a=t.get(i)||0;a>0&&(n.name=i+(a-1)),a++,t.set(i,a)}}function Zce(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return Ee(t,function(a){var s;rr(a)&&(s=a.dimsDef)&&(i=Math.max(i,s.length))}),i}function Yce(e,t,r){if(r||t.hasKey(e)){for(var n=0;t.hasKey(e+n);)n++;e+=n}return t.set(e,!0),e}var Kce=function(){function e(t){this.coordSysDims=[],this.axisMap=Mr(),this.categoryAxisMap=Mr(),this.coordSysName=t}return e}();function Jce(e){var t=e.get("coordinateSystem"),r=new Kce(t),n=Qce[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var Qce={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",Oo).models[0],a=e.getReferringComponents("yAxis",Oo).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",a),ef(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),ef(a)&&(n.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",Oo).models[0];t.coordSysDims=["single"],r.set("single",i),ef(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",Oo).models[0],a=i.findAxisModel("radiusAxis"),s=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",a),r.set("angle",s),ef(a)&&(n.set("radius",a),t.firstCategoryDimIndex=0),ef(s)&&(n.set("angle",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,a=i.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=a.dimensions.slice();Ee(a.parallelAxisIndex,function(o,h){var d=i.getComponent("parallelAxis",o),m=s[h];r.set(m,d),ef(d)&&(n.set(m,d),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=h))})}};function ef(e){return e.get("type")==="category"}function ehe(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,a,s,o;the(t)?a=t:(s=t.schema,a=s.dimensions,o=t.store);var h=!!(e&&e.get("stack")),d,m,g,y;if(Ee(a,function(D,R){Yt(D)&&(a[R]=D={name:D}),h&&!D.isExtraCoord&&(!n&&!d&&D.ordinalMeta&&(d=D),!m&&D.type!=="ordinal"&&D.type!=="time"&&(!i||i===D.coordDim)&&(m=D))}),m&&!n&&!d&&(n=!0),m){g="__\0ecstackresult_"+e.id,y="__\0ecstackedover_"+e.id,d&&(d.createInvertedIndices=!0);var x=m.coordDim,T=m.type,M=0;Ee(a,function(D){D.coordDim===x&&M++});var P={name:g,coordDim:x,coordDimIndex:M,type:T,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},I={name:y,coordDim:y,coordDimIndex:M+1,type:T,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};s?(o&&(P.storeDimIndex=o.ensureCalculationDimension(y,T),I.storeDimIndex=o.ensureCalculationDimension(g,T)),s.appendCalculationDimension(P),s.appendCalculationDimension(I)):(a.push(P),a.push(I))}return{stackedDimension:m&&m.name,stackedByDimension:d&&d.name,isStackedByIndex:n,stackedOverDimension:y,stackResultDimension:g}}function the(e){return!CB(e.schema)}function a0(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function rhe(e,t){return a0(e,t)?e.getCalculationInfo("stackResultDimension"):t}function nhe(e,t){var r=e.get("coordinateSystem"),n=KC.get(r),i;return t&&t.coordSysDims&&(i=Jt(t.coordSysDims,function(a){var s={name:a},o=t.axisMap.get(a);if(o){var h=o.get("type");s.type=Bce(h)}return s})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function ihe(e,t,r){var n,i;return r&&Ee(e,function(a,s){var o=a.coordDim,h=r.categoryAxisMap.get(o);h&&(n==null&&(n=s),a.ordinalMeta=h.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function ahe(e,t,r){r=r||{};var n=t.getSourceManager(),i,a=!1;e?(a=!0,i=QC(e)):(i=n.getSource(),a=i.sourceFormat===mo);var s=Jce(t),o=nhe(t,s),h=r.useEncodeDefaulter,d=cr(h)?h:h?gi(jse,o,t):null,m={coordDimensions:o,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:d,canOmitUnusedDimensions:!a},g=Wce(i,m),y=ihe(g.dimensions,r.createInvertedIndices,s),x=a?null:n.getSharedDataStore(g),T=ehe(t,{schema:g,store:x}),M=new dE(g,t);M.setCalculationInfo(T);var P=y!=null&&ohe(i)?function(I,D,R,B){return B===y?R:this.defaultDimValueGetter(I,D,R,B)}:null;return M.hasItemOption=!1,M.initData(a?i:x,null,P),M}function ohe(e){if(e.sourceFormat===mo){var t=she(e.data||[]);return!Vt(_v(t))}}function she(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var IB=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();X0(IB);const gl=IB;var lhe=0,uhe=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++lhe}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Jt(n,che);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Yt(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=Mr(this.categories))},e}();function che(e){return rr(e)&&e.value!=null?e.value:e+""}const mS=uhe;function vS(e){return e.type==="interval"||e.type==="log"}function hhe(e,t,r,n){var i={},a=e[1]-e[0],s=i.interval=KO(a/t,!0);r!=null&&s<r&&(s=i.interval=r),n!=null&&s>n&&(s=i.interval=n);var o=i.intervalPrecision=PB(s),h=i.niceTickExtent=[si(Math.ceil(e[0]/s)*s,o),si(Math.floor(e[1]/s)*s,o)];return fhe(h,e),i}function vw(e){var t=Math.pow(10,SC(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,si(r*t)}function PB(e){return Uf(e)+2}function z3(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function fhe(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),z3(e,0,t),z3(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function h1(e,t){return e>=t[0]&&e<=t[1]}function f1(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function d1(e,t){return e*(t[1]-t[0])+t[0]}var DB=function(e){Lt(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new mS({})),Vt(i)&&(i=new mS({categories:Jt(i,function(a){return rr(a)?a.value:a})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Yt(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),h1(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),f1(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(d1(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],s=0,o=this._ordinalMeta.categories.length,h=Math.min(o,n.length);s<h;++s){var d=n[s];i[s]=d,a[d]=s}for(var m=0;s<o;++s){for(;a[m]!=null;)m++;i.push(m),a[m]=s}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(gl);gl.registerClass(DB);const LB=DB;var _c=si,kB=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return h1(r,this._extent)},t.prototype.normalize=function(r){return f1(r,this._extent)},t.prototype.scale=function(r){return d1(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=PB(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,a=this._niceExtent,s=this._intervalPrecision,o=[];if(!n)return o;var h=1e4;i[0]<a[0]&&(r?o.push({value:_c(a[0]-n,s)}):o.push({value:i[0]}));for(var d=a[0];d<=a[1]&&(o.push({value:d}),d=_c(d+n,s),d!==o[o.length-1].value);)if(o.length>h)return[];var m=o.length?o[o.length-1].value:a[1];return i[1]>m&&(r?o.push({value:_c(m+n,s)}):o.push({value:i[1]})),o},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],a=this.getExtent(),s=1;s<n.length;s++){for(var o=n[s],h=n[s-1],d=0,m=[],g=o.value-h.value,y=g/r;d<r-1;){var x=_c(h.value+(d+1)*y);x>a[0]&&x<a[1]&&m.push(x),d++}i.push(m)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=Uf(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=_c(r.value,i,!0);return m9(a)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var a=this._extent,s=a[1]-a[0];if(isFinite(s)){s<0&&(s=-s,a.reverse());var o=hhe(a,r,n,i);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var a=n[1]-n[0];isFinite(a)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var s=this._interval;r.fixMin||(n[0]=_c(Math.floor(n[0]/s)*s)),r.fixMax||(n[1]=_c(Math.ceil(n[1]/s)*s))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(gl);gl.registerClass(kB);const Tv=kB;var RB=typeof Float32Array<"u",dhe=RB?Float32Array:Array;function phe(e){return Vt(e)?RB?new Float32Array(e):e:new dhe(e)}var mhe="__ec_stack_";function OB(e){return e.get("stack")||mhe+e.seriesIndex}function zB(e){return e.dim+e.index}function vhe(e,t){var r=[];return t.eachSeriesByType(e,function(n){bhe(n)&&r.push(n)}),r}function ghe(e){var t={};Ee(e,function(h){var d=h.coordinateSystem,m=d.getBaseAxis();if(!(m.type!=="time"&&m.type!=="value"))for(var g=h.getData(),y=m.dim+"_"+m.index,x=g.getDimensionIndex(g.mapDimension(m.dim)),T=g.getStore(),M=0,P=T.count();M<P;++M){var I=T.get(x,M);t[y]?t[y].push(I):t[y]=[I]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(h,d){return h-d});for(var a=null,s=1;s<i.length;++s){var o=i[s]-i[s-1];o>0&&(a=a===null?o:Math.min(a,o))}r[n]=a}}return r}function yhe(e){var t=ghe(e),r=[];return Ee(e,function(n){var i=n.coordinateSystem,a=i.getBaseAxis(),s=a.getExtent(),o;if(a.type==="category")o=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var h=a.dim+"_"+a.index,d=t[h],m=Math.abs(s[1]-s[0]),g=a.scale.getExtent(),y=Math.abs(g[1]-g[0]);o=d?m/y*d:m}else{var x=n.getData();o=Math.abs(s[1]-s[0])/x.count()}var T=Ti(n.get("barWidth"),o),M=Ti(n.get("barMaxWidth"),o),P=Ti(n.get("barMinWidth")||(whe(n)?.5:1),o),I=n.get("barGap"),D=n.get("barCategoryGap");r.push({bandWidth:o,barWidth:T,barMaxWidth:M,barMinWidth:P,barGap:I,barCategoryGap:D,axisKey:zB(a),stackId:OB(n)})}),_he(r)}function _he(e){var t={};Ee(e,function(n,i){var a=n.axisKey,s=n.bandWidth,o=t[a]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},h=o.stacks;t[a]=o;var d=n.stackId;h[d]||o.autoWidthCount++,h[d]=h[d]||{width:0,maxWidth:0};var m=n.barWidth;m&&!h[d].width&&(h[d].width=m,m=Math.min(o.remainedWidth,m),o.remainedWidth-=m);var g=n.barMaxWidth;g&&(h[d].maxWidth=g);var y=n.barMinWidth;y&&(h[d].minWidth=y);var x=n.barGap;x!=null&&(o.gap=x);var T=n.barCategoryGap;T!=null&&(o.categoryGap=T)});var r={};return Ee(t,function(n,i){r[i]={};var a=n.stacks,s=n.bandWidth,o=n.categoryGap;if(o==null){var h=Gr(a).length;o=Math.max(35-h*4,15)+"%"}var d=Ti(o,s),m=Ti(n.gap,1),g=n.remainedWidth,y=n.autoWidthCount,x=(g-d)/(y+(y-1)*m);x=Math.max(x,0),Ee(a,function(I){var D=I.maxWidth,R=I.minWidth;if(I.width){var B=I.width;D&&(B=Math.min(B,D)),R&&(B=Math.max(B,R)),I.width=B,g-=B+m*B,y--}else{var B=x;D&&D<B&&(B=Math.min(D,g)),R&&R>B&&(B=R),B!==x&&(I.width=B,g-=B+m*B,y--)}}),x=(g-d)/(y+(y-1)*m),x=Math.max(x,0);var T=0,M;Ee(a,function(I,D){I.width||(I.width=x),M=I,T+=I.width*(1+m)}),M&&(T-=M.width*m);var P=-T/2;Ee(a,function(I,D){r[i][D]=r[i][D]||{bandWidth:s,offset:P,width:I.width},P+=I.width*(1+m)})}),r}function xhe(e,t,r){if(e&&t){var n=e[zB(t)];return n!=null&&r!=null?n[OB(r)]:n}}function bhe(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function whe(e){return e.pipelineContext&&e.pipelineContext.large}var She=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},BB=function(e){Lt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return r1(r.value,S5[Rse(Sf(this._minLevelUnit))]||S5.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var a=this.getSetting("useUTC"),s=this.getSetting("locale");return Ose(r,n,i,s,a)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var a=this.getSetting("useUTC"),s=Phe(this._minLevelUnit,this._approxInterval,a,n);return i=i.concat(s),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=so,n[1]+=so),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-so}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var a=this._extent,s=a[1]-a[0];this._approxInterval=s/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var o=Dy.length,h=Math.min(She(Dy,this._approxInterval,0,o),o-1);this._interval=Dy[h][1],this._minLevelUnit=Dy[Math.max(h-1,0)][0]},t.prototype.parse=function(r){return zn(r)?r:+ll(r)},t.prototype.contain=function(r){return h1(this.parse(r),this._extent)},t.prototype.normalize=function(r){return f1(this.parse(r),this._extent)},t.prototype.scale=function(r){return d1(r,this._extent)},t.type="time",t}(Tv),Dy=[["second",jC],["minute",GC],["hour",hm],["quarter-day",hm*6],["half-day",hm*12],["day",so*1.2],["half-week",so*3.5],["week",so*7],["month",so*31],["quarter",so*95],["half-year",w5/2],["year",w5]];function The(e,t,r,n){var i=ll(t),a=ll(r),s=function(T){return T5(i,T,n)===T5(a,T,n)},o=function(){return s("year")},h=function(){return o()&&s("month")},d=function(){return h()&&s("day")},m=function(){return d()&&s("hour")},g=function(){return m()&&s("minute")},y=function(){return g()&&s("second")},x=function(){return y()&&s("millisecond")};switch(e){case"year":return o();case"month":return h();case"day":return d();case"hour":return m();case"minute":return g();case"second":return y();case"millisecond":return x()}}function Che(e,t){return e/=so,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Ehe(e){var t=30*so;return e/=t,e>6?6:e>3?3:e>2?2:1}function Ahe(e){return e/=hm,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function B3(e,t){return e/=t?GC:jC,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function Mhe(e){return KO(e,!0)}function Ihe(e,t,r){var n=new Date(e);switch(Sf(t)){case"year":case"month":n[u9(r)](0);case"day":n[c9(r)](1);case"hour":n[h9(r)](0);case"minute":n[f9(r)](0);case"second":n[d9(r)](0),n[p9(r)](0)}return n.getTime()}function Phe(e,t,r,n){var i=1e4,a=s9,s=0;function o(ne,ce,le,de,ae,Se,ve){for(var Ye=new Date(ce),Qe=ce,Ct=Ye[de]();Qe<le&&Qe<=n[1];)ve.push({value:Qe}),Ct+=ne,Ye[ae](Ct),Qe=Ye.getTime();ve.push({value:Qe,notAdd:!0})}function h(ne,ce,le){var de=[],ae=!ce.length;if(!The(Sf(ne),n[0],n[1],r)){ae&&(ce=[{value:Ihe(new Date(n[0]),ne,r)},{value:n[1]}]);for(var Se=0;Se<ce.length-1;Se++){var ve=ce[Se].value,Ye=ce[Se+1].value;if(ve!==Ye){var Qe=void 0,Ct=void 0,St=void 0,Kt=!1;switch(ne){case"year":Qe=Math.max(1,Math.round(t/so/365)),Ct=qC(r),St=zse(r);break;case"half-year":case"quarter":case"month":Qe=Ehe(t),Ct=Tf(r),St=u9(r);break;case"week":case"half-week":case"day":Qe=Che(t),Ct=n1(r),St=c9(r),Kt=!0;break;case"half-day":case"quarter-day":case"hour":Qe=Ahe(t),Ct=Xm(r),St=h9(r);break;case"minute":Qe=B3(t,!0),Ct=i1(r),St=f9(r);break;case"second":Qe=B3(t,!1),Ct=a1(r),St=d9(r);break;case"millisecond":Qe=Mhe(t),Ct=o1(r),St=p9(r);break}o(Qe,ve,Ye,Ct,St,Kt,de),ne==="year"&&le.length>1&&Se===0&&le.unshift({value:le[0].value-Qe})}}for(var Se=0;Se<de.length;Se++)le.push(de[Se]);return de}}for(var d=[],m=[],g=0,y=0,x=0;x<a.length&&s++<i;++x){var T=Sf(a[x]);if(kse(a[x])){h(a[x],d[d.length-1]||[],m);var M=a[x+1]?Sf(a[x+1]):null;if(T!==M){if(m.length){y=g,m.sort(function(ne,ce){return ne.value-ce.value});for(var P=[],I=0;I<m.length;++I){var D=m[I].value;(I===0||m[I-1].value!==D)&&(P.push(m[I]),D>=n[0]&&D<=n[1]&&g++)}var R=(n[1]-n[0])/t;if(g>R*1.5&&y>R/1.5||(d.push(P),g>R||e===a[x]))break}m=[]}}}for(var B=Hi(Jt(d,function(ne){return Hi(ne,function(ce){return ce.value>=n[0]&&ce.value<=n[1]&&!ce.notAdd})}),function(ne){return ne.length>0}),H=[],V=B.length-1,x=0;x<B.length;++x)for(var q=B[x],j=0;j<q.length;++j)H.push({value:q[j].value,level:V-x});H.sort(function(ne,ce){return ne.value-ce.value});for(var te=[],x=0;x<H.length;++x)(x===0||H[x].value!==H[x-1].value)&&te.push(H[x]);return te}gl.registerClass(BB);const Dhe=BB;var F3=gl.prototype,mm=Tv.prototype,Lhe=si,khe=Math.floor,Rhe=Math.ceil,Ly=Math.pow,Eo=Math.log,pE=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new Tv,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,a=n.getExtent(),s=mm.getTicks.call(this,r);return Jt(s,function(o){var h=o.value,d=si(Ly(this.base,h));return d=h===i[0]&&this._fixMin?ky(d,a[0]):d,d=h===i[1]&&this._fixMax?ky(d,a[1]):d,{value:d}},this)},t.prototype.setExtent=function(r,n){var i=Eo(this.base);r=Eo(Math.max(0,r))/i,n=Eo(Math.max(0,n))/i,mm.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=F3.getExtent.call(this);n[0]=Ly(r,n[0]),n[1]=Ly(r,n[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(n[0]=ky(n[0],a[0])),this._fixMax&&(n[1]=ky(n[1],a[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=Eo(r[0])/Eo(n),r[1]=Eo(r[1])/Eo(n),F3.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var a=Rie(i),s=r/i*a;for(s<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var o=[si(Rhe(n[0]/a)*a),si(khe(n[1]/a)*a)];this._interval=a,this._niceExtent=o}},t.prototype.calcNiceExtent=function(r){mm.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=Eo(r)/Eo(this.base),h1(r,this._extent)},t.prototype.normalize=function(r){return r=Eo(r)/Eo(this.base),f1(r,this._extent)},t.prototype.scale=function(r){return r=d1(r,this._extent),Ly(this.base,r)},t.type="log",t}(gl),FB=pE.prototype;FB.getMinorTicks=mm.getMinorTicks;FB.getLabel=mm.getLabel;function ky(e,t){return Lhe(e,Uf(t))}gl.registerClass(pE);const Ohe=pE;var zhe=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var a=this._modelMinRaw=r.get("min",!0);cr(a)?this._modelMinNum=Ry(t,a({min:n[0],max:n[1]})):a!=="dataMin"&&(this._modelMinNum=Ry(t,a));var s=this._modelMaxRaw=r.get("max",!0);if(cr(s)?this._modelMaxNum=Ry(t,s({min:n[0],max:n[1]})):s!=="dataMax"&&(this._modelMaxNum=Ry(t,s)),i)this._axisDataLen=r.getCategories().length;else{var o=r.get("boundaryGap"),h=Vt(o)?o:[o||0,o||0];typeof h[0]=="boolean"||typeof h[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Yc(h[0],1),Yc(h[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,s=t?null:n-r||Math.abs(r),o=this._modelMinRaw==="dataMin"?r:this._modelMinNum,h=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,d=o!=null,m=h!=null;o==null&&(o=t?i?0:NaN:r-a[0]*s),h==null&&(h=t?i?i-1:NaN:n+a[1]*s),(o==null||!isFinite(o))&&(o=NaN),(h==null||!isFinite(h))&&(h=NaN);var g=F_(o)||F_(h)||t&&!i;this._needCrossZero&&(o>0&&h>0&&!d&&(o=0),o<0&&h<0&&!m&&(h=0));var y=this._determinedMin,x=this._determinedMax;return y!=null&&(o=y,d=!0),x!=null&&(h=x,m=!0),{min:o,max:h,minFixed:d,maxFixed:m,isBlank:g}},e.prototype.modifyDataMinMax=function(t,r){this[Fhe[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=Bhe[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),Bhe={min:"_determinedMin",max:"_determinedMax"},Fhe={min:"_dataMin",max:"_dataMax"};function $he(e,t,r){var n=e.rawExtentInfo;return n||(n=new zhe(e,t,r),e.rawExtentInfo=n,n)}function Ry(e,t){return t==null?null:F_(t)?NaN:e.parse(t)}function $B(e,t){var r=e.type,n=$he(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,a=n.max,s=t.ecModel;if(s&&r==="time"){var o=vhe("bar",s),h=!1;if(Ee(o,function(g){h=h||g.getBaseAxis()===t.axis}),h){var d=yhe(o),m=Nhe(i,a,t,d);i=m.min,a=m.max}}return{extent:[i,a],fixMin:n.minFixed,fixMax:n.maxFixed}}function Nhe(e,t,r,n){var i=r.axis.getExtent(),a=i[1]-i[0],s=xhe(n,r.axis);if(s===void 0)return{min:e,max:t};var o=1/0;Ee(s,function(x){o=Math.min(x.offset,o)});var h=-1/0;Ee(s,function(x){h=Math.max(x.offset+x.width,h)}),o=Math.abs(o),h=Math.abs(h);var d=o+h,m=t-e,g=1-(o+h)/a,y=m/g-m;return t+=y*(h/d),e-=y*(o/d),{min:e,max:t}}function $3(e,t){var r=t,n=$B(e,r),i=n.extent,a=r.get("splitNumber");e instanceof Ohe&&(e.base=r.get("logBase"));var s=e.type,o=r.get("interval"),h=s==="interval"||s==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:a,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:h?r.get("minInterval"):null,maxInterval:h?r.get("maxInterval"):null}),o!=null&&e.setInterval&&e.setInterval(o)}function Vhe(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new LB({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Dhe({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(gl.getClass(t)||Tv)}}function Uhe(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function Cv(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,a){return e.scale.getFormattedLabel(i,a,n)}}(t):Yt(t)?function(n){return function(i){var a=e.scale.getLabel(i),s=n.replace("{value}",a??"");return s}}(t):cr(t)?function(n){return function(i,a){return r!=null&&(a=i.value-r),n(mE(e,i),a,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function mE(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function Hhe(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,a=r.getExtent();r instanceof LB?i=r.count():(n=r.getTicks(),i=n.length);var s=e.getLabelModel(),o=Cv(e),h,d=1;i>40&&(d=Math.ceil(i/40));for(var m=0;m<i;m+=d){var g=n?n[m]:{value:a[0]+m},y=o(g,m),x=s.getTextRect(y),T=jhe(x,s.get("rotate")||0);h?h.union(T):h=T}return h}}function jhe(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,a=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),s=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),o=new sn(e.x,e.y,a,s);return o}function vE(e){var t=e.get("interval");return t??"auto"}function NB(e){return e.type==="category"&&vE(e.getLabelModel())===0}function Ghe(e,t){var r={};return Ee(e.mapDimensionsAll(t),function(n){r[rhe(e,n)]=!0}),Gr(r)}var qhe=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),N3=[],Whe={registerPreprocessor:bB,registerProcessor:wB,registerPostInit:Ace,registerPostUpdate:Mce,registerUpdateLifecycle:hE,registerAction:sd,registerCoordinateSystem:Ice,registerLayout:Pce,registerVisual:oh,registerTransform:Lce,registerLoading:SB,registerMap:Dce,registerImpl:sce,PRIORITY:xce,ComponentModel:Tn,ComponentView:ul,SeriesModel:jf,ChartView:Gc,registerComponentModel:function(e){Tn.registerClass(e)},registerComponentView:function(e){ul.registerClass(e)},registerSeriesModel:function(e){jf.registerClass(e)},registerChartView:function(e){Gc.registerClass(e)},registerSubTypeDefaulter:function(e,t){Tn.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){Mie(e,t)}};function Gf(e){if(Vt(e)){Ee(e,function(t){Gf(t)});return}an(N3,e)>=0||(N3.push(e),cr(e)&&(e={install:e}),e.install(Whe))}var tv=Hn();function Xhe(e){return e.type==="category"?Yhe(e):Jhe(e)}function Zhe(e,t){return e.type==="category"?Khe(e,t):{ticks:Jt(e.scale.getTicks(),function(r){return r.value})}}function Yhe(e){var t=e.getLabelModel(),r=VB(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function VB(e,t){var r=UB(e,"labels"),n=vE(t),i=HB(r,n);if(i)return i;var a,s;return cr(n)?a=qB(e,n):(s=n==="auto"?Qhe(e):n,a=GB(e,s)),jB(r,n,{labels:a,labelCategoryInterval:s})}function Khe(e,t){var r=UB(e,"ticks"),n=vE(t),i=HB(r,n);if(i)return i;var a,s;if((!t.get("show")||e.scale.isBlank())&&(a=[]),cr(n))a=qB(e,n,!0);else if(n==="auto"){var o=VB(e,e.getLabelModel());s=o.labelCategoryInterval,a=Jt(o.labels,function(h){return h.tickValue})}else s=n,a=GB(e,s,!0);return jB(r,n,{ticks:a,tickCategoryInterval:s})}function Jhe(e){var t=e.scale.getTicks(),r=Cv(e);return{labels:Jt(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function UB(e,t){return tv(e)[t]||(tv(e)[t]=[])}function HB(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function jB(e,t,r){return e.push({key:t,value:r}),r}function Qhe(e){var t=tv(e).autoInterval;return t??(tv(e).autoInterval=e.calculateCategoryInterval())}function efe(e){var t=tfe(e),r=Cv(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,a=i.getExtent(),s=i.count();if(a[1]-a[0]<1)return 0;var o=1;s>40&&(o=Math.max(1,Math.floor(s/40)));for(var h=a[0],d=e.dataToCoord(h+1)-e.dataToCoord(h),m=Math.abs(d*Math.cos(n)),g=Math.abs(d*Math.sin(n)),y=0,x=0;h<=a[1];h+=o){var T=0,M=0,P=bC(r({value:h}),t.font,"center","top");T=P.width*1.3,M=P.height*1.3,y=Math.max(y,T,7),x=Math.max(x,M,7)}var I=y/m,D=x/g;isNaN(I)&&(I=1/0),isNaN(D)&&(D=1/0);var R=Math.max(0,Math.floor(Math.min(I,D))),B=tv(e.model),H=e.getExtent(),V=B.lastAutoInterval,q=B.lastTickCount;return V!=null&&q!=null&&Math.abs(V-R)<=1&&Math.abs(q-s)<=1&&V>R&&B.axisExtent0===H[0]&&B.axisExtent1===H[1]?R=V:(B.lastTickCount=s,B.lastAutoInterval=R,B.axisExtent0=H[0],B.axisExtent1=H[1]),R}function tfe(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function GB(e,t,r){var n=Cv(e),i=e.scale,a=i.getExtent(),s=e.getLabelModel(),o=[],h=Math.max((t||0)+1,1),d=a[0],m=i.count();d!==0&&h>1&&m/h>2&&(d=Math.round(Math.ceil(d/h)*h));var g=NB(e),y=s.get("showMinLabel")||g,x=s.get("showMaxLabel")||g;y&&d!==a[0]&&M(a[0]);for(var T=d;T<=a[1];T+=h)M(T);x&&T-h!==a[1]&&M(a[1]);function M(P){var I={value:P};o.push(r?P:{formattedLabel:n(I),rawLabel:i.getLabel(I),tickValue:P})}return o}function qB(e,t,r){var n=e.scale,i=Cv(e),a=[];return Ee(n.getTicks(),function(s){var o=n.getLabel(s),h=s.value;t(s.value,o)&&a.push(r?h:{formattedLabel:i(s),rawLabel:o,tickValue:h})}),a}var V3=[0,1],rfe=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return Die(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),U3(n,i.count())),LD(t,V3,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),U3(n,i.count()));var a=LD(t,n,V3,r);return this.scale.scale(a)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=Zhe(this,r),i=n.ticks,a=Jt(i,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),s=r.get("alignWithLabel");return nfe(this,a,s,t.clamp),a},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Jt(n,function(a){return Jt(a,function(s){return{coord:this.dataToCoord(s),tickValue:s}},this)},this);return i},e.prototype.getViewLabels=function(){return Xhe(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return efe(this)},e}();function U3(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function nfe(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var a=e.getExtent(),s,o;if(i===1)t[0].coord=a[0],s=t[1]={coord:a[0]};else{var h=t[i-1].tickValue-t[0].tickValue,d=(t[i-1].coord-t[0].coord)/h;Ee(t,function(x){x.coord-=d/2});var m=e.scale.getExtent();o=1+m[1]-t[i-1].tickValue,s={coord:t[i-1].coord+d*o},t.push(s)}var g=a[0]>a[1];y(t[0].coord,a[0])&&(n?t[0].coord=a[0]:t.shift()),n&&y(a[0],t[0].coord)&&t.unshift({coord:a[0]}),y(a[1],s.coord)&&(n?s.coord=a[1]:t.pop()),n&&y(s.coord,a[1])&&t.push({coord:a[1]});function y(x,T){return x=si(x),T=si(T),g?x>T:x<T}}const ife=rfe;function afe(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,a=i.getComputedTransform(),s=i.getBoundingRect(),o=!a||a[1]<1e-5&&a[2]<1e-5,h=i.style.margin||0,d=s.clone();d.applyTransform(a),d.x-=h/2,d.y-=h/2,d.width+=h,d.height+=h;var m=o?new X_(s,a):null;t.push({label:i,labelLine:n.labelLine,rect:d,localRect:s,obb:m,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:o,transform:a})}}return t}function ofe(e){var t=[];e.sort(function(M,P){return P.priority-M.priority});var r=new sn(0,0,0,0);function n(M){if(!M.ignore){var P=M.ensureState("emphasis");P.ignore==null&&(P.ignore=!1)}M.ignore=!0}for(var i=0;i<e.length;i++){var a=e[i],s=a.axisAligned,o=a.localRect,h=a.transform,d=a.label,m=a.labelLine;r.copy(a.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var g=a.obb,y=!1,x=0;x<t.length;x++){var T=t[x];if(r.intersect(T.rect)){if(s&&T.axisAligned){y=!0;break}if(T.obb||(T.obb=new X_(T.localRect,T.transform)),g||(g=new X_(o,h)),g.intersect(T.obb)){y=!0;break}}}y?(n(d),m&&n(m)):(d.attr("ignore",a.defaultAttr.ignore),m&&m.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}var gw=null;function sfe(e){return gw||(gw=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),gw(e)}var yw=null;function lfe(e){yw||(yw=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),yw(e)}function ufe(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function Oy(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function WB(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function gS(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(WB(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var cfe='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',yS=0,f_=null;function hfe(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=pfe.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,a=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||o0(e)}),s=gS(e),o=s.detached,h=s.rendered;e.__resize_observer_triggered__=o===!1&&h===!1,e.__resize_observer__=a,a.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){o0(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(yS||(f_=ufe(cfe)),mfe(e),e.__resize_rendered__=gS(e).rendered,window.MutationObserver){var d=new MutationObserver(e.__resize_mutation_handler__);d.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=d}}e.__resize_listeners__.push(t),yS++}function ffe(e,t){var r=e.__resize_listeners__;if(r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",gE),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--yS&&f_&&f_.parentNode.removeChild(f_)}}function dfe(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,a=e.offsetHeight;return i!==r||a!==n?{width:i,height:a}:null}function pfe(){var e=gS(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(yE(this),this.addEventListener("scroll",gE,!0)),this.__resize_rendered__=t,o0(this))}function gE(){var e=this;yE(this),this.__resize_raf__&&lfe(this.__resize_raf__),this.__resize_raf__=sfe(function(){var t=dfe(e);t&&(e.__resize_last__=t,o0(e))})}function o0(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function mfe(e){var t=WB(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=Oy("div",{className:"resize-triggers"}),n=Oy("div",{className:"resize-expand-trigger"}),i=Oy("div"),a=Oy("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(a),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:a},yE(e),e.addEventListener("scroll",gE,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function yE(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,a=i.scrollWidth,s=i.scrollHeight,o=r.offsetWidth,h=r.offsetHeight,d=r.scrollWidth,m=r.scrollHeight;i.scrollLeft=a,i.scrollTop=s,n.style.width=o+1+"px",n.style.height=h+1+"px",r.scrollLeft=d,r.scrollTop=m}var Js=function(){return Js=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Js.apply(this,arguments)},vfe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function gfe(e){return t=Object.create(null),vfe.forEach(function(r){t[r]=function(n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var yfe={autoresize:Boolean},_fe={loading:Boolean,loadingOptions:Object},xfe=/^on[^a-z]/,bfe=function(e){return xfe.test(e)},H3=[],Dp=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,a=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var s=H3.indexOf(a);s===-1&&(s=H3.push(a)-1,Dp[s]={}),r=Dp[s]&&Dp[s][n]?Dp[s][n]:Dp[s][n]=o()}else r=o();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function o(){var h=document.createElement("style");if(h.setAttribute("type","text/css"),t.attributes)for(var d=Object.keys(t.attributes),m=0;m<d.length;m++)h.setAttribute(d[m],t.attributes[d[m]]);var g=n==="prepend"?"afterbegin":"beforeend";return a.insertAdjacentElement(g,h),h}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var wfe=jt({name:"echarts",props:Js(Js({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},yfe),_fe),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=In(),i=In(),a=In(),s=Br("ecTheme",null),o=Br("ecInitOptions",null),h=Br("ecUpdateOptions",null),d=ov(e),m=d.autoresize,g=d.manualUpdate,y=d.loading,x=d.loadingOptions,T=ke(function(){return a.value||e.option||null}),M=ke(function(){return e.theme||Xt(s)||{}}),P=ke(function(){return e.initOptions||Xt(o)||{}}),I=ke(function(){return e.updateOptions||Xt(h)||{}}),D=ke(function(){return function(j){var te={};for(var ne in j)bfe(ne)||(te[ne]=j[ne]);return te}(r)}),R=uv().proxy.$listeners;function B(j){if(n.value){var te=i.value=Cce(n.value,M.value,P.value);e.group&&(te.group=e.group);var ne=R;ne||(ne={},Object.keys(r).filter(function(le){return le.indexOf("on")===0&&le.length>2}).forEach(function(le){var de=le.charAt(2).toLowerCase()+le.slice(3);de.substring(de.length-4)==="Once"&&(de="~".concat(de.substring(0,de.length-4))),ne[de]=r[le]})),Object.keys(ne).forEach(function(le){var de=ne[le];if(de){var ae=le.toLowerCase();ae.charAt(0)==="~"&&(ae=ae.substring(1),de.__once__=!0);var Se=te;if(ae.indexOf("zr:")===0&&(Se=te.getZr(),ae=ae.substring(3)),de.__once__){delete de.__once__;var ve=de;de=function(){for(var Ye=[],Qe=0;Qe<arguments.length;Qe++)Ye[Qe]=arguments[Qe];ve.apply(void 0,Ye),Se.off(ae,de)}}Se.on(ae,de)}}),m.value?xs(function(){te&&!te.isDisposed()&&te.resize(),ce()}):ce()}function ce(){var le=j||T.value;le&&te.setOption(le,I.value)}}function H(){i.value&&(i.value.dispose(),i.value=void 0)}var V=null;mn(g,function(j){typeof V=="function"&&(V(),V=null),j||(V=mn(function(){return e.option},function(te,ne){te&&(i.value?i.value.setOption(te,Js({notMerge:te.value!==(ne==null?void 0:ne.value)},I.value)):B())},{deep:!0}))},{immediate:!0}),mn([M,P],function(){H(),B()},{deep:!0}),Bo(function(){e.group&&i.value&&(i.value.group=e.group)});var q=gfe(i);return function(j,te,ne){var ce=Br("ecLoadingOptions",{}),le=ke(function(){return Js(Js({},Xt(ce)),ne==null?void 0:ne.value)});Bo(function(){var de=j.value;de&&(te.value?de.showLoading(le.value):de.hideLoading())})}(i,y,x),function(j,te,ne){var ce=null;mn([ne,j,te],function(le,de,ae){var Se=le[0],ve=le[1],Ye=le[2];Se&&ve&&Ye&&(ce=aE(function(){ve.resize()},100),hfe(Se,ce)),ae(function(){ce&&Se&&ffe(Se,ce)})})}(i,m,n),ti(function(){B()}),Zf(H),Js({chart:i,root:n,setOption:function(j,te){e.manualUpdate&&(a.value=j),i.value?i.value.setOption(j,te||{}):B(j)},nonEventAttrs:D},q)},render:function(){var e=Js({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",_r("x-vue-echarts",e)}}),_w=Math.sin,xw=Math.cos,XB=Math.PI,xc=Math.PI*2,Sfe=180/XB,Tfe=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,r){this._add("M",t,r)},e.prototype.lineTo=function(t,r){this._add("L",t,r)},e.prototype.bezierCurveTo=function(t,r,n,i,a,s){this._add("C",t,r,n,i,a,s)},e.prototype.quadraticCurveTo=function(t,r,n,i){this._add("Q",t,r,n,i)},e.prototype.arc=function(t,r,n,i,a,s){this.ellipse(t,r,n,n,0,i,a,s)},e.prototype.ellipse=function(t,r,n,i,a,s,o,h){var d=o-s,m=!h,g=Math.abs(d),y=nu(g-xc)||(m?d>=xc:-d>=xc),x=d>0?d%xc:d%xc+xc,T=!1;y?T=!0:nu(g)?T=!1:T=x>=XB==!!m;var M=t+n*xw(s),P=r+i*_w(s);this._start&&this._add("M",M,P);var I=Math.round(a*Sfe);if(y){var D=1/this._p,R=(m?1:-1)*(xc-D);this._add("A",n,i,I,1,+m,t+n*xw(s+R),r+i*_w(s+R)),D>.01&&this._add("A",n,i,I,0,+m,M,P)}else{var B=t+n*xw(o),H=r+i*_w(o);this._add("A",n,i,I,+T,+m,B,H)}},e.prototype.rect=function(t,r,n,i){this._add("M",t,r),this._add("l",n,0),this._add("l",0,i),this._add("l",-n,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,r,n,i,a,s,o,h,d){for(var m=[],g=this._p,y=1;y<arguments.length;y++){var x=arguments[y];if(isNaN(x)){this._invalid=!0;return}m.push(Math.round(x*g)/g)}this._d.push(t+m.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}();const ZB=Tfe;var vm="none",Cfe=Math.round;function Efe(e){var t=e.fill;return t!=null&&t!==vm}function Afe(e){var t=e.stroke;return t!=null&&t!==vm}var _S=["lineCap","miterLimit","lineJoin"],Mfe=Jt(_S,function(e){return"stroke-"+e.toLowerCase()});function Ife(e,t,r,n){var i=t.opacity==null?1:t.opacity;if(r instanceof pl){e("opacity",i);return}if(Efe(t)){var a=Nm(t.fill);e("fill",a.color);var s=t.fillOpacity!=null?t.fillOpacity*a.opacity*i:a.opacity*i;(n||s<1)&&e("fill-opacity",s)}else e("fill",vm);if(Afe(t)){var o=Nm(t.stroke);e("stroke",o.color);var h=t.strokeNoScale?r.getLineScale():1,d=h?(t.lineWidth||0)/h:0,m=t.strokeOpacity!=null?t.strokeOpacity*o.opacity*i:o.opacity*i,g=t.strokeFirst;if((n||d!==1)&&e("stroke-width",d),(n||g)&&e("paint-order",g?"stroke":"fill"),(n||m<1)&&e("stroke-opacity",m),t.lineDash){var y=sE(r),x=y[0],T=y[1];x&&(T=Cfe(T||0),e("stroke-dasharray",x.join(",")),(T||n)&&e("stroke-dashoffset",T))}else n&&e("stroke-dasharray",vm);for(var M=0;M<_S.length;M++){var P=_S[M];if(n||t[P]!==q_[P]){var I=t[P]||q_[P];I&&e(Mfe[M],I)}}}else n&&e("stroke",vm)}var YB="http://www.w3.org/2000/svg",KB="http://www.w3.org/1999/xlink",Pfe="http://www.w3.org/2000/xmlns/",Dfe="http://www.w3.org/XML/1998/namespace";function JB(e){return document.createElementNS(YB,e)}function li(e,t,r,n,i){return{tag:e,attrs:r||{},children:n,text:i,key:t}}function Lfe(e,t){var r=[];if(t)for(var n in t){var i=t[n],a=n;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),r.push(a))}return"<"+e+" "+r.join(" ")+">"}function kfe(e){return"</"+e+">"}function _E(e,t){t=t||{};var r=t.newline?`
`:"";function n(i){var a=i.children,s=i.tag,o=i.attrs;return Lfe(s,o)+$a(i.text)+(a?""+r+Jt(a,function(h){return n(h)}).join(r)+r:"")+kfe(s)}return n(e)}function Rfe(e,t,r){r=r||{};var n=r.newline?`
`:"",i=" {"+n,a=n+"}",s=Jt(Gr(e),function(h){return h+i+Jt(Gr(e[h]),function(d){return d+":"+e[h][d]+";"}).join(n)+a}).join(n),o=Jt(Gr(t),function(h){return"@keyframes "+h+i+Jt(Gr(t[h]),function(d){return d+i+Jt(Gr(t[h][d]),function(m){var g=t[h][d][m];return m==="d"&&(g='path("'+g+'")'),m+":"+g+";"}).join(n)+a}).join(n)+a}).join(n);return!s&&!o?"":["<![CDATA[",s,o,"]]>"].join(n)}function xS(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function j3(e,t,r,n){return li("svg","root",{width:e,height:t,xmlns:YB,"xmlns:xlink":KB,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+e+" "+t:!1},r)}var G3={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Tc="transform-origin";function Ofe(e,t,r){var n=Tt({},e.shape);Tt(n,t),e.buildPath(r,n);var i=new ZB;return i.reset(FO(e)),r.rebuildPath(i,1),i.generateStr(),i.getStr()}function zfe(e,t){var r=t.originX,n=t.originY;(r||n)&&(e[Tc]=r+"px "+n+"px")}var Bfe={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function QB(e,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=e,r}function Ffe(e,t,r){var n=e.shape.paths,i={},a,s;if(Ee(n,function(h){var d=xS(r.zrId);d.animation=!0,p1(h,{},d,!0);var m=d.cssAnims,g=d.cssNodes,y=Gr(m),x=y.length;if(x){s=y[x-1];var T=m[s];for(var M in T){var P=T[M];i[M]=i[M]||{d:""},i[M].d+=P.d||""}for(var I in g){var D=g[I].animation;D.indexOf(s)>=0&&(a=D)}}}),!!a){t.d=!1;var o=QB(i,r);return a.replace(s,o)}}function q3(e){return Yt(e)?G3[e]?"cubic-bezier("+G3[e]+")":gC(e)?e:"":""}function p1(e,t,r,n){var i=e.animators,a=i.length,s=[];if(e instanceof Wz){var o=Ffe(e,t,r);if(o)s.push(o);else if(!a)return}else if(!a)return;for(var h={},d=0;d<a;d++){var m=i[d],g=[m.getMaxTime()/1e3+"s"],y=q3(m.getClip().easing),x=m.getDelay();y?g.push(y):g.push("linear"),x&&g.push(x/1e3+"s"),m.getLoop()&&g.push("infinite");var T=g.join(" ");h[T]=h[T]||[T,[]],h[T][1].push(m)}function M(D){var R=D[1],B=R.length,H={},V={},q={},j="animation-timing-function";function te(st,et,mt){for(var ft=st.getTracks(),ue=st.getMaxTime(),ge=0;ge<ft.length;ge++){var Ie=ft[ge];if(Ie.needsAnimate()){var je=Ie.keyframes,Ke=Ie.propName;if(mt&&(Ke=mt(Ke)),Ke)for(var rt=0;rt<je.length;rt++){var vt=je[rt],Xe=Math.round(vt.time/ue*100)+"%",ut=q3(vt.easing),it=vt.rawValue;(Yt(it)||zn(it))&&(et[Xe]=et[Xe]||{},et[Xe][Ke]=vt.rawValue,ut&&(et[Xe][j]=ut))}}}}for(var ne=0;ne<B;ne++){var ce=R[ne],le=ce.targetName;le?le==="shape"&&te(ce,V):!n&&te(ce,H)}for(var de in H){var ae={};HO(ae,e),Tt(ae,H[de]);var Se=$O(ae),ve=H[de][j];q[de]=Se?{transform:Se}:{},zfe(q[de],ae),ve&&(q[de][j]=ve)}var Ye,Qe=!0;for(var de in V){q[de]=q[de]||{};var Ct=!Ye,ve=V[de][j];Ct&&(Ye=new Kc);var St=Ye.len();Ye.reset(),q[de].d=Ofe(e,V[de],Ye);var Kt=Ye.len();if(!Ct&&St!==Kt){Qe=!1;break}ve&&(q[de][j]=ve)}if(!Qe)for(var de in q)delete q[de].d;if(!n)for(var ne=0;ne<B;ne++){var ce=R[ne],le=ce.targetName;le==="style"&&te(ce,q,function(ft){return Bfe[ft]})}for(var Ft=Gr(q),br=!0,Ir,ne=1;ne<Ft.length;ne++){var vr=Ft[ne-1],fr=Ft[ne];if(q[vr][Tc]!==q[fr][Tc]){br=!1;break}Ir=q[vr][Tc]}if(br&&Ir){for(var de in q)q[de][Tc]&&delete q[de][Tc];t[Tc]=Ir}if(Hi(Ft,function(st){return Gr(q[st]).length>0}).length){var qe=QB(q,r);return qe+" "+D[0]+" both"}}for(var P in h){var o=M(h[P]);o&&s.push(o)}if(s.length){var I=r.zrId+"-cls-"+r.cssClassIdx++;r.cssNodes["."+I]={animation:s.join(",")},t.class=I}}var rv=Math.round;function e8(e){return e&&Yt(e.src)}function t8(e){return e&&cr(e.toDataURL)}function xE(e,t,r,n){Ife(function(i,a){var s=i==="fill"||i==="stroke";s&&BO(a)?n8(t,e,i,n):s&&yC(a)?i8(r,e,i,n):e[i]=a},t,r,!1),Gfe(r,e,n)}function W3(e){return nu(e[0]-1)&&nu(e[1])&&nu(e[2])&&nu(e[3]-1)}function $fe(e){return nu(e[4])&&nu(e[5])}function bE(e,t,r){if(t&&!($fe(t)&&W3(t))){var n=r?10:1e4;e.transform=W3(t)?"translate("+rv(t[4]*n)/n+" "+rv(t[5]*n)/n+")":Xne(t)}}function X3(e,t,r){for(var n=e.points,i=[],a=0;a<n.length;a++)i.push(rv(n[a][0]*r)/r),i.push(rv(n[a][1]*r)/r);t.points=i.join(" ")}function Z3(e){return!e.smooth}function Nfe(e){var t=Jt(e,function(r){return typeof r=="string"?[r,r]:r});return function(r,n,i){for(var a=0;a<t.length;a++){var s=t[a],o=r[s[0]];o!=null&&(n[s[1]]=rv(o*i)/i)}}}var Vfe={circle:[Nfe(["cx","cy","r"])],polyline:[X3,Z3],polygon:[X3,Z3]};function Ufe(e){for(var t=e.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function r8(e,t){var r=e.style,n=e.shape,i=Vfe[e.type],a={},s=t.animation,o="path",h=e.style.strokePercent,d=t.compress&&FO(e)||4;if(i&&!t.willUpdate&&!(i[1]&&!i[1](n))&&!(s&&Ufe(e))&&!(h<1)){o=e.type;var m=Math.pow(10,d);i[0](n,a,m)}else{var g=!e.path||e.shapeChanged();e.path||e.createPathProxy();var y=e.path;g&&(y.beginPath(),e.buildPath(y,e.shape),e.pathUpdated());var x=y.getVersion(),T=e,M=T.__svgPathBuilder;(T.__svgPathVersion!==x||!M||h!==T.__svgPathStrokePercent)&&(M||(M=T.__svgPathBuilder=new ZB),M.reset(d),y.rebuildPath(M,h),M.generateStr(),T.__svgPathVersion=x,T.__svgPathStrokePercent=h),a.d=M.getStr()}return bE(a,e.transform),xE(a,r,e,t),t.animation&&p1(e,a,t),li(o,e.id+"",a)}function Hfe(e,t){var r=e.style,n=r.image;if(n&&!Yt(n)&&(e8(n)?n=n.src:t8(n)&&(n=n.toDataURL())),!!n){var i=r.x||0,a=r.y||0,s=r.width,o=r.height,h={href:n,width:s,height:o};return i&&(h.x=i),a&&(h.y=a),bE(h,e.transform),xE(h,r,e,t),t.animation&&p1(e,h,t),li("image",e.id+"",h)}}function jfe(e,t){var r=e.style,n=r.text;if(n!=null&&(n+=""),!(!n||isNaN(r.x)||isNaN(r.y))){var i=r.font||du,a=r.x||0,s=Yne(r.y||0,W0(i),r.textBaseline),o=Zne[r.textAlign]||r.textAlign,h={"dominant-baseline":"central","text-anchor":o};if(yz(r)){var d="",m=r.fontStyle,g=gz(r.fontSize);if(!parseFloat(g))return;var y=r.fontFamily||uO,x=r.fontWeight;d+="font-size:"+g+";font-family:"+y+";",m&&m!=="normal"&&(d+="font-style:"+m+";"),x&&x!=="normal"&&(d+="font-weight:"+x+";"),h.style=d}else h.style="font: "+i;return n.match(/\s/)&&(h["xml:space"]="preserve"),a&&(h.x=a),s&&(h.y=s),bE(h,e.transform),xE(h,r,e,t),t.animation&&p1(e,h,t),li("text",e.id+"",h,void 0,n)}}function Y3(e,t){if(e instanceof en)return r8(e,t);if(e instanceof pl)return Hfe(e,t);if(e instanceof W_)return jfe(e,t)}function Gfe(e,t,r){var n=e.style;if(Kne(n)){var i=Jne(e),a=r.shadowCache,s=a[i];if(!s){var o=e.getGlobalScale(),h=o[0],d=o[1];if(!h||!d)return;var m=n.shadowOffsetX||0,g=n.shadowOffsetY||0,y=n.shadowBlur,x=Nm(n.shadowColor),T=x.opacity,M=x.color,P=y/2/h,I=y/2/d,D=P+" "+I;s=r.zrId+"-s"+r.shadowIdx++,r.defs[s]=li("filter",s,{id:s,x:"-100%",y:"-100%",width:"300%",height:"300%"},[li("feDropShadow","",{dx:m/h,dy:g/d,stdDeviation:D,"flood-color":M,"flood-opacity":T})]),a[i]=s}t.filter=q0(s)}}function n8(e,t,r,n){var i=e[r],a,s={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(OO(i))a="linearGradient",s.x1=i.x,s.y1=i.y,s.x2=i.x2,s.y2=i.y2;else if(zO(i))a="radialGradient",s.cx=Ar(i.x,.5),s.cy=Ar(i.y,.5),s.r=Ar(i.r,.5);else return;for(var o=i.colorStops,h=[],d=0,m=o.length;d<m;++d){var g=B2(o[d].offset)*100+"%",y=o[d].color,x=Nm(y),T=x.color,M=x.opacity,P={offset:g};P["stop-color"]=T,M<1&&(P["stop-opacity"]=M),h.push(li("stop",d+"",P))}var I=li(a,"",s,h),D=_E(I),R=n.gradientCache,B=R[D];B||(B=n.zrId+"-g"+n.gradientIdx++,R[D]=B,s.id=B,n.defs[B]=li(a,B,s,h)),t[r]=q0(B)}function i8(e,t,r,n){var i=e.style[r],a=e.getBoundingRect(),s={},o=i.repeat,h=o==="no-repeat",d=o==="repeat-x",m=o==="repeat-y",g;if(RO(i)){var y=i.imageWidth,x=i.imageHeight,T=void 0,M=i.image;if(Yt(M)?T=M:e8(M)?T=M.src:t8(M)&&(T=M.toDataURL()),typeof Image>"u"){var P="Image width/height must been given explictly in svg-ssr renderer.";No(y,P),No(x,P)}else if(y==null||x==null){var I=function(ne,ce){if(ne){var le=ne.elm,de=y||ce.width,ae=x||ce.height;ne.tag==="pattern"&&(d?(ae=1,de/=a.width):m&&(de=1,ae/=a.height)),ne.attrs.width=de,ne.attrs.height=ae,le&&(le.setAttribute("width",de),le.setAttribute("height",ae))}},D=EC(T,null,e,function(ne){h||I(V,ne),I(g,ne)});D&&D.width&&D.height&&(y=y||D.width,x=x||D.height)}g=li("image","img",{href:T,width:y,height:x}),s.width=y,s.height=x}else i.svgElement&&(g=zr(i.svgElement),s.width=i.svgWidth,s.height=i.svgHeight);if(g){var R,B;h?R=B=1:d?(B=1,R=s.width/a.width):m?(R=1,B=s.height/a.height):s.patternUnits="userSpaceOnUse",R!=null&&!isNaN(R)&&(s.width=R),B!=null&&!isNaN(B)&&(s.height=B);var H=$O(i);H&&(s.patternTransform=H);var V=li("pattern","",s,[g]),q=_E(V),j=n.patternCache,te=j[q];te||(te=n.zrId+"-p"+n.patternIdx++,j[q]=te,s.id=te,V=n.defs[te]=li("pattern",te,s,[g])),t[r]=q0(te)}}function qfe(e,t,r){var n=r.clipPathCache,i=r.defs,a=n[e.id];if(!a){a=r.zrId+"-c"+r.clipPathIdx++;var s={id:a};n[e.id]=a,i[a]=li("clipPath",a,s,[r8(e,r)])}t["clip-path"]=q0(a)}function K3(e){return document.createTextNode(e)}function Dc(e,t,r){e.insertBefore(t,r)}function J3(e,t){e.removeChild(t)}function Q3(e,t){e.appendChild(t)}function a8(e){return e.parentNode}function o8(e){return e.nextSibling}function bw(e,t){e.textContent=t}var eL=58,Wfe=120,Xfe=li("","");function bS(e){return e===void 0}function ls(e){return e!==void 0}function Zfe(e,t,r){for(var n={},i=t;i<=r;++i){var a=e[i].key;a!==void 0&&(n[a]=i)}return n}function Up(e,t){var r=e.key===t.key,n=e.tag===t.tag;return n&&r}function nv(e){var t,r=e.children,n=e.tag;if(ls(n)){var i=e.elm=JB(n);if(wE(Xfe,e),Vt(r))for(t=0;t<r.length;++t){var a=r[t];a!=null&&Q3(i,nv(a))}else ls(e.text)&&!rr(e.text)&&Q3(i,K3(e.text))}else e.elm=K3(e.text);return e.elm}function s8(e,t,r,n,i){for(;n<=i;++n){var a=r[n];a!=null&&Dc(e,nv(a),t)}}function s0(e,t,r,n){for(;r<=n;++r){var i=t[r];if(i!=null)if(ls(i.tag)){var a=a8(i.elm);J3(a,i.elm)}else J3(e,i.elm)}}function wE(e,t){var r,n=t.elm,i=e&&e.attrs||{},a=t.attrs||{};if(i!==a){for(r in a){var s=a[r],o=i[r];o!==s&&(s===!0?n.setAttribute(r,""):s===!1?n.removeAttribute(r):r.charCodeAt(0)!==Wfe?n.setAttribute(r,s):r==="xmlns:xlink"||r==="xmlns"?n.setAttributeNS(Pfe,r,s):r.charCodeAt(3)===eL?n.setAttributeNS(Dfe,r,s):r.charCodeAt(5)===eL?n.setAttributeNS(KB,r,s):n.setAttribute(r,s))}for(r in i)r in a||n.removeAttribute(r)}}function Yfe(e,t,r){for(var n=0,i=0,a=t.length-1,s=t[0],o=t[a],h=r.length-1,d=r[0],m=r[h],g,y,x,T;n<=a&&i<=h;)s==null?s=t[++n]:o==null?o=t[--a]:d==null?d=r[++i]:m==null?m=r[--h]:Up(s,d)?(of(s,d),s=t[++n],d=r[++i]):Up(o,m)?(of(o,m),o=t[--a],m=r[--h]):Up(s,m)?(of(s,m),Dc(e,s.elm,o8(o.elm)),s=t[++n],m=r[--h]):Up(o,d)?(of(o,d),Dc(e,o.elm,s.elm),o=t[--a],d=r[++i]):(bS(g)&&(g=Zfe(t,n,a)),y=g[d.key],bS(y)?Dc(e,nv(d),s.elm):(x=t[y],x.tag!==d.tag?Dc(e,nv(d),s.elm):(of(x,d),t[y]=void 0,Dc(e,x.elm,s.elm))),d=r[++i]);(n<=a||i<=h)&&(n>a?(T=r[h+1]==null?null:r[h+1].elm,s8(e,T,r,i,h)):s0(e,t,n,a))}function of(e,t){var r=t.elm=e.elm,n=e.children,i=t.children;e!==t&&(wE(e,t),bS(t.text)?ls(n)&&ls(i)?n!==i&&Yfe(r,n,i):ls(i)?(ls(e.text)&&bw(r,""),s8(r,null,i,0,i.length-1)):ls(n)?s0(r,n,0,n.length-1):ls(e.text)&&bw(r,""):e.text!==t.text&&(ls(n)&&s0(r,n,0,n.length-1),bw(r,t.text)))}function Kfe(e,t){if(Up(e,t))of(e,t);else{var r=e.elm,n=a8(r);nv(t),n!==null&&(Dc(n,t.elm,o8(r)),s0(n,[e],0,0))}return t}var Jfe=0,Qfe=function(){function e(t,r,n){if(this.type="svg",this.refreshHover=tL(),this.configLayer=tL(),this.storage=r,this._opts=n=Tt({},n),this.root=t,this._id="zr"+Jfe++,this._oldVNode=j3(n.width,n.height),t&&!n.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=JB("svg");wE(null,this._oldVNode),i.appendChild(a),t.appendChild(i)}this.resize(n.width,n.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",Kfe(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return Y3(t,xS(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),n=this._width,i=this._height,a=xS(this._id);a.animation=t.animation,a.willUpdate=t.willUpdate,a.compress=t.compress;var s=[],o=this._bgVNode=ede(n,i,this._backgroundColor,a);o&&s.push(o);var h=t.compress?null:this._mainVNode=li("g","main",{},[]);this._paintList(r,a,h?h.children:s),h&&s.push(h);var d=Jt(Gr(a.defs),function(y){return a.defs[y]});if(d.length&&s.push(li("defs","defs",{},d)),t.animation){var m=Rfe(a.cssNodes,a.cssAnims,{newline:!0});if(m){var g=li("style","stl",{},[],m);s.push(g)}}return j3(n,i,s,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},_E(this.renderToVNode({animation:Ar(t.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:Ar(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,r,n){for(var i=t.length,a=[],s=0,o,h,d=0,m=0;m<i;m++){var g=t[m];if(!g.invisible){var y=g.__clipPaths,x=y&&y.length||0,T=h&&h.length||0,M=void 0;for(M=Math.max(x-1,T-1);M>=0&&!(y&&h&&y[M]===h[M]);M--);for(var P=T-1;P>M;P--)s--,o=a[s-1];for(var I=M+1;I<x;I++){var D={};qfe(y[I],D,r);var R=li("g","clip-g-"+d++,D,[]);(o?o.children:n).push(R),a[s++]=R,o=R}h=y;var B=Y3(g,r);B&&(o?o.children:n).push(B)}}},e.prototype.resize=function(t,r){var n=this._opts,i=this.root,a=this._viewport;if(t!=null&&(n.width=t),r!=null&&(n.height=r),i&&a&&(a.style.display="none",t=u3(i,0,n),r=u3(i,1,n),a.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,a){var s=a.style;s.width=t+"px",s.height=r+"px"}if(yC(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",t),o.setAttribute("height",r));var h=this._bgVNode&&this._bgVNode.elm;h&&(h.setAttribute("width",t),h.setAttribute("height",r))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var r=this.renderToString(),n="data:image/svg+xml;";return t?(r=eie(r),r&&n+"base64,"+r):n+"charset=UTF-8,"+encodeURIComponent(r)},e}();function tL(e){return function(){}}function ede(e,t,r,n){var i;if(r&&r!=="none")if(i=li("rect","bg",{width:e,height:t,x:"0",y:"0",id:"0"}),BO(r))n8({fill:r},i.attrs,"fill",n);else if(yC(r))i8({style:{fill:r},dirty:la,getBoundingRect:function(){return{width:e,height:t}}},i.attrs,"fill",n);else{var a=Nm(r),s=a.color,o=a.opacity;i.attrs.fill=s,o<1&&(i.attrs["fill-opacity"]=o)}return i}const tde=Qfe;function rde(e){e.registerPainter("svg",tde)}function nde(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=Hf(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var a=[],s=0;s<r.length;s++)a.push(Hf(e,t,r[s]));return a.join(" ")}}var ide=function(e){Lt(t,e);function t(r,n,i,a){var s=e.call(this)||this;return s.updateData(r,n,i,a),s}return t.prototype._createSymbol=function(r,n,i,a,s){this.removeAll();var o=od(r,-1,-1,2,2,null,s);o.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),o.drift=ade,this._symbolType=r,this.add(o)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){jm(this.childAt(0))},t.prototype.downplay=function(){Gm(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,a){this.silent=!1;var s=r.getItemVisual(n,"symbol")||"circle",o=r.hostModel,h=t.getSymbolSize(r,n),d=s!==this._symbolType,m=a&&a.disableAnimation;if(d){var g=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(s,r,n,h,g)}else{var y=this.childAt(0);y.silent=!1;var x={scaleX:h[0]/2,scaleY:h[1]/2};m?y.attr(x):ih(y,x,o,n),Koe(y)}if(this._updateCommon(r,n,h,i,a),d){var y=this.childAt(0);if(!m){var x={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:y.style.opacity}};y.scaleX=y.scaleY=0,y.style.opacity=0,Sv(y,x,o,n)}}m&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,a,s){var o=this.childAt(0),h=r.hostModel,d,m,g,y,x,T,M,P,I;if(a&&(d=a.emphasisItemStyle,m=a.blurItemStyle,g=a.selectItemStyle,y=a.focus,x=a.blurScope,M=a.labelStatesModels,P=a.hoverScale,I=a.cursorStyle,T=a.emphasisDisabled),!a||r.hasItemOption){var D=a&&a.itemModel?a.itemModel:r.getItemModel(n),R=D.getModel("emphasis");d=R.getModel("itemStyle").getItemStyle(),g=D.getModel(["select","itemStyle"]).getItemStyle(),m=D.getModel(["blur","itemStyle"]).getItemStyle(),y=R.get("focus"),x=R.get("blurScope"),T=R.get("disabled"),M=e1(D),P=R.getShallow("scale"),I=D.getShallow("cursor")}var B=r.getItemVisual(n,"symbolRotate");o.attr("rotation",(B||0)*Math.PI/180||0);var H=oE(r.getItemVisual(n,"symbolOffset"),i);H&&(o.x=H[0],o.y=H[1]),I&&o.attr("cursor",I);var V=r.getItemVisual(n,"style"),q=V.fill;if(o instanceof pl){var j=o.style;o.useStyle(Tt({image:j.image,x:j.x,y:j.y,width:j.width,height:j.height},V))}else o.__isEmptyBrush?o.useStyle(Tt({},V)):o.useStyle(V),o.style.decal=null,o.setColor(q,s&&s.symbolInnerColor),o.style.strokeNoScale=!0;var te=r.getItemVisual(n,"liftZ"),ne=this._z2;te!=null?ne==null&&(this._z2=o.z2,o.z2+=te):ne!=null&&(o.z2=ne,this._z2=null);var ce=s&&s.useNameLabel;r9(o,M,{labelFetcher:h,labelDataIndex:n,defaultText:le,inheritColor:q,defaultOpacity:V.opacity});function le(Se){return ce?r.getName(Se):nde(r,Se)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var de=o.ensureState("emphasis");de.style=d,o.ensureState("select").style=g,o.ensureState("blur").style=m;var ae=P==null||P===!0?Math.max(1.1,3/this._sizeY):isFinite(P)&&P>0?+P:1;de.scaleX=this._sizeX*ae,de.scaleY=this._sizeY*ae,this.setSymbolScale(1),kC(this,y,x,T)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var a=this.childAt(0),s=yn(this).dataIndex,o=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var h=a.getTextContent();h&&Z_(h,{style:{opacity:0}},n,{dataIndex:s,removeOpt:o,cb:function(){a.removeTextContent()}})}else a.removeTextContent();Z_(a,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:s,cb:r,removeOpt:o})},t.getSymbolSize=function(r,n){return rB(r.getItemVisual(n,"symbolSize"))},t}(Pi);function ade(e,t){this.parent.drift(e,t)}const ode=ide;function ww(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function rL(e){return e!=null&&!rr(e)&&(e={isIgnore:e}),e||{}}function nL(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:e1(t),cursorStyle:t.get("cursor")}}var sde=function(){function e(t){this.group=new Pi,this._SymbolCtor=t||ode}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=rL(r);var n=this.group,i=t.hostModel,a=this._data,s=this._SymbolCtor,o=r.disableAnimation,h=nL(t),d={disableAnimation:o},m=r.getSymbolPoint||function(g){return t.getItemLayout(g)};a||n.removeAll(),t.diff(a).add(function(g){var y=m(g);if(ww(t,y,g,r)){var x=new s(t,g,h,d);x.setPosition(y),t.setItemGraphicEl(g,x),n.add(x)}}).update(function(g,y){var x=a.getItemGraphicEl(y),T=m(g);if(!ww(t,T,g,r)){n.remove(x);return}var M=t.getItemVisual(g,"symbol")||"circle",P=x&&x.getSymbolType&&x.getSymbolType();if(!x||P&&P!==M)n.remove(x),x=new s(t,g,h,d),x.setPosition(T);else{x.updateData(t,g,h,d);var I={x:T[0],y:T[1]};o?x.attr(I):ih(x,I,i)}n.add(x),t.setItemGraphicEl(g,x)}).remove(function(g){var y=a.getItemGraphicEl(g);y&&y.fadeOut(function(){n.remove(y)},i)}).execute(),this._getSymbolPoint=m,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var a=t._getSymbolPoint(i);n.setPosition(a),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=nL(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=rL(n);function i(h){h.isGroup||(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var s=r.getItemLayout(a);if(ww(r,s,a,n)){var o=new this._SymbolCtor(r,a,this._seriesScope);o.traverse(i),o.setPosition(s),this.group.add(o),r.setItemGraphicEl(a,o),this._progressiveEls.push(o)}}},e.prototype.eachRendered=function(t){J0(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const l8=sde;function lde(e,t,r,n,i){var a=e.getArea(),s=a.x,o=a.y,h=a.width,d=a.height,m=r.get(["lineStyle","width"])||2;s-=m/2,o-=m/2,h+=m,d+=m,s=Math.floor(s),h=Math.round(h);var g=new xa({shape:{x:s,y:o,width:h,height:d}});if(t){var y=e.getBaseAxis(),x=y.isHorizontal(),T=y.inverse;x?(T&&(g.shape.x+=h),g.shape.width=0):(T||(g.shape.y+=d),g.shape.height=0);var M=cr(i)?function(P){i(P,g)}:null;Sv(g,{shape:{width:h,height:d,x:s,y:o}},r,null,n,M)}return g}function ude(e,t,r){var n=e.getArea(),i=si(n.r0,1),a=si(n.r,1),s=new OC({shape:{cx:si(e.cx,1),cy:si(e.cy,1),r0:i,r:a,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var o=e.getBaseAxis().dim==="angle";o?s.shape.endAngle=n.startAngle:s.shape.r=i,Sv(s,{shape:{endAngle:n.endAngle,r:a}},r)}return s}function cde(e,t,r,n,i){if(e){if(e.type==="polar")return ude(e,t,r);if(e.type==="cartesian2d")return lde(e,t,r,n,i)}else return null;return null}function u8(e,t){return{seriesType:e,plan:nE(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,a=r.pipelineContext,s=t||a.large;if(i){var o=Jt(i.dimensions,function(x){return n.mapDimension(x)}).slice(0,2),h=o.length,d=n.getCalculationInfo("stackResultDimension");a0(n,o[0])&&(o[0]=d),a0(n,o[1])&&(o[1]=d);var m=n.getStore(),g=n.getDimensionIndex(o[0]),y=n.getDimensionIndex(o[1]);return h&&{progress:function(x,T){for(var M=x.end-x.start,P=s&&phe(M*h),I=[],D=[],R=x.start,B=0;R<x.end;R++){var H=void 0;if(h===1){var V=m.get(g,R);H=i.dataToPoint(V,null,D)}else I[0]=m.get(g,R),I[1]=m.get(y,R),H=i.dataToPoint(I,null,D);s?(P[B++]=H[0],P[B++]=H[1]):T.setItemLayout(R,H.slice())}s&&T.setLayout("points",P)}}}}}}var hde=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return ahe(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(jf);const fde=hde;var c8=4,dde=function(){function e(){}return e}(),pde=function(e){Lt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new dde},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,a=n.size,s=this.symbolProxy,o=s.shape,h=r.getContext?r.getContext():r,d=h&&a[0]<c8,m=this.softClipShape,g;if(d){this._ctx=h;return}for(this._ctx=null,g=this._off;g<i.length;){var y=i[g++],x=i[g++];isNaN(y)||isNaN(x)||m&&!m.contain(y,x)||(o.x=y-a[0]/2,o.y=x-a[1]/2,o.width=a[0],o.height=a[1],s.buildPath(r,o,!0))}this.incremental&&(this._off=g,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,a=this._ctx,s=this.softClipShape,o;if(a){for(o=this._off;o<n.length;){var h=n[o++],d=n[o++];isNaN(h)||isNaN(d)||s&&!s.contain(h,d)||a.fillRect(h-i[0]/2,d-i[1]/2,i[0],i[1])}this.incremental&&(this._off=o,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,a=i.points,s=i.size,o=Math.max(s[0],4),h=Math.max(s[1],4),d=a.length/2-1;d>=0;d--){var m=d*2,g=a[m]-o/2,y=a[m+1]-h/2;if(r>=g&&n>=y&&r<=g+o&&n<=y+h)return d}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(r=i[0],n=i[1],a.contain(r,n)){var s=this.hoverDataIdx=this.findDataIndex(r,n);return s>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,a=n.size,s=a[0],o=a[1],h=1/0,d=1/0,m=-1/0,g=-1/0,y=0;y<i.length;){var x=i[y++],T=i[y++];h=Math.min(x,h),m=Math.max(x,m),d=Math.min(T,d),g=Math.max(T,g)}r=this._rect=new sn(h-s/2,d-o/2,m-h+s,g-d+o)}return r},t}(en),mde=function(){function e(){this.group=new Pi}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,a=n.startIndex*4*2;r=new Float32Array(r.buffer,a,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],a=r.getLayout("points"),s=i&&i.shape.points;if(s&&s.length<2e4){var o=s.length,h=new Float32Array(o+a.length);h.set(s),h.set(a,o),i.endIndex=t.end,i.setShape({points:h})}else{this._newAdded=[];var d=this._create();d.startIndex=t.start,d.endIndex=t.end,d.incremental=!0,d.setShape({points:a}),this._setCommon(d,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new pde({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var a=r.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=n.clipShape||null,t.symbolProxy=od(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var s=t.shape.size[0]<c8;t.useStyle(i.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var o=r.getVisual("style"),h=o&&o.fill;h&&t.setColor(h);var d=yn(t);d.seriesIndex=i.seriesIndex,t.on("mousemove",function(m){d.dataIndex=null;var g=t.hoverDataIdx;g>=0&&(d.dataIndex=g+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const vde=mde;var gde=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var a=r.getData(),s=this._updateSymbolDraw(a,r);s.updateData(a,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var a=r.getData(),s=this._updateSymbolDraw(a,r);s.incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var a=r.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var s=u8("").reset(r,n,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,a=n.pipelineContext,s=a.large;return(!i||s!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=s?new vde:new l8,this._isLargeDraw=s,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Gc);const yde=gde;var _de=function(e){Lt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Tn);const xde=_de;var wS=function(e){Lt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Oo).models[0]},t.type="cartesian2dAxis",t}(Tn);Ho(wS,qhe);var h8={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},bde=An({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},h8),SE=An({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},h8),wde=An({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},SE),Sde=_n({logBase:10},SE);const Tde={category:bde,value:SE,time:wde,log:Sde};var Cde={value:1,category:1,time:1,log:1};function iL(e,t,r,n){Ee(Cde,function(i,a){var s=An(An({},Tde[a],!0),n,!0),o=function(h){Lt(d,h);function d(){var m=h!==null&&h.apply(this,arguments)||this;return m.type=t+"Axis."+a,m}return d.prototype.mergeDefaultAndTheme=function(m,g){var y=Ym(this),x=y?ZC(m):{},T=g.getTheme();An(m,T.get(a+"Axis")),An(m,this.getDefaultOption()),m.type=aL(m),y&&Km(m,x,y)},d.prototype.optionUpdated=function(){var m=this.option;m.type==="category"&&(this.__ordinalMeta=mS.createByAxisModel(this))},d.prototype.getCategories=function(m){var g=this.option;if(g.type==="category")return m?g.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.type=t+"Axis."+a,d.defaultOption=s,d}(r);e.registerComponentModel(o)}),e.registerSubTypeDefaulter(t+"Axis",aL)}function aL(e){return e.type||(e.data?"category":"value")}var Ede=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Jt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Hi(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const Ade=Ede;var SS=["x","y"];function oL(e){return e.type==="interval"||e.type==="time"}var Mde=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=SS,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!oL(r)||!oL(n))){var i=r.getExtent(),a=n.getExtent(),s=this.dataToPoint([i[0],a[0]]),o=this.dataToPoint([i[1],a[1]]),h=i[1]-i[0],d=a[1]-a[0];if(!(!h||!d)){var m=(o[0]-s[0])/h,g=(o[1]-s[1])/d,y=s[0]-i[0]*m,x=s[1]-a[0]*g,T=this._transform=[m,0,0,g,y,x];this._invTransform=vC([],T)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),a=this.dataToPoint(n),s=this.getArea(),o=new sn(i[0],i[1],a[0]-i[0],a[1]-i[1]);return s.intersect(o)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var a=r[0],s=r[1];if(this._transform&&a!=null&&isFinite(a)&&s!=null&&isFinite(s))return ho(i,r,this._transform);var o=this.getAxis("x"),h=this.getAxis("y");return i[0]=o.toGlobalCoord(o.dataToCoord(a,n)),i[1]=h.toGlobalCoord(h.dataToCoord(s,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,s=i.getExtent(),o=a.getExtent(),h=i.parse(r[0]),d=a.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(s[0],s[1]),h),Math.max(s[0],s[1])),n[1]=Math.min(Math.max(Math.min(o[0],o[1]),d),Math.max(o[0],o[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return ho(i,r,this._invTransform);var a=this.getAxis("x"),s=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(r[0]),n),i[1]=s.coordToData(s.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),a=Math.min(n[0],n[1]),s=Math.max(r[0],r[1])-i,o=Math.max(n[0],n[1])-a;return new sn(i,a,s,o)},t}(Ade),Ide=function(e){Lt(t,e);function t(r,n,i,a,s){var o=e.call(this,r,n,i)||this;return o.index=0,o.type=a||"value",o.position=s||"bottom",o}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(ife);const Pde=Ide;function TS(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,a={},s=i.getAxesOnZeroOf()[0],o=i.position,h=s?"onZero":o,d=i.dim,m=n.getRect(),g=[m.x,m.x+m.width,m.y,m.y+m.height],y={left:0,right:1,top:0,bottom:1,onZero:2},x=t.get("offset")||0,T=d==="x"?[g[2]-x,g[3]+x]:[g[0]-x,g[1]+x];if(s){var M=s.toGlobalCoord(s.dataToCoord(0));T[y.onZero]=Math.max(Math.min(M,T[1]),T[0])}a.position=[d==="y"?T[y[h]]:g[0],d==="x"?T[y[h]]:g[3]],a.rotation=Math.PI/2*(d==="x"?0:1);var P={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=P[o],a.labelOffset=s?T[y[o]]-T[y.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Nf(r.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var I=t.get(["axisLabel","rotate"]);return a.labelRotate=h==="top"?-I:I,a.z2=1,a}function sL(e){return e.get("coordinateSystem")==="cartesian2d"}function lL(e){var t={xAxisModel:null,yAxisModel:null};return Ee(t,function(r,n){var i=n.replace(/Model$/,""),a=e.getReferringComponents(i,Oo).models[0];t[n]=a}),t}var Sw=Math.log;function Dde(e,t,r){var n=Tv.prototype,i=n.getTicks.call(r),a=n.getTicks.call(r,!0),s=i.length-1,o=n.getInterval.call(r),h=$B(e,t),d=h.extent,m=h.fixMin,g=h.fixMax;if(e.type==="log"){var y=Sw(e.base);d=[Sw(d[0])/y,Sw(d[1])/y]}e.setExtent(d[0],d[1]),e.calcNiceExtent({splitNumber:s,fixMin:m,fixMax:g});var x=n.getExtent.call(e);m&&(d[0]=x[0]),g&&(d[1]=x[1]);var T=n.getInterval.call(e),M=d[0],P=d[1];if(m&&g)T=(P-M)/s;else if(m)for(P=d[0]+T*s;P<d[1]&&isFinite(P)&&isFinite(d[1]);)T=vw(T),P=d[0]+T*s;else if(g)for(M=d[1]-T*s;M>d[0]&&isFinite(M)&&isFinite(d[0]);)T=vw(T),M=d[1]-T*s;else{var I=e.getTicks().length-1;I>s&&(T=vw(T));var D=T*s;P=Math.ceil(d[1]/T)*T,M=si(P-D),M<0&&d[0]>=0?(M=0,P=si(D)):P>0&&d[1]<=0&&(P=0,M=-si(D))}var R=(i[0].value-a[0].value)/o,B=(i[s].value-a[s].value)/o;n.setExtent.call(e,M+T*R,P+T*B),n.setInterval.call(e,T),(R||B)&&n.setNiceExtent.call(e,M+T,P-T)}var Lde=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=SS,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(s){var o,h=Gr(s),d=h.length;if(d){for(var m=[],g=d-1;g>=0;g--){var y=+h[g],x=s[y],T=x.model,M=x.scale;vS(M)&&T.get("alignTicks")&&T.get("interval")==null?m.push(x):($3(M,T),vS(M)&&(o=x))}m.length&&(o||(o=m.pop(),$3(o.scale,o.model)),Ee(m,function(P){Dde(P.scale,P.model,o.scale)}))}}i(n.x),i(n.y);var a={};Ee(n.x,function(s){uL(n,"y",s,a)}),Ee(n.y,function(s){uL(n,"x",s,a)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),a=!n&&t.get("containLabel"),s=XC(i,{width:r.getWidth(),height:r.getHeight()});this._rect=s;var o=this._axesList;h(),a&&(Ee(o,function(d){if(!d.model.get(["axisLabel","inside"])){var m=Hhe(d);if(m){var g=d.isHorizontal()?"height":"width",y=d.model.get(["axisLabel","margin"]);s[g]-=m[g]+y,d.position==="top"?s.y+=m.height+y:d.position==="left"&&(s.x+=m.width+y)}}}),h()),Ee(this._coordsList,function(d){d.calcAffineTransform()});function h(){Ee(o,function(d){var m=d.isHorizontal(),g=m?[0,s.width]:[0,s.height],y=d.inverse?1:0;d.setExtent(g[y],g[1-y]),kde(d,m?s.x:s.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}rr(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===t||a[i].getAxis("y").index===r)return a[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",Oo).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Oo).models[0],a=t.gridModel,s=this._coordsList,o,h;if(r)o=r.coordinateSystem,an(s,o)<0&&(o=null);else if(n&&i)o=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)h=this.getAxis("x",n.componentIndex);else if(i)h=this.getAxis("y",i.componentIndex);else if(a){var d=a.coordinateSystem;d===this&&(o=this._coordsList[0])}return{cartesian:o,axis:h}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,a=this,s={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},h={x:0,y:0};if(r.eachComponent("xAxis",d("x"),this),r.eachComponent("yAxis",d("y"),this),!h.x||!h.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,Ee(o.x,function(m,g){Ee(o.y,function(y,x){var T="x"+g+"y"+x,M=new Mde(T);M.master=i,M.model=t,i._coordsMap[T]=M,i._coordsList.push(M),M.addAxis(m),M.addAxis(y)})});function d(m){return function(g,y){if(Tw(g,t)){var x=g.get("position");m==="x"?x!=="top"&&x!=="bottom"&&(x=s.bottom?"top":"bottom"):x!=="left"&&x!=="right"&&(x=s.left?"right":"left"),s[x]=!0;var T=new Pde(m,Vhe(g),[0,0],g.get("type"),x),M=T.type==="category";T.onBand=M&&g.get("boundaryGap"),T.inverse=g.get("inverse"),g.axis=T,T.model=g,T.grid=a,T.index=y,a._axesList.push(T),o[m][y]=T,h[m]++}}}},e.prototype._updateScale=function(t,r){Ee(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),t.eachSeries(function(i){if(sL(i)){var a=lL(i),s=a.xAxisModel,o=a.yAxisModel;if(!Tw(s,r)||!Tw(o,r))return;var h=this.getCartesian(s.componentIndex,o.componentIndex),d=i.getData(),m=h.getAxis("x"),g=h.getAxis("y");n(d,m),n(d,g)}},this);function n(i,a){Ee(Ghe(i,a.dim),function(s){a.scale.unionExtentFromData(i,s)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return Ee(this.getCartesians(),function(i){var a=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),s=i.getOtherAxis(a);an(r,a)<0&&r.push(a),an(n,s)<0&&n.push(s)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,a){var s=new e(i,t,r);s.name="grid_"+a,s.resize(i,r,!0),i.coordinateSystem=s,n.push(s)}),t.eachSeries(function(i){if(sL(i)){var a=lL(i),s=a.xAxisModel,o=a.yAxisModel,h=s.getCoordSysModel(),d=h.coordinateSystem;i.coordinateSystem=d.getCartesian(s.componentIndex,o.componentIndex)}}),n},e.dimensions=SS,e}();function Tw(e,t){return e.getCoordSysModel()===t}function uL(e,t,r,n){r.getAxesOnZeroOf=function(){return a?[a]:[]};var i=e[t],a,s=r.model,o=s.get(["axisLine","onZero"]),h=s.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(h!=null)cL(i[h])&&(a=i[h]);else for(var d in i)if(i.hasOwnProperty(d)&&cL(i[d])&&!n[m(i[d])]){a=i[d];break}a&&(n[m(a)]=!0);function m(g){return g.dim+"_"+g.index}}function cL(e){return e&&e.type!=="category"&&e.type!=="time"&&Uhe(e)}function kde(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const Rde=Lde;var iu=Math.PI,qc=function(){function e(t,r){this.group=new Pi,this.opt=r,this.axisModel=t,_n(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Pi({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!hL[t]},e.prototype.add=function(t){hL[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=YO(r-t),a,s;return j_(i)?(s=n>0?"top":"bottom",a="center"):j_(i-iu)?(s=n>0?"bottom":"top",a="center"):(s="middle",i>0&&i<iu?a=n>0?"right":"left":a=n>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:s}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),hL={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var a=t.axis.getExtent(),s=n.transform,o=[a[0],0],h=[a[1],0],d=o[0]>h[0];s&&(ho(o,o,s),ho(h,h,s));var m=Tt({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),g=new pu({shape:{x1:o[0],y1:o[1],x2:h[0],y2:h[1]},style:m,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});qm(g.shape,g.style.lineWidth),g.anid="line",r.add(g);var y=t.get(["axisLine","symbol"]);if(y!=null){var x=t.get(["axisLine","symbolSize"]);Yt(y)&&(y=[y,y]),(Yt(x)||zn(x))&&(x=[x,x]);var T=oE(t.get(["axisLine","symbolOffset"])||0,x),M=x[0],P=x[1];Ee([{rotate:e.rotation+Math.PI/2,offset:T[0],r:0},{rotate:e.rotation-Math.PI/2,offset:T[1],r:Math.sqrt((o[0]-h[0])*(o[0]-h[0])+(o[1]-h[1])*(o[1]-h[1]))}],function(I,D){if(y[D]!=="none"&&y[D]!=null){var R=od(y[D],-M/2,-P/2,M,P,m.stroke,!0),B=I.r+I.offset,H=d?h:o;R.attr({rotation:I.rotate,x:H[0]+B*Math.cos(e.rotation),y:H[1]-B*Math.sin(e.rotation),silent:!0,z2:11}),r.add(R)}})}}},axisTickLabel:function(e,t,r,n){var i=Bde(r,n,t,e),a=$de(r,n,t,e);if(zde(t,a,i),Fde(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var s=afe(Jt(a,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));ofe(s)}},axisName:function(e,t,r,n){var i=Nf(e.axisName,t.get("name"));if(i){var a=t.get("nameLocation"),s=e.nameDirection,o=t.getModel("nameTextStyle"),h=t.get("nameGap")||0,d=t.axis.getExtent(),m=d[0]>d[1]?-1:1,g=[a==="start"?d[0]-m*h:a==="end"?d[1]+m*h:(d[0]+d[1])/2,dL(a)?e.labelOffset+s*h:0],y,x=t.get("nameRotate");x!=null&&(x=x*iu/180);var T;dL(a)?y=qc.innerTextLayout(e.rotation,x??e.rotation,s):(y=Ode(e.rotation,a,x||0,d),T=e.axisNameAvailableWidth,T!=null&&(T=Math.abs(T/Math.sin(y.rotation)),!isFinite(T)&&(T=null)));var M=o.getFont(),P=t.get("nameTruncate",!0)||{},I=P.ellipsis,D=Nf(e.nameTruncateMaxWidth,P.maxWidth,T),R=new Vo({x:g[0],y:g[1],rotation:y.rotation,silent:qc.isLabelSilent(t),style:Jc(o,{text:i,font:M,overflow:"truncate",width:D,ellipsis:I,fill:o.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:o.get("align")||y.textAlign,verticalAlign:o.get("verticalAlign")||y.textVerticalAlign}),z2:1});if(t9({el:R,componentModel:t,itemName:i}),R.__fullText=i,R.anid="name",t.get("triggerEvent")){var B=qc.makeAxisEventDataBase(t);B.targetType="axisName",B.name=i,yn(R).eventData=B}n.add(R),R.updateTransform(),r.add(R),R.decomposeTransform()}}};function Ode(e,t,r,n){var i=YO(r-e),a,s,o=n[0]>n[1],h=t==="start"&&!o||t!=="start"&&o;return j_(i-iu/2)?(s=h?"bottom":"top",a="center"):j_(i-iu*1.5)?(s=h?"top":"bottom",a="center"):(s="middle",i<iu*1.5&&i>iu/2?a=h?"left":"right":a=h?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:s}}function zde(e,t,r){if(!NB(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var a=t[0],s=t[1],o=t[t.length-1],h=t[t.length-2],d=r[0],m=r[1],g=r[r.length-1],y=r[r.length-2];n===!1?(Ja(a),Ja(d)):fL(a,s)&&(n?(Ja(s),Ja(m)):(Ja(a),Ja(d))),i===!1?(Ja(o),Ja(g)):fL(h,o)&&(i?(Ja(h),Ja(y)):(Ja(o),Ja(g)))}}function Ja(e){e&&(e.ignore=!0)}function fL(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=pC([]);return mC(i,i,-e.rotation),r.applyTransform(bf([],i,e.getLocalTransform())),n.applyTransform(bf([],i,t.getLocalTransform())),r.intersect(n)}}function dL(e){return e==="middle"||e==="center"}function f8(e,t,r,n,i){for(var a=[],s=[],o=[],h=0;h<e.length;h++){var d=e[h].coord;s[0]=d,s[1]=0,o[0]=d,o[1]=r,t&&(ho(s,s,t),ho(o,o,t));var m=new pu({shape:{x1:s[0],y1:s[1],x2:o[0],y2:o[1]},style:n,z2:2,autoBatch:!0,silent:!0});qm(m.shape,m.style.lineWidth),m.anid=i+"_"+e[h].tickValue,a.push(m)}return a}function Bde(e,t,r,n){var i=r.axis,a=r.getModel("axisTick"),s=a.get("show");if(s==="auto"&&n.handleAutoShown&&(s=n.handleAutoShown("axisTick")),!(!s||i.scale.isBlank())){for(var o=a.getModel("lineStyle"),h=n.tickDirection*a.get("length"),d=i.getTicksCoords(),m=f8(d,t.transform,h,_n(o.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),g=0;g<m.length;g++)e.add(m[g]);return m}}function Fde(e,t,r,n){var i=r.axis,a=r.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var s=i.getMinorTicksCoords();if(s.length)for(var o=a.getModel("lineStyle"),h=n*a.get("length"),d=_n(o.getLineStyle(),_n(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),m=0;m<s.length;m++)for(var g=f8(s[m],t.transform,h,d,"minorticks_"+m),y=0;y<g.length;y++)e.add(g[y])}}function $de(e,t,r,n){var i=r.axis,a=Nf(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var s=r.getModel("axisLabel"),o=s.get("margin"),h=i.getViewLabels(),d=(Nf(n.labelRotate,s.get("rotate"))||0)*iu/180,m=qc.innerTextLayout(n.rotation,d,n.labelDirection),g=r.getCategories&&r.getCategories(!0),y=[],x=qc.isLabelSilent(r),T=r.get("triggerEvent");return Ee(h,function(M,P){var I=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(M.tickValue):M.tickValue,D=M.formattedLabel,R=M.rawLabel,B=s;if(g&&g[I]){var H=g[I];rr(H)&&H.textStyle&&(B=new sa(H.textStyle,s,r.ecModel))}var V=B.getTextColor()||r.get(["axisLine","lineStyle","color"]),q=i.dataToCoord(I),j=new Vo({x:q,y:n.labelOffset+n.labelDirection*o,rotation:m.rotation,silent:x,z2:10+(M.level||0),style:Jc(B,{text:D,align:B.getShallow("align",!0)||m.textAlign,verticalAlign:B.getShallow("verticalAlign",!0)||B.getShallow("baseline",!0)||m.textVerticalAlign,fill:cr(V)?V(i.type==="category"?R:i.type==="value"?I+"":I,P):V})});if(j.anid="label_"+I,T){var te=qc.makeAxisEventDataBase(r);te.targetType="axisLabel",te.value=R,te.tickIndex=P,i.type==="category"&&(te.dataIndex=I),yn(j).eventData=te}t.add(j),j.updateTransform(),y.push(j),e.add(j),j.decomposeTransform()}),y}}const d8=qc;function Nde(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Vde(r,e,t),r.seriesInvolved&&Hde(r,e),r}function Vde(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),a=i.get("link",!0)||[],s=[];Ee(r.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var h=iv(o.model),d=e.coordSysAxesInfo[h]={};e.coordSysMap[h]=o;var m=o.model,g=m.getModel("tooltip",n);if(Ee(o.getAxes(),gi(M,!1,null)),o.getTooltipAxes&&n&&g.get("show")){var y=g.get("trigger")==="axis",x=g.get(["axisPointer","type"])==="cross",T=o.getTooltipAxes(g.get(["axisPointer","axis"]));(y||x)&&Ee(T.baseAxes,gi(M,x?"cross":!0,y)),x&&Ee(T.otherAxes,gi(M,"cross",!1))}function M(P,I,D){var R=D.model.getModel("axisPointer",i),B=R.get("show");if(!(!B||B==="auto"&&!P&&!CS(R))){I==null&&(I=R.get("triggerTooltip")),R=P?Ude(D,g,i,t,P,I):R;var H=R.get("snap"),V=iv(D.model),q=I||H||D.type==="category",j=e.axesInfo[V]={key:V,axis:D,coordSys:o,axisPointerModel:R,triggerTooltip:I,involveSeries:q,snap:H,useHandle:CS(R),seriesModels:[],linkGroup:null};d[V]=j,e.seriesInvolved=e.seriesInvolved||q;var te=jde(a,D);if(te!=null){var ne=s[te]||(s[te]={axesInfo:{}});ne.axesInfo[V]=j,ne.mapper=a[te].mapper,j.linkGroup=ne}}}})}function Ude(e,t,r,n,i,a){var s=t.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],h={};Ee(o,function(y){h[y]=zr(s.get(y))}),h.snap=e.type!=="category"&&!!a,s.get("type")==="cross"&&(h.type="line");var d=h.label||(h.label={});if(d.show==null&&(d.show=!1),i==="cross"){var m=s.get(["label","show"]);if(d.show=m??!0,!a){var g=h.lineStyle=s.get("crossStyle");g&&_n(d,g.textStyle)}}return e.model.getModel("axisPointer",new sa(h,r,n))}function Hde(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),a=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||a===!1||r.get(["axisPointer","show"],!0)===!1||Ee(e.coordSysAxesInfo[iv(n.model)],function(s){var o=s.axis;n.getAxis(o.dim)===o&&(s.seriesModels.push(r),s.seriesDataCount==null&&(s.seriesDataCount=0),s.seriesDataCount+=r.getData().count())})})}function jde(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var a=e[i]||{};if(Cw(a[n+"AxisId"],r.id)||Cw(a[n+"AxisIndex"],r.componentIndex)||Cw(a[n+"AxisName"],r.name))return i}}function Cw(e,t){return e==="all"||Vt(e)&&an(e,t)>=0||e===t}function Gde(e){var t=TE(e);if(t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,a=r.get("status"),s=r.get("value");s!=null&&(s=n.parse(s));var o=CS(r);a==null&&(i.status=o?"show":"hide");var h=n.getExtent().slice();h[0]>h[1]&&h.reverse(),(s==null||s>h[1])&&(s=h[1]),s<h[0]&&(s=h[0]),i.value=s,o&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function TE(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[iv(e)]}function qde(e){var t=TE(e);return t&&t.axisPointerModel}function CS(e){return!!e.get(["handle","show"])}function iv(e){return e.type+"||"+e.id}var pL={},Wde=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,a){this.axisPointerClass&&Gde(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,a){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var a=t.getAxisPointerClass(this.axisPointerClass);if(a){var s=qde(r);s?(this._axisPointer||(this._axisPointer=new a)).render(r,s,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){pL[r]=n},t.getAxisPointerClass=function(r){return r&&pL[r]},t.type="axis",t}(ul);const p8=Wde;var ES=Hn();function Xde(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitArea"),s=a.getModel("areaStyle"),o=s.get("color"),h=n.coordinateSystem.getRect(),d=i.getTicksCoords({tickModel:a,clamp:!0});if(d.length){var m=o.length,g=ES(e).splitAreaColors,y=Mr(),x=0;if(g)for(var T=0;T<d.length;T++){var M=g.get(d[T].tickValue);if(M!=null){x=(M+(m-1)*T)%m;break}}var P=i.toGlobalCoord(d[0].coord),I=s.getAreaStyle();o=Vt(o)?o:[o];for(var T=1;T<d.length;T++){var D=i.toGlobalCoord(d[T].coord),R=void 0,B=void 0,H=void 0,V=void 0;i.isHorizontal()?(R=P,B=h.y,H=D-R,V=h.height,P=R+H):(R=h.x,B=P,H=h.width,V=D-B,P=B+V);var q=d[T-1].tickValue;q!=null&&y.set(q,x),t.add(new xa({anid:q!=null?"area_"+q:null,shape:{x:R,y:B,width:H,height:V},style:_n({fill:o[x]},I),autoBatch:!0,silent:!0})),x=(x+1)%m}ES(e).splitAreaColors=y}}}function Zde(e){ES(e).splitAreaColors=null}var Yde=["axisLine","axisTickLabel","axisName"],Kde=["splitArea","splitLine","minorSplitLine"],m8=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,a){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new Pi,this.group.add(this._axisGroup),!!r.get("show")){var o=r.getCoordSysModel(),h=TS(o,r),d=new d8(r,Tt({handleAutoShown:function(g){for(var y=o.coordinateSystem.getCartesians(),x=0;x<y.length;x++)if(vS(y[x].getOtherAxis(r.axis).scale))return!0;return!1}},h));Ee(Yde,d.add,d),this._axisGroup.add(d.getGroup()),Ee(Kde,function(g){r.get([g,"show"])&&Jde[g](this,this._axisGroup,r,o)},this);var m=a&&a.type==="changeAxisOrder"&&a.isInitSort;m||Jz(s,this._axisGroup,r),e.prototype.render.call(this,r,n,i,a)}},t.prototype.remove=function(){Zde(this)},t.type="cartesianAxis",t}(p8),Jde={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),s=a.getModel("lineStyle"),o=s.get("color");o=Vt(o)?o:[o];for(var h=n.coordinateSystem.getRect(),d=i.isHorizontal(),m=0,g=i.getTicksCoords({tickModel:a}),y=[],x=[],T=s.getLineStyle(),M=0;M<g.length;M++){var P=i.toGlobalCoord(g[M].coord);d?(y[0]=P,y[1]=h.y,x[0]=P,x[1]=h.y+h.height):(y[0]=h.x,y[1]=P,x[0]=h.x+h.width,x[1]=P);var I=m++%o.length,D=g[M].tickValue,R=new pu({anid:D!=null?"line_"+g[M].tickValue:null,autoBatch:!0,shape:{x1:y[0],y1:y[1],x2:x[0],y2:x[1]},style:_n({stroke:o[I]},T),silent:!0});qm(R.shape,T.lineWidth),t.add(R)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,a=r.getModel("minorSplitLine"),s=a.getModel("lineStyle"),o=n.coordinateSystem.getRect(),h=i.isHorizontal(),d=i.getMinorTicksCoords();if(d.length)for(var m=[],g=[],y=s.getLineStyle(),x=0;x<d.length;x++)for(var T=0;T<d[x].length;T++){var M=i.toGlobalCoord(d[x][T].coord);h?(m[0]=M,m[1]=o.y,g[0]=M,g[1]=o.y+o.height):(m[0]=o.x,m[1]=M,g[0]=o.x+o.width,g[1]=M);var P=new pu({anid:"minor_line_"+d[x][T].tickValue,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:g[0],y2:g[1]},style:y,silent:!0});qm(P.shape,y.lineWidth),t.add(P)}},splitArea:function(e,t,r,n){Xde(e,t,r,n)}},v8=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(m8),Qde=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=v8.type,r}return t.type="yAxis",t}(m8),epe=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new xa({shape:r.coordinateSystem.getRect(),style:_n({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ul),mL={offset:0};function g8(e){e.registerComponentView(epe),e.registerComponentModel(xde),e.registerCoordinateSystem("cartesian2d",Rde),iL(e,"x",wS,mL),iL(e,"y",wS,mL),e.registerComponentView(v8),e.registerComponentView(Qde),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function tpe(e){Gf(g8),e.registerSeriesModel(fde),e.registerChartView(yde),e.registerLayout(u8("scatter"))}var vL=pu.prototype,Ew=BC.prototype,y8=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){Lt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(y8);function Aw(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var rpe=function(e){Lt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new y8},t.prototype.buildPath=function(r,n){Aw(n)?vL.buildPath.call(this,r,n):Ew.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return Aw(this.shape)?vL.pointAt.call(this,r):Ew.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=Aw(n)?[n.x2-n.x1,n.y2-n.y1]:Ew.tangentAt.call(this,r);return fC(i,i)},t}(en);const npe=rpe;var Mw=["fromSymbol","toSymbol"];function gL(e){return"_"+e+"Type"}function yL(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),a=t.getItemVisual(r,e+"Rotate"),s=t.getItemVisual(r,e+"Offset"),o=t.getItemVisual(r,e+"KeepAspect"),h=rB(i),d=oE(s||0,h),m=od(n,-h[0]/2+d[0],-h[1]/2+d[1],h[0],h[1],null,o);return m.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,m.name=e,m}}function ipe(e){var t=new npe({name:"line",subPixelOptimize:!0});return AS(t.shape,e),t}function AS(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var ape=function(e){Lt(t,e);function t(r,n,i){var a=e.call(this)||this;return a._createLine(r,n,i),a}return t.prototype._createLine=function(r,n,i){var a=r.hostModel,s=r.getItemLayout(n),o=ipe(s);o.shape.percent=0,Sv(o,{shape:{percent:1}},a,n),this.add(o),Ee(Mw,function(h){var d=yL(h,r,n);this.add(d),this[gL(h)]=r.getItemVisual(n,h)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var a=r.hostModel,s=this.childOfName("line"),o=r.getItemLayout(n),h={shape:{}};AS(h.shape,o),ih(s,h,a,n),Ee(Mw,function(d){var m=r.getItemVisual(n,d),g=gL(d);if(this[g]!==m){this.remove(this.childOfName(d));var y=yL(d,r,n);this.add(y)}this[g]=m},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var a=r.hostModel,s=this.childOfName("line"),o=i&&i.emphasisLineStyle,h=i&&i.blurLineStyle,d=i&&i.selectLineStyle,m=i&&i.labelStatesModels,g=i&&i.emphasisDisabled,y=i&&i.focus,x=i&&i.blurScope;if(!i||r.hasItemOption){var T=r.getItemModel(n),M=T.getModel("emphasis");o=M.getModel("lineStyle").getLineStyle(),h=T.getModel(["blur","lineStyle"]).getLineStyle(),d=T.getModel(["select","lineStyle"]).getLineStyle(),g=M.get("disabled"),y=M.get("focus"),x=M.get("blurScope"),m=e1(T)}var P=r.getItemVisual(n,"style"),I=P.stroke;s.useStyle(P),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=o,s.ensureState("blur").style=h,s.ensureState("select").style=d,Ee(Mw,function(V){var q=this.childOfName(V);if(q){q.setColor(I),q.style.opacity=P.opacity;for(var j=0;j<_s.length;j++){var te=_s[j],ne=s.getState(te);if(ne){var ce=ne.style||{},le=q.ensureState(te),de=le.style||(le.style={});ce.stroke!=null&&(de[q.__isEmptyBrush?"stroke":"fill"]=ce.stroke),ce.opacity!=null&&(de.opacity=ce.opacity)}}q.markRedraw()}},this);var D=a.getRawValue(n);r9(this,m,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(V,q){return a.getFormattedLabel(V,q,r.dataType)}},inheritColor:I||"#000",defaultOpacity:P.opacity,defaultText:(D==null?r.getName(n):isFinite(D)?si(D):D)+""});var R=this.getTextContent();if(R){var B=m.normal;R.__align=R.style.align,R.__verticalAlign=R.style.verticalAlign,R.__position=B.get("position")||"middle";var H=B.get("distance");Vt(H)||(H=[H,H]),R.__labelDistance=H}this.setTextConfig({position:null,local:!0,inside:!1}),kC(this,y,x,g)},t.prototype.highlight=function(){jm(this)},t.prototype.downplay=function(){Gm(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");AS(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),a=r.getTextContent();if(!n&&!i&&(!a||a.ignore))return;for(var s=1,o=this.parent;o;)o.scaleX&&(s/=o.scaleX),o=o.parent;var h=r.childOfName("line");if(!this.__dirty&&!h.__dirty)return;var d=h.shape.percent,m=h.pointAt(0),g=h.pointAt(d),y=gO([],g,m);fC(y,y);function x(ne,ce){var le=ne.__specifiedRotation;if(le==null){var de=h.tangentAt(ce);ne.attr("rotation",(ce===1?-1:1)*Math.PI/2-Math.atan2(de[1],de[0]))}else ne.attr("rotation",le)}if(n&&(n.setPosition(m),x(n,0),n.scaleX=n.scaleY=s*d,n.markRedraw()),i&&(i.setPosition(g),x(i,1),i.scaleX=i.scaleY=s*d,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var T=void 0,M=void 0,P=a.__labelDistance,I=P[0]*s,D=P[1]*s,R=d/2,B=h.tangentAt(R),H=[B[1],-B[0]],V=h.pointAt(R);H[1]>0&&(H[0]=-H[0],H[1]=-H[1]);var q=B[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var j=-Math.atan2(B[1],B[0]);g[0]<m[0]&&(j=Math.PI+j),a.rotation=j}var te=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":te=-D,M="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":te=D,M="top";break;default:te=0,M="middle"}switch(a.__position){case"end":a.x=y[0]*I+g[0],a.y=y[1]*D+g[1],T=y[0]>.8?"left":y[0]<-.8?"right":"center",M=y[1]>.8?"top":y[1]<-.8?"bottom":"middle";break;case"start":a.x=-y[0]*I+m[0],a.y=-y[1]*D+m[1],T=y[0]>.8?"right":y[0]<-.8?"left":"center",M=y[1]>.8?"bottom":y[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=I*q+m[0],a.y=m[1]+te,T=B[0]<0?"right":"left",a.originX=-I*q,a.originY=-te;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=V[0],a.y=V[1]+te,T="center",a.originY=-te;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-I*q+g[0],a.y=g[1]+te,T=B[0]>=0?"right":"left",a.originX=I*q,a.originY=-te;break}a.scaleX=a.scaleY=s,a.setStyle({verticalAlign:a.__verticalAlign||M,align:a.__align||T})}},t}(Pi);const CE=ape;var ope=function(){function e(t){this.group=new Pi,this._LineCtor=t||CE}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,a=n._lineData;n._lineData=t,a||i.removeAll();var s=_L(t);t.diff(a).add(function(o){r._doAdd(t,o,s)}).update(function(o,h){r._doUpdate(a,t,h,o,s)}).remove(function(o){i.remove(a.getItemGraphicEl(o))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=_L(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(o){!o.isGroup&&!spe(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var a=r.getItemLayout(i);if(Iw(a)){var s=new this._LineCtor(r,i,this._seriesScope);s.traverse(n),this.group.add(s),r.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){J0(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(Iw(i)){var a=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,a),this.group.add(a)}},e.prototype._doUpdate=function(t,r,n,i,a){var s=t.getItemGraphicEl(n);if(!Iw(r.getItemLayout(i))){this.group.remove(s);return}s?s.updateData(r,i,a):s=new this._LineCtor(r,i,a),r.setItemGraphicEl(i,s),this.group.add(s)},e}();function spe(e){return e.animators&&e.animators.length>0}function _L(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:e1(t)}}function xL(e){return isNaN(e[0])||isNaN(e[1])}function Iw(e){return e&&!xL(e[0])&&!xL(e[1])}const lpe=ope;var upe=function(e){Lt(t,e);function t(r,n,i){var a=e.call(this)||this;return a.add(a.createLine(r,n,i)),a._updateEffectSymbol(r,n),a}return t.prototype.createLine=function(r,n,i){return new CE(r,n,i)},t.prototype._updateEffectSymbol=function(r,n){var i=r.getItemModel(n),a=i.getModel("effect"),s=a.get("symbolSize"),o=a.get("symbol");Vt(s)||(s=[s,s]);var h=r.getItemVisual(n,"style"),d=a.get("color")||h&&h.stroke,m=this.childAt(1);this._symbolType!==o&&(this.remove(m),m=od(o,-.5,-.5,1,1,d),m.z2=100,m.culling=!0,this.add(m)),m&&(m.setStyle("shadowColor",d),m.setStyle(a.getItemStyle(["color"])),m.scaleX=s[0],m.scaleY=s[1],m.setColor(d),this._symbolType=o,this._symbolScale=s,this._updateEffectAnimation(r,a,n))},t.prototype._updateEffectAnimation=function(r,n,i){var a=this.childAt(1);if(a){var s=r.getItemLayout(i),o=n.get("period")*1e3,h=n.get("loop"),d=n.get("roundTrip"),m=n.get("constantSpeed"),g=Nf(n.get("delay"),function(x){return x/r.count()*o/3});if(a.ignore=!0,this._updateAnimationPoints(a,s),m>0&&(o=this._getLineLength(a)/m*1e3),o!==this._period||h!==this._loop||d!==this._roundTrip){a.stopAnimation();var y=void 0;cr(g)?y=g(i):y=g,a.__t>0&&(y=-o*a.__t),this._animateSymbol(a,o,y,h,d)}this._period=o,this._loop=h,this._roundTrip=d}},t.prototype._animateSymbol=function(r,n,i,a,s){if(n>0){r.__t=0;var o=this,h=r.animate("",a).when(s?n*2:n,{__t:s?2:1}).delay(i).during(function(){o._updateSymbolPosition(r)});a||h.done(function(){o.remove(r)}),h.start()}},t.prototype._getLineLength=function(r){return uf(r.__p1,r.__cp1)+uf(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,n){r.__p1=n[0],r.__p2=n[1],r.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},t.prototype.updateData=function(r,n,i){this.childAt(0).updateData(r,n,i),this._updateEffectSymbol(r,n)},t.prototype._updateSymbolPosition=function(r){var n=r.__p1,i=r.__p2,a=r.__cp1,s=r.__t<1?r.__t:2-r.__t,o=[r.x,r.y],h=o.slice(),d=Si,m=O2;o[0]=d(n[0],a[0],i[0],s),o[1]=d(n[1],a[1],i[1],s);var g=r.__t<1?m(n[0],a[0],i[0],s):m(i[0],a[0],n[0],1-s),y=r.__t<1?m(n[1],a[1],i[1],s):m(i[1],a[1],n[1],1-s);r.rotation=-Math.atan2(y,g)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=uf(h,o)*1.05,s===1&&(o[0]=h[0]+(o[0]-h[0])/2,o[1]=h[1]+(o[1]-h[1])/2)):r.__lastT===1?r.scaleY=2*uf(n,o):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=o[0],r.y=o[1]},t.prototype.updateLayout=function(r,n){this.childAt(0).updateLayout(r,n);var i=r.getItemModel(n).getModel("effect");this._updateEffectAnimation(r,i,n)},t}(Pi);const _8=upe;var cpe=function(e){Lt(t,e);function t(r,n,i){var a=e.call(this)||this;return a._createPolyline(r,n,i),a}return t.prototype._createPolyline=function(r,n,i){var a=r.getItemLayout(n),s=new zC({shape:{points:a}});this.add(s),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var a=r.hostModel,s=this.childAt(0),o={shape:{points:r.getItemLayout(n)}};ih(s,o,a,n),this._updateCommonStl(r,n,i)},t.prototype._updateCommonStl=function(r,n,i){var a=this.childAt(0),s=r.getItemModel(n),o=i&&i.emphasisLineStyle,h=i&&i.focus,d=i&&i.blurScope,m=i&&i.emphasisDisabled;if(!i||r.hasItemOption){var g=s.getModel("emphasis");o=g.getModel("lineStyle").getLineStyle(),m=g.get("disabled"),h=g.get("focus"),d=g.get("blurScope")}a.useStyle(r.getItemVisual(n,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var y=a.ensureState("emphasis");y.style=o,kC(this,h,d,m)},t.prototype.updateLayout=function(r,n){var i=this.childAt(0);i.setShape("points",r.getItemLayout(n))},t}(Pi);const x8=cpe;var hpe=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,n,i){return new x8(r,n,i)},t.prototype._updateAnimationPoints=function(r,n){this._points=n;for(var i=[0],a=0,s=1;s<n.length;s++){var o=n[s-1],h=n[s];a+=uf(o,h),i.push(a)}if(a===0){this._length=0;return}for(var s=0;s<i.length;s++)i[s]/=a;this._offsets=i,this._length=a},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var n=r.__t<1?r.__t:2-r.__t,i=this._points,a=this._offsets,s=i.length;if(a){var o=this._lastFrame,h;if(n<this._lastFramePercent){var d=Math.min(o+1,s-1);for(h=d;h>=0&&!(a[h]<=n);h--);h=Math.min(h,s-2)}else{for(h=o;h<s&&!(a[h]>n);h++);h=Math.min(h-1,s-2)}var m=(n-a[h])/(a[h+1]-a[h]),g=i[h],y=i[h+1];r.x=g[0]*(1-m)+m*y[0],r.y=g[1]*(1-m)+m*y[1];var x=r.__t<1?y[0]-g[0]:g[0]-y[0],T=r.__t<1?y[1]-g[1]:g[1]-y[1];r.rotation=-Math.atan2(T,x)-Math.PI/2,this._lastFrame=h,this._lastFramePercent=n,r.ignore=!1}},t}(_8);const fpe=hpe;var dpe=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),ppe=function(e){Lt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new dpe},t.prototype.buildPath=function(r,n){var i=n.segs,a=n.curveness,s;if(n.polyline)for(s=this._off;s<i.length;){var o=i[s++];if(o>0){r.moveTo(i[s++],i[s++]);for(var h=1;h<o;h++)r.lineTo(i[s++],i[s++])}}else for(s=this._off;s<i.length;){var d=i[s++],m=i[s++],g=i[s++],y=i[s++];if(r.moveTo(d,m),a>0){var x=(d+g)/2-(m-y)*a,T=(m+y)/2-(g-d)*a;r.quadraticCurveTo(x,T,g,y)}else r.lineTo(g,y)}this.incremental&&(this._off=s,this.notClear=!0)},t.prototype.findDataIndex=function(r,n){var i=this.shape,a=i.segs,s=i.curveness,o=this.style.lineWidth;if(i.polyline)for(var h=0,d=0;d<a.length;){var m=a[d++];if(m>0)for(var g=a[d++],y=a[d++],x=1;x<m;x++){var T=a[d++],M=a[d++];if(eu(g,y,T,M,o,r,n))return h}h++}else for(var h=0,d=0;d<a.length;){var g=a[d++],y=a[d++],T=a[d++],M=a[d++];if(s>0){var P=(g+T)/2-(y-M)*s,I=(y+M)/2-(T-g)*s;if(uz(g,y,P,I,T,M,o,r,n))return h}else if(eu(g,y,T,M,o,r,n))return h;h++}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(r=i[0],n=i[1],a.contain(r,n)){var s=this.hoverDataIdx=this.findDataIndex(r,n);return s>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.segs,a=1/0,s=1/0,o=-1/0,h=-1/0,d=0;d<i.length;){var m=i[d++],g=i[d++];a=Math.min(m,a),o=Math.max(m,o),s=Math.min(g,s),h=Math.max(g,h)}r=this._rect=new sn(a,s,o,h)}return r},t}(en),mpe=function(){function e(){this.group=new Pi}return e.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,r){var n=this._newAdded[0],i=r.getLayout("linesPoints"),a=n&&n.shape.segs;if(a&&a.length<2e4){var s=a.length,o=new Float32Array(s+i.length);o.set(a),o.set(i,s),n.setShape({segs:o})}else{this._newAdded=[];var h=this._create();h.incremental=!0,h.setShape({segs:i}),this._setCommon(h,r),h.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new ppe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var a=r.getVisual("style");a&&a.stroke&&t.setStyle("stroke",a.stroke),t.setStyle("fill",null);var s=yn(t);s.seriesIndex=i.seriesIndex,t.on("mousemove",function(o){s.dataIndex=null;var h=t.hoverDataIdx;h>0&&(s.dataIndex=h+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const vpe=mpe;var gpe={seriesType:"lines",plan:nE(),reset:function(e){var t=e.coordinateSystem;if(t){var r=e.get("polyline"),n=e.pipelineContext.large;return{progress:function(i,a){var s=[];if(n){var o=void 0,h=i.end-i.start;if(r){for(var d=0,m=i.start;m<i.end;m++)d+=e.getLineCoordsCount(m);o=new Float32Array(h+d*2)}else o=new Float32Array(h*4);for(var g=0,y=[],m=i.start;m<i.end;m++){var x=e.getLineCoords(m,s);r&&(o[g++]=x);for(var T=0;T<x;T++)y=t.dataToPoint(s[T],!1,y),o[g++]=y[0],o[g++]=y[1]}a.setLayout("linesPoints",o)}else for(var m=i.start;m<i.end;m++){var M=a.getItemModel(m),x=e.getLineCoords(m,s),P=[];if(r)for(var I=0;I<x;I++)P.push(t.dataToPoint(s[I]));else{P[0]=t.dataToPoint(s[0]),P[1]=t.dataToPoint(s[1]);var D=M.get(["lineStyle","curveness"]);+D&&(P[2]=[(P[0][0]+P[1][0])/2-(P[0][1]-P[1][1])*D,(P[0][1]+P[1][1])/2-(P[1][0]-P[0][0])*D])}a.setItemLayout(m,P)}}}}}};const b8=gpe;var ype=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var a=r.getData(),s=this._updateLineDraw(a,r),o=r.get("zlevel"),h=r.get(["effect","trailLength"]),d=i.getZr(),m=d.painter.getType()==="svg";m||d.painter.getLayer(o).clear(!0),this._lastZlevel!=null&&!m&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&h>0&&(m||d.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(h/10+.9,1),0)})),s.updateData(a);var g=r.get("clip",!0)&&cde(r.coordinateSystem,!1,r);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var a=r.getData(),s=this._updateLineDraw(a,r);s.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._lineDraw.incrementalUpdate(r,n.getData()),this._finished=r.end===n.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,n,i){var a=r.getData(),s=r.pipelineContext;if(!this._finished||s.large||s.progressiveRender)return{update:!0};var o=b8.reset(r,n,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},t.prototype._updateLineDraw=function(r,n){var i=this._lineDraw,a=this._showEffect(n),s=!!n.get("polyline"),o=n.pipelineContext,h=o.large;return(!i||a!==this._hasEffet||s!==this._isPolyline||h!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=h?new vpe:new lpe(s?a?fpe:x8:a?_8:CE),this._hasEffet=a,this._isPolyline=s,this._isLargeDraw=h),this.group.add(i.group),i},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var n=r.getZr(),i=n.painter.getType()==="svg";!i&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},t.prototype.dispose=function(r,n){this.remove(r,n)},t.type="lines",t}(Gc);const _pe=ype;var xpe=typeof Uint32Array>"u"?Array:Uint32Array,bpe=typeof Float64Array>"u"?Array:Float64Array;function bL(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=Jt(t,function(r){var n=[r[0].coord,r[1].coord],i={coords:n};return r[0].name&&(i.fromName=r[0].name),r[1].name&&(i.toName=r[1].name),Kre([i,r[0],r[1]])}))}var wpe=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],bL(r);var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(bL(r),r.data){var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var n=this._processFlatCoordsArray(r.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=I2(this._flatCoords,n.flatCoords),this._flatCoordsOffset=I2(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),r.data=new Float32Array(n.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var n=this.getData().getItemModel(r),i=n.option instanceof Array?n.option:n.getShallow("coords");return i},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,n){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[r*2],a=this._flatCoordsOffset[r*2+1],s=0;s<a;s++)n[s]=n[s]||[],n[s][0]=this._flatCoords[i+s*2],n[s][1]=this._flatCoords[i+s*2+1];return a}else{for(var o=this._getCoordsFromItemModel(r),s=0;s<o.length;s++)n[s]=n[s]||[],n[s][0]=o[s][0],n[s][1]=o[s][1];return o.length}},t.prototype._processFlatCoordsArray=function(r){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),zn(r[0])){for(var i=r.length,a=new xpe(i),s=new bpe(i),o=0,h=0,d=0,m=0;m<i;){d++;var g=r[m++];a[h++]=o+n,a[h++]=g;for(var y=0;y<g;y++){var x=r[m++],T=r[m++];s[o++]=x,s[o++]=T}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,h),flatCoords:s,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,n){var i=new dE(["value"],this);return i.hasItemOption=!1,i.initData(r.data,[],function(a,s,o,h){if(a instanceof Array)return NaN;i.hasItemOption=!0;var d=a.value;if(d!=null)return d instanceof Array?d[h]:d}),i},t.prototype.formatTooltip=function(r,n,i){var a=this.getData(),s=a.getItemModel(r),o=s.get("name");if(o)return o;var h=s.get("fromName"),d=s.get("toName"),m=[];return h!=null&&m.push(h),d!=null&&m.push(d),mu("nameValue",{name:m.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),n=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&n>0?n+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(jf);const Spe=wpe;function zy(e){return e instanceof Array||(e=[e,e]),e}var Tpe={seriesType:"lines",reset:function(e){var t=zy(e.get("symbol")),r=zy(e.get("symbolSize")),n=e.getData();n.setVisual("fromSymbol",t&&t[0]),n.setVisual("toSymbol",t&&t[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]);function i(a,s){var o=a.getItemModel(s),h=zy(o.getShallow("symbol",!0)),d=zy(o.getShallow("symbolSize",!0));h[0]&&a.setItemVisual(s,"fromSymbol",h[0]),h[1]&&a.setItemVisual(s,"toSymbol",h[1]),d[0]&&a.setItemVisual(s,"fromSymbolSize",d[0]),d[1]&&a.setItemVisual(s,"toSymbolSize",d[1])}return{dataEach:n.hasItemOption?i:null}}};const Cpe=Tpe;function Epe(e){e.registerChartView(_pe),e.registerSeriesModel(Spe),e.registerLayout(b8),e.registerVisual(Cpe)}var Lc=Hn(),wL=zr,Pw=On,Ape=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var a=r.get("value"),s=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===a&&this._lastStatus===s)){this._lastValue=a,this._lastStatus=s;var o=this._group,h=this._handle;if(!s||s==="hide"){o&&o.hide(),h&&h.hide();return}o&&o.show(),h&&h.show();var d={};this.makeElOption(d,a,t,r,n);var m=d.graphicKey;m!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=m;var g=this._moveAnimation=this.determineAnimation(t,r);if(!o)o=this._group=new Pi,this.createPointerEl(o,d,t,r),this.createLabelEl(o,d,t,r),n.getZr().add(o);else{var y=gi(SL,r,g);this.updatePointerEl(o,d,y),this.updateLabelEl(o,d,y,r)}CL(o,r,!0),this._renderHandle(a)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,a=i.type==="category",s=r.get("snap");if(!s&&!a)return!1;if(n==="auto"||n==null){var o=this.animationThreshold;if(a&&i.getBandWidth()>o)return!0;if(s){var h=TE(t).seriesDataCount,d=i.getExtent();return Math.abs(d[0]-d[1])/h>o}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,a){},e.prototype.createPointerEl=function(t,r,n,i){var a=r.pointer;if(a){var s=Lc(t).pointerEl=new fse[a.type](wL(r.pointer));t.add(s)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var a=Lc(t).labelEl=new Vo(wL(r.label));t.add(a),TL(a,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=Lc(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var a=Lc(t).labelEl;a&&(a.setStyle(r.label.style),n(a,{x:r.label.x,y:r.label.y}),TL(a,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,a=r.getModel("handle"),s=r.get("status");if(!a.get("show")||!s||s==="hide"){i&&n.remove(i),this._handle=null;return}var o;this._handle||(o=!0,i=this._handle=Qz(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){_O(d.event)},onmousedown:Pw(this._onHandleDragMove,this,0,0),drift:Pw(this._onHandleDragMove,this),ondragend:Pw(this._onHandleDragEnd,this)}),n.add(i)),CL(i,r,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var h=a.get("size");Vt(h)||(h=[h,h]),i.scaleX=h[0]/2,i.scaleY=h[1]/2,W9(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,o)}},e.prototype._moveHandleToValue=function(t,r){SL(this._axisPointerModel,!r&&this._moveAnimation,this._handle,Dw(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(Dw(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(Dw(i)),Lc(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),lS(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function SL(e,t,r,n){w8(Lc(r).lastProp,n)||(Lc(r).lastProp=n,t?ih(r,n,e):(r.stopAnimation(),r.attr(n)))}function w8(e,t){if(rr(e)&&rr(t)){var r=!0;return Ee(t,function(n,i){r=r&&w8(e[i],n)}),!!r}else return e===t}function TL(e,t){e[t.get(["label","show"])?"show":"hide"]()}function Dw(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function CL(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(a){a.type!=="group"&&(n!=null&&(a.z=n),i!=null&&(a.zlevel=i),a.silent=r)})}const Mpe=Ape;function Ipe(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function Ppe(e,t,r,n,i){var a=r.get("value"),s=S8(a,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),o=r.getModel("label"),h=WC(o.get("padding")||0),d=o.getFont(),m=bC(s,d),g=i.position,y=m.width+h[1]+h[3],x=m.height+h[0]+h[2],T=i.align;T==="right"&&(g[0]-=y),T==="center"&&(g[0]-=y/2);var M=i.verticalAlign;M==="bottom"&&(g[1]-=x),M==="middle"&&(g[1]-=x/2),Dpe(g,y,x,n);var P=o.get("backgroundColor");(!P||P==="auto")&&(P=t.get(["axisLine","lineStyle","color"])),e.label={x:g[0],y:g[1],style:Jc(o,{text:s,font:d,fill:o.getTextColor(),padding:h,backgroundColor:P}),z2:10}}function Dpe(e,t,r,n){var i=n.getWidth(),a=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,a)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function S8(e,t,r,n,i){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:i.precision}),s=i.formatter;if(s){var o={value:mE(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};Ee(n,function(h){var d=r.getSeriesByIndex(h.seriesIndex),m=h.dataIndexInside,g=d&&d.getDataParams(m);g&&o.seriesData.push(g)}),Yt(s)?a=s.replace("{value}",a):cr(s)&&(a=s(o))}return a}function T8(e,t,r){var n=$m();return mC(n,n,r.rotation),R2(n,n,r.position),VC([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function Lpe(e,t,r,n,i,a){var s=d8.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),Ppe(t,n,i,a,{position:T8(n.axis,e,r),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function kpe(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function Rpe(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var Ope=function(e){Lt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,a,s){var o=i.axis,h=o.grid,d=a.get("type"),m=EL(h,o).getOtherAxis(o).getGlobalExtent(),g=o.toGlobalCoord(o.dataToCoord(n,!0));if(d&&d!=="none"){var y=Ipe(a),x=zpe[d](o,g,m);x.style=y,r.graphicKey=x.type,r.pointer=x}var T=TS(h.model,i);Lpe(n,r,T,i,a,s)},t.prototype.getHandleTransform=function(r,n,i){var a=TS(n.axis.grid.model,n,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var s=T8(n.axis,r,a);return{x:s[0],y:s[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,a){var s=i.axis,o=s.grid,h=s.getGlobalExtent(!0),d=EL(o,s).getOtherAxis(s).getGlobalExtent(),m=s.dim==="x"?0:1,g=[r.x,r.y];g[m]+=n[m],g[m]=Math.min(h[1],g[m]),g[m]=Math.max(h[0],g[m]);var y=(d[1]+d[0])/2,x=[y,y];x[m]=g[m];var T=[{verticalAlign:"middle"},{align:"center"}];return{x:g[0],y:g[1],rotation:r.rotation,cursorPoint:x,tooltipOption:T[m]}},t}(Mpe);function EL(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var zpe={line:function(e,t,r){var n=kpe([t,r[0]],[t,r[1]],AL(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:Rpe([t-n/2,r[0]],[n,i],AL(e))}}};function AL(e){return e.dim==="x"?0:1}const Bpe=Ope;var Fpe=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Tn);const $pe=Fpe;var el=Hn(),Npe=Ee;function C8(e,t,r){if(!Er.node){var n=t.getZr();el(n).records||(el(n).records={}),Vpe(n,t);var i=el(n).records[e]||(el(n).records[e]={});i.handler=r}}function Vpe(e,t){if(el(e).initialized)return;el(e).initialized=!0,r("click",gi(ML,"click")),r("mousemove",gi(ML,"mousemove")),r("globalout",Hpe);function r(n,i){e.on(n,function(a){var s=jpe(t);Npe(el(e).records,function(o){o&&i(o,a,s.dispatchAction)}),Upe(s.pendings,t)})}}function Upe(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function Hpe(e,t,r){e.handler("leave",null,r)}function ML(e,t,r,n){t.handler(e,r,n)}function jpe(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function MS(e,t){if(!Er.node){var r=t.getZr(),n=(el(r).records||{})[e];n&&(el(r).records[e]=null)}}var Gpe=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var a=n.getComponent("tooltip"),s=r.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";C8("axisPointer",i,function(o,h,d){s!=="none"&&(o==="leave"||s.indexOf(o)>=0)&&d({type:"updateAxisPointer",currTrigger:o,x:h&&h.offsetX,y:h&&h.offsetY})})},t.prototype.remove=function(r,n){MS("axisPointer",n)},t.prototype.dispose=function(r,n){MS("axisPointer",n)},t.type="axisPointer",t}(ul);const qpe=Gpe;function E8(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var a=i.getData(),s=xv(a,e);if(s==null||s<0||Vt(s))return{point:[]};var o=a.getItemGraphicEl(s),h=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(s)||[];else if(h&&h.dataToPoint)if(e.isStacked){var d=h.getBaseAxis(),m=h.getOtherAxis(d),g=m.dim,y=d.dim,x=g==="x"||g==="radius"?1:0,T=a.mapDimension(y),M=[];M[x]=a.get(T,s),M[1-x]=a.get(a.getCalculationInfo("stackResultDimension"),s),r=h.dataToPoint(M)||[]}else r=h.dataToPoint(a.getValues(Jt(h.dimensions,function(I){return a.mapDimension(I)}),s))||[];else if(o){var P=o.getBoundingRect().clone();P.applyTransform(o.transform),r=[P.x+P.width/2,P.y+P.height/2]}return{point:r,el:o}}var IL=Hn();function Wpe(e,t,r){var n=e.currTrigger,i=[e.x,e.y],a=e,s=e.dispatchAction||On(r.dispatchAction,r),o=t.getComponent("axisPointer").coordSysAxesInfo;if(o){d_(i)&&(i=E8({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var h=d_(i),d=a.axesInfo,m=o.axesInfo,g=n==="leave"||d_(i),y={},x={},T={list:[],map:{}},M={showPointer:gi(Zpe,x),showTooltip:gi(Ype,T)};Ee(o.coordSysMap,function(I,D){var R=h||I.containPoint(i);Ee(o.coordSysAxesInfo[D],function(B,H){var V=B.axis,q=eme(d,B);if(!g&&R&&(!d||q)){var j=q&&q.value;j==null&&!h&&(j=V.pointToData(i)),j!=null&&PL(B,j,M,!1,y)}})});var P={};return Ee(m,function(I,D){var R=I.linkGroup;R&&!x[D]&&Ee(R.axesInfo,function(B,H){var V=x[H];if(B!==I&&V){var q=V.value;R.mapper&&(q=I.axis.scale.parse(R.mapper(q,DL(B),DL(I)))),P[I.key]=q}})}),Ee(P,function(I,D){PL(m[D],I,M,!0,y)}),Kpe(x,m,y),Jpe(T,i,e,s),Qpe(m,s,r),y}}function PL(e,t,r,n,i){var a=e.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var s=Xpe(t,e),o=s.payloadBatch,h=s.snapToValue;o[0]&&i.seriesIndex==null&&Tt(i,o[0]),!n&&e.snap&&a.containData(h)&&h!=null&&(t=h),r.showPointer(e,t,o),r.showTooltip(e,s,h)}}function Xpe(e,t){var r=t.axis,n=r.dim,i=e,a=[],s=Number.MAX_VALUE,o=-1;return Ee(t.seriesModels,function(h,d){var m=h.getData().mapDimensionsAll(n),g,y;if(h.getAxisTooltipData){var x=h.getAxisTooltipData(m,e,r);y=x.dataIndices,g=x.nestestValue}else{if(y=h.getData().indicesOfNearest(m[0],e,r.type==="category"?.5:null),!y.length)return;g=h.getData().get(m[0],y[0])}if(!(g==null||!isFinite(g))){var T=e-g,M=Math.abs(T);M<=s&&((M<s||T>=0&&o<0)&&(s=M,o=T,i=g,a.length=0),Ee(y,function(P){a.push({seriesIndex:h.seriesIndex,dataIndexInside:P,dataIndex:h.getData().getRawIndex(P)})}))}}),{payloadBatch:a,snapToValue:i}}function Zpe(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function Ype(e,t,r,n){var i=r.payloadBatch,a=t.axis,s=a.model,o=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var h=t.coordSys.model,d=iv(h),m=e.map[d];m||(m=e.map[d]={coordSysId:h.id,coordSysIndex:h.componentIndex,coordSysType:h.type,coordSysMainType:h.mainType,dataByAxis:[]},e.list.push(m)),m.dataByAxis.push({axisDim:a.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:n,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Kpe(e,t,r){var n=r.axesInfo=[];Ee(t,function(i,a){var s=i.axisPointerModel.option,o=e[a];o?(!i.useHandle&&(s.status="show"),s.value=o.value,s.seriesDataIndices=(o.payloadBatch||[]).slice()):!i.useHandle&&(s.status="hide"),s.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:s.value})})}function Jpe(e,t,r,n){if(d_(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function Qpe(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",a=IL(n)[i]||{},s=IL(n)[i]={};Ee(e,function(d,m){var g=d.axisPointerModel.option;g.status==="show"&&Ee(g.seriesDataIndices,function(y){var x=y.seriesIndex+" | "+y.dataIndex;s[x]=y})});var o=[],h=[];Ee(a,function(d,m){!s[m]&&h.push(d)}),Ee(s,function(d,m){!a[m]&&o.push(d)}),h.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:h}),o.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function eme(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function DL(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function d_(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function A8(e){p8.registerAxisPointerClass("CartesianAxisPointer",Bpe),e.registerComponentModel($pe),e.registerComponentView(qpe),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!Vt(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=Nde(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Wpe)}function tme(e){Gf(g8),Gf(A8)}var rme=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Tn);const nme=rme;function M8(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function I8(e){if(Er.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var P8=I8(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ime=I8(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function D8(e,t){if(!e)return t;t=v9(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function ame(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var ome=D8(ime,"transition"),EE=D8(P8,"transform"),sme="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Er.transform3dSupported?"will-change:transform;":"");function lme(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function ume(e,t,r){if(!Yt(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=Zm(t);var a=lme(r),s=Math.max(Math.round(i)*1.5,6),o="",h=EE+":",d;an(["left","right"],a)>-1?(o+="top:50%",h+="translateY(-50%) rotate("+(d=a==="left"?-225:-45)+"deg)"):(o+="left:50%",h+="translateX(-50%) rotate("+(d=a==="top"?225:45)+"deg)");var m=d*Math.PI/180,g=s+i,y=g*Math.abs(Math.cos(m))+g*Math.abs(Math.sin(m)),x=Math.round(((y-Math.SQRT2*i)/2+Math.SQRT2*i-(y-g)/2)*100)/100;o+=";"+a+":-"+x+"px";var T=t+" solid "+i+"px;",M=["position:absolute;width:"+s+"px;height:"+s+"px;z-index:-1;",o+";"+h+";","border-bottom:"+T,"border-right:"+T,"background-color:"+n+";"];return'<div style="'+M.join("")+'"></div>'}function cme(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Er.transformSupported?","+EE+n:",left"+n+",top"+n),ome+":"+i}function LL(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Er.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var a=Er.transform3dSupported,s="translate"+(a?"3d":"")+"("+n+","+i+(a?",0":"")+")";return r?"top:0;left:0;"+EE+":"+s+";":[["top",0],["left",0],[P8,s]]}function hme(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),a=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,o=e.get("textShadowOffsetY")||0;return i&&a&&t.push("text-shadow:"+s+"px "+o+"px "+a+"px "+i),Ee(["decoration","align"],function(h){var d=e.get(h);d&&t.push("text-"+h+":"+d)}),t.join(";")}function fme(e,t,r){var n=[],i=e.get("transitionDuration"),a=e.get("backgroundColor"),s=e.get("shadowBlur"),o=e.get("shadowColor"),h=e.get("shadowOffsetX"),d=e.get("shadowOffsetY"),m=e.getModel("textStyle"),g=G9(e,"html"),y=h+"px "+d+"px "+s+"px "+o;return n.push("box-shadow:"+y),t&&i&&n.push(cme(i,r)),a&&n.push("background-color:"+a),Ee(["width","color","radius"],function(x){var T="border-"+x,M=v9(T),P=e.get(M);P!=null&&n.push(T+":"+P+(x==="color"?"":"px"))}),n.push(hme(m)),g!=null&&n.push("padding:"+WC(g).join("px ")+"px"),n.join(";")+";"}function kL(e,t,r,n,i){var a=t&&t.painter;if(r){var s=a&&a.getViewportRoot();s&&hne(e,s,document.body,n,i)}else{e[0]=n,e[1]=i;var o=a&&a.getViewportRootOffset();o&&(e[0]+=o.offsetLeft,e[1]+=o.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var dme=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Er.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=r.getZr(),s=this._appendToBody=n&&n.appendToBody;kL(this._styleCoord,a,s,r.getWidth()/2,r.getHeight()/2),s?document.body.appendChild(i):t.appendChild(i),this._container=t;var o=this;i.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},i.onmousemove=function(h){if(h=h||window.event,!o._enterable){var d=a.handler,m=a.painter.getViewportRoot();to(m,h,!0),d.dispatch("mousemove",h)}},i.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=ame(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,a=this._styleCoord;n.innerHTML?i.cssText=sme+fme(t,!this._firstShow,this._longHide)+LL(a[0],a[1],!0)+("border-color:"+Zm(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,a){var s=this.el;if(t==null){s.innerHTML="";return}var o="";if(Yt(a)&&n.get("trigger")==="item"&&!M8(n)&&(o=ume(n,i,a)),Yt(t))s.innerHTML=t+o;else if(t){s.innerHTML="",Vt(t)||(t=[t]);for(var h=0;h<t.length;h++)B_(t[h])&&t[h].parentNode!==s&&s.appendChild(t[h]);if(o&&s.childNodes.length){var d=document.createElement("div");d.innerHTML=o,s.appendChild(d)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(kL(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,a=LL(n[0],n[1]);Ee(a,function(s){i[s[0]]=s[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Er.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(On(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const pme=dme;var mme=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),OL(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,a){var s=this;rr(t)&&ga(""),this.el&&this._zr.remove(this.el);var o=n.getModel("textStyle");this.el=new Vo({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:o.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:G9(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),Ee(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){s.el.style[d]=n.get(d)}),Ee(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){s.el.style[d]=o.get(d)||0}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=RL(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;OL(i,this._zr,t,r),t=i[0],r=i[1];var a=n.style,s=Yl(a.borderWidth||0),o=RL(a);n.x=t+s+o.left,n.y=r+s+o.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(On(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function Yl(e){return Math.max(0,e)}function RL(e){var t=Yl(e.shadowBlur||0),r=Yl(e.shadowOffsetX||0),n=Yl(e.shadowOffsetY||0);return{left:Yl(t-r),right:Yl(t+r),top:Yl(t-n),bottom:Yl(t+n)}}function OL(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const vme=mme;var gme=new xa({shape:{x:-1,y:-1,width:2,height:2}}),yme=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Er.node||!n.getDom())){var i=r.getComponent("tooltip"),a=this._renderMode=Zie(i.get("renderMode"));this._tooltipContent=a==="richText"?new vme(n):new pme(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Er.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var a=this._tooltipContent;a.update(r),a.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?W9(this,"_updatePosition",50,"fixRate"):lS(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");C8("itemTooltip",this._api,On(function(i,a,s){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(a,s):i==="leave"&&this._hide(s))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,a=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&s.manuallyShowTip(r,n,i,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,a){if(!(a.from===this.uid||Er.node||!i.getDom())){var s=zL(a,i);this._ticket="";var o=a.dataByCoordSys,h=wme(a,n,i);if(h){var d=h.el.getBoundingRect().clone();d.applyTransform(h.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:h.el,position:a.position,positionDefault:"bottom"},s)}else if(a.tooltip&&a.x!=null&&a.y!=null){var m=gme;m.x=a.x,m.y=a.y,m.update(),yn(m).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:m},s)}else if(o)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:o,tooltipOption:a.tooltipOption},s);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,a))return;var g=E8(a,n),y=g.point[0],x=g.point[1];y!=null&&x!=null&&this._tryShow({offsetX:y,offsetY:x,target:g.el,position:a.position,positionDefault:"bottom"},s)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},s))}},t.prototype.manuallyHideTip=function(r,n,i,a){var s=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&s.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(zL(a,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,a){var s=a.seriesIndex,o=a.dataIndex,h=n.getComponent("axisPointer").coordSysAxesInfo;if(!(s==null||o==null||h==null)){var d=n.getSeriesByIndex(s);if(d){var m=d.getData(),g=Lp([m.getItemModel(o),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(g.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:o,position:a.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,a=this._tooltipModel;if(a){this._lastX=r.offsetX,this._lastY=r.offsetY;var s=r.dataByCoordSys;if(s&&s.length)this._showAxisTooltip(s,r);else if(i){this._lastDataByCoordSys=null;var o,h;Vp(i,function(d){if(yn(d).dataIndex!=null)return o=d,!0;if(yn(d).tooltipConfig!=null)return h=d,!0},!0),o?this._showSeriesItemTooltip(r,o,n):h?this._showComponentItemTooltip(r,h,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=On(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,a=this._tooltipModel,s=[n.offsetX,n.offsetY],o=Lp([n.tooltipOption],a),h=this._renderMode,d=[],m=mu("section",{blocks:[],noHeader:!0}),g=[],y=new iw;Ee(r,function(D){Ee(D.dataByAxis,function(R){var B=i.getComponent(R.axisDim+"Axis",R.axisIndex),H=R.value;if(!(!B||H==null)){var V=S8(H,B.axis,i,R.seriesDataIndices,R.valueLabelOpt),q=mu("section",{header:V,noHeader:!fs(V),sortBlocks:!0,blocks:[]});m.blocks.push(q),Ee(R.seriesDataIndices,function(j){var te=i.getSeriesByIndex(j.seriesIndex),ne=j.dataIndexInside,ce=te.getDataParams(ne);if(!(ce.dataIndex<0)){ce.axisDim=R.axisDim,ce.axisIndex=R.axisIndex,ce.axisType=R.axisType,ce.axisId=R.axisId,ce.axisValue=mE(B.axis,{value:H}),ce.axisValueLabel=V,ce.marker=y.makeTooltipMarker("item",Zm(ce.color),h);var le=j5(te.formatTooltip(ne,!0,null)),de=le.frag;if(de){var ae=Lp([te],a).get("valueFormatter");q.blocks.push(ae?Tt({valueFormatter:ae},de):de)}le.text&&g.push(le.text),d.push(ce)}})}})}),m.blocks.reverse(),g.reverse();var x=n.position,T=o.get("order"),M=Z5(m,y,h,T,i.get("useUTC"),o.get("textStyle"));M&&g.unshift(M);var P=h==="richText"?`

`:"<br/>",I=g.join(P);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(r,d)?this._updatePosition(o,x,s[0],s[1],this._tooltipContent,d):this._showTooltipContent(o,I,d,Math.random()+"",s[0],s[1],x,null,y)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var a=this._ecModel,s=yn(n),o=s.seriesIndex,h=a.getSeriesByIndex(o),d=s.dataModel||h,m=s.dataIndex,g=s.dataType,y=d.getData(g),x=this._renderMode,T=r.positionDefault,M=Lp([y.getItemModel(m),d,h&&(h.coordinateSystem||{}).model],this._tooltipModel,T?{position:T}:null),P=M.get("trigger");if(!(P!=null&&P!=="item")){var I=d.getDataParams(m,g),D=new iw;I.marker=D.makeTooltipMarker("item",Zm(I.color),x);var R=j5(d.formatTooltip(m,!1,g)),B=M.get("order"),H=M.get("valueFormatter"),V=R.frag,q=V?Z5(H?Tt({valueFormatter:H},V):V,D,x,B,a.get("useUTC"),M.get("textStyle")):R.text,j="item_"+d.name+"_"+m;this._showOrMove(M,function(){this._showTooltipContent(M,q,I,j,r.offsetX,r.offsetY,r.position,r.target,D)}),i({type:"showTip",dataIndexInside:m,dataIndex:y.getRawIndex(m),seriesIndex:o,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var a=yn(n),s=a.tooltipConfig,o=s.option||{};if(Yt(o)){var h=o;o={content:h,formatter:h}}var d=[o],m=this._ecModel.getComponent(a.componentMainType,a.componentIndex);m&&d.push(m),d.push({formatter:o.content});var g=r.positionDefault,y=Lp(d,this._tooltipModel,g?{position:g}:null),x=y.get("content"),T=Math.random()+"",M=new iw;this._showOrMove(y,function(){var P=zr(y.get("formatterParams")||{});this._showTooltipContent(y,x,P,T,r.offsetX,r.offsetY,r.position,n,M)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,a,s,o,h,d,m){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var g=this._tooltipContent;g.setEnterable(r.get("enterable"));var y=r.get("formatter");h=h||r.get("position");var x=n,T=this._getNearestPoint([s,o],i,r.get("trigger"),r.get("borderColor")),M=T.color;if(y)if(Yt(y)){var P=r.ecModel.get("useUTC"),I=Vt(i)?i[0]:i,D=I&&I.axisType&&I.axisType.indexOf("time")>=0;x=y,D&&(x=r1(I.axisValue,x,P)),x=g9(x,i,!0)}else if(cr(y)){var R=On(function(B,H){B===this._ticket&&(g.setContent(H,m,r,M,h),this._updatePosition(r,h,s,o,g,i,d))},this);this._ticket=a,x=y(i,a,R)}else x=y;g.setContent(x,m,r,M,h),g.show(r,M),this._updatePosition(r,h,s,o,g,i,d)}},t.prototype._getNearestPoint=function(r,n,i,a){if(i==="axis"||Vt(n))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Vt(n))return{color:a||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,a,s,o,h){var d=this._api.getWidth(),m=this._api.getHeight();n=n||r.get("position");var g=s.getSize(),y=r.get("align"),x=r.get("verticalAlign"),T=h&&h.getBoundingRect().clone();if(h&&T.applyTransform(h.transform),cr(n)&&(n=n([i,a],o,s.el,T,{viewSize:[d,m],contentSize:g.slice()})),Vt(n))i=Ti(n[0],d),a=Ti(n[1],m);else if(rr(n)){var M=n;M.width=g[0],M.height=g[1];var P=XC(M,{width:d,height:m});i=P.x,a=P.y,y=null,x=null}else if(Yt(n)&&h){var I=bme(n,T,g,r.get("borderWidth"));i=I[0],a=I[1]}else{var I=_me(i,a,s,d,m,y?null:20,x?null:20);i=I[0],a=I[1]}if(y&&(i-=BL(y)?g[0]/2:y==="right"?g[0]:0),x&&(a-=BL(x)?g[1]/2:x==="bottom"?g[1]:0),M8(r)){var I=xme(i,a,s,d,m);i=I[0],a=I[1]}s.moveTo(i,a)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,a=this._cbParamsList,s=!!i&&i.length===r.length;return s&&Ee(i,function(o,h){var d=o.dataByAxis||[],m=r[h]||{},g=m.dataByAxis||[];s=s&&d.length===g.length,s&&Ee(d,function(y,x){var T=g[x]||{},M=y.seriesDataIndices||[],P=T.seriesDataIndices||[];s=s&&y.value===T.value&&y.axisType===T.axisType&&y.axisId===T.axisId&&M.length===P.length,s&&Ee(M,function(I,D){var R=P[D];s=s&&I.seriesIndex===R.seriesIndex&&I.dataIndex===R.dataIndex}),a&&Ee(y.seriesDataIndices,function(I){var D=I.seriesIndex,R=n[D],B=a[D];R&&B&&B.data!==R.data&&(s=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!s},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Er.node||!n.getDom()||(lS(this,"_updatePosition"),this._tooltipContent.dispose(),MS("itemTooltip",n))},t.type="tooltip",t}(ul);function Lp(e,t,r){var n=t.ecModel,i;r?(i=new sa(r,n,n),i=new sa(t.option,i,n)):i=t;for(var a=e.length-1;a>=0;a--){var s=e[a];s&&(s instanceof sa&&(s=s.get("tooltip",!0)),Yt(s)&&(s={formatter:s}),s&&(i=new sa(s,i,n)))}return i}function zL(e,t){return e.dispatchAction||On(t.dispatchAction,t)}function _me(e,t,r,n,i,a,s){var o=r.getSize(),h=o[0],d=o[1];return a!=null&&(e+h+a+2>n?e-=h+a:e+=a),s!=null&&(t+d+s>i?t-=d+s:t+=s),[e,t]}function xme(e,t,r,n,i){var a=r.getSize(),s=a[0],o=a[1];return e=Math.min(e+s,n)-s,t=Math.min(t+o,i)-o,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function bme(e,t,r,n){var i=r[0],a=r[1],s=Math.ceil(Math.SQRT2*n)+8,o=0,h=0,d=t.width,m=t.height;switch(e){case"inside":o=t.x+d/2-i/2,h=t.y+m/2-a/2;break;case"top":o=t.x+d/2-i/2,h=t.y-a-s;break;case"bottom":o=t.x+d/2-i/2,h=t.y+m+s;break;case"left":o=t.x-i-s,h=t.y+m/2-a/2;break;case"right":o=t.x+d+s,h=t.y+m/2-a/2}return[o,h]}function BL(e){return e==="center"||e==="middle"}function wme(e,t,r){var n=TC(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var a=bv(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),s=a.models[0];if(s){var o=r.getViewOfComponentModel(s),h;if(o.group.traverse(function(d){var m=yn(d).tooltipConfig;if(m&&m.name===e.name)return h=d,!0}),h)return{componentMainType:i,componentIndex:s.componentIndex,el:h}}}}const Sme=yme;function Tme(e){Gf(A8),e.registerComponentModel(nme),e.registerComponentView(Sme),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},la),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},la)}var Cme=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Tn),Eme=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var a=this.group,s=r.getModel("textStyle"),o=r.getModel("subtextStyle"),h=r.get("textAlign"),d=Ar(r.get("textBaseline"),r.get("textVerticalAlign")),m=new Vo({style:Jc(s,{text:r.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),g=m.getBoundingRect(),y=r.get("subtext"),x=new Vo({style:Jc(o,{text:y,fill:o.getTextColor(),y:g.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),T=r.get("link"),M=r.get("sublink"),P=r.get("triggerEvent",!0);m.silent=!T&&!P,x.silent=!M&&!P,T&&m.on("click",function(){E5(T,"_"+r.get("target"))}),M&&x.on("click",function(){E5(M,"_"+r.get("subtarget"))}),yn(m).eventData=yn(x).eventData=P?{componentType:"title",componentIndex:r.componentIndex}:null,a.add(m),y&&a.add(x);var I=a.getBoundingRect(),D=r.getBoxLayoutParams();D.width=I.width,D.height=I.height;var R=XC(D,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));h||(h=r.get("left")||r.get("right"),h==="middle"&&(h="center"),h==="right"?R.x+=R.width:h==="center"&&(R.x+=R.width/2)),d||(d=r.get("top")||r.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?R.y+=R.height:d==="middle"&&(R.y+=R.height/2),d=d||"top"),a.x=R.x,a.y=R.y,a.markRedraw();var B={align:h,verticalAlign:d};m.setStyle(B),x.setStyle(B),I=a.getBoundingRect();var H=R.margin,V=r.getItemStyle(["color","opacity"]);V.fill=r.get("backgroundColor");var q=new xa({shape:{x:I.x-H[3],y:I.y-H[0],width:I.width+H[1]+H[3],height:I.height+H[0]+H[2],r:r.get("borderRadius")},style:V,subPixelOptimize:!0,silent:!0});a.add(q)}},t.type="title",t}(ul);function Ame(e){e.registerComponentModel(Cme),e.registerComponentView(Eme)}function Mme(e,t){if(!e)return!1;for(var r=Vt(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function By(e){q2(e,"label",["show"])}var Fy=Hn(),L8=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Er.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,a){var s=this.mainType;i||n.eachSeries(function(o){var h=o.get(this.mainType,!0),d=Fy(o)[s];if(!h||!h.data){Fy(o)[s]=null;return}d?d._mergeOption(h,n,!0):(a&&By(h),Ee(h.data,function(m){m instanceof Array?(By(m[0]),By(m[1])):By(m)}),d=this.createMarkerModelFromSeries(h,this,n),Tt(d,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),d.__hostSeries=o),Fy(o)[s]=d},this)},t.prototype.formatTooltip=function(r,n,i){var a=this.getData(),s=this.getRawValue(r),o=a.getName(r);return mu("section",{header:this.name,blocks:[mu("nameValue",{name:o,value:s,noName:!o,noValue:s==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return Fy(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Tn);Ho(L8,z9.prototype);const l0=L8;var Ime=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(l0);const Pme=Ime;function Dme(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function Lme(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function $y(e,t,r,n,i,a){var s=[],o=a0(t,n),h=o?t.getCalculationInfo("stackResultDimension"):n,d=k8(t,h,e),m=t.indicesOfNearest(h,d)[0];s[i]=t.get(r,m),s[a]=t.get(h,m);var g=t.get(n,m),y=Uf(t.get(n,m));return y=Math.min(y,20),y>=0&&(s[a]=+s[a].toFixed(y)),[s,g]}var Lw={min:gi($y,"min"),max:gi($y,"max"),average:gi($y,"average"),median:gi($y,"median")};function kme(e,t){if(t){var r=e.getData(),n=e.coordinateSystem,i=n.dimensions;if(!Lme(t)&&!Vt(t.coord)&&n){var a=Rme(t,r,n,e);if(t=zr(t),t.type&&Lw[t.type]&&a.baseAxis&&a.valueAxis){var s=an(i,a.baseAxis.dim),o=an(i,a.valueAxis.dim),h=Lw[t.type](r,a.baseDataDim,a.valueDataDim,s,o);t.coord=h[0],t.value=h[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null)t.coord=[];else for(var d=t.coord,m=0;m<2;m++)Lw[d[m]]&&(d[m]=k8(r,r.mapDimension(i[m]),d[m]));return t}}function Rme(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(Ome(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function Ome(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function zme(e,t){return e&&e.containData&&t.coord&&!Dme(t)?e.containData(t.coord):!0}function Bme(e,t){return e?function(r,n,i,a){var s=a<2?r.coord&&r.coord[a]:r.value;return Cf(s,t[a])}:function(r,n,i,a){return Cf(r.value,t[a])}}function k8(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(a,s){isNaN(a)||(n+=a,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var kw=Hn(),Fme=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=Mr()},t.prototype.render=function(r,n,i){var a=this,s=this.markerGroupMap;s.each(function(o){kw(o).keep=!1}),n.eachSeries(function(o){var h=l0.getMarkerModelFromSeries(o,a.type);h&&a.renderSeries(o,h,n,i)}),s.each(function(o){!kw(o).keep&&a.group.remove(o.group)})},t.prototype.markKeep=function(r){kw(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;Ee(r,function(a){var s=l0.getMarkerModelFromSeries(a,i.type);if(s){var o=s.getData();o.eachItemGraphicEl(function(h){h&&(n?Tz(h):DC(h))})}})},t.type="marker",t}(ul);const $me=Fme;function FL(e,t,r){var n=t.coordinateSystem;e.each(function(i){var a=e.getItemModel(i),s,o=Ti(a.get("x"),r.getWidth()),h=Ti(a.get("y"),r.getHeight());if(!isNaN(o)&&!isNaN(h))s=[o,h];else if(t.getMarkerPosition)s=t.getMarkerPosition(e.getValues(e.dimensions,i));else if(n){var d=e.get(n.dimensions[0],i),m=e.get(n.dimensions[1],i);s=n.dataToPoint([d,m])}isNaN(o)||(s[0]=o),isNaN(h)||(s[1]=h),e.setItemLayout(i,s)})}var Nme=function(e){Lt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(a){var s=l0.getMarkerModelFromSeries(a,"markPoint");s&&(FL(s.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},t.prototype.renderSeries=function(r,n,i,a){var s=r.coordinateSystem,o=r.id,h=r.getData(),d=this.markerGroupMap,m=d.get(o)||d.set(o,new l8),g=Vme(s,r,n);n.setData(g),FL(n.getData(),r,a),g.each(function(y){var x=g.getItemModel(y),T=x.getShallow("symbol"),M=x.getShallow("symbolSize"),P=x.getShallow("symbolRotate"),I=x.getShallow("symbolOffset"),D=x.getShallow("symbolKeepAspect");if(cr(T)||cr(M)||cr(P)||cr(I)){var R=n.getRawValue(y),B=n.getDataParams(y);cr(T)&&(T=T(R,B)),cr(M)&&(M=M(R,B)),cr(P)&&(P=P(R,B)),cr(I)&&(I=I(R,B))}var H=x.getModel("itemStyle").getItemStyle(),V=tB(h,"color");H.fill||(H.fill=V),g.setItemVisual(y,{symbol:T,symbolSize:M,symbolRotate:P,symbolOffset:I,symbolKeepAspect:D,style:H})}),m.updateData(g),this.group.add(m.group),g.eachItemGraphicEl(function(y){y.traverse(function(x){yn(x).dataModel=n})}),this.markKeep(m),m.group.silent=n.get("silent")||r.get("silent")},t.type="markPoint",t}($me);function Vme(e,t,r){var n;e?n=Jt(e&&e.dimensions,function(o){var h=t.getData().getDimensionInfo(t.getData().mapDimension(o))||{};return Tt(Tt({},h),{name:o,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new dE(n,r),a=Jt(r.get("data"),gi(kme,t));e&&(a=Hi(a,gi(zme,e)));var s=Bme(!!e,n);return i.initData(a,null,s),i}const Ume=Nme;function Hme(e){e.registerComponentModel(Pme),e.registerComponentView(Ume),e.registerPreprocessor(function(t){Mme(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}Gf([rde,Ame,Tme,Hme,tme,tpe,Epe]);const jme={name:"BusChartVue",components:{"v-chart":wfe},data:()=>({lines:[],stops1:[],stops2:[],historyBusData:[],echartsOption:{tooltip:{show:!1},title:[{subtext:`By bilibili@
GitHub@ni1o1`,sublink:"https://github.com/ni1o1/nikebus",textAlign:"right",bottom:"2%",left:"98%"}],grid:[{top:"10%",bottom:"0%",left:"26px",right:"14px"}],yAxis:[{inverse:!0,min:-100,max:4500,type:"value",boundaryGap:!1,show:!1,splitLine:{show:!1}}],xAxis:[{position:"top",verticalAlign:"top",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0},type:"category",data:[`1
`,`1
`,`2
`,`2
`],splitLine:{show:!1}}],series:[{type:"scatter",label:{fontSize:10,show:!0,color:"#999",position:"right",formatter:"{b}"},data:[]},{type:"lines",coordinateSystem:"cartesian2d",data:[]},{label:{fontSize:11,show:!0,color:"#000",textBorderColor:"#fff",textBorderWidth:2,fontWeight:"bold",position:"right",distance:-5,formatter:"{b}"},type:"scatter",name:"bus",data:[]}],stateAnimation:{duration:500}},timer:{},second:0}),methods:{setEchartsOption(e){this.echartsOption=e},load_data(){Fa.all([Fa.get("/bus_echart/line1.json"),Fa.get("/bus_echart/line2.json"),Fa.get("/bus_echart/stop1.json"),Fa.get("/bus_echart/stop2.json")]).then(Fa.spread((e,t,r,n)=>{const i=e.data,a=t.data,s=r.data,o=n.data;this.lines=[i,a],this.stops1=s,this.stops2=o;const h=s.features.map(x=>({value:[1,Hs(i.features[0],x).properties.location*1e3],name:x.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),d=s.features.map(x=>({value:[0,js(i.features[0])*1e3-Hs(i.features[0],x).properties.location*1e3],name:x.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),m=o.features.map(x=>({value:[3,Hs(a.features[0],x).properties.location*1e3],name:x.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),g=o.features.map(x=>({value:[2,js(a.features[0])*1e3-Hs(a.features[0],x).properties.location*1e3],name:x.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),y={series:[{data:[...h,...d,...m,...g]},{data:[{coords:[[0,0],[0,js(i.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[1,0],[1,js(i.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[2,0],[2,js(a.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}},{coords:[[3,0],[3,js(a.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}}]}]};this.setEchartsOption(y)}))},updateBusPos(){this.lines.length>0&&Fa.get("https://bus.sustcra.com/api/v2/monitor_osm/").then(e=>{const r=e.data.filter(i=>i.is_operating==1).map(i=>{let a=0;i.route_code=="XYBS2"?a=1:i.route_code=="XYBS1"&&(a=0);const s=Ui([i.lng,i.lat]);let o=this.lines[a].features[0],h=Hs(o,s),d=h.properties.location,m=d*1e3;return i.route_dir>0&&(m=js(o)*1e3-d*1e3),h.properties.dist*1e3>100|m<100?{value:[-1,0],name:i.id,itemStyle:{color:"#222",show:!1},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:i.speed}:{value:[1-i.route_dir+a*2,m],name:i.id,itemStyle:{color:"#222"},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:i.speed}});this.historyBusData=r.filter(i=>typeof i<"u");const n={series:[{},{},{data:r}]};this.setEchartsOption(n)})},refresh(){this.second+=1,this.second%10===0?this.updateBusPos():navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,r=e.coords.longitude;const n=Ui([r,t]),i=ZP(n,this.stops1),a=Hs(this.lines[0].features[0],i).properties.location*1e3,s=js(this.lines[0].features[0])*1e3-Hs(this.lines[0].features[0],i).properties.location*1e3,o=ZP(n,this.stops2),h=Hs(this.lines[1].features[0],o).properties.location*1e3,d=js(this.lines[1].features[0])*1e3-Hs(this.lines[1].features[0],o).properties.location*1e3,m=this.historyBusData.filter(B=>B.value[0]===0&&B.value[1]<=s).map(B=>parseInt((s-B.value[1])/250)),g=this.historyBusData.filter(B=>B.value[0]===1&&B.value[1]<=a).map(B=>parseInt((a-B.value[1])/250)),y=this.historyBusData.filter(B=>B.value[0]===2&&B.value[1]<=d).map(B=>parseInt((d-B.value[1])/250)),x=this.historyBusData.filter(B=>B.value[0]===3&&B.value[1]<=h).map(B=>parseInt((h-B.value[1])/250)),T=m.length>0?`
 `+Math.min(...m)+"":"",M=g.length>0?`
  `+Math.min(...g)+"":"",P=y.length>0?`
   `+Math.min(...y)+"":"",I=x.length>0?`
    `+Math.min(...x)+"":"";let D=[],R=[];D=[{name:""+M,itemStyle:{color:"#ff881b"},coord:[1,a]},{name:""+T,itemStyle:{color:"#ff881b"},coord:[0,s]}],R=[{name:""+I,itemStyle:{color:"#379ff4"},coord:[3,h]},{name:""+P,itemStyle:{color:"#379ff4"},coord:[2,d]}],this.setEchartsOption({series:[{markPoint:{symbol:"arrow",symbolRotate:-90,symbolOffset:["-50%",0],symbolSize:10,label:{fontSize:10,show:!0,color:"#666",position:"left",formatter:"{b}"},data:[...D,...R]}},{},{}]})})}},watch:{lines:"updateBusPos"},mounted(){this.load_data(),this.updateBusPos(),this.timer=setInterval(()=>{this.refresh()},500)},unmounted(){clearInterval(this.timer)}},Gme=e=>(GS("data-v-adb0a662"),e=e(),qS(),e),qme=Gme(()=>er("img",{src:"https://visitor-badge.laobi.icu/badge?page_id=nikebus",alt:"visitor badge",class:"visitor-badge"},null,-1));function Wme(e,t,r,n,i,a){const s=Rn("v-chart");return lt(),Rt(Pr,null,[Pe(s,{class:"chart",option:e.echartsOption,autoresize:!0},null,8,["option"]),qme],64)}const Xme=Ur(jme,[["render",Wme],["__scopeId","data-v-adb0a662"],["__file","BusChartVue.vue"]]),Zme=Uo({enhance({app:e}){e.component("BusTable",Rte),e.component("TabView",Hte),e.component("RealtimeMap",Xte),e.component("WeatherSpan",Qte),e.component("BusChartVue",Xme)}}),Ny=[qU,ZU,QU,hH,mH,xH,KG,sq,hq,mq,Zme],Yme=[["v-8daa1a0e","/",{title:""},["/README.md"]],["v-74bc627b","/about/",{title:""},["/about/README.md"]],["v-08ae5eba","/calendar/2018-2019.html",{title:" - 2018-2019 "},[":md"]],["v-93cfbde4","/calendar/2019-2020.html",{title:" - 2019-2020 "},[":md"]],["v-f917537a","/calendar/2020-2021.html",{title:" - 2020-2021 "},[":md"]],["v-1a0de1a3","/calendar/2021-2022.html",{title:" - 2021-2022 "},[":md"]],["v-190ab309","/calendar/2021fall.html",{title:""},[":md"]],["v-9eb125fa","/calendar/2022-2023.html",{title:" - 2022-2023 "},[":md"]],["v-96167c50","/calendar/",{title:""},["/calendar/README.md"]],["v-96536bf0","/contact/",{title:""},["/contact/README.md"]],["v-dbd38712","/emergency/",{title:""},["/emergency/README.md"]],["v-c73889da","/facility/",{title:""},["/facility/README.md"]],["v-2c5c0e04","/facility/building-11-elevator.html",{title:"11"},[":md"]],["v-104cfa63","/if-you-are-a-freshman/2021.html",{title:"..."},[":md"]],["v-780207b9","/if-you-are-a-freshman/",{title:"..."},["/if-you-are-a-freshman/README.md"]],["v-14e6315a","/life/",{title:""},["/life/README.md"]],["v-42f2be94","/life/vehicle-charger.html",{title:""},[":md"]],["v-ed48bdf8","/media/",{title:""},["/media/README.md"]],["v-f4bc5604","/miniapp/",{title:"-"},["/miniapp/README.md"]],["v-1500d063","/news/",{title:""},["/news/README.md"]],["v-014445c8","/organizations/",{title:""},["/organizations/README.md"]],["v-461d4a7c","/organizations/registered-organization-2019.html",{title:"2018-2019"},[":md"]],["v-6ba7e826","/organizations/registered-organization-2020.html",{title:"2019-2020"},[":md"]],["v-6d5cc0c5","/organizations/registered-organization-2021.html",{title:"2020-2021"},[":md"]],["v-28ddfa13","/service/",{title:""},["/service/README.md"]],["v-be92ea7e","/site-help/",{title:""},["/site-help/README.md"]],["v-d7188082","/study/",{title:""},["/study/README.md"]],["v-d1061704","/study/paper-tools.html",{title:" ddl "},[":md"]],["v-4322d0a7","/surroundings/",{title:""},["/surroundings/README.md"]],["v-69b23ddf","/transport/",{title:""},["/transport/README.md"]],["v-57bda71b","/transport/bustimer-old.html",{title:" SUSTech Campus Bus Info"},[":md"]],["v-1678dd6f","/transport/bustimer-wx.html",{title:" SUSTech Campus Bus Info"},[":md"]],["v-1630dfb5","/transport/bustimer.html",{title:" SUSTech Campus Bus Info"},[":md"]],["v-6a28f6e0","/transport/holiday.html",{title:" -  (2021618)"},[":md"]],["v-48975204","/transport/redirect.html",{title:" - "},[":md"]],["v-8059a7a6","/transport/workday.html",{title:" -  (2021618)"},[":md"]],["v-181cc452","/contact/professor-emails/",{title:""},["/contact/professor-emails/README.md"]],["v-22cd7d0c","/facility/panolens/",{title:""},["/facility/panolens/README.md"]],["v-0e92d420","/if-you-are-a-freshman/preview/",{title:"2021"},["/if-you-are-a-freshman/preview/README.md"]],["v-2b8cac58","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.html",{title:""},["/life/by-zhicheng-college/.html","/life/by-zhicheng-college/.md",":md"]],["v-66965350","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.html",{title:""},["/life/by-zhicheng-college/.html","/life/by-zhicheng-college/.md",":md"]],["v-66317da4","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.html",{title:""},["/life/by-zhicheng-college/.html","/life/by-zhicheng-college/.md",":md"]],["v-5c3fcdf6","/life/catering/",{title:""},["/life/catering/README.md"]],["v-04710004","/life/dormitory/",{title:""},["/life/dormitory/README.md"]],["v-5589dd0c","/life/dormitory/dorm-floor-plan.html",{title:""},[":md"]],["v-d42194b6","/life/freshman-register/",{title:""},["/life/freshman-register/README.md"]],["v-20383a78","/life/sports-facility/",{title:""},["/life/sports-facility/README.md"]],["v-42c1fa44","/service/campus-card/",{title:""},["/service/campus-card/README.md"]],["v-76cff034","/service/email/",{title:""},["/service/email/README.md"]],["v-ac3449b2","/service/email/send-receive-email-by-proxy.html",{title:""},[":md"]],["v-29860ed0","/service/mail-and-express/",{title:""},["/service/mail-and-express/README.md"]],["v-622da02f","/service/matlab/",{title:"MATLAB "},["/service/matlab/README.md"]],["v-5e590ec6","/service/medical-treatment/",{title:""},["/service/medical-treatment/README.md"]],["v-1fa222d4","/service/network/",{title:" (its@sustech.edu.cn)"},["/service/network/README.md"]],["v-48519846","/service/sakai/",{title:"Sakai | "},["/service/sakai/README.md"]],["v-369295b4","/service/sid/",{title:"SID"},["/service/sid/README.md"]],["v-3692bb1f","/service/ssc/",{title:""},["/service/ssc/README.md"]],["v-425958ce","/service/student-train-ticket/",{title:""},["/service/student-train-ticket/README.md"]],["v-3692ee77","/service/tax/",{title:"-- "},["/service/tax/README.md"]],["v-2686552a","/service/unifound/",{title:""},["/service/unifound/README.md"]],["v-45d74ec0","/service/work-wechat/",{title:""},["/service/work-wechat/README.md"]],["v-772a5784","/study/borrow-books/",{title:""},["/study/borrow-books/README.md"]],["v-8460eeb8","/study/by-shude-college/advice-on-study.html",{title:""},[":md"]],["v-435bd49a","/study/by-shude-college/info-on-study.html",{title:""},[":md"]],["v-6323734e","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.html",{title:""},["/study/by-zhicheng-college/.html","/study/by-zhicheng-college/.md",":md"]],["v-5eb748bf","/study/cse/innovative-project.html",{title:""},[":md"]],["v-2a23f022","/service/blackboard/retrive-ics-url/",{title:"BB | BlackboardDDL"},["/service/blackboard/retrive-ics-url/README.md"]],["v-66061b92","/service/network/apply-for-vpn/",{title:"VPN"},["/service/network/apply-for-vpn/README.md"]],["v-89ac2bec","/service/network/choose-a-pad/",{title:""},["/service/network/choose-a-pad/README.md"]],["v-1549b190","/service/network/choose-a-router/",{title:""},["/service/network/choose-a-router/README.md"]],["v-9e1961f8","/service/network/eduroam/",{title:"eduroam"},["/service/network/eduroam/README.md"]],["v-6bba5e58","/service/network/ipv6/",{title:" IPv6 "},["/service/network/ipv6/README.md"]],["v-83a77034","/service/network/remote-desktop/",{title:""},["/service/network/remote-desktop/README.md"]],["v-296d1d15","/service/network/use-vpn/",{title:" SSL VPN "},["/service/network/use-vpn/README.md"]],["v-fb711be8","/study/book-list-by-prof-yuan/2018/",{title:"2018"},["/study/book-list-by-prof-yuan/2018/README.md"]],["v-3706649a","/404.html",{title:""},[]]];var $L=jt({name:"Vuepress",setup(){const e=RV();return()=>_r(e.value)}}),Kme=()=>Yme.reduce((e,[t,r,n,i])=>(e.push({name:t,path:r,component:$L,meta:n},{path:r.endsWith("/")?r+"index.html":r.substring(0,r.length-5),redirect:r},...i.map(a=>({path:a===":md"?r.substring(0,r.length-5)+".md":a,redirect:r}))),e),[{name:"404",path:"/:catchAll(.*)",component:$L}]),Jme=nU,Qme=()=>{const e=$U({history:Jme(Zk("/")),routes:Kme(),scrollBehavior:(t,r,n)=>n||(t.hash?{el:t.hash}:{top:0})});return e.beforeResolve(async(t,r)=>{var n;(t.path!==r.path||r===Zs)&&([t.meta._data]=await Promise.all([Xs.resolvePageData(t.name),(n=Jk[t.name])==null?void 0:n.__asyncLoader()]))}),e},eve=e=>{e.component("ClientOnly",iT),e.component("Content",$V)},tve=(e,t,r)=>{const n=iI(()=>t.currentRoute.value.path),i=iI(()=>Xs.resolveRouteLocale(sf.value.locales,n.value)),a=MH(n,()=>t.currentRoute.value.meta._data),s=ke(()=>Xs.resolveLayouts(r)),o=ke(()=>Xs.resolveSiteLocaleData(sf.value,i.value)),h=ke(()=>Xs.resolvePageFrontmatter(a.value)),d=ke(()=>Xs.resolvePageHeadTitle(a.value,o.value)),m=ke(()=>Xs.resolvePageHead(d.value,h.value,o.value)),g=ke(()=>Xs.resolvePageLang(a.value,o.value)),y=ke(()=>Xs.resolvePageLayout(a.value,s.value));return e.provide(PV,s),e.provide(Qk,a),e.provide(e4,h),e.provide(kV,d),e.provide(t4,m),e.provide(r4,g),e.provide(i4,y),e.provide(rT,i),e.provide(o4,o),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get:()=>h.value},$head:{get:()=>m.value},$headTitle:{get:()=>d.value},$lang:{get:()=>g.value},$page:{get:()=>a.value},$routeLocale:{get:()=>i.value},$site:{get:()=>sf.value},$siteLocale:{get:()=>o.value},$withBase:{get:()=>T0}}),{layouts:s,pageData:a,pageFrontmatter:h,pageHead:m,pageHeadTitle:d,pageLang:g,pageLayout:y,routeLocale:i,siteData:sf,siteLocaleData:o}},rve=()=>{const e=LV(),t=n4(),r=xr([]),n=()=>{e.value.forEach(a=>{const s=nve(a);s&&r.value.push(s)})},i=()=>{document.documentElement.lang=t.value,r.value.forEach(a=>{a.parentNode===document.head&&document.head.removeChild(a)}),r.value.splice(0,r.value.length),e.value.forEach(a=>{const s=ive(a);s!==null&&(document.head.appendChild(s),r.value.push(s))})};Mi(zV,i),ti(()=>{n(),i(),mn(()=>e.value,i)})},nve=([e,t,r=""])=>{const n=Object.entries(t).map(([o,h])=>ms(h)?`[${o}=${JSON.stringify(h)}]`:h===!0?`[${o}]`:"").join(""),i=`head > ${e}${n}`;return Array.from(document.querySelectorAll(i)).find(o=>o.innerText===r)||null},ive=([e,t,r])=>{if(!ms(e))return null;const n=document.createElement(e);return tT(t)&&Object.entries(t).forEach(([i,a])=>{ms(a)?n.setAttribute(i,a):a===!0&&n.setAttribute(i,"")}),ms(r)&&n.appendChild(document.createTextNode(r)),n},ave=bV,ove=async()=>{var r;const e=ave({name:"VuepressApp",setup(){var n;rve();for(const i of Ny)(n=i.setup)==null||n.call(i);return()=>[_r(y4),...Ny.flatMap(({rootComponents:i=[]})=>i.map(a=>_r(a)))]}}),t=Qme();eve(e),tve(e,t,Ny);for(const n of Ny)await((r=n.enhance)==null?void 0:r.call(n,{app:e,router:t,siteData:sf}));return e.use(t),{app:e,router:t}};ove().then(({app:e,router:t})=>{t.isReady().then(()=>{e.mount("#app")})});export{Ur as _,Pe as a,er as b,Rt as c,ove as createVueApp,ol as d,w7 as e,lt as o,Rn as r,Cn as w};
